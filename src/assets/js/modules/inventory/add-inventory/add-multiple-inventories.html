<div ng-controller="dashboard.supplier.addInventory">
<div class="margin-l-2">
        <div>
            <h3 class="margin-top-1 margin-bottom-1" ng-show="!(rentalProduct)">Add Multiple Inventories</h3>
            <h3 class="margin-top-1 margin-bottom-1" ng-show="(rentalProduct)">Add Multiple Rentals</h3>
            <div class="primary-line margin-bottom-2 margin-0"></div>
            <section class="col-md-12 manage-inventory-section col-lg-9">
              <div class="section-row">
                <div class="col-md-6 padding-15 col-sm-12 col-xs-12 no-padding-xs">
                  <div class="col-md-6 col-xs-12 padding-r-15 padding-b-15-xs">
                    <div class="col-md-12">
                      <label> Industry Type: </label>
                    </div>
                    <div class="col-md-12">
                      <div ng-dropdown-multiselect="" 
                        options="industries" 
                        selected-model="selectedIndustry"
                        id="selected-industry"
                        translation-texts="customButtonText" 
                        extra-settings="dropdownSettings"
                        events="selectEvents"
                        ng-model="selectedIndustry">
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6 col-xs-12 padding-b-15-xs">
                    <div class="col-md-12">
                      <label class="item-label"> Item Type: </label>
                      <a title="Instructions" href="#" ng-click="open()">
                          <i class="far fa fa-info-circle font-s-20"></i>
                      </a>
                    </div>
                    <div class="col-md-12">
                        <select ng-click="Industry(2,selectedItemtype)" ng-model="selectedItemtype" id="selected-item-type">
                            <option value="" disabled>Select One</option>
                            <option value="Stock" ng-show="!(rentalProduct)">Stock</option>
                            <option value="Inventory/Surplus Material" ng-show="!(rentalProduct)">Inventory/Surplus Material</option>
                            <option value="Used" ng-show="!(rentalProduct)">Used</option>
                            <option value="Scrap" ng-show="!(rentalProduct)">Scrap</option>
                            <option value="Rental" ng-show="(rentalProduct)">Rental</option>
                        </select>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 padding-15 col-sm-12 col-xs-12 download-templates padding-b-15-xs">
                  <div class="col-md-12 align-center col-xs-12">
                    <label>Download Templates</label>
                  </div>
                  <div class="col-md-12 col-xs-12 no-padding-xs">
                    <div class="col-md-6 padding-l-r-15 col-xs-6 padding-r-8-xs">
                      <a href="https://s3-ap-southeast-1.amazonaws.com/suppliers-cave-templates/Inventory_Upload_Format_Supplier.csv">
                        <button ng-show="params.data_type==='inventory'" class="button" id="download-inventory-template">Inventory</button>
                      </a>
                    </div>
                    <div class="col-md-6 padding-l-r-15 col-xs-6 padding-l-8-xs">
                      <a href="https://s3-ap-southeast-1.amazonaws.com/suppliers-cave-templates/Rental_Upload_Format_Supplier.csv">
                        <button ng-show="params.data_type==='inventory'" class="button" id="download-rental-template">Rental</button>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="section-row padding-15 no-padding-xs">
                  <div class="col-md-12">
                      <label class="m-t-19">
                          <b>Add Product Images:</b>
                      </label>
                      <div layout="row">
                              <input class="adjust-mto-fileupload" id="upload-images" type="file" placeholder="Choose CSV file to import data" valid-file upload="uploadProducts(file,$index,'product-images')"/>
                      </div>
                      <div ng-repeat="file in imagesData">
                          {[{file.split('/').pop()}]}
                          <md-button class="md-icon-button">
                                  <md-icon class="material-icons attachment-icon" ng-click="removeProducts(imagesData,$index)"
                                    title="Remove Attachment">clear</md-icon>
                          </md-button>
                      </div>
                  </div>
              </div>
              <div class="section-row padding-15 no-padding-xs">
                  <div class="col-md-12">
                      <label class="m-t-19">
                          <b>Add Documents:</b>
                      </label>
                      <div layout="row">
                              <input class="adjust-mto-fileupload" type="file" id="upload-documents" placeholder="Choose CSV file to import data" valid-file upload="uploadProducts(file,$index,'file-attachments')"/>
                      </div>
                      <div ng-repeat="file in documentsData">
                          {[{file.split('/').pop()}]}
                          <md-button class="md-icon-button">
                                  <md-icon class="material-icons attachment-icon" ng-click="removeDocuments(documentsData,$index)"
                                    title="Remove Attachment">clear</md-icon>
                          </md-button>
                      </div>
                  </div>
              </div>
              <div class="section-row padding-15 no-padding-xs">
                <div class="col-md-12 col-xs-12" ng-show="params.data_type==='inventory'">
                  <label ng-show="!(rentalProduct)">
                    <b>Add Inventory items:</b>
                  </label>
                  <label ng-show="(rentalProduct)">
                    <b>Add Rental items:</b>
                  </label>
                </div>
                <div class="col-md-12 col-xs-12">
                  <div class="col-md-12 col-xs-12">
                    <p>CSV (size under 2 MB) accepted</p>
                  </div>
                  <div class="col-md-12 col-sm-12 col-xs-12 padding-b-15-xs">
                    <div class="col-md-3 col-sm-6 col-xs-6">
                      <input class="adjust-mto-fileupload" ng-disabled="hideButtonImport"
                             ng-show="params.data_type==='directory' || params.data_type==='inventory'|| params.data_type==='user'"
                             id="multiple-inventory-file-attachments" 
                             type="file"
                             placeholder="Choose CSV file to import data" 
                             file-model="csvfile" 
                             file-reader="fileContent" 
                             on-load-callback="importData(fileContent)"/>
                    </div>
                  </div>
                </div>
              </div>
              <div class="clear-fix"></div>
            </section>

        </div>

        <div class="col-md-12 col-sm-12 col-xs-12 col-lg-9 text-align-center">
          <button class="button m-auto" ng-click="save(table_changes, table_deletes, data)" id="save-mulitple-inventories" ng-disabled="!importFromCsv">Save Changes</button>
        </div>
          
        <div class="col-md-12">
          <p>Progress:
            <span ng-bind="progress"></span>
          </p>
          <p>Total Changes:
            <span ng-bind="total_changes"></span>
          </p>
          <div class="callout success" ng-if="total_changes==progress && total_changes>0">
            <p class="bold larger">Success. Window will reload in 5 seconds.</p>
          </div>
        </div>
        <div class="col-md-12">  
          <div class="error-msg">
            <div ng-show="errors.length==0">
              <p class="bold">Here the error log will appear (if it occurs)</p>
            </div>
            <div ng-show="errors.length>0">
              <p class="bold">Error Reported. Changes are preserved. Please debug & save again. Refreshing the page will remove changes.</p>
              <p ng-repeat="error in errors">Details: {[{error.data}]} & Url: {[{error.config.url}]}</p>
            </div>
          </div>
        </div>

        <div class="col-md-12" ng-show="showAddNewInventories = false" handsontable-django-fullaccess api-service="InventoryService" hot-id="guide_djangorest_User_readonly"
          height='400' min-rows="0" min-spare-rows="10" exclude_fields="message,shortlist,logentry,auth_token,social_auth,snippets,snippets_group,categories,inventories,sentMessages,receivedMessages,groups,user_permissions,last_login,date_joined,category,owner,supplier"
          populate-data="false" params='{"category_name":"null","data_type":"inventory"}'>
        </div>
      </div>
      </div>