<div ng-controller='dashboard.supplier.product' class="margin-l-2">
  <div>
    <section class="col-md-12 manage-products-section col-lg-8">
      <h3 class="margin-top-1 margin-bottom-1">Add Multiple Directories</h3>
      <div class="primary-line margin-bottom-2 margin-0"></div>
      <div class="section-row">
        <div class="col-md-6 padding-15 col-xs-12 no-padding-xs">
          <div class="col-md-12 col-xs-12">
            <div class="col-md-12 col-xs-12 col-sm-12 padding-b-15-xs padding-r-8">
              <div class="col-md-12">
                <label> Industry Type: </label>
              </div>
              <div class="col-md-12">
                <div ng-dropdown-multiselect="" options="industryList" selected-model="selectedIndustry" id="selected-industry" translation-texts="customButtonText"
                  extra-settings="dropdownSettings" events="selectEvents" ng-model="selectedIndustry">
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="col-md-6 padding-t-b-15 col-xs-12 padding-b-15-xs">
          <div class="col-md-12 align-center col-xs-6">
            <label>Download Template</label>
          </div>
          <div class="col-md-12 col-xs-6 no-padding-xs">
            <a href="https://s3-ap-southeast-1.amazonaws.com/suppliers-cave-templates/Directory_Upload_Format_Supplier.csv">
              <button class="button" id="download-directory-template">Download Template</button>
            </a>
          </div>
        </div>
      </div>

      <div class="section-row no-padding-xs">
        <div class="section-row padding-15 no-padding-xs">
          <div class="col-md-12">
            <label class="m-t-19">
              <b>Add Product Images:</b>
            </label>
            <div layout="row">
              <input class="adjust-mto-fileupload" id="upload-images" type="file" placeholder="Choose CSV file to import data" valid-file upload="uploadProducts(file,$index,'product-images')"
              />
            </div>
            <div ng-repeat="file in imagesData">
              {[{file.split('/').pop()}]}
              <md-button class="md-icon-button">
                <md-icon class="material-icons attachment-icon" ng-click="removeProducts(imagesData,$index)" title="Remove Attachment">clear</md-icon>
              </md-button>
            </div>
          </div>
        </div>
        <div class="section-row padding-15 no-padding-xs">
          <div class="col-md-12">
            <label class="m-t-19">
              <b>Add Documents:</b>
            </label>
            <div layout="row">
              <input class="adjust-mto-fileupload" type="file" id="upload-documents" placeholder="Choose CSV file to import data" valid-file
                upload="uploadProducts(file,$index,'file-attachments')" />
            </div>
            <div ng-repeat="file in documentsData">
              {[{file.split('/').pop()}]}
              <md-button class="md-icon-button">
                <md-icon class="material-icons attachment-icon" ng-click="removeDocuments(documentsData,$index)" title="Remove Attachment">clear</md-icon>
              </md-button>
            </div>
          </div>
        </div>
      </div>
  </div>
</div>
</div>

<div class="section-row padding-15 no-padding-xs margin-l-2">
  <div class="col-md-12 col-xs-12">
    <label>
      <b>Add Products:</b>
    </label>
  </div>
  <div class="col-md-12 col-xs-12">
    <div class="col-md-12 col-xs-12">
      <p>CSV (size under 2 MB) accepted</p>
    </div>
    <div class="col-md-12 col-xs-12 col-sm-12 padding-b-15-xs">
      <div class="col-md-3 col-sm-6 col-xs-6">
        <input class="adjust-mto-fileupload" ng-disabled="disableImport" type="file" placeholder="Choose CSV file to import data" id="multiple-directory-file-attachement"
          file-model="csvfile" file-reader="fileContent" on-load-callback="importData(fileContent)" />
      </div>
    </div>
  </div>
</div>

</section>
<div class="col-md-6 text-align-center">
  <button class="button float-none m-auto" id="save-multiple-directories" ng-click="save(table_changes, table_deletes, data)"
    ng-disabled="!importFromCsv">Save Changes</button>
</div>

<div class="col-md-12">
  <p>Progress:
    <span ng-bind="progress"></span>
  </p>
  <p>Total Changes:
    <span ng-bind="total_changes"></span>
  </p>
  <div class="callout success" ng-if="total_changes==progress && total_changes>0">
    <p class="bold larger">Success. Window will reload in 5 seconds.</p>
  </div>
</div>
<div class="col-md-12">
  <div class="error-msg">
    <div ng-show="errors.length==0">
      <p class="bold">Here the error log will appear (if it occurs)</p>
    </div>
    <div ng-show="errors.length>0">
      <p class="bold">Error Reported. Changes are preserved. Please debug & save again. Refreshing the page will remove changes.</p>
      <p ng-repeat="error in errors">Details: {[{error.data}]} & Url: {[{error.config.url}]}</p>
    </div>
  </div>
</div>
<div class="col-md-12" ng-show="showAddNewDirectories=false" handsontable-django-fullaccess api-service="DirectoryService"
  hot-id="guide_djangorest_User_readonly" height='400' min-rows="0" min-spare-rows="10" exclude_fields="message,shortlists,logentry,auth_token,social_auth,snippets,snippets_group,categories,inventories,sentMessages,receivedMessages,groups,user_permissions,last_login,date_joined"
  populate-data="false" params='{"category_name":"null","data_type":"directory"}'>
</div>

</div>
</div>