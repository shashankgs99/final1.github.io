"use strict";!function(){var app=angular.module("app");app.controller("company.login",["$scope","$stateParams","UserService","$ocLazyLoad","Notification","$window","$timeout","$injector","$http","$log","$state","$mdDialog","$dialogScope",function($scope,$stateParams,UserService,$ocLazyLoad,Notification,$window,$timeout,$injector,$http,$log,$state,$mdDialog,$dialogScope){$scope.register={role_type:[]},$scope.additionalData=[],UserService.getRoleTypes().then(function(data){data.data.count>0&&($scope.additionalData=data.data.results.map(function(item){return{id:item.id,label:item.role_type_name}}))}),$scope.registerUser=function(data,valid_data){if($scope.error={},valid_data){data.username=data.email,data.is_email_verified=!1;data.username,data.password;data.role_type&&(data.role_type=data.role_type.map(function(item){return item.id}));var userData=data;UserService.post(data).then(function(data){Notification.success({message:"Successfully user register",positionX:"right",positionY:"top"});var userInfo=data.data;UserService.getToken(userData.username,userData.password).then(function(response){var token=response.data.token;getToken(token,userInfo)}),$http.get("/sendgrid/verify-email/",{params:{userId:data.data.id,userEmail:data.data.email,userName:data.data.username,userVerificationKey:data.data.email_verification_hash}})},function(err){$scope.error=err.data})}$mdDialog.hide(data.data)},$scope.cancel=function(){$mdDialog.cancel()}}])}();