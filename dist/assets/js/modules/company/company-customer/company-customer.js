"use strict";!function(){var app=angular.module("app");app.controller("company.CustomerController",["$scope","s3Service","$state","$injector","$mdDialog","$dialogScope",function($scope,s3Service,$state,$injector,$mdDialog,$dialogScope){$scope.customer={},$dialogScope.customerData&&($scope.customer=$dialogScope.customerData),$scope.source=$dialogScope.source;var Notification=$injector.get("Notification");$scope.save=function(data){if(!data.name)return void Notification.error({message:"please enter name",positionX:"right",positionY:"top"});if("testimonial"==$scope.source){if(!data.image)return void Notification.error({message:"please upload image",positionX:"right",positionY:"top"});if(!data.designation)return void Notification.error({message:"please enter designation",positionX:"right",positionY:"top"});if(!data.signature)return void Notification.error({message:"please enter signature",positionX:"right",positionY:"top"});if(!data.company_name)return void Notification.error({message:"please enter company name",positionX:"right",positionY:"top"});if(!data.description)return void Notification.error({message:"please enter description name",positionX:"right",positionY:"top"})}data.type=$dialogScope.type,$mdDialog.hide(data)},$scope.cancel=function(){$mdDialog.cancel()},$scope.uploadLogo=function(file,$index){if($scope.current_user&&$scope.current_user.data||($scope.current_user={},$scope.current_user.data=$dialogScope.userData),"customer"==$scope.source)var path="user/"+$scope.current_user.data.id+"/company-customer/logo";else if("project"==$scope.source)var path="user/"+$scope.current_user.data.id+"/project/logo";else if("testimonial"==$scope.source)var path="user/"+$scope.current_user.data.id+"/testimonial/image";s3Service.uploadFile(path,file,function(url){url&&("testimonial"==$scope.source?$scope.customer.image=url:$scope.customer.logo=url,Notification.success({message:"Successfully uploaded file",positionX:"right",positionY:"top"}))})}}])}();