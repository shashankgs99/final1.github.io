"use strict";!function(){var app=angular.module("app");app.controller("layout.contact.details",["$scope","$window","$modal","$log","$state","Notification","MessageService","CsvService","$http","s3Service","OfferService","$stateParams","BuyerSupplierService","CustomerService",function($scope,$window,$modal,$log,$state,Notification,MessageService,CsvService,$http,s3Service,OfferService,$stateParams,BuyerSupplierService,CustomerService){function getRowId(row){return row.id}if($scope.List=[],$state.current.name.includes("customers")?($scope.type="Customers",CustomerService.get({page_size:1e4}).then(function(data){$scope.List=data.data.results})):($scope.type="Suppliers",BuyerSupplierService.get().then(function(data){$scope.List=data.data.results})),$scope.uiGridOptions={enableCellEditOnFocus:!0,enableColumnResizing:!0,enableFiltering:!0,enableGridMenu:!0,showGridFooter:!0,showColumnFooter:!0,fastWatch:!0,rowIdentity:getRowId,getRowIdentity:getRowId,importerDataAddCallback:function(grid,newObjects){$scope.myData=$scope.data.concat(newObjects)},columnDefs:[{field:"firstname",displayName:"First Name",width:150,pinnedLeft:!0,enableCellEdit:!1,enableSorting:!0},{field:"lastname",displayName:"Last Name",width:200,pinnedLeft:!0,enableCellEdit:!1,enableSorting:!0},{field:"countryCode1",displayName:"Country Code",width:200,pinnedLeft:!0,enableCellEdit:!0,enableSorting:!0},{field:"phonenumber1",displayName:"Mobile",width:200,pinnedLeft:!0,enableCellEdit:!0,enableSorting:!0},{field:"countryCode2",displayName:"Country Code",width:200,pinnedLeft:!0,enableCellEdit:!0,enableSorting:!0},{field:"phonenumber2",displayName:"Phone",width:200,pinnedLeft:!0,enableSorting:!0,enableCellEdit:!1},{field:"emailid1",displayName:"Email 1",width:200,pinnedLeft:!0,enableSorting:!0,enableCellEdit:!0},{field:"emailid2",displayName:"Email 2",width:200,pinnedLeft:!0,enableSorting:!0,enableCellEdit:!0},{field:"company_name",displayName:"Company Name",width:200,pinnedLeft:!0,enableSorting:!0,enableCellEdit:!0}],onRegisterApi:function(registeredApi){$scope.gridApi=registeredApi}},$stateParams.data){if(!$stateParams.data[0].contacts.length)return $scope.uiGridOptions.data=[],void Notification.error({message:"selected  has no contacts",positionX:"right",positionY:"top"});var contacts=$stateParams.data[0].contacts;contacts.map(function(info){info.company_name=$stateParams.data[0].name}),$scope.uiGridOptions.data=contacts}$scope.FilterContacts=function(data){CustomerService.getOne(data).then(function(res){var results=res.data;if(!results||!results.contacts.length)return $scope.uiGridOptions.data=[],void Notification.error({message:"selected "+$scope.type+" has no contacts",positionX:"right",positionY:"top"});var contacts=results.contacts;contacts.map(function(info){info.company_name=res.data.name}),$scope.uiGridOptions.data=contacts})}}])}();