"use strict";!function(){angular.module("app").controller("ViewPaymentRequestController",["$scope","$window","$modal","$log","$state","Notification","POService","$http","s3Service","$stateParams","$mdDialog","$q",function($scope,$window,$modal,$log,$state,Notification,POService,$http,s3Service,$stateParams,$mdDialog,$q){function getRowId(row){return row.id}function LoadGRNColumns(){$scope.grnGridOptions.columnDefs=[{name:"displayId",displayName:"#",width:75,pinnedLeft:!0,enableCellEdit:!1,enableSorting:!1},{field:"po_item.title",displayName:"Title",width:150,pinnedLeft:!0,enableCellEdit:!1,enableSorting:!1},{field:"po_item.description",displayName:"Description",width:200,pinnedLeft:!0,enableCellEdit:!1,enableSorting:!1},{field:"po_item.selected_quantity",displayName:"Quantity",width:100,pinnedLeft:!0,enableSorting:!0,enableCellEdit:!1},{field:"quantity_received",displayName:"Received",width:100,pinnedLeft:!0,enableSorting:!0,enableCellEdit:!1},{field:"reversed_quantity",displayName:"Quantity Reversed",width:100,pinnedLeft:!0,enableSorting:!0,enableCellEdit:!1},{field:"po_item.unit_measure",displayName:"Unit Of Measure",width:100,pinnedLeft:!0,enableCellEdit:!1},{field:"batch",displayName:"Batch",width:100,pinnedLeft:!0,enableCellEdit:!1},{field:"serial",displayName:"Serial",width:100,pinnedLeft:!0,enableCellEdit:!1},{field:"manufacturer",displayName:"Manufacturer",width:125,pinnedLeft:!0,enableCellEdit:!1},{field:"production_date",displayName:"Production Date",width:125,pinnedLeft:!0,enableCellEdit:!1},{field:"expiry_date",displayName:"Expiry Date",width:100,pinnedLeft:!0,enableCellEdit:!1},{field:"delivery_date",displayName:"Delivery Date",width:125,pinnedLeft:!0,enableCellEdit:!1},{field:"yard_receipt_date",displayName:"Yard Receipt Date",width:125,pinnedLeft:!0,enableCellEdit:!1}]}POService.getOnePaymentRequest($stateParams.PRId).then(function(res){$scope.paymentData=res.data}),POService.getPaymentRequestItems({paymentRequest:$stateParams.PRId}).then(function(res){$scope.grnGridOptions.data=res.data.results,$scope.grnGridOptions.data=$scope.grnGridOptions.data.map(function(item,$index){return item.displayId=$index+1,item})}),$scope.grnGridOptions={enableCellEditOnFocus:!0,enableColumnResizing:!0,enableFiltering:!0,enableGridMenu:!0,showGridFooter:!0,showColumnFooter:!0,fastWatch:!0,rowIdentity:getRowId,getRowIdentity:getRowId,importerDataAddCallback:function(grid,newObjects){$scope.myData=$scope.data.concat(newObjects)},onRegisterApi:function(registeredApi){$scope.gridApi=registeredApi}},LoadGRNColumns()}])}();