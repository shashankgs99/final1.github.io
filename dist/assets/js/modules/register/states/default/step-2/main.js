"use strict";!function(){var app=angular.module("app");app.controller("register.default.step2.controller",["$scope","UserService","$location","$window","$timeout","$state","$stateParams","CompanyService","Notification",function($scope,UserService,$location,$window,$timeout,$state,$stateParams,CompanyService,Notification){var company,id=$stateParams.userId;$stateParams.companyId&&($scope.companyId=$stateParams.companyId,CompanyService.getOne($stateParams.companyId).then(function(data){company=data.data.company_name})),$scope.updateUser=function(data,valid_data,state){console.log(data);var mobile=data.contact_no;if(isNaN(mobile))return void Notification.error({message:"Contact field should contain numbers only",positionX:"right",positionY:"top"});if($scope.success=!1,valid_data){if($scope.current_user.data&&$scope.current_user.data.email){var email=$scope.current_user.data.email;data.email==email&&delete data.email}void 0!==data.username&&null!==data.username&&delete data.username,company&&(data.company=company),UserService.update(id,data).then(function(data){$scope.success=!0,$timeout(function(){var url="/";$window.location.assign(url)},3e3)},function(err){$scope.error=err.data,console.log(err)})}}}])}();