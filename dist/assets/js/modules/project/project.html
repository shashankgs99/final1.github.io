<div layout="column" layout-align="start center">
  <div layout="row" layout-sm="column" ng-if="showLoader" layout-align="center center" class="loader">
    <div layout="column">
      <md-progress-circular md-mode="indeterminate" class="loader-2"></md-progress-circular>
    </div>
  </div>
  <div layout="column" flex ng-controller="layout.standard.filtersController" class="md-padding md-margin main-card">
    <md-card-content>
      <div layout="row" layout-xs="column">
        <div layout="column" flex layout-gt-xs="row">
          <div flex class="md-display-1">
            Manage Projects
          </div>
          <span layout-xs="column">
            <div layout-xs="row" layout-align-xs="end">
                <md-button class="md-icon-button" ng-click="projectFilters(filter)">
                    <md-icon class="material-icons managecustomericon" title="Apply Filters">filter_list</md-icon>
                  </md-button>
                  <md-button class="md-icon-button" ng-click="clear()">
                    <md-icon class="material-icons managecustomericon color-red" title="Clear Filters">close</md-icon>
                  </md-button>
            </div>
          </span>
        </div>
      </div>
      <div layout="row" layout-xs="column">
        <div layout="column" flex layout-gt-xs="row">
          <div flex>
            <md-input-container class="md-block">
              <label>Customer</label>
              <md-select ng-model="filter.customer">
                <md-option ng-repeat="customer in customersList" ng-value="customer">
                  {[{customer.name}]}
                </md-option>
              </md-select>
            </md-input-container>
          </div>
          <div  flex>
            <md-input-container class="md-block">
              <label>Project Type</label>
              <md-select ng-model="filter.project_type">
                <md-option ng-repeat="project in projectType" ng-value="project">
                  {[{project.name}]}
                </md-option>
              </md-select>
            </md-input-container>
          </div>
          <div  flex>
            <md-input-container class="md-block">
              <label class="md-caption">Date From</label>
              <md-datepicker type="date" layout="row" name="Date" id="datefrom" ng-model="filter.date_from"></md-datepicker>
            </md-input-container>
          </div>
          <div  flex>
            <md-input-container class="md-block">
              <label class="md-caption">Date To</label>
              <md-datepicker type="date" layout="row" name="Date" id="dateTo" ng-model="filter.date_to"></md-datepicker>
            </md-input-container>
          </div>
        </div>
      </div>
    </md-card-content>
    <div layout="row" class="dotted-border"></div>
    <div layout="row" class="margin-top-2">
      <div flex>
      </div>
      <span>
        <md-button class="md-icon-button" ng-click="addProject()">
          <md-icon class="material-icons managecustomericon" title="Add New Project">add</md-icon>
        </md-button>
        <md-button class="md-icon-button" ng-click="editProject(selectedProject)">
          <md-icon class="material-icons managecustomericon" title="Edit Project">edit</md-icon>
        </md-button>
        <md-button class="md-icon-button" ng-if="supplierAccess" ng-click="makeOffer($event,selectedProject,projectData)">
          <md-icon class="material-icons managecustomericon" title="Create Offer">local_offer</md-icon>
        </md-button>
        <md-button class="md-icon-button" ng-click="deleteProject(selectedProject)">
          <md-icon class="material-icons managecustomericon color-red" title="Delete Project">delete</md-icon>
        </md-button>
      </span>
    </div>
  </div>
</div>

<div layout="column" layout-align="start center" class="md-margin md-padding">
  <div class="margin-r-55">Total <b>{[{count}]}</b> records</div>
  <div layout="column" class="list-cards" flex ng-repeat="project in projectData" track by $index>
    <div layout="row">
      <md-checkbox ng-model="project.selected" ng-change="selectedValue(project,$index,project.selected)"></md-checkbox>
      <div layout="column" flex>
        <md-card md-theme-watch ng-click="ViewProject(project)">
          <md-card-content>
            <div layout="row" layout-xs="column">
              <div layout="column" flex layout-margin layout-gt-xs="row">
                <div flex>
                  <label class="md-caption">Project Name</label>
                  <p class="md-body-1">{[{ project.name }]}
                  </p>
                </div>
                <div flex>
                  <label class="md-caption">Project Date</label>
                  <p class="md-body-1">{[{project.project_date}]}</p>
                </div>
                <div flex>
                  <label class="md-caption">Customer</label>
                  <p class="md-body-1">{[{project.customer.name}]}</p>
                </div>
                <!-- <div flex>
                  <label class="md-caption">Description</label>
                  <p class="md-body-1" ng-bind-html="(project.description | limitTo:20) + ( project.description.length>20 ? '...': '' )">{[{project.description ? project.description : 'NA'}]}</p>
                </div> -->
                <!-- <div flex>
                  <label class="md-caption">Contact</label>
                  <p class="md-body-1">{[{projectcustomer_contacts[0].firstname}]} {[{project.customer_contacts[0].lastname}]}</p>
                </div> -->
                <div flex>
                  <label class="md-caption">Project Type</label>
                  <p class="md-body-1">{[{project.project_type.name}]}</p>
                </div>
                <div flex>
                  <label class="md-caption">Due Date</label>
                  <p class="md-body-1">{[{project.due_date}]}</p>
                </div>
                <div flex>
                  <label class="md-caption">Status</label>
                  <p class="md-body-1">{[{project.project_status.name}]}</p>
                </div>
              </div>
            </div>
          </md-card-content>
        </md-card>
      </div>
    </div>
  </div>
</div>
<div layout="row" layout-margin layout-align="center center">
  <div>
    <pagination page="currentPage" total-items="count" max-size="maxSize" ng-click="setPage(currentPage)" boundary-links="true">
    </pagination>
  </div>
</div>
