"use strict";!function(){var app=angular.module("app");app.controller("inventoryList.output",["$scope","$state","$timeout","InventoryService","Notification","$modal","$stateParams","IndustryService","ManufacturerService","CompanyService",function($scope,$state,$timeout,InventoryService,Notification,$modal,$stateParams,IndustryService,ManufacturerService,CompanyService){function LoadInventoryData(data){InventoryService.get(data).then(function(data){var results=data.data.results;results=results.map(function(item){item.industry.length&&(item.industry=item.industry.toString()),item.available_quantity&&(item.available_quantity=Number(item.available_quantity).toFixed(2));var categoryList=null;item.category_name&&(categoryList=item.category_name),item.sub_category&&(categoryList=categoryList?categoryList+"-"+item.sub_category:item.sub_category),item.sub_sub_category&&(categoryList=categoryList?categoryList+"-"+item.sub_sub_category:item.sub_sub_category),item.sub_sub_sub_category&&(categoryList=categoryList?categoryList+"-"+item.sub_sub_sub_category:item.sub_sub_sub_category),item.categoryList=categoryList;var location=null;return item.city?location=item.city.city:item.city_draft&&(location=item.city_draft),item.state&&(location=location?location+"-"+item.state:item.state),item.country&&(location=location?location+"-"+item.country:item.country),item.location=location,item}),console.log(results),$scope.gridOptions.data=results})}$scope.showItemType=!1,$scope.gridOptions={enableSorting:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},enablePaginationControls:!0,paginationPageSize:25,paginationPageSizes:[25,50,75],enableFiltering:!0,enableGridMenu:!0,enableRowSelection:!0,enableSelectAll:!0,selectionRowHeaderWidth:35,multiSelect:!0,scrollingHorizontally:!0,rowIdentity:function(row){return row.id},exporterLinkLabel:"get your csv here",exporterMenuPdf:!1,exporterMenuCsv:!1,exporterPdfDefaultStyle:{fontSize:8},exporterPdfTableStyle:{margin:[30,30,30,30]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"red"},exporterPdfOrientation:"portrait",exporterPdfPageSize:"A2",exporterFieldCallback:function(grid,row,col,input){if("string"===col.colDef.type)return input;switch(col.colDef.type){case"date":return moment(input).format("YYYY-MM-DD");default:return input}},columnDefs:[{name:"id",displayName:"ID",width:50,enableCellEdit:!1,pinnedLeft:!0,enableSorting:!0},{field:"title",displayName:"Title",width:200,pinnedLeft:!0,enableSorting:!0},{field:"description",displayName:"Description",width:200,enableSorting:!0},{field:"categoryList",displayName:"Category",width:300,pinnedLeft:!0,enableSorting:!0},{field:"available_quantity",displayName:"Available Quantity",width:150,pinnedLeft:!0,enableSorting:!0},{field:"unit_of_measure",displayName:"Unit Of Measure",width:150,enableSorting:!0},{field:"unit_price",displayName:"Unit Price",width:150,pinnedLeft:!0,enableSorting:!0},{field:"currency",displayName:"Currency",width:75,pinnedLeft:!0,enableSorting:!0},{field:"material",displayName:"Material",width:100,pinnedLeft:!0,enableSorting:!0},{field:"grade",displayName:"Grade",width:100,pinnedLeft:!0,enableSorting:!0},{field:"standard",displayName:"Standard",width:100,pinnedLeft:!0,enableSorting:!0},{field:"stock_or_inventory",displayName:"Item Type",width:150,pinnedLeft:!0,enableSorting:!0},{field:"remarks",displayName:"Remarks",width:150,pinnedLeft:!0,enableSorting:!0},{field:"location",displayName:"Location",width:300,pinnedLeft:!0,enableSorting:!0},{field:"industry",displayName:"Industry",width:250,pinnedLeft:!0,enableSorting:!0},{field:"manufacturer_company.company_name",displayName:"Manufacturer",width:175,pinnedLeft:!0,enableSorting:!0},{field:"supplier_company.company_name",displayName:"Supplier",width:150,pinnedLeft:!0,enableSorting:!0}]},$state.current.name.includes("rental")?($scope.showItemType=!0,LoadInventoryData({page_size:1e4,stock_or_inventory:"Rental"})):LoadInventoryData({page_size:1e4}),$scope.$on("outputFilters",function(event,data){LoadInventoryData(data)}),IndustryService.get({page_size:1e4}).then(function(data){$scope.allIndustries=data.data.results},function(error){console.log(error)}),ManufacturerService.get({page_size:1e4}).then(function(data){$scope.manufacturerList=data.data.results},function(error){console.log(error)}),CompanyService.get({page_size:1e4}).then(function(data){$scope.companyList=data.data.results},function(error){console.log(error)})}])}();