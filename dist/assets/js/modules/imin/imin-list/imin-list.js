"use strict";!function(){angular.module("app").controller("layout.standard.iminListController",["$scope","$window","$modal","$log","$state","Notification","POService","$http","s3Service","$stateParams","$mdDialog","$q",function($scope,$window,$modal,$log,$state,Notification,POService,$http,s3Service,$stateParams,$mdDialog,$q){function loadIMINList(data){$scope.current_user.data&&$scope.current_user.data.company&&(data.company=$scope.current_user.data.company.id,POService.getGRN(data).then(function(data){$scope.count=data.data.count,$scope.showLoader=!1,$scope.grnList=data.data.results,$scope.grnList.map(function(item){item.inspection_document_date&&item.inspection_document_name&&item.inspected_by&&($scope.iminList.push(item),$scope.iminList=$scope.iminList.map(function(item){var verified=[];return item.item_grn_id.length&&item.item_grn_id.map(function(record){record.is_verified&&verified.push(record),record.po_item.displayID=record.po_item.item_number.split("-").pop().split("_").pop()}),item.verifed_records=verified.length,item}))})}))}loadIMINList({page_size:10,page:1}),$scope.currentPage=1,$scope.maxSize=10,$scope.iminList=[],$scope.showLoader=!0,$scope.$on("IMINFilters",function(event,data){data&&loadIMINList(data)}),$scope.setPage=function(pageNo){$scope.showLoader=!0,$scope.currentPage=pageNo,loadIMINList({page_size:10,page:pageNo})},$scope.ViewOrder=function(data){$state.go("buyerDashboard.imin.viewIMIN",{iminId:data.id})}}])}();