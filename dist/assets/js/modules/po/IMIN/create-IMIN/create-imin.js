"use strict";!function(){angular.module("app").controller("layout.order.generateIMINController",["$scope","dateService","$modal","$log","$state","Notification","$http","UserService","POService","$dialogScope","$rootScope","$stateParams","$mdDialog","$q",function($scope,dateService,$modal,$log,$state,Notification,$http,UserService,POService,$dialogScope,$rootScope,$stateParams,$mdDialog,$q){$scope.users=[],$scope.imin=$dialogScope.data,UserService.get({company:$dialogScope.companyId}).then(function(res){var usersList=res.data.results;usersList.map(function(item){var name=null;item.first_name&&(name=item.first_name),item.last_name&&(name=name?name+" "+item.last_name:item.last_name),name&&$scope.users.push({name:name,id:item.id})})}),$scope.save=function(record){var data=angular.copy(record);return data.inspection_document_name?data.inspected_by?data.inspection_document_date?(data.owner&&delete data.owner,data.inspection_document_date=dateService.convertDateToPython(data.inspection_document_date),data.inspected_by_user=data.inspected_by.id,data.inspected_by=data.inspected_by.name,Object.keys(data.po).length?data.po=data.po.id:data.po=data.po,void POService.updateGRN(data.id,data).then(function(res){Notification.success({message:"successfully created",positionX:"right",positionY:"top"}),$mdDialog.hide(res.data)})):void Notification.error({message:"please select document date",positionX:"right",positionY:"top"}):void Notification.error({message:"please select Inspected By",positionX:"right",positionY:"top"}):void Notification.error({message:"please enter document name",positionX:"right",positionY:"top"})},$scope.cancel=function(){$mdDialog.cancel()}}])}();