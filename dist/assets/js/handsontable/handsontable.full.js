"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(f){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Handsontable=f()}}(function(){var define;return function outer(modules,cache,entry){function newRequire(name,jumped){if(!cache[name]){if(!modules[name]){var currentRequire="function"==typeof require&&require;if(!jumped&&currentRequire)return currentRequire(name,!0);if(previousRequire)return previousRequire(name,!0);if(globalNS[name]&&"undefined"!=typeof window[globalNS[name]])return window[globalNS[name]];var err=new Error("Cannot find module '"+name+"'");throw err.code="MODULE_NOT_FOUND",err}var m=cache[name]={exports:{}};modules[name][0].call(m.exports,function(x){var id=modules[name][1][x];return newRequire(id?id:x)},m,m.exports,outer,modules,cache,entry)}return cache[name].exports}for(var previousRequire="function"==typeof require&&require,globalNS=JSON.parse('{"zeroclipboard":"ZeroClipboard","moment":"moment","numbro":"numbro","pikaday":"Pikaday"}')||{},i=0;i<entry.length;i++)newRequire(entry[i]);return newRequire}({1:[function(_dereq_,module,exports){},{}],2:[function(_dereq_,module,exports){window.jQuery&&!function($){$.fn.handsontable=function(action){var i,ilen,args,output,userSettings,$this=this.first(),instance=$this.data("handsontable");if("string"!=typeof action)return userSettings=action||{},instance?instance.updateSettings(userSettings):(instance=new Handsontable.Core($this[0],userSettings),$this.data("handsontable",instance),instance.init()),$this;if(args=[],arguments.length>1)for(i=1,ilen=arguments.length;i<ilen;i++)args.push(arguments[i]);if(instance){if("undefined"==typeof instance[action])throw new Error("Handsontable do not provide action: "+action);output=instance[action].apply(instance,args),"destroy"===action&&$this.removeData()}return output}}(window.jQuery)},{}],3:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableBorder:{get:function(){return WalkontableBorder}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47__46__46__47_helpers_47_browser__,$___46__46__47__46__46__47__46__46__47_eventManager__,$__cell_47_coords__,$__overlay_47__95_base_46_js__,$__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),getComputedStyle=$__0.getComputedStyle,getTrimmingContainer=$__0.getTrimmingContainer,innerWidth=$__0.innerWidth,innerHeight=$__0.innerHeight,offset=$__0.offset,outerHeight=$__0.outerHeight,outerWidth=$__0.outerWidth,stopImmediatePropagation=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_event__}).stopImmediatePropagation,isMobileBrowser=($___46__46__47__46__46__47__46__46__47_helpers_47_browser__=_dereq_("helpers/browser"),$___46__46__47__46__46__47__46__46__47_helpers_47_browser__&&$___46__46__47__46__46__47__46__46__47_helpers_47_browser__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_browser__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_browser__}).isMobileBrowser,EventManager=($___46__46__47__46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47__46__46__47_eventManager__}).EventManager,WalkontableCellCoords=($__cell_47_coords__=_dereq_("cell/coords"),$__cell_47_coords__&&$__cell_47_coords__.__esModule&&$__cell_47_coords__||{"default":$__cell_47_coords__}).WalkontableCellCoords,WalkontableBorder=(($__overlay_47__95_base_46_js__=_dereq_("overlay/_base.js"),$__overlay_47__95_base_46_js__&&$__overlay_47__95_base_46_js__.__esModule&&$__overlay_47__95_base_46_js__||{"default":$__overlay_47__95_base_46_js__}).WalkontableOverlay,function(wotInstance,settings){settings&&(this.eventManager=new EventManager(wotInstance),this.instance=wotInstance,this.wot=wotInstance,this.settings=settings,this.mouseDown=!1,this.main=null,this.top=null,this.left=null,this.bottom=null,this.right=null,this.topStyle=null,this.leftStyle=null,this.bottomStyle=null,this.rightStyle=null,this.cornerDefaultStyle={width:"5px",height:"5px",borderWidth:"2px",borderStyle:"solid",borderColor:"#FFF"},this.corner=null,this.cornerStyle=null,this.createBorders(settings),this.registerListeners())});$traceurRuntime.createClass(WalkontableBorder,{registerListeners:function(){var $__6=this;this.eventManager.addEventListener(document.body,"mousedown",function(){return $__6.onMouseDown()}),this.eventManager.addEventListener(document.body,"mouseup",function(){return $__6.onMouseUp()});for(var $__8=this,$__9=function(c,len){$__8.eventManager.addEventListener($__8.main.childNodes[c],"mouseenter",function(event){return $__6.onMouseEnter(event,$__6.main.childNodes[c])})},c=0,len=this.main.childNodes.length;c<len;c++)$__9(c,len)},onMouseDown:function(){this.mouseDown=!0},onMouseUp:function(){this.mouseDown=!1},onMouseEnter:function(event,parentElement){function isOutside(event){return event.clientY<Math.floor(bounds.top)||(event.clientY>Math.ceil(bounds.top+bounds.height)||(event.clientX<Math.floor(bounds.left)||(event.clientX>Math.ceil(bounds.left+bounds.width)||void 0)))}function handler(event){isOutside(event)&&(_this.eventManager.removeEventListener(document.body,"mousemove",handler),parentElement.style.display="block")}if(this.mouseDown&&this.wot.getSetting("hideBorderOnMouseDownOver")){event.preventDefault(),stopImmediatePropagation(event);var _this=this,bounds=parentElement.getBoundingClientRect();parentElement.style.display="none",this.eventManager.addEventListener(document.body,"mousemove",handler)}},createBorders:function(settings){this.main=document.createElement("div");var borderDivs=["top","left","bottom","right","corner"],style=this.main.style;style.position="absolute",style.top=0,style.left=0;for(var i=0;i<5;i++){var position=borderDivs[i],div=document.createElement("div");div.className="wtBorder "+(this.settings.className||""),this.settings[position]&&this.settings[position].hide&&(div.className+=" hidden"),style=div.style,style.backgroundColor=this.settings[position]&&this.settings[position].color?this.settings[position].color:settings.border.color,style.height=this.settings[position]&&this.settings[position].width?this.settings[position].width+"px":settings.border.width+"px",style.width=this.settings[position]&&this.settings[position].width?this.settings[position].width+"px":settings.border.width+"px",this.main.appendChild(div)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),isMobileBrowser()&&this.createMultipleSelectorHandles(),this.disappear(),this.wot.wtTable.bordersHolder||(this.wot.wtTable.bordersHolder=document.createElement("div"),this.wot.wtTable.bordersHolder.className="htBorders",this.wot.wtTable.spreader.appendChild(this.wot.wtTable.bordersHolder)),this.wot.wtTable.bordersHolder.insertBefore(this.main,this.wot.wtTable.bordersHolder.firstChild)},createMultipleSelectorHandles:function(){this.selectionHandles={topLeft:document.createElement("DIV"),topLeftHitArea:document.createElement("DIV"),bottomRight:document.createElement("DIV"),bottomRightHitArea:document.createElement("DIV")};var width=10,hitAreaWidth=40;this.selectionHandles.topLeft.className="topLeftSelectionHandle",this.selectionHandles.topLeftHitArea.className="topLeftSelectionHandle-HitArea",this.selectionHandles.bottomRight.className="bottomRightSelectionHandle",this.selectionHandles.bottomRightHitArea.className="bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={topLeft:this.selectionHandles.topLeft.style,topLeftHitArea:this.selectionHandles.topLeftHitArea.style,bottomRight:this.selectionHandles.bottomRight.style,bottomRightHitArea:this.selectionHandles.bottomRightHitArea.style};var hitAreaStyle={position:"absolute",height:hitAreaWidth+"px",width:hitAreaWidth+"px","border-radius":parseInt(hitAreaWidth/1.5,10)+"px"};for(var prop in hitAreaStyle)hitAreaStyle.hasOwnProperty(prop)&&(this.selectionHandles.styles.bottomRightHitArea[prop]=hitAreaStyle[prop],this.selectionHandles.styles.topLeftHitArea[prop]=hitAreaStyle[prop]);var handleStyle={position:"absolute",height:width+"px",width:width+"px","border-radius":parseInt(width/1.5,10)+"px",background:"#F5F5FF",border:"1px solid #4285c8"};for(var prop$__10 in handleStyle)handleStyle.hasOwnProperty(prop$__10)&&(this.selectionHandles.styles.bottomRight[prop$__10]=handleStyle[prop$__10],this.selectionHandles.styles.topLeft[prop$__10]=handleStyle[prop$__10]);this.main.appendChild(this.selectionHandles.topLeft),this.main.appendChild(this.selectionHandles.bottomRight),this.main.appendChild(this.selectionHandles.topLeftHitArea),this.main.appendChild(this.selectionHandles.bottomRightHitArea)},isPartRange:function(row,col){return!(!this.wot.selections.area.cellRange||row==this.wot.selections.area.cellRange.to.row&&col==this.wot.selections.area.cellRange.to.col)},updateMultipleSelectionHandlesPosition:function(row,col,top,left,width,height){var handleWidth=parseInt(this.selectionHandles.styles.topLeft.width,10),hitAreaWidth=parseInt(this.selectionHandles.styles.topLeftHitArea.width,10);this.selectionHandles.styles.topLeft.top=parseInt(top-handleWidth,10)+"px",this.selectionHandles.styles.topLeft.left=parseInt(left-handleWidth,10)+"px",this.selectionHandles.styles.topLeftHitArea.top=parseInt(top-hitAreaWidth/4*3,10)+"px",this.selectionHandles.styles.topLeftHitArea.left=parseInt(left-hitAreaWidth/4*3,10)+"px",this.selectionHandles.styles.bottomRight.top=parseInt(top+height,10)+"px",this.selectionHandles.styles.bottomRight.left=parseInt(left+width,10)+"px",this.selectionHandles.styles.bottomRightHitArea.top=parseInt(top+height-hitAreaWidth/4,10)+"px",this.selectionHandles.styles.bottomRightHitArea.left=parseInt(left+width-hitAreaWidth/4,10)+"px",this.settings.border.multipleSelectionHandlesVisible&&this.settings.border.multipleSelectionHandlesVisible()?(this.selectionHandles.styles.topLeft.display="block",this.selectionHandles.styles.topLeftHitArea.display="block",this.isPartRange(row,col)?(this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"):(this.selectionHandles.styles.bottomRight.display="block",this.selectionHandles.styles.bottomRightHitArea.display="block")):(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.topLeftHitArea.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"),row==this.wot.wtSettings.getSetting("fixedRowsTop")||col==this.wot.wtSettings.getSetting("fixedColumnsLeft")?(this.selectionHandles.styles.topLeft.zIndex="9999",this.selectionHandles.styles.topLeftHitArea.zIndex="9999"):(this.selectionHandles.styles.topLeft.zIndex="",this.selectionHandles.styles.topLeftHitArea.zIndex="")},appear:function(corners){if(!this.disabled){var isMultiple,fromTD,toTD,fromOffset,toOffset,containerOffset,top,minTop,left,minLeft,height,width,fromRow,fromColumn,toRow,toColumn,trimmingContainer,cornerOverlappingContainer,ilen;ilen=this.wot.wtTable.getRenderedRowsCount();for(var i=0;i<ilen;i++){var s=this.wot.wtTable.rowFilter.renderedToSource(i);if(s>=corners[0]&&s<=corners[2]){fromRow=s;break}}for(var i$__11=ilen-1;i$__11>=0;i$__11--){var s$__12=this.wot.wtTable.rowFilter.renderedToSource(i$__11);if(s$__12>=corners[0]&&s$__12<=corners[2]){toRow=s$__12;break}}ilen=this.wot.wtTable.getRenderedColumnsCount();for(var i$__13=0;i$__13<ilen;i$__13++){var s$__14=this.wot.wtTable.columnFilter.renderedToSource(i$__13);if(s$__14>=corners[1]&&s$__14<=corners[3]){fromColumn=s$__14;break}}for(var i$__15=ilen-1;i$__15>=0;i$__15--){var s$__16=this.wot.wtTable.columnFilter.renderedToSource(i$__15);if(s$__16>=corners[1]&&s$__16<=corners[3]){toColumn=s$__16;break}}if(void 0===fromRow||void 0===fromColumn)return void this.disappear();isMultiple=fromRow!==toRow||fromColumn!==toColumn,fromTD=this.wot.wtTable.getCell(new WalkontableCellCoords(fromRow,fromColumn)),toTD=isMultiple?this.wot.wtTable.getCell(new WalkontableCellCoords(toRow,toColumn)):fromTD,fromOffset=offset(fromTD),toOffset=isMultiple?offset(toTD):fromOffset,containerOffset=offset(this.wot.wtTable.TABLE),minTop=fromOffset.top,height=toOffset.top+outerHeight(toTD)-minTop,minLeft=fromOffset.left,width=toOffset.left+outerWidth(toTD)-minLeft,top=minTop-containerOffset.top-1,left=minLeft-containerOffset.left-1;var style=getComputedStyle(fromTD);parseInt(style.borderTopWidth,10)>0&&(top+=1,height=height>0?height-1:0),parseInt(style.borderLeftWidth,10)>0&&(left+=1,width=width>0?width-1:0),this.topStyle.top=top+"px",this.topStyle.left=left+"px",this.topStyle.width=width+"px",this.topStyle.display="block",this.leftStyle.top=top+"px",this.leftStyle.left=left+"px",this.leftStyle.height=height+"px",this.leftStyle.display="block";var delta=Math.floor(this.settings.border.width/2);this.bottomStyle.top=top+height-delta+"px",this.bottomStyle.left=left+"px",this.bottomStyle.width=width+"px",this.bottomStyle.display="block",this.rightStyle.top=top+"px",this.rightStyle.left=left+width-delta+"px",this.rightStyle.height=height+1+"px",this.rightStyle.display="block",isMobileBrowser()||!this.hasSetting(this.settings.border.cornerVisible)||this.isPartRange(toRow,toColumn)?this.cornerStyle.display="none":(this.cornerStyle.top=top+height-4+"px",this.cornerStyle.left=left+width-4+"px",this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none",trimmingContainer=getTrimmingContainer(this.wot.wtTable.TABLE),toColumn===this.wot.getSetting("totalColumns")-1&&(cornerOverlappingContainer=toTD.offsetLeft+outerWidth(toTD)+parseInt(this.cornerDefaultStyle.width)/2>=innerWidth(trimmingContainer),cornerOverlappingContainer&&(this.cornerStyle.left=Math.floor(left+width-3-parseInt(this.cornerDefaultStyle.width)/2)+"px",this.cornerStyle.borderRightWidth=0)),toRow===this.wot.getSetting("totalRows")-1&&(cornerOverlappingContainer=toTD.offsetTop+outerHeight(toTD)+parseInt(this.cornerDefaultStyle.height)/2>=innerHeight(trimmingContainer),cornerOverlappingContainer&&(this.cornerStyle.top=Math.floor(top+height-3-parseInt(this.cornerDefaultStyle.height)/2)+"px",this.cornerStyle.borderBottomWidth=0)),this.cornerStyle.display="block"),isMobileBrowser()&&this.updateMultipleSelectionHandlesPosition(fromRow,fromColumn,top,left,width,height)}},disappear:function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none",isMobileBrowser()&&(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none")},hasSetting:function(setting){return"function"==typeof setting?setting():!!setting}},{}),window.WalkontableBorder=WalkontableBorder},{"cell/coords":6,eventManager:42,"helpers/browser":44,"helpers/dom/element":47,"helpers/dom/event":48,"overlay/_base.js":12}],4:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableViewportColumnsCalculator:{get:function(){return WalkontableViewportColumnsCalculator}},__esModule:{value:!0}});var privatePool=new WeakMap,WalkontableViewportColumnsCalculator=function(viewportWidth,scrollOffset,totalColumns,columnWidthFn,overrideFn,onlyFullyVisible,stretchH){var stretchingColumnWidthFn=void 0!==arguments[7]?arguments[7]:function(width){return width};privatePool.set(this,{viewportWidth:viewportWidth,scrollOffset:scrollOffset,totalColumns:totalColumns,columnWidthFn:columnWidthFn,overrideFn:overrideFn,onlyFullyVisible:onlyFullyVisible,stretchingColumnWidthFn:stretchingColumnWidthFn}),this.count=0,this.startColumn=null,this.endColumn=null,this.startPosition=null,this.stretchAllRatio=0,this.stretchLastWidth=0,this.stretch=stretchH,this.totalTargetWidth=0,this.needVerifyLastColumnWidth=!0,this.stretchAllColumnsWidth=[],this.calculate()},$WalkontableViewportColumnsCalculator=WalkontableViewportColumnsCalculator;$traceurRuntime.createClass(WalkontableViewportColumnsCalculator,{calculate:function(){for(var columnWidth,sum=0,needReverse=!0,startPositions=[],priv=privatePool.get(this),onlyFullyVisible=priv.onlyFullyVisible,overrideFn=priv.overrideFn,scrollOffset=priv.scrollOffset,totalColumns=priv.totalColumns,viewportWidth=priv.viewportWidth,i=0;i<totalColumns;i++)if(columnWidth=this._getColumnWidth(i),sum<=scrollOffset&&!onlyFullyVisible&&(this.startColumn=i),sum>=scrollOffset&&sum+columnWidth<=scrollOffset+viewportWidth&&(null==this.startColumn&&(this.startColumn=i),this.endColumn=i),startPositions.push(sum),sum+=columnWidth,onlyFullyVisible||(this.endColumn=i),sum>=scrollOffset+viewportWidth){needReverse=!1;break}if(this.endColumn===totalColumns-1&&needReverse)for(this.startColumn=this.endColumn;this.startColumn>0;){var viewportSum=startPositions[this.endColumn]+columnWidth-startPositions[this.startColumn-1];if((viewportSum<=viewportWidth||!onlyFullyVisible)&&this.startColumn--,viewportSum>viewportWidth)break}null!==this.startColumn&&overrideFn&&overrideFn(this),this.startPosition=startPositions[this.startColumn],void 0==this.startPosition&&(this.startPosition=null),null!==this.startColumn&&(this.count=this.endColumn-this.startColumn+1)},refreshStretching:function(totalWidth){if("none"!==this.stretch){this.totalTargetWidth=totalWidth;for(var priv=privatePool.get(this),totalColumns=priv.totalColumns,sumAll=0,i=0;i<totalColumns;i++){var columnWidth=this._getColumnWidth(i),permanentColumnWidth=priv.stretchingColumnWidthFn(void 0,i);"number"==typeof permanentColumnWidth?totalWidth-=permanentColumnWidth:sumAll+=columnWidth}var remainingSize=totalWidth-sumAll;if("all"===this.stretch&&remainingSize>0)this.stretchAllRatio=totalWidth/sumAll,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if("last"===this.stretch&&totalWidth!==1/0){var columnWidth$__1=this._getColumnWidth(totalColumns-1),lastColumnWidth=remainingSize+columnWidth$__1;this.stretchLastWidth=lastColumnWidth>=0?lastColumnWidth:columnWidth$__1}}},getStretchedColumnWidth:function(column,baseWidth){var result=null;return"all"===this.stretch&&0!==this.stretchAllRatio?result=this._getStretchedAllColumnWidth(column,baseWidth):"last"===this.stretch&&0!==this.stretchLastWidth&&(result=this._getStretchedLastColumnWidth(column)),result},_getStretchedAllColumnWidth:function(column,baseWidth){var sumRatioWidth=0,priv=privatePool.get(this),totalColumns=priv.totalColumns;if(!this.stretchAllColumnsWidth[column]){var stretchedWidth=Math.round(baseWidth*this.stretchAllRatio),newStretchedWidth=priv.stretchingColumnWidthFn(stretchedWidth,column);void 0===newStretchedWidth?this.stretchAllColumnsWidth[column]=stretchedWidth:this.stretchAllColumnsWidth[column]=isNaN(newStretchedWidth)?this._getColumnWidth(column):newStretchedWidth}if(this.stretchAllColumnsWidth.length===totalColumns&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(var i=0;i<this.stretchAllColumnsWidth.length;i++)sumRatioWidth+=this.stretchAllColumnsWidth[i];sumRatioWidth!==this.totalTargetWidth&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=this.totalTargetWidth-sumRatioWidth)}return this.stretchAllColumnsWidth[column]},_getStretchedLastColumnWidth:function(column){var priv=privatePool.get(this),totalColumns=priv.totalColumns;return column===totalColumns-1?this.stretchLastWidth:null},_getColumnWidth:function(column){var width=privatePool.get(this).columnWidthFn(column);return void 0===width&&(width=$WalkontableViewportColumnsCalculator.DEFAULT_WIDTH),width}},{get DEFAULT_WIDTH(){return 50}}),window.WalkontableViewportColumnsCalculator=WalkontableViewportColumnsCalculator},{}],5:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableViewportRowsCalculator:{get:function(){return WalkontableViewportRowsCalculator}},__esModule:{value:!0}});var privatePool=new WeakMap,WalkontableViewportRowsCalculator=function(viewportHeight,scrollOffset,totalRows,rowHeightFn,overrideFn,onlyFullyVisible,horizontalScrollbarHeight){privatePool.set(this,{viewportHeight:viewportHeight,scrollOffset:scrollOffset,totalRows:totalRows,rowHeightFn:rowHeightFn,overrideFn:overrideFn,onlyFullyVisible:onlyFullyVisible,horizontalScrollbarHeight:horizontalScrollbarHeight}),this.count=0,this.startRow=null,this.endRow=null,this.startPosition=null,this.calculate()},$WalkontableViewportRowsCalculator=WalkontableViewportRowsCalculator;$traceurRuntime.createClass(WalkontableViewportRowsCalculator,{calculate:function(){for(var sum=0,needReverse=!0,startPositions=[],priv=privatePool.get(this),onlyFullyVisible=priv.onlyFullyVisible,overrideFn=priv.overrideFn,rowHeightFn=priv.rowHeightFn,scrollOffset=priv.scrollOffset,totalRows=priv.totalRows,viewportHeight=priv.viewportHeight,horizontalScrollbarHeight=priv.horizontalScrollbarHeight||0,i=0;i<totalRows;i++){var rowHeight=rowHeightFn(i);if(void 0===rowHeight&&(rowHeight=$WalkontableViewportRowsCalculator.DEFAULT_HEIGHT),sum<=scrollOffset&&!onlyFullyVisible&&(this.startRow=i),sum>=scrollOffset&&sum+rowHeight<=scrollOffset+viewportHeight-horizontalScrollbarHeight&&(null===this.startRow&&(this.startRow=i),this.endRow=i),startPositions.push(sum),sum+=rowHeight,onlyFullyVisible||(this.endRow=i),sum>=scrollOffset+viewportHeight-horizontalScrollbarHeight){needReverse=!1;break}}if(this.endRow===totalRows-1&&needReverse)for(this.startRow=this.endRow;this.startRow>0;){var viewportSum=startPositions[this.endRow]+rowHeight-startPositions[this.startRow-1];if((viewportSum<=viewportHeight-horizontalScrollbarHeight||!onlyFullyVisible)&&this.startRow--,viewportSum>=viewportHeight-horizontalScrollbarHeight)break}null!==this.startRow&&overrideFn&&overrideFn(this),this.startPosition=startPositions[this.startRow],void 0==this.startPosition&&(this.startPosition=null),null!==this.startRow&&(this.count=this.endRow-this.startRow+1)}},{get DEFAULT_HEIGHT(){return 23}}),window.WalkontableViewportRowsCalculator=WalkontableViewportRowsCalculator},{}],6:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableCellCoords:{get:function(){return WalkontableCellCoords}},__esModule:{value:!0}});var WalkontableCellCoords=function(row,col){"undefined"!=typeof row&&"undefined"!=typeof col?(this.row=row,this.col=col):(this.row=null,this.col=null)};$traceurRuntime.createClass(WalkontableCellCoords,{isValid:function(wotInstance){return!(this.row<0||this.col<0)&&!(this.row>=wotInstance.getSetting("totalRows")||this.col>=wotInstance.getSetting("totalColumns"))},isEqual:function(cellCoords){return cellCoords===this||this.row===cellCoords.row&&this.col===cellCoords.col},isSouthEastOf:function(testedCoords){return this.row>=testedCoords.row&&this.col>=testedCoords.col},isNorthWestOf:function(testedCoords){return this.row<=testedCoords.row&&this.col<=testedCoords.col},isSouthWestOf:function(testedCoords){return this.row>=testedCoords.row&&this.col<=testedCoords.col},isNorthEastOf:function(testedCoords){return this.row<=testedCoords.row&&this.col>=testedCoords.col}},{}),window.WalkontableCellCoords=WalkontableCellCoords},{}],7:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableCellRange:{get:function(){return WalkontableCellRange}},__esModule:{value:!0}});var $___46__46__47_cell_47_coords__,WalkontableCellCoords=($___46__46__47_cell_47_coords__=_dereq_("cell/coords"),$___46__46__47_cell_47_coords__&&$___46__46__47_cell_47_coords__.__esModule&&$___46__46__47_cell_47_coords__||{"default":$___46__46__47_cell_47_coords__}).WalkontableCellCoords,WalkontableCellRange=function(highlight,from,to){this.highlight=highlight,this.from=from,this.to=to},$WalkontableCellRange=WalkontableCellRange;$traceurRuntime.createClass(WalkontableCellRange,{isValid:function(wotInstance){return this.from.isValid(wotInstance)&&this.to.isValid(wotInstance)},isSingle:function(){return this.from.row===this.to.row&&this.from.col===this.to.col},getHeight:function(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1},getWidth:function(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1},includes:function(cellCoords){var $__2=cellCoords,row=$__2.row,col=$__2.col,topLeft=this.getTopLeftCorner(),bottomRight=this.getBottomRightCorner();return topLeft.row<=row&&bottomRight.row>=row&&topLeft.col<=col&&bottomRight.col>=col},includesRange:function(testedRange){return this.includes(testedRange.getTopLeftCorner())&&this.includes(testedRange.getBottomRightCorner())},isEqual:function(testedRange){return Math.min(this.from.row,this.to.row)==Math.min(testedRange.from.row,testedRange.to.row)&&Math.max(this.from.row,this.to.row)==Math.max(testedRange.from.row,testedRange.to.row)&&Math.min(this.from.col,this.to.col)==Math.min(testedRange.from.col,testedRange.to.col)&&Math.max(this.from.col,this.to.col)==Math.max(testedRange.from.col,testedRange.to.col)},overlaps:function(testedRange){return testedRange.isSouthEastOf(this.getTopLeftCorner())&&testedRange.isNorthWestOf(this.getBottomRightCorner())},isSouthEastOf:function(testedCoords){return this.getTopLeftCorner().isSouthEastOf(testedCoords)||this.getBottomRightCorner().isSouthEastOf(testedCoords)},isNorthWestOf:function(testedCoords){return this.getTopLeftCorner().isNorthWestOf(testedCoords)||this.getBottomRightCorner().isNorthWestOf(testedCoords)},expand:function(cellCoords){var topLeft=this.getTopLeftCorner(),bottomRight=this.getBottomRightCorner();return(cellCoords.row<topLeft.row||cellCoords.col<topLeft.col||cellCoords.row>bottomRight.row||cellCoords.col>bottomRight.col)&&(this.from=new WalkontableCellCoords(Math.min(topLeft.row,cellCoords.row),Math.min(topLeft.col,cellCoords.col)),this.to=new WalkontableCellCoords(Math.max(bottomRight.row,cellCoords.row),Math.max(bottomRight.col,cellCoords.col)),!0)},expandByRange:function(expandingRange){if(this.includesRange(expandingRange)||!this.overlaps(expandingRange))return!1;var topLeft=this.getTopLeftCorner(),bottomRight=this.getBottomRightCorner(),expandingTopLeft=(this.getTopRightCorner(),this.getBottomLeftCorner(),expandingRange.getTopLeftCorner()),expandingBottomRight=expandingRange.getBottomRightCorner(),resultTopRow=Math.min(topLeft.row,expandingTopLeft.row),resultTopCol=Math.min(topLeft.col,expandingTopLeft.col),resultBottomRow=Math.max(bottomRight.row,expandingBottomRight.row),resultBottomCol=Math.max(bottomRight.col,expandingBottomRight.col),finalFrom=new WalkontableCellCoords(resultTopRow,resultTopCol),finalTo=new WalkontableCellCoords(resultBottomRow,resultBottomCol),isCorner=new $WalkontableCellRange(finalFrom,finalFrom,finalTo).isCorner(this.from,expandingRange),onlyMerge=expandingRange.isEqual(new $WalkontableCellRange(finalFrom,finalFrom,finalTo));return isCorner&&!onlyMerge&&(this.from.col>finalFrom.col&&(finalFrom.col=resultBottomCol,finalTo.col=resultTopCol),this.from.row>finalFrom.row&&(finalFrom.row=resultBottomRow,finalTo.row=resultTopRow)),this.from=finalFrom,this.to=finalTo,!0},getDirection:function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0},setDirection:function(direction){switch(direction){case"NW-SE":this.from=this.getTopLeftCorner(),this.to=this.getBottomRightCorner();break;case"NE-SW":this.from=this.getTopRightCorner(),this.to=this.getBottomLeftCorner();break;case"SE-NW":this.from=this.getBottomRightCorner(),this.to=this.getTopLeftCorner();break;case"SW-NE":this.from=this.getBottomLeftCorner(),this.to=this.getTopRightCorner()}},getTopLeftCorner:function(){return new WalkontableCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},getBottomRightCorner:function(){return new WalkontableCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},getTopRightCorner:function(){return new WalkontableCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},getBottomLeftCorner:function(){return new WalkontableCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},isCorner:function(coords,expandedRange){return!!(expandedRange&&expandedRange.includes(coords)&&(this.getTopLeftCorner().isEqual(new WalkontableCellCoords(expandedRange.from.row,expandedRange.from.col))||this.getTopRightCorner().isEqual(new WalkontableCellCoords(expandedRange.from.row,expandedRange.to.col))||this.getBottomLeftCorner().isEqual(new WalkontableCellCoords(expandedRange.to.row,expandedRange.from.col))||this.getBottomRightCorner().isEqual(new WalkontableCellCoords(expandedRange.to.row,expandedRange.to.col))))||(coords.isEqual(this.getTopLeftCorner())||coords.isEqual(this.getTopRightCorner())||coords.isEqual(this.getBottomLeftCorner())||coords.isEqual(this.getBottomRightCorner()))},getOppositeCorner:function(coords,expandedRange){if(!(coords instanceof WalkontableCellCoords))return!1;if(expandedRange&&expandedRange.includes(coords)){if(this.getTopLeftCorner().isEqual(new WalkontableCellCoords(expandedRange.from.row,expandedRange.from.col)))return this.getBottomRightCorner();if(this.getTopRightCorner().isEqual(new WalkontableCellCoords(expandedRange.from.row,expandedRange.to.col)))return this.getBottomLeftCorner();if(this.getBottomLeftCorner().isEqual(new WalkontableCellCoords(expandedRange.to.row,expandedRange.from.col)))return this.getTopRightCorner();if(this.getBottomRightCorner().isEqual(new WalkontableCellCoords(expandedRange.to.row,expandedRange.to.col)))return this.getTopLeftCorner()}return coords.isEqual(this.getBottomRightCorner())?this.getTopLeftCorner():coords.isEqual(this.getTopLeftCorner())?this.getBottomRightCorner():coords.isEqual(this.getTopRightCorner())?this.getBottomLeftCorner():coords.isEqual(this.getBottomLeftCorner())?this.getTopRightCorner():void 0},getBordersSharedWith:function(range){if(!this.includesRange(range))return[];var thisBorders={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},rangeBorders={top:Math.min(range.from.row,range.to.row),bottom:Math.max(range.from.row,range.to.row),left:Math.min(range.from.col,range.to.col),
right:Math.max(range.from.col,range.to.col)},result=[];return thisBorders.top==rangeBorders.top&&result.push("top"),thisBorders.right==rangeBorders.right&&result.push("right"),thisBorders.bottom==rangeBorders.bottom&&result.push("bottom"),thisBorders.left==rangeBorders.left&&result.push("left"),result},getInner:function(){for(var topLeft=this.getTopLeftCorner(),bottomRight=this.getBottomRightCorner(),out=[],r=topLeft.row;r<=bottomRight.row;r++)for(var c=topLeft.col;c<=bottomRight.col;c++)this.from.row===r&&this.from.col===c||this.to.row===r&&this.to.col===c||out.push(new WalkontableCellCoords(r,c));return out},getAll:function(){for(var topLeft=this.getTopLeftCorner(),bottomRight=this.getBottomRightCorner(),out=[],r=topLeft.row;r<=bottomRight.row;r++)for(var c=topLeft.col;c<=bottomRight.col;c++)topLeft.row===r&&topLeft.col===c?out.push(topLeft):bottomRight.row===r&&bottomRight.col===c?out.push(bottomRight):out.push(new WalkontableCellCoords(r,c));return out},forAll:function(callback){for(var topLeft=this.getTopLeftCorner(),bottomRight=this.getBottomRightCorner(),r=topLeft.row;r<=bottomRight.row;r++)for(var c=topLeft.col;c<=bottomRight.col;c++){var breakIteration=callback(r,c);if(breakIteration===!1)return}}},{}),window.WalkontableCellRange=WalkontableCellRange},{"cell/coords":6}],8:[function(_dereq_,module,exports){Object.defineProperties(exports,{Walkontable:{get:function(){return Walkontable}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47__46__46__47_helpers_47_string__,$__event__,$__overlays__,$__scroll__,$__settings__,$__table__,$__viewport__,$__overlay_47__95_base_46_js__,$__overlay_47_top_46_js__,$__overlay_47_left_46_js__,$__overlay_47_debug_46_js__,$__overlay_47_topLeftCorner_46_js__,$__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,fastInnerText=$__0.fastInnerText,isVisible=$__0.isVisible,removeClass=$__0.removeClass,objectEach=($___46__46__47__46__46__47__46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47__46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_object__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_object__}).objectEach,$__2=($___46__46__47__46__46__47__46__46__47_helpers_47_string__=_dereq_("helpers/string"),$___46__46__47__46__46__47__46__46__47_helpers_47_string__&&$___46__46__47__46__46__47__46__46__47_helpers_47_string__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_string__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_string__}),toUpperCaseFirst=$__2.toUpperCaseFirst,randomString=$__2.randomString,WalkontableEvent=($__event__=_dereq_("event"),$__event__&&$__event__.__esModule&&$__event__||{"default":$__event__}).WalkontableEvent,WalkontableOverlays=($__overlays__=_dereq_("overlays"),$__overlays__&&$__overlays__.__esModule&&$__overlays__||{"default":$__overlays__}).WalkontableOverlays,WalkontableScroll=($__scroll__=_dereq_("scroll"),$__scroll__&&$__scroll__.__esModule&&$__scroll__||{"default":$__scroll__}).WalkontableScroll,WalkontableSettings=($__settings__=_dereq_("settings"),$__settings__&&$__settings__.__esModule&&$__settings__||{"default":$__settings__}).WalkontableSettings,WalkontableTable=($__table__=_dereq_("table"),$__table__&&$__table__.__esModule&&$__table__||{"default":$__table__}).WalkontableTable,WalkontableViewport=($__viewport__=_dereq_("viewport"),$__viewport__&&$__viewport__.__esModule&&$__viewport__||{"default":$__viewport__}).WalkontableViewport,Walkontable=(($__overlay_47__95_base_46_js__=_dereq_("overlay/_base.js"),$__overlay_47__95_base_46_js__&&$__overlay_47__95_base_46_js__.__esModule&&$__overlay_47__95_base_46_js__||{"default":$__overlay_47__95_base_46_js__}).WalkontableOverlay,($__overlay_47_top_46_js__=_dereq_("overlay/top.js"),$__overlay_47_top_46_js__&&$__overlay_47_top_46_js__.__esModule&&$__overlay_47_top_46_js__||{"default":$__overlay_47_top_46_js__}).WalkontableTopOverlay,($__overlay_47_left_46_js__=_dereq_("overlay/left.js"),$__overlay_47_left_46_js__&&$__overlay_47_left_46_js__.__esModule&&$__overlay_47_left_46_js__||{"default":$__overlay_47_left_46_js__}).WalkontableLeftOverlay,($__overlay_47_debug_46_js__=_dereq_("overlay/debug.js"),$__overlay_47_debug_46_js__&&$__overlay_47_debug_46_js__.__esModule&&$__overlay_47_debug_46_js__||{"default":$__overlay_47_debug_46_js__}).WalkontableDebugOverlay,($__overlay_47_topLeftCorner_46_js__=_dereq_("overlay/topLeftCorner.js"),$__overlay_47_topLeftCorner_46_js__&&$__overlay_47_topLeftCorner_46_js__.__esModule&&$__overlay_47_topLeftCorner_46_js__||{"default":$__overlay_47_topLeftCorner_46_js__}).WalkontableTopLeftCornerOverlay,function(settings){var originalHeaders=[];if(this.guid="wt_"+randomString(),settings.cloneSource?(this.cloneSource=settings.cloneSource,this.cloneOverlay=settings.cloneOverlay,this.wtSettings=settings.cloneSource.wtSettings,this.wtTable=new WalkontableTable(this,settings.table,settings.wtRootElement),this.wtScroll=new WalkontableScroll(this),this.wtViewport=settings.cloneSource.wtViewport,this.wtEvent=new WalkontableEvent(this),this.selections=this.cloneSource.selections):(this.wtSettings=new WalkontableSettings(this,settings),this.wtTable=new WalkontableTable(this,settings.table),this.wtScroll=new WalkontableScroll(this),this.wtViewport=new WalkontableViewport(this),this.wtEvent=new WalkontableEvent(this),this.selections=this.getSetting("selections"),this.wtOverlays=new WalkontableOverlays(this),this.exportSettingsAsClassNames()),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var c=0,clen=this.wtTable.THEAD.childNodes[0].childNodes.length;c<clen;c++)originalHeaders.push(this.wtTable.THEAD.childNodes[0].childNodes[c].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(column,TH){fastInnerText(TH,originalHeaders[column])}])}this.drawn=!1,this.drawInterrupted=!1});$traceurRuntime.createClass(Walkontable,{draw:function(){var fastDraw=void 0!==arguments[0]&&arguments[0];return this.drawInterrupted=!1,fastDraw||isVisible(this.wtTable.TABLE)?this.wtTable.draw(fastDraw):this.drawInterrupted=!0,this},getCell:function(coords){var topmost=void 0!==arguments[1]&&arguments[1];if(!topmost)return this.wtTable.getCell(coords);var totalRows=this.wtSettings.getSetting("totalRows"),fixedRowsTop=this.wtSettings.getSetting("fixedRowsTop"),fixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom"),fixedColumns=this.wtSettings.getSetting("fixedColumnsLeft");if(coords.row<fixedRowsTop&&coords.col<fixedColumns)return this.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell(coords);if(coords.row<fixedRowsTop)return this.wtOverlays.topOverlay.clone.wtTable.getCell(coords);if(coords.col<fixedColumns&&coords.row>=totalRows-fixedRowsBottom){if(this.wtOverlays.bottomLeftCornerOverlay.clone)return this.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell(coords)}else{if(coords.col<fixedColumns)return this.wtOverlays.leftOverlay.clone.wtTable.getCell(coords);if(coords.row<totalRows&&coords.row>totalRows-fixedRowsBottom&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(coords)}return this.wtTable.getCell(coords)},update:function(settings,value){return this.wtSettings.update(settings,value)},scrollVertical:function(row){return this.wtOverlays.topOverlay.scrollTo(row),this.getSetting("onScrollVertically"),this},scrollHorizontal:function(column){return this.wtOverlays.leftOverlay.scrollTo(column),this.getSetting("onScrollHorizontally"),this},scrollViewport:function(coords){return this.wtScroll.scrollViewport(coords),this},getViewport:function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]},getOverlayName:function(){return this.cloneOverlay?this.cloneOverlay.type:"master"},isOverlayName:function(name){return!!this.cloneOverlay&&this.cloneOverlay.type===name},exportSettingsAsClassNames:function(){var $__14=this,toExport={rowHeaders:["array"],columnHeaders:["array"]},allClassNames=[],newClassNames=[];objectEach(toExport,function(optionType,key){optionType.indexOf("array")>-1&&$__14.getSetting(key).length&&newClassNames.push("ht"+toUpperCaseFirst(key)),allClassNames.push("ht"+toUpperCaseFirst(key))}),removeClass(this.wtTable.wtRootElement.parentNode,allClassNames),addClass(this.wtTable.wtRootElement.parentNode,newClassNames)},getSetting:function(key,param1,param2,param3,param4){return this.wtSettings.getSetting(key,param1,param2,param3,param4)},hasSetting:function(key){return this.wtSettings.has(key)},destroy:function(){this.wtOverlays.destroy(),this.wtEvent.destroy()}},{}),window.Walkontable=Walkontable},{event:9,"helpers/dom/element":47,"helpers/object":53,"helpers/string":55,"overlay/_base.js":12,"overlay/debug.js":13,"overlay/left.js":14,"overlay/top.js":15,"overlay/topLeftCorner.js":16,overlays:17,scroll:18,settings:20,table:21,viewport:23}],9:[function(_dereq_,module,exports){function WalkontableEvent(instance){var that=this,eventManager=eventManagerObject(instance);this.instance=instance;var dblClickOrigin=[null,null];this.dblClickTimeout=[null,null];var longTouchTimeout,onMouseDown=function(event){var cell=that.parentCell(event.realTarget);hasClass(event.realTarget,"corner")?that.instance.getSetting("onCellCornerMouseDown",event,event.realTarget):cell.TD&&that.instance.hasSetting("onCellMouseDown")&&that.instance.getSetting("onCellMouseDown",event,cell.coords,cell.TD,that.instance),2!==event.button&&cell.TD&&(dblClickOrigin[0]=cell.TD,clearTimeout(that.dblClickTimeout[0]),that.dblClickTimeout[0]=setTimeout(function(){dblClickOrigin[0]=null},1e3))},onTouchMove=function(event){that.instance.touchMoving=!0},onTouchStart=function(event){eventManager.addEventListener(this,"touchmove",onTouchMove),that.checkIfTouchMove=setTimeout(function(){return that.instance.touchMoving===!0?(that.instance.touchMoving=void 0,void eventManager.removeEventListener("touchmove",onTouchMove,!1)):void onMouseDown(event)},30)},onMouseOver=function(event){var table,td,mainWOT;that.instance.hasSetting("onCellMouseOver")&&(table=that.instance.wtTable.TABLE,td=closestDown(event.realTarget,["TD","TH"],table),mainWOT=that.instance.cloneSource||that.instance,td&&td!==mainWOT.lastMouseOver&&isChildOf(td,table)&&(mainWOT.lastMouseOver=td,that.instance.getSetting("onCellMouseOver",event,that.instance.wtTable.getCoords(td),td,that.instance)))},onMouseUp=function(event){if(2!==event.button){var cell=that.parentCell(event.realTarget);cell.TD===dblClickOrigin[0]&&cell.TD===dblClickOrigin[1]?(hasClass(event.realTarget,"corner")?that.instance.getSetting("onCellCornerDblClick",event,cell.coords,cell.TD,that.instance):that.instance.getSetting("onCellDblClick",event,cell.coords,cell.TD,that.instance),dblClickOrigin[0]=null,dblClickOrigin[1]=null):cell.TD===dblClickOrigin[0]?(that.instance.getSetting("onCellMouseUp",event,cell.coords,cell.TD,that.instance),dblClickOrigin[1]=cell.TD,clearTimeout(that.dblClickTimeout[1]),that.dblClickTimeout[1]=setTimeout(function(){dblClickOrigin[1]=null},500)):cell.TD&&that.instance.hasSetting("onCellMouseUp")&&that.instance.getSetting("onCellMouseUp",event,cell.coords,cell.TD,that.instance)}},onTouchEnd=function(event){clearTimeout(longTouchTimeout),event.preventDefault(),onMouseUp(event)};if(eventManager.addEventListener(this.instance.wtTable.holder,"mousedown",onMouseDown),eventManager.addEventListener(this.instance.wtTable.TABLE,"mouseover",onMouseOver),eventManager.addEventListener(this.instance.wtTable.holder,"mouseup",onMouseUp),this.instance.wtTable.holder.parentNode.parentNode&&isMobileBrowser()&&!that.instance.wtTable.isWorkingOnClone()){var classSelector="."+this.instance.wtTable.holder.parentNode.className.split(" ").join(".");eventManager.addEventListener(this.instance.wtTable.holder,"touchstart",function(event){that.instance.touchApplied=!0,isChildOf(event.target,classSelector)&&onTouchStart.call(event.target,event)}),eventManager.addEventListener(this.instance.wtTable.holder,"touchend",function(event){that.instance.touchApplied=!1,isChildOf(event.target,classSelector)&&onTouchEnd.call(event.target,event)}),that.instance.momentumScrolling||(that.instance.momentumScrolling={}),eventManager.addEventListener(this.instance.wtTable.holder,"scroll",function(event){clearTimeout(that.instance.momentumScrolling._timeout),that.instance.momentumScrolling.ongoing||that.instance.getSetting("onBeforeTouchScroll"),that.instance.momentumScrolling.ongoing=!0,that.instance.momentumScrolling._timeout=setTimeout(function(){that.instance.touchApplied||(that.instance.momentumScrolling.ongoing=!1,that.instance.getSetting("onAfterMomentumScroll"))},200)})}eventManager.addEventListener(window,"resize",function(){"none"!==that.instance.getSetting("stretchH")&&that.instance.draw()}),this.destroy=function(){clearTimeout(this.dblClickTimeout[0]),clearTimeout(this.dblClickTimeout[1]),eventManager.destroy()}}Object.defineProperties(exports,{WalkontableEvent:{get:function(){return WalkontableEvent}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_helpers_47_browser__,$___46__46__47__46__46__47__46__46__47_eventManager__,$__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),closestDown=$__0.closestDown,hasClass=$__0.hasClass,isChildOf=$__0.isChildOf,isMobileBrowser=($___46__46__47__46__46__47__46__46__47_helpers_47_browser__=_dereq_("helpers/browser"),$___46__46__47__46__46__47__46__46__47_helpers_47_browser__&&$___46__46__47__46__46__47__46__46__47_helpers_47_browser__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_browser__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_browser__}).isMobileBrowser,eventManagerObject=($___46__46__47__46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47__46__46__47_eventManager__}).eventManager;WalkontableEvent.prototype.parentCell=function(elem){var cell={},TABLE=this.instance.wtTable.TABLE,TD=closestDown(elem,["TD","TH"],TABLE);return TD?(cell.coords=this.instance.wtTable.getCoords(TD),cell.TD=TD):hasClass(elem,"wtBorder")&&hasClass(elem,"current")?(cell.coords=this.instance.selections.current.cellRange.highlight,cell.TD=this.instance.wtTable.getCell(cell.coords)):hasClass(elem,"wtBorder")&&hasClass(elem,"area")&&this.instance.selections.area.cellRange&&(cell.coords=this.instance.selections.area.cellRange.to,cell.TD=this.instance.wtTable.getCell(cell.coords)),cell},window.WalkontableEvent=WalkontableEvent},{eventManager:42,"helpers/browser":44,"helpers/dom/element":47}],10:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableColumnFilter:{get:function(){return WalkontableColumnFilter}},__esModule:{value:!0}});var WalkontableColumnFilter=function(offset,total,countTH){this.offset=offset,this.total=total,this.countTH=countTH};$traceurRuntime.createClass(WalkontableColumnFilter,{offsetted:function(index){return index+this.offset},unOffsetted:function(index){return index-this.offset},renderedToSource:function(index){return this.offsetted(index)},sourceToRendered:function(index){return this.unOffsetted(index)},offsettedTH:function(index){return index-this.countTH},unOffsettedTH:function(index){return index+this.countTH},visibleRowHeadedColumnToSourceColumn:function(index){return this.renderedToSource(this.offsettedTH(index))},sourceColumnToVisibleRowHeadedColumn:function(index){return this.unOffsettedTH(this.sourceToRendered(index))}},{}),window.WalkontableColumnFilter=WalkontableColumnFilter},{}],11:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableRowFilter:{get:function(){return WalkontableRowFilter}},__esModule:{value:!0}});var WalkontableRowFilter=function(offset,total,countTH){this.offset=offset,this.total=total,this.countTH=countTH};$traceurRuntime.createClass(WalkontableRowFilter,{offsetted:function(index){return index+this.offset},unOffsetted:function(index){return index-this.offset},renderedToSource:function(index){return this.offsetted(index)},sourceToRendered:function(index){return this.unOffsetted(index)},offsettedTH:function(index){return index-this.countTH},unOffsettedTH:function(index){return index+this.countTH},visibleColHeadedRowToSourceRow:function(index){return this.renderedToSource(this.offsettedTH(index))},sourceRowToVisibleColHeadedRow:function(index){return this.unOffsettedTH(this.sourceToRendered(index))}},{}),window.WalkontableRowFilter=WalkontableRowFilter},{}],12:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableOverlay:{get:function(){return WalkontableOverlay}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__,$__0=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),getScrollableElement=$__0.getScrollableElement,getTrimmingContainer=$__0.getTrimmingContainer,defineGetter=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__||{"default":$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_object__}).defineGetter,eventManagerObject=($___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47__46__46__47__46__46__47_eventManager__}).eventManager,registeredOverlays={},WalkontableOverlay=function(wotInstance){defineGetter(this,"wot",wotInstance,{writable:!1}),this.instance=this.wot,this.type="",this.mainTableScrollableElement=null,this.TABLE=this.wot.wtTable.TABLE,this.hider=this.wot.wtTable.hider,this.spreader=this.wot.wtTable.spreader,this.holder=this.wot.wtTable.holder,this.wtRootElement=this.wot.wtTable.wtRootElement,this.trimmingContainer=getTrimmingContainer(this.hider.parentNode.parentNode),this.needFullRender=this.shouldBeRendered(),this.areElementSizesAdjusted=!1},$WalkontableOverlay=WalkontableOverlay;$traceurRuntime.createClass(WalkontableOverlay,{shouldBeRendered:function(){return!0},updateTrimmingContainer:function(){this.trimmingContainer=getTrimmingContainer(this.hider.parentNode.parentNode)},updateMainScrollableElement:function(){this.mainTableScrollableElement=getScrollableElement(this.wot.wtTable.TABLE)},makeClone:function(direction){if($WalkontableOverlay.CLONE_TYPES.indexOf(direction)===-1)throw new Error('Clone type "'+direction+'" is not supported.');var clone=document.createElement("DIV"),clonedTable=document.createElement("TABLE");clone.className="ht_clone_"+direction+" handsontable",clone.style.position="absolute",clone.style.top=0,clone.style.left=0,clone.style.overflow="hidden",clonedTable.className=this.wot.wtTable.TABLE.className,clone.appendChild(clonedTable),this.type=direction,this.wot.wtTable.wtRootElement.parentNode.appendChild(clone);var preventOverflow=this.wot.getSetting("preventOverflow");return preventOverflow===!0||"horizontal"===preventOverflow&&this.type===$WalkontableOverlay.CLONE_TOP||"vertical"===preventOverflow&&this.type===$WalkontableOverlay.CLONE_LEFT?this.mainTableScrollableElement=window:this.mainTableScrollableElement=getScrollableElement(this.wot.wtTable.TABLE),new Walkontable({cloneSource:this.wot,cloneOverlay:this,table:clonedTable})},refresh:function(){var fastDraw=void 0!==arguments[0]&&arguments[0],nextCycleRenderFlag=this.shouldBeRendered();this.clone&&(this.needFullRender||nextCycleRenderFlag)&&this.clone.draw(fastDraw),this.needFullRender=nextCycleRenderFlag},destroy:function(){eventManagerObject(this.clone).destroy()}},{get CLONE_TOP(){return"top"},get CLONE_BOTTOM(){return"bottom"},get CLONE_LEFT(){return"left"},get CLONE_TOP_LEFT_CORNER(){return"top_left_corner"},get CLONE_BOTTOM_LEFT_CORNER(){return"bottom_left_corner"},get CLONE_DEBUG(){return"debug"},get CLONE_TYPES(){return[$WalkontableOverlay.CLONE_TOP,$WalkontableOverlay.CLONE_BOTTOM,$WalkontableOverlay.CLONE_LEFT,$WalkontableOverlay.CLONE_TOP_LEFT_CORNER,$WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER,$WalkontableOverlay.CLONE_DEBUG]},registerOverlay:function(type,overlayClass){if($WalkontableOverlay.CLONE_TYPES.indexOf(type)===-1)throw new Error("Unsupported overlay ("+type+").");registeredOverlays[type]=overlayClass},createOverlay:function(type,wot){return new registeredOverlays[type](wot)},isOverlayTypeOf:function(overlay,type){return!(!overlay||!registeredOverlays[type])&&overlay instanceof registeredOverlays[type]}}),window.WalkontableOverlay=WalkontableOverlay},{eventManager:42,"helpers/dom/element":47,"helpers/object":53}],13:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableDebugOverlay:{get:function(){return WalkontableDebugOverlay}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___95_base__,addClass=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}).addClass,WalkontableOverlay=($___95_base__=_dereq_("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{"default":$___95_base__}).WalkontableOverlay,WalkontableDebugOverlay=function(wotInstance){$traceurRuntime.superConstructor($WalkontableDebugOverlay).call(this,wotInstance),this.clone=this.makeClone(WalkontableOverlay.CLONE_DEBUG),this.clone.wtTable.holder.style.opacity=.4,this.clone.wtTable.holder.style.textShadow="0 0 2px #ff0000",addClass(this.clone.wtTable.holder.parentNode,"wtDebugVisible")},$WalkontableDebugOverlay=WalkontableDebugOverlay;$traceurRuntime.createClass(WalkontableDebugOverlay,{},{},WalkontableOverlay),window.WalkontableDebugOverlay=WalkontableDebugOverlay,WalkontableOverlay.registerOverlay(WalkontableOverlay.CLONE_DEBUG,WalkontableDebugOverlay)},{_base:12,"helpers/dom/element":47}],14:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableLeftOverlay:{get:function(){return WalkontableLeftOverlay}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___95_base__,$__0=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,getScrollbarWidth=$__0.getScrollbarWidth,getScrollLeft=$__0.getScrollLeft,getWindowScrollTop=$__0.getWindowScrollTop,hasClass=$__0.hasClass,outerWidth=$__0.outerWidth,innerHeight=$__0.innerHeight,removeClass=$__0.removeClass,setOverlayPosition=$__0.setOverlayPosition,resetCssTransform=$__0.resetCssTransform,WalkontableOverlay=($___95_base__=_dereq_("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{"default":$___95_base__}).WalkontableOverlay,WalkontableLeftOverlay=function(wotInstance){$traceurRuntime.superConstructor($WalkontableLeftOverlay).call(this,wotInstance),this.clone=this.makeClone(WalkontableOverlay.CLONE_LEFT)},$WalkontableLeftOverlay=WalkontableLeftOverlay;$traceurRuntime.createClass(WalkontableLeftOverlay,{shouldBeRendered:function(){return!(!this.wot.getSetting("fixedColumnsLeft")&&!this.wot.getSetting("rowHeaders").length)},resetFixedPosition:function(){if(this.needFullRender&&this.wot.wtTable.holder.parentNode){var overlayRoot=this.clone.wtTable.holder.parentNode,headerPosition=0,preventOverflow=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||preventOverflow&&"horizontal"===preventOverflow)headerPosition=this.getScrollPosition(),resetCssTransform(overlayRoot);else{var finalLeft,finalTop,box=this.wot.wtTable.hider.getBoundingClientRect(),left=Math.ceil(box.left),right=Math.ceil(box.right);finalTop=this.wot.wtTable.hider.style.top,finalTop=""===finalTop?0:finalTop,finalLeft=left<0&&right-overlayRoot.offsetWidth>0?-left:0,headerPosition=finalLeft,finalLeft+="px",setOverlayPosition(overlayRoot,finalLeft,finalTop)}this.adjustHeaderBordersPosition(headerPosition),this.adjustElementsSize()}},setScrollPosition:function(pos){this.mainTableScrollableElement===window?window.scrollTo(pos,getWindowScrollTop()):this.mainTableScrollableElement.scrollLeft=pos},onScroll:function(){this.wot.getSetting("onScrollVertically")},sumCellSizes:function(from,to){for(var sum=0,defaultColumnWidth=this.wot.wtSettings.defaultColumnWidth;from<to;)sum+=this.wot.wtTable.getStretchedColumnWidth(from)||defaultColumnWidth,from++;return sum},adjustElementsSize:function(){var force=void 0!==arguments[0]&&arguments[0];this.updateTrimmingContainer(),(this.needFullRender||force)&&(this.adjustRootElementSize(),this.adjustRootChildrenSize(),force||(this.areElementSizesAdjusted=!0))},adjustRootElementSize:function(){var tableWidth,masterHolder=this.wot.wtTable.holder,scrollbarHeight=masterHolder.clientHeight===masterHolder.offsetHeight?0:getScrollbarWidth(),overlayRoot=this.clone.wtTable.holder.parentNode,overlayRootStyle=overlayRoot.style,preventOverflow=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||"vertical"===preventOverflow){var height=this.wot.wtViewport.getWorkspaceHeight()-scrollbarHeight;height=Math.min(height,innerHeight(this.wot.wtTable.wtRootElement)),overlayRootStyle.height=height+"px"}else overlayRootStyle.height="";this.clone.wtTable.holder.style.height=overlayRootStyle.height,tableWidth=outerWidth(this.clone.wtTable.TABLE),overlayRootStyle.width=(0===tableWidth?tableWidth:tableWidth+4)+"px"},adjustRootChildrenSize:function(){var scrollbarWidth=getScrollbarWidth();this.clone.wtTable.hider.style.height=this.hider.style.height,this.clone.wtTable.holder.style.height=this.clone.wtTable.holder.parentNode.style.height,0===scrollbarWidth&&(scrollbarWidth=30),this.clone.wtTable.holder.style.width=parseInt(this.clone.wtTable.holder.parentNode.style.width,10)+scrollbarWidth+"px"},applyToDOM:function(){var total=this.wot.getSetting("totalColumns");if(this.areElementSizesAdjusted||this.adjustElementsSize(),"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition)this.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px";else{if(0!==total)throw new Error("Incorrect value of the columnsRenderCalculator");this.spreader.style.left="0"}this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()},syncOverlayOffset:function(){"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.top=""},scrollTo:function(sourceCol,beyondRendered){var newX=this.getTableParentOffset(),sourceInstance=this.wot.cloneSource?this.wot.cloneSource:this.wot,mainHolder=sourceInstance.wtTable.holder,scrollbarCompensation=0;beyondRendered&&mainHolder.offsetWidth!==mainHolder.clientWidth&&(scrollbarCompensation=getScrollbarWidth()),beyondRendered?(newX+=this.sumCellSizes(0,sourceCol+1),newX-=this.wot.wtViewport.getViewportWidth()):newX+=this.sumCellSizes(this.wot.getSetting("fixedColumnsLeft"),sourceCol),newX+=scrollbarCompensation,this.setScrollPosition(newX)},getTableParentOffset:function(){var preventOverflow=this.wot.getSetting("preventOverflow"),offset=0;return preventOverflow||this.trimmingContainer!==window||(offset=this.wot.wtTable.holderOffset.left),offset},getScrollPosition:function(){return getScrollLeft(this.mainTableScrollableElement)},adjustHeaderBordersPosition:function(position){var masterParent=this.wot.wtTable.holder.parentNode,rowHeaders=this.wot.getSetting("rowHeaders"),fixedColumnsLeft=this.wot.getSetting("fixedColumnsLeft"),totalRows=this.wot.getSetting("totalRows");if(totalRows?removeClass(masterParent,"emptyRows"):addClass(masterParent,"emptyRows"),fixedColumnsLeft&&!rowHeaders.length)addClass(masterParent,"innerBorderLeft");else if(!fixedColumnsLeft&&rowHeaders.length){var previousState=hasClass(masterParent,"innerBorderLeft");position?addClass(masterParent,"innerBorderLeft"):removeClass(masterParent,"innerBorderLeft"),(!previousState&&position||previousState&&!position)&&this.wot.wtOverlays.adjustElementsSize()}}},{},WalkontableOverlay),window.WalkontableLeftOverlay=WalkontableLeftOverlay,WalkontableOverlay.registerOverlay(WalkontableOverlay.CLONE_LEFT,WalkontableLeftOverlay)},{_base:12,"helpers/dom/element":47}],15:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableTopOverlay:{get:function(){return WalkontableTopOverlay}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___95_base__,$__0=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,getScrollbarWidth=$__0.getScrollbarWidth,getScrollTop=$__0.getScrollTop,getWindowScrollLeft=$__0.getWindowScrollLeft,hasClass=$__0.hasClass,outerHeight=$__0.outerHeight,innerWidth=$__0.innerWidth,removeClass=$__0.removeClass,setOverlayPosition=$__0.setOverlayPosition,resetCssTransform=$__0.resetCssTransform,WalkontableOverlay=($___95_base__=_dereq_("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{
"default":$___95_base__}).WalkontableOverlay,WalkontableTopOverlay=function(wotInstance){$traceurRuntime.superConstructor($WalkontableTopOverlay).call(this,wotInstance),this.clone=this.makeClone(WalkontableOverlay.CLONE_TOP)},$WalkontableTopOverlay=WalkontableTopOverlay;$traceurRuntime.createClass(WalkontableTopOverlay,{shouldBeRendered:function(){return!(!this.wot.getSetting("fixedRowsTop")&&!this.wot.getSetting("columnHeaders").length)},resetFixedPosition:function(){if(this.needFullRender&&this.wot.wtTable.holder.parentNode){var overlayRoot=this.clone.wtTable.holder.parentNode,headerPosition=0,preventOverflow=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||preventOverflow&&"vertical"===preventOverflow)headerPosition=this.getScrollPosition(),resetCssTransform(overlayRoot);else{var finalLeft,finalTop,box=this.wot.wtTable.hider.getBoundingClientRect(),top=Math.ceil(box.top),bottom=Math.ceil(box.bottom);finalLeft=this.wot.wtTable.hider.style.left,finalLeft=""===finalLeft?0:finalLeft,finalTop=top<0&&bottom-overlayRoot.offsetHeight>0?-top:0,headerPosition=finalTop,finalTop+="px",setOverlayPosition(overlayRoot,finalLeft,finalTop)}this.adjustHeaderBordersPosition(headerPosition),this.adjustElementsSize()}},setScrollPosition:function(pos){this.mainTableScrollableElement===window?window.scrollTo(getWindowScrollLeft(),pos):this.mainTableScrollableElement.scrollTop=pos},onScroll:function(){this.wot.getSetting("onScrollHorizontally")},sumCellSizes:function(from,to){for(var sum=0,defaultRowHeight=this.wot.wtSettings.settings.defaultRowHeight;from<to;){var height=this.wot.wtTable.getRowHeight(from);sum+=void 0===height?defaultRowHeight:height,from++}return sum},adjustElementsSize:function(){var force=void 0!==arguments[0]&&arguments[0];this.updateTrimmingContainer(),(this.needFullRender||force)&&(this.adjustRootElementSize(),this.adjustRootChildrenSize(),force||(this.areElementSizesAdjusted=!0))},adjustRootElementSize:function(){var tableHeight,masterHolder=this.wot.wtTable.holder,scrollbarWidth=masterHolder.clientWidth===masterHolder.offsetWidth?0:getScrollbarWidth(),overlayRoot=this.clone.wtTable.holder.parentNode,overlayRootStyle=overlayRoot.style,preventOverflow=this.wot.getSetting("preventOverflow");if(this.trimmingContainer!==window||"horizontal"===preventOverflow){var width=this.wot.wtViewport.getWorkspaceWidth()-scrollbarWidth;width=Math.min(width,innerWidth(this.wot.wtTable.wtRootElement)),overlayRootStyle.width=width+"px"}else overlayRootStyle.width="";this.clone.wtTable.holder.style.width=overlayRootStyle.width,tableHeight=outerHeight(this.clone.wtTable.TABLE),overlayRootStyle.height=(0===tableHeight?tableHeight:tableHeight+4)+"px"},adjustRootChildrenSize:function(){var scrollbarWidth=getScrollbarWidth();this.clone.wtTable.hider.style.width=this.hider.style.width,this.clone.wtTable.holder.style.width=this.clone.wtTable.holder.parentNode.style.width,0===scrollbarWidth&&(scrollbarWidth=30),this.clone.wtTable.holder.style.height=parseInt(this.clone.wtTable.holder.parentNode.style.height,10)+scrollbarWidth+"px"},applyToDOM:function(){var total=this.wot.getSetting("totalRows");if(this.areElementSizesAdjusted||this.adjustElementsSize(),"number"==typeof this.wot.wtViewport.rowsRenderCalculator.startPosition)this.spreader.style.top=this.wot.wtViewport.rowsRenderCalculator.startPosition+"px";else{if(0!==total)throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.top="0"}this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()},syncOverlayOffset:function(){"number"==typeof this.wot.wtViewport.columnsRenderCalculator.startPosition?this.clone.wtTable.spreader.style.left=this.wot.wtViewport.columnsRenderCalculator.startPosition+"px":this.clone.wtTable.spreader.style.left=""},scrollTo:function(sourceRow,bottomEdge){var newY=this.getTableParentOffset(),sourceInstance=this.wot.cloneSource?this.wot.cloneSource:this.wot,mainHolder=sourceInstance.wtTable.holder,scrollbarCompensation=0;if(bottomEdge&&mainHolder.offsetHeight!==mainHolder.clientHeight&&(scrollbarCompensation=getScrollbarWidth()),bottomEdge){var fixedRowsBottom=this.wot.getSetting("fixedRowsBottom"),totalRows=(this.wot.getSetting("fixedRowsTop"),this.wot.getSetting("totalRows"));newY+=this.sumCellSizes(0,sourceRow+1),newY-=this.wot.wtViewport.getViewportHeight()-this.sumCellSizes(totalRows-fixedRowsBottom,totalRows),newY+=1}else newY+=this.sumCellSizes(this.wot.getSetting("fixedRowsTop"),sourceRow);newY+=scrollbarCompensation,this.setScrollPosition(newY)},getTableParentOffset:function(){return this.mainTableScrollableElement===window?this.wot.wtTable.holderOffset.top:0},getScrollPosition:function(){return getScrollTop(this.mainTableScrollableElement)},adjustHeaderBordersPosition:function(position){var masterParent=this.wot.wtTable.holder.parentNode,totalColumns=this.wot.getSetting("totalColumns");if(totalColumns?removeClass(masterParent,"emptyColumns"):addClass(masterParent,"emptyColumns"),0===this.wot.getSetting("fixedRowsTop")&&this.wot.getSetting("columnHeaders").length>0){var previousState=hasClass(masterParent,"innerBorderTop");position||0===this.wot.getSetting("totalRows")?addClass(masterParent,"innerBorderTop"):removeClass(masterParent,"innerBorderTop"),(!previousState&&position||previousState&&!position)&&this.wot.wtOverlays.adjustElementsSize()}if(0===this.wot.getSetting("rowHeaders").length){var secondHeaderCell=this.clone.wtTable.THEAD.querySelectorAll("th:nth-of-type(2)");if(secondHeaderCell)for(var i=0;i<secondHeaderCell.length;i++)secondHeaderCell[i].style["border-left-width"]=0}}},{},WalkontableOverlay),window.WalkontableTopOverlay=WalkontableTopOverlay,WalkontableOverlay.registerOverlay(WalkontableOverlay.CLONE_TOP,WalkontableTopOverlay)},{_base:12,"helpers/dom/element":47}],16:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableTopLeftCornerOverlay:{get:function(){return WalkontableTopLeftCornerOverlay}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___95_base__,$__0=($___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),outerHeight=$__0.outerHeight,outerWidth=$__0.outerWidth,setOverlayPosition=$__0.setOverlayPosition,resetCssTransform=$__0.resetCssTransform,WalkontableOverlay=($___95_base__=_dereq_("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{"default":$___95_base__}).WalkontableOverlay,WalkontableTopLeftCornerOverlay=function(wotInstance){$traceurRuntime.superConstructor($WalkontableTopLeftCornerOverlay).call(this,wotInstance),this.clone=this.makeClone(WalkontableOverlay.CLONE_TOP_LEFT_CORNER)},$WalkontableTopLeftCornerOverlay=WalkontableTopLeftCornerOverlay;$traceurRuntime.createClass(WalkontableTopLeftCornerOverlay,{shouldBeRendered:function(){return!(!this.wot.getSetting("fixedRowsTop")&&!this.wot.getSetting("columnHeaders").length||!this.wot.getSetting("fixedColumnsLeft")&&!this.wot.getSetting("rowHeaders").length)},resetFixedPosition:function(){if(this.updateTrimmingContainer(),this.wot.wtTable.holder.parentNode){var overlayRoot=this.clone.wtTable.holder.parentNode,tableHeight=outerHeight(this.clone.wtTable.TABLE),tableWidth=outerWidth(this.clone.wtTable.TABLE),preventOverflow=this.wot.getSetting("preventOverflow");if(this.trimmingContainer===window){var box=this.wot.wtTable.hider.getBoundingClientRect(),top=Math.ceil(box.top),left=Math.ceil(box.left),bottom=Math.ceil(box.bottom),right=Math.ceil(box.right),finalLeft="0",finalTop="0";preventOverflow&&"vertical"!==preventOverflow||left<0&&right-overlayRoot.offsetWidth>0&&(finalLeft=-left+"px"),preventOverflow&&"horizontal"!==preventOverflow||top<0&&bottom-overlayRoot.offsetHeight>0&&(finalTop=-top+"px"),setOverlayPosition(overlayRoot,finalLeft,finalTop)}else resetCssTransform(overlayRoot);overlayRoot.style.height=(0===tableHeight?tableHeight:tableHeight+4)+"px",overlayRoot.style.width=(0===tableWidth?tableWidth:tableWidth+4)+"px"}}},{},WalkontableOverlay),window.WalkontableTopLeftCornerOverlay=WalkontableTopLeftCornerOverlay,WalkontableOverlay.registerOverlay(WalkontableOverlay.CLONE_TOP_LEFT_CORNER,WalkontableTopLeftCornerOverlay)},{_base:12,"helpers/dom/element":47}],17:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableOverlays:{get:function(){return WalkontableOverlays}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47__46__46__47_helpers_47_unicode__,$___46__46__47__46__46__47__46__46__47_helpers_47_browser__,$___46__46__47__46__46__47__46__46__47_eventManager__,$__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),getScrollableElement=$__0.getScrollableElement,getScrollbarWidth=$__0.getScrollbarWidth,getScrollLeft=$__0.getScrollLeft,getScrollTop=$__0.getScrollTop,arrayEach=($___46__46__47__46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_array__}).arrayEach,isKey=($___46__46__47__46__46__47__46__46__47_helpers_47_unicode__=_dereq_("helpers/unicode"),$___46__46__47__46__46__47__46__46__47_helpers_47_unicode__&&$___46__46__47__46__46__47__46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_unicode__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_unicode__}).isKey,isMobileBrowser=($___46__46__47__46__46__47__46__46__47_helpers_47_browser__=_dereq_("helpers/browser"),$___46__46__47__46__46__47__46__46__47_helpers_47_browser__&&$___46__46__47__46__46__47__46__46__47_helpers_47_browser__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_browser__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_browser__}).isMobileBrowser,EventManager=($___46__46__47__46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47__46__46__47_eventManager__}).EventManager,WalkontableOverlays=function(wotInstance){this.wot=wotInstance,this.instance=this.wot,this.eventManager=new EventManager(this.wot),this.wot.update("scrollbarWidth",getScrollbarWidth()),this.wot.update("scrollbarHeight",getScrollbarWidth()),this.scrollableElement=getScrollableElement(this.wot.wtTable.TABLE),this.topOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_TOP,this.wot),"undefined"==typeof WalkontableBottomOverlay?this.bottomOverlay={needFullRender:!1}:this.bottomOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_BOTTOM,this.wot),this.leftOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_LEFT,this.wot),this.topOverlay.needFullRender&&this.leftOverlay.needFullRender&&(this.topLeftCornerOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_TOP_LEFT_CORNER,this.wot)),this.bottomOverlay.needFullRender&&this.leftOverlay.needFullRender&&"undefined"!=typeof WalkontableBottomLeftCornerOverlay?this.bottomLeftCornerOverlay=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER,this.wot):this.bottomLeftCornerOverlay={needFullRender:!1},this.wot.getSetting("debug")&&(this.debug=WalkontableOverlay.createOverlay(WalkontableOverlay.CLONE_DEBUG,this.wot)),this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.overlayScrollPositions={master:{top:0,left:0},top:{top:null,left:0},bottom:{top:null,left:0},left:{top:0,left:null}},this.pendingScrollCallbacks={master:{top:0,left:0},top:{left:0},bottom:{left:0},left:{top:0}},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.delegatedScrollCallback=!1,this.registeredListeners=[],this.registerListeners()};$traceurRuntime.createClass(WalkontableOverlays,{refreshAll:function(){if(this.wot.drawn){if(!this.wot.wtTable.holder.parentNode)return void this.destroy();this.wot.draw(!0),this.verticalScrolling&&this.leftOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1}},registerListeners:function(){var $__5=this,topOverlayScrollable=this.topOverlay.mainTableScrollableElement,leftOverlayScrollable=this.leftOverlay.mainTableScrollableElement,listenersToRegister=[];for(listenersToRegister.push([document.documentElement,"keydown",function(event){return $__5.onKeyDown(event)}]),listenersToRegister.push([document.documentElement,"keyup",function(){return $__5.onKeyUp()}]),listenersToRegister.push([document,"visibilitychange",function(){return $__5.onKeyUp()}]),listenersToRegister.push([topOverlayScrollable,"scroll",function(event){return $__5.onTableScroll(event)}]),topOverlayScrollable!==leftOverlayScrollable&&listenersToRegister.push([leftOverlayScrollable,"scroll",function(event){return $__5.onTableScroll(event)}]),this.topOverlay.needFullRender&&(listenersToRegister.push([this.topOverlay.clone.wtTable.holder,"scroll",function(event){return $__5.onTableScroll(event)}]),listenersToRegister.push([this.topOverlay.clone.wtTable.holder,"wheel",function(event){return $__5.onTableScroll(event)}])),this.bottomOverlay.needFullRender&&(listenersToRegister.push([this.bottomOverlay.clone.wtTable.holder,"scroll",function(event){return $__5.onTableScroll(event)}]),listenersToRegister.push([this.bottomOverlay.clone.wtTable.holder,"wheel",function(event){return $__5.onTableScroll(event)}])),this.leftOverlay.needFullRender&&(listenersToRegister.push([this.leftOverlay.clone.wtTable.holder,"scroll",function(event){return $__5.onTableScroll(event)}]),listenersToRegister.push([this.leftOverlay.clone.wtTable.holder,"wheel",function(event){return $__5.onTableScroll(event)}])),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.needFullRender&&listenersToRegister.push([this.topLeftCornerOverlay.clone.wtTable.holder,"wheel",function(event){return $__5.onTableScroll(event)}]),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.needFullRender&&listenersToRegister.push([this.bottomLeftCornerOverlay.clone.wtTable.holder,"wheel",function(event){return $__5.onTableScroll(event)}]),this.topOverlay.trimmingContainer!==window&&this.leftOverlay.trimmingContainer!==window&&listenersToRegister.push([window,"wheel",function(event){var overlay,deltaY=event.wheelDeltaY||event.deltaY,deltaX=event.wheelDeltaX||event.deltaX;$__5.topOverlay.clone.wtTable.holder.contains(event.realTarget)?overlay="top":$__5.bottomOverlay.clone&&$__5.bottomOverlay.clone.wtTable.holder.contains(event.realTarget)?overlay="bottom":$__5.leftOverlay.clone.wtTable.holder.contains(event.realTarget)?overlay="left":$__5.topLeftCornerOverlay&&$__5.topLeftCornerOverlay.clone&&$__5.topLeftCornerOverlay.clone.wtTable.holder.contains(event.realTarget)?overlay="topLeft":$__5.bottomLeftCornerOverlay&&$__5.bottomLeftCornerOverlay.clone&&$__5.bottomLeftCornerOverlay.clone.wtTable.holder.contains(event.realTarget)&&(overlay="bottomLeft"),("top"==overlay&&0!==deltaY||"left"==overlay&&0!==deltaX||"bottom"==overlay&&0!==deltaY||("topLeft"===overlay||"bottomLeft"===overlay)&&(0!==deltaY||0!==deltaX))&&event.preventDefault()}]);listenersToRegister.length;){var listener=listenersToRegister.pop();this.eventManager.addEventListener(listener[0],listener[1],listener[2]),this.registeredListeners.push(listener)}},deregisterListeners:function(){for(;this.registeredListeners.length;){var listener=this.registeredListeners.pop();this.eventManager.removeEventListener(listener[0],listener[1],listener[2])}},onTableScroll:function(event){if(!isMobileBrowser()){var masterHorizontal=this.leftOverlay.mainTableScrollableElement,masterVertical=this.topOverlay.mainTableScrollableElement,target=event.target;this.keyPressed&&(masterVertical!==window&&target!==window&&!event.target.contains(masterVertical)||masterHorizontal!==window&&target!==window&&!event.target.contains(masterHorizontal))||("scroll"===event.type?this.syncScrollPositions(event):this.translateMouseWheelToScroll(event))}},onKeyDown:function(event){this.keyPressed=isKey(event.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")},onKeyUp:function(){this.keyPressed=!1},translateMouseWheelToScroll:function(event){var topOverlay=this.topOverlay.clone.wtTable.holder,bottomOverlay=this.bottomOverlay.clone?this.bottomOverlay.clone.wtTable.holder:null,leftOverlay=this.leftOverlay.clone.wtTable.holder,topLeftCornerOverlay=this.topLeftCornerOverlay&&this.topLeftCornerOverlay.clone?this.topLeftCornerOverlay.clone.wtTable.holder:null,bottomLeftCornerOverlay=this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone?this.bottomLeftCornerOverlay.clone.wtTable.holder:null,mouseWheelSpeedRatio=-.2,deltaY=event.wheelDeltaY||-1*event.deltaY,deltaX=event.wheelDeltaX||-1*event.deltaX,parentHolder=null,eventMockup={type:"wheel"},tempElem=event.target,delta=null;for(1===event.deltaMode&&(deltaY=120*deltaY,deltaX=120*deltaX);tempElem!=document&&null!=tempElem;){if(tempElem.className.indexOf("wtHolder")>-1){parentHolder=tempElem;break}tempElem=tempElem.parentNode}return eventMockup.target=parentHolder,parentHolder===topLeftCornerOverlay||parentHolder===bottomLeftCornerOverlay?(this.syncScrollPositions(eventMockup,mouseWheelSpeedRatio*deltaX,"x"),this.syncScrollPositions(eventMockup,mouseWheelSpeedRatio*deltaY,"y")):(parentHolder===topOverlay||parentHolder===bottomOverlay?delta=deltaY:parentHolder===leftOverlay&&(delta=deltaX),this.syncScrollPositions(eventMockup,mouseWheelSpeedRatio*delta)),!1},syncScrollPositions:function(event){var fakeScrollValue=void 0!==arguments[1]?arguments[1]:null,fakeScrollDirection=void 0!==arguments[2]?arguments[2]:null;if(!this.destroyed){if(0===arguments.length)return void this.syncScrollWithMaster();var topOverlay,leftOverlay,topLeftCornerOverlay,bottomLeftCornerOverlay,bottomOverlay,masterHorizontal=this.leftOverlay.mainTableScrollableElement,masterVertical=this.topOverlay.mainTableScrollableElement,target=event.target,tempScrollValue=0,scrollValueChanged=!1,delegatedScroll=!1,preventOverflow=this.wot.getSetting("preventOverflow");this.topOverlay.needFullRender&&(topOverlay=this.topOverlay.clone.wtTable.holder),this.bottomOverlay.needFullRender&&(bottomOverlay=this.bottomOverlay.clone.wtTable.holder),this.leftOverlay.needFullRender&&(leftOverlay=this.leftOverlay.clone.wtTable.holder),this.leftOverlay.needFullRender&&this.topOverlay.needFullRender&&(topLeftCornerOverlay=this.topLeftCornerOverlay.clone.wtTable.holder),this.leftOverlay.needFullRender&&this.bottomOverlay.needFullRender&&(bottomLeftCornerOverlay=this.bottomLeftCornerOverlay.clone.wtTable.holder),target===document&&(target=window),target===masterHorizontal||target===masterVertical?(tempScrollValue=getScrollLeft(preventOverflow?this.scrollableElement:target),this.horizontalScrolling=!0,this.overlayScrollPositions.master.left=tempScrollValue,scrollValueChanged=!0,this.pendingScrollCallbacks.master.left>0?this.pendingScrollCallbacks.master.left--:(topOverlay&&topOverlay.scrollLeft!==tempScrollValue&&(null==fakeScrollValue&&this.pendingScrollCallbacks.top.left++,topOverlay.scrollLeft=tempScrollValue,delegatedScroll=masterHorizontal!==window),bottomOverlay&&bottomOverlay.scrollLeft!==tempScrollValue&&(null==fakeScrollValue&&this.pendingScrollCallbacks.bottom.left++,bottomOverlay.scrollLeft=tempScrollValue,delegatedScroll=masterHorizontal!==window)),tempScrollValue=getScrollTop(target),this.verticalScrolling=!0,this.overlayScrollPositions.master.top=tempScrollValue,scrollValueChanged=!0,this.pendingScrollCallbacks.master.top>0?this.pendingScrollCallbacks.master.top--:leftOverlay&&leftOverlay.scrollTop!==tempScrollValue&&(null==fakeScrollValue&&this.pendingScrollCallbacks.left.top++,leftOverlay.scrollTop=tempScrollValue,delegatedScroll=masterVertical!==window)):target===bottomOverlay?(tempScrollValue=getScrollLeft(target),this.horizontalScrolling=!0,this.overlayScrollPositions.bottom.left=tempScrollValue,scrollValueChanged=!0,this.pendingScrollCallbacks.bottom.left>0?this.pendingScrollCallbacks.bottom.left--:(null==fakeScrollValue&&this.pendingScrollCallbacks.master.left++,masterHorizontal.scrollLeft=tempScrollValue,topOverlay&&topOverlay.scrollLeft!==tempScrollValue&&(null==fakeScrollValue&&this.pendingScrollCallbacks.top.left++,topOverlay.scrollLeft=tempScrollValue,delegatedScroll=masterVertical!==window)),null!==fakeScrollValue&&(scrollValueChanged=!0,masterVertical.scrollTop+=fakeScrollValue)):target===topOverlay?(tempScrollValue=getScrollLeft(target),this.horizontalScrolling=!0,this.overlayScrollPositions.top.left=tempScrollValue,scrollValueChanged=!0,this.pendingScrollCallbacks.top.left>0?this.pendingScrollCallbacks.top.left--:(null==fakeScrollValue&&this.pendingScrollCallbacks.master.left++,masterHorizontal.scrollLeft=tempScrollValue),null!==fakeScrollValue&&(scrollValueChanged=!0,masterVertical.scrollTop+=fakeScrollValue),bottomOverlay&&bottomOverlay.scrollLeft!==tempScrollValue&&(null==fakeScrollValue&&this.pendingScrollCallbacks.bottom.left++,bottomOverlay.scrollLeft=tempScrollValue,delegatedScroll=masterVertical!==window)):target===leftOverlay?(tempScrollValue=getScrollTop(target),this.overlayScrollPositions.left.top!==tempScrollValue&&(this.verticalScrolling=!0,this.overlayScrollPositions.left.top=tempScrollValue,scrollValueChanged=!0,this.pendingScrollCallbacks.left.top>0?this.pendingScrollCallbacks.left.top--:(null==fakeScrollValue&&this.pendingScrollCallbacks.master.top++,masterVertical.scrollTop=tempScrollValue)),null!==fakeScrollValue&&(scrollValueChanged=!0,masterVertical.scrollLeft+=fakeScrollValue)):target!==topLeftCornerOverlay&&target!==bottomLeftCornerOverlay||null!==fakeScrollValue&&(scrollValueChanged=!0,"x"===fakeScrollDirection?masterVertical.scrollLeft+=fakeScrollValue:"y"===fakeScrollDirection&&(masterVertical.scrollTop+=fakeScrollValue)),!this.keyPressed&&scrollValueChanged&&"scroll"===event.type&&(this.delegatedScrollCallback?this.delegatedScrollCallback=!1:this.refreshAll(),delegatedScroll&&(this.delegatedScrollCallback=!0))}},syncScrollWithMaster:function(){var master=this.topOverlay.mainTableScrollableElement;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=master.scrollLeft),this.leftOverlay.needFullRender&&(this.leftOverlay.clone.wtTable.holder.scrollTop=master.scrollTop)},updateMainScrollableElements:function(){this.deregisterListeners(),this.leftOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement(),this.scrollableElement=getScrollableElement(this.wot.wtTable.TABLE),this.registerListeners()},destroy:function(){this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.leftOverlay.destroy(),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.destroy(),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone&&this.bottomLeftCornerOverlay.destroy(),this.debug&&this.debug.destroy(),this.destroyed=!0},refresh:function(){var fastDraw=void 0!==arguments[0]&&arguments[0];if(this.topOverlay.areElementSizesAdjusted&&this.leftOverlay.areElementSizesAdjusted){var container=this.wot.wtTable.wtRootElement.parentNode||this.wot.wtTable.wtRootElement,width=container.clientWidth,height=container.clientHeight;width===this.spreaderLastSize.width&&height===this.spreaderLastSize.height||(this.spreaderLastSize.width=width,this.spreaderLastSize.height=height,this.adjustElementsSize())}this.bottomOverlay.clone&&this.bottomOverlay.refresh(fastDraw),this.leftOverlay.refresh(fastDraw),this.topOverlay.refresh(fastDraw),this.topLeftCornerOverlay&&this.topLeftCornerOverlay.refresh(fastDraw),this.bottomLeftCornerOverlay&&this.bottomLeftCornerOverlay.clone&&this.bottomLeftCornerOverlay.refresh(fastDraw),this.debug&&this.debug.refresh(fastDraw)},adjustElementsSize:function(){var force=void 0!==arguments[0]&&arguments[0],totalColumns=this.wot.getSetting("totalColumns"),totalRows=this.wot.getSetting("totalRows"),headerRowSize=this.wot.wtViewport.getRowHeaderWidth(),headerColumnSize=this.wot.wtViewport.getColumnHeaderHeight(),hiderStyle=this.wot.wtTable.hider.style;hiderStyle.width=headerRowSize+this.leftOverlay.sumCellSizes(0,totalColumns)+"px",hiderStyle.height=headerColumnSize+this.topOverlay.sumCellSizes(0,totalRows)+1+"px",this.topOverlay.adjustElementsSize(force),this.leftOverlay.adjustElementsSize(force),this.bottomOverlay.clone&&this.bottomOverlay.adjustElementsSize(force)},applyToDOM:function(){this.topOverlay.areElementSizesAdjusted&&this.leftOverlay.areElementSizesAdjusted||this.adjustElementsSize(),this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.leftOverlay.applyToDOM()},getParentOverlay:function(element){if(!element)return null;var overlays=[this.topOverlay,this.leftOverlay,this.bottomOverlay,this.topLeftCornerOverlay,this.bottomLeftCornerOverlay],result=null;return arrayEach(overlays,function(elem,i){elem&&elem.clone&&elem.clone.wtTable.TABLE.contains(element)&&(result=elem.clone)}),result}},{}),window.WalkontableOverlays=WalkontableOverlays},{eventManager:42,"helpers/array":43,"helpers/browser":44,"helpers/dom/element":47,"helpers/unicode":56}],18:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableScroll:{get:function(){return WalkontableScroll}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_helpers_47_number__,$__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),innerHeight=$__0.innerHeight,innerWidth=$__0.innerWidth,getScrollLeft=$__0.getScrollLeft,getScrollTop=$__0.getScrollTop,offset=$__0.offset,$__1=($___46__46__47__46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_number__}),rangeEach=$__1.rangeEach,rangeEachReverse=$__1.rangeEachReverse,WalkontableScroll=function(wotInstance){this.wot=wotInstance,this.instance=wotInstance};$traceurRuntime.createClass(WalkontableScroll,{scrollViewport:function(coords){if(this.wot.drawn){var $__3=this._getVariables(),topOverlay=$__3.topOverlay,leftOverlay=$__3.leftOverlay,totalRows=$__3.totalRows,totalColumns=$__3.totalColumns,fixedRowsTop=$__3.fixedRowsTop,fixedRowsBottom=$__3.fixedRowsBottom,fixedColumnsLeft=$__3.fixedColumnsLeft;if(coords.row<0||coords.row>Math.max(totalRows-1,0))throw new Error("row "+coords.row+" does not exist");if(coords.col<0||coords.col>Math.max(totalColumns-1,0))throw new Error("column "+coords.col+" does not exist");coords.row>=fixedRowsTop&&coords.row<this.getFirstVisibleRow()?topOverlay.scrollTo(coords.row):coords.row>this.getLastVisibleRow()&&coords.row<totalRows-fixedRowsBottom&&topOverlay.scrollTo(coords.row,!0),coords.col>=fixedColumnsLeft&&coords.col<this.getFirstVisibleColumn()?leftOverlay.scrollTo(coords.col):coords.col>this.getLastVisibleColumn()&&leftOverlay.scrollTo(coords.col,!0)}},getFirstVisibleRow:function(){var $__3=this._getVariables(),topOverlay=$__3.topOverlay,wtTable=$__3.wtTable,wtViewport=$__3.wtViewport,totalRows=$__3.totalRows,fixedRowsTop=$__3.fixedRowsTop,firstVisibleRow=wtTable.getFirstVisibleRow();if(topOverlay.mainTableScrollableElement===window){var rootElementOffset=offset(wtTable.wtRootElement),totalTableHeight=innerHeight(wtTable.hider),windowHeight=innerHeight(window),windowScrollTop=getScrollTop(window);if(rootElementOffset.top+totalTableHeight-windowHeight<=windowScrollTop){var rowsHeight=wtViewport.getColumnHeaderHeight();rowsHeight+=topOverlay.sumCellSizes(0,fixedRowsTop),rangeEachReverse(totalRows,1,function(row){if(rowsHeight+=topOverlay.sumCellSizes(row-1,row),rootElementOffset.top+totalTableHeight-rowsHeight<=windowScrollTop)return firstVisibleRow=row,!1})}}return firstVisibleRow},getLastVisibleRow:function(){var $__3=this._getVariables(),topOverlay=$__3.topOverlay,wtTable=$__3.wtTable,wtViewport=$__3.wtViewport,totalRows=$__3.totalRows,lastVisibleRow=wtTable.getLastVisibleRow();if(topOverlay.mainTableScrollableElement===window){var rootElementOffset=offset(wtTable.wtRootElement),windowHeight=innerHeight(window),windowScrollTop=getScrollTop(window);if(rootElementOffset.top>windowScrollTop){var rowsHeight=wtViewport.getColumnHeaderHeight();rangeEach(1,totalRows,function(row){if(rowsHeight+=topOverlay.sumCellSizes(row-1,row),rootElementOffset.top+rowsHeight-windowScrollTop>=windowHeight)return lastVisibleRow=row-2,!1})}}return lastVisibleRow},getFirstVisibleColumn:function(){var $__3=this._getVariables(),leftOverlay=$__3.leftOverlay,wtTable=$__3.wtTable,wtViewport=$__3.wtViewport,totalColumns=$__3.totalColumns,firstVisibleColumn=($__3.fixedColumnsLeft,wtTable.getFirstVisibleColumn());if(leftOverlay.mainTableScrollableElement===window){var rootElementOffset=offset(wtTable.wtRootElement),totalTableWidth=innerWidth(wtTable.hider),windowWidth=innerWidth(window),windowScrollLeft=getScrollLeft(window);if(rootElementOffset.left+totalTableWidth-windowWidth<=windowScrollLeft){var columnsWidth=wtViewport.getRowHeaderWidth();rangeEachReverse(totalColumns,1,function(column){if(columnsWidth+=leftOverlay.sumCellSizes(column-1,column),rootElementOffset.left+totalTableWidth-columnsWidth<=windowScrollLeft)return firstVisibleColumn=column,!1})}}return firstVisibleColumn},getLastVisibleColumn:function(){var $__3=this._getVariables(),leftOverlay=$__3.leftOverlay,wtTable=$__3.wtTable,wtViewport=$__3.wtViewport,totalColumns=$__3.totalColumns,lastVisibleColumn=wtTable.getLastVisibleColumn();if(leftOverlay.mainTableScrollableElement===window){var rootElementOffset=offset(wtTable.wtRootElement),windowWidth=innerWidth(window),windowScrollLeft=getScrollLeft(window);if(rootElementOffset.left>windowScrollLeft){var columnsWidth=wtViewport.getRowHeaderWidth();rangeEach(1,totalColumns,function(column){if(columnsWidth+=leftOverlay.sumCellSizes(column-1,column),rootElementOffset.left+columnsWidth-windowScrollLeft>=windowWidth)return lastVisibleColumn=column-2,!1})}}return lastVisibleColumn},_getVariables:function(){var wot=this.wot,topOverlay=wot.wtOverlays.topOverlay,leftOverlay=wot.wtOverlays.leftOverlay,wtTable=wot.wtTable,wtViewport=wot.wtViewport,totalRows=wot.getSetting("totalRows"),totalColumns=wot.getSetting("totalColumns"),fixedRowsTop=wot.getSetting("fixedRowsTop"),fixedRowsBottom=wot.getSetting("fixedRowsBottom"),fixedColumnsLeft=wot.getSetting("fixedColumnsLeft");return{topOverlay:topOverlay,
leftOverlay:leftOverlay,wtTable:wtTable,wtViewport:wtViewport,totalRows:totalRows,totalColumns:totalColumns,fixedRowsTop:fixedRowsTop,fixedRowsBottom:fixedRowsBottom,fixedColumnsLeft:fixedColumnsLeft}}},{}),window.WalkontableScroll=WalkontableScroll},{"helpers/dom/element":47,"helpers/number":52}],19:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableSelection:{get:function(){return WalkontableSelection}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$__border__,$__cell_47_coords__,$__cell_47_range__,addClass=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}).addClass,WalkontableBorder=($__border__=_dereq_("border"),$__border__&&$__border__.__esModule&&$__border__||{"default":$__border__}).WalkontableBorder,WalkontableCellCoords=($__cell_47_coords__=_dereq_("cell/coords"),$__cell_47_coords__&&$__cell_47_coords__.__esModule&&$__cell_47_coords__||{"default":$__cell_47_coords__}).WalkontableCellCoords,WalkontableCellRange=($__cell_47_range__=_dereq_("cell/range"),$__cell_47_range__&&$__cell_47_range__.__esModule&&$__cell_47_range__||{"default":$__cell_47_range__}).WalkontableCellRange,WalkontableSelection=function(settings,cellRange){this.settings=settings,this.cellRange=cellRange||null,this.instanceBorders={}};$traceurRuntime.createClass(WalkontableSelection,{getBorder:function(wotInstance){return this.instanceBorders[wotInstance.guid]?this.instanceBorders[wotInstance.guid]:void(this.instanceBorders[wotInstance.guid]=new WalkontableBorder(wotInstance,this.settings))},isEmpty:function(){return null===this.cellRange},add:function(coords){this.isEmpty()?this.cellRange=new WalkontableCellRange(coords,coords,coords):this.cellRange.expand(coords)},replace:function(oldCoords,newCoords){if(!this.isEmpty()){if(this.cellRange.from.isEqual(oldCoords))return this.cellRange.from=newCoords,!0;if(this.cellRange.to.isEqual(oldCoords))return this.cellRange.to=newCoords,!0}return!1},clear:function(){this.cellRange=null},getCorners:function(){var topLeft=this.cellRange.getTopLeftCorner(),bottomRight=this.cellRange.getBottomRightCorner();return[topLeft.row,topLeft.col,bottomRight.row,bottomRight.col]},addClassAtCoords:function(wotInstance,sourceRow,sourceColumn,className){var TD=wotInstance.wtTable.getCell(new WalkontableCellCoords(sourceRow,sourceColumn));"object"===("undefined"==typeof TD?"undefined":_typeof(TD))&&addClass(TD,className)},draw:function(wotInstance){if(this.isEmpty()){if(this.settings.border){var border=this.getBorder(wotInstance);border&&border.disappear()}}else{for(var sourceRow,sourceCol,TH,renderedRows=wotInstance.wtTable.getRenderedRowsCount(),renderedColumns=wotInstance.wtTable.getRenderedColumnsCount(),corners=this.getCorners(),column=0;column<renderedColumns;column++)if(sourceCol=wotInstance.wtTable.columnFilter.renderedToSource(column),sourceCol>=corners[1]&&sourceCol<=corners[3]&&(TH=wotInstance.wtTable.getColumnHeader(sourceCol))){var newClasses=[];this.settings.highlightHeaderClassName&&newClasses.push(this.settings.highlightHeaderClassName),this.settings.highlightColumnClassName&&newClasses.push(this.settings.highlightColumnClassName),addClass(TH,newClasses)}for(var row=0;row<renderedRows;row++){if(sourceRow=wotInstance.wtTable.rowFilter.renderedToSource(row),sourceRow>=corners[0]&&sourceRow<=corners[2]&&(TH=wotInstance.wtTable.getRowHeader(sourceRow))){var newClasses$__5=[];this.settings.highlightHeaderClassName&&newClasses$__5.push(this.settings.highlightHeaderClassName),this.settings.highlightRowClassName&&newClasses$__5.push(this.settings.highlightRowClassName),addClass(TH,newClasses$__5)}for(var column$__6=0;column$__6<renderedColumns;column$__6++)sourceCol=wotInstance.wtTable.columnFilter.renderedToSource(column$__6),sourceRow>=corners[0]&&sourceRow<=corners[2]&&sourceCol>=corners[1]&&sourceCol<=corners[3]?this.settings.className&&this.addClassAtCoords(wotInstance,sourceRow,sourceCol,this.settings.className):sourceRow>=corners[0]&&sourceRow<=corners[2]?this.settings.highlightRowClassName&&this.addClassAtCoords(wotInstance,sourceRow,sourceCol,this.settings.highlightRowClassName):sourceCol>=corners[1]&&sourceCol<=corners[3]&&this.settings.highlightColumnClassName&&this.addClassAtCoords(wotInstance,sourceRow,sourceCol,this.settings.highlightColumnClassName)}if(wotInstance.getSetting("onBeforeDrawBorders",corners,this.settings.className),this.settings.border){var border$__7=this.getBorder(wotInstance);border$__7&&border$__7.appear(corners)}}}},{}),window.WalkontableSelection=WalkontableSelection},{border:3,"cell/coords":6,"cell/range":7,"helpers/dom/element":47}],20:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableSettings:{get:function(){return WalkontableSettings}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,fastInnerText=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}).fastInnerText,WalkontableSettings=function(wotInstance,settings){var $__1=this;this.wot=wotInstance,this.instance=wotInstance,this.defaults={table:void 0,debug:!1,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow:function(){return!1},data:void 0,fixedColumnsLeft:0,fixedRowsTop:0,fixedRowsBottom:0,minSpareRows:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:function(row,column,TD){var cellData=$__1.getSetting("data",row,column);fastInnerText(TD,void 0===cellData||null===cellData?"":cellData)},columnWidth:function(col){},rowHeight:function(row){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellMouseOver:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:function(width){return width},onModifyRowHeaderWidth:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null},this.settings={};for(var i in this.defaults)if(this.defaults.hasOwnProperty(i))if(void 0!==settings[i])this.settings[i]=settings[i];else{if(void 0===this.defaults[i])throw new Error('A required setting "'+i+'" was not provided');this.settings[i]=this.defaults[i]}};$traceurRuntime.createClass(WalkontableSettings,{update:function(settings,value){if(void 0===value)for(var i in settings)settings.hasOwnProperty(i)&&(this.settings[i]=settings[i]);else this.settings[settings]=value;return this.wot},getSetting:function(key,param1,param2,param3,param4){return"function"==typeof this.settings[key]?this.settings[key](param1,param2,param3,param4):void 0!==param1&&Array.isArray(this.settings[key])?this.settings[key][param1]:this.settings[key]},has:function(key){return!!this.settings[key]}},{}),window.WalkontableSettings=WalkontableSettings},{"helpers/dom/element":47}],21:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableTable:{get:function(){return WalkontableTable}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$__cell_47_coords__,$__cell_47_range__,$__filter_47_column__,$__filter_47_row__,$__tableRenderer__,$__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),getStyle=$__0.getStyle,getTrimmingContainer=$__0.getTrimmingContainer,hasClass=$__0.hasClass,index=$__0.index,offset=$__0.offset,removeClass=$__0.removeClass,removeTextNodes=$__0.removeTextNodes,overlayContainsElement=$__0.overlayContainsElement,closest=$__0.closest,WalkontableCellCoords=($__cell_47_coords__=_dereq_("cell/coords"),$__cell_47_coords__&&$__cell_47_coords__.__esModule&&$__cell_47_coords__||{"default":$__cell_47_coords__}).WalkontableCellCoords,WalkontableColumnFilter=(($__cell_47_range__=_dereq_("cell/range"),$__cell_47_range__&&$__cell_47_range__.__esModule&&$__cell_47_range__||{"default":$__cell_47_range__}).WalkontableCellRange,($__filter_47_column__=_dereq_("filter/column"),$__filter_47_column__&&$__filter_47_column__.__esModule&&$__filter_47_column__||{"default":$__filter_47_column__}).WalkontableColumnFilter),WalkontableRowFilter=($__filter_47_row__=_dereq_("filter/row"),$__filter_47_row__&&$__filter_47_row__.__esModule&&$__filter_47_row__||{"default":$__filter_47_row__}).WalkontableRowFilter,WalkontableTableRenderer=($__tableRenderer__=_dereq_("tableRenderer"),$__tableRenderer__&&$__tableRenderer__.__esModule&&$__tableRenderer__||{"default":$__tableRenderer__}).WalkontableTableRenderer,WalkontableTable=function(wotInstance,table){this.wot=wotInstance,this.instance=this.wot,this.TABLE=table,this.TBODY=null,this.THEAD=null,this.COLGROUP=null,this.tableOffset=0,this.holderOffset=0,removeTextNodes(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.rowFilter=null,this.columnFilter=null};$traceurRuntime.createClass(WalkontableTable,{fixTableDomTree:function(){this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=document.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=document.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=document.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.wot.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length&&this.THEAD.appendChild(document.createElement("TR"))},createSpreader:function(table){var spreader,parent=table.parentNode;return parent&&1===parent.nodeType&&hasClass(parent,"wtHolder")||(spreader=document.createElement("div"),spreader.className="wtSpreader",parent&&parent.insertBefore(spreader,table),spreader.appendChild(table)),spreader.style.position="relative",spreader},createHider:function(spreader){var hider,parent=spreader.parentNode;return parent&&1===parent.nodeType&&hasClass(parent,"wtHolder")||(hider=document.createElement("div"),hider.className="wtHider",parent&&parent.insertBefore(hider,spreader),hider.appendChild(spreader)),hider},createHolder:function(hider){var holder,parent=hider.parentNode;return parent&&1===parent.nodeType&&hasClass(parent,"wtHolder")||(holder=document.createElement("div"),holder.style.position="relative",holder.className="wtHolder",parent&&parent.insertBefore(holder,hider),this.isWorkingOnClone()||(holder.parentNode.className+="ht_master handsontable"),holder.appendChild(hider)),holder},alignOverlaysWithTrimmingContainer:function(){var trimmingElement=getTrimmingContainer(this.wtRootElement);if(!this.isWorkingOnClone())if(this.holder.parentNode.style.position="relative",trimmingElement===window){var preventOverflow=this.wot.getSetting("preventOverflow");preventOverflow||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible")}else this.holder.style.width=getStyle(trimmingElement,"width"),this.holder.style.height=getStyle(trimmingElement,"height"),this.holder.style.overflow=""},isWorkingOnClone:function(){return!!this.wot.cloneSource},draw:function(fastDraw){var totalRows=this.instance.getSetting("totalRows");if(this.isWorkingOnClone()||(this.holderOffset=offset(this.holder),fastDraw=this.wot.wtViewport.createRenderCalculators(fastDraw)),fastDraw)this.isWorkingOnClone()||this.wot.wtViewport.createVisibleCalculators(),this.wot.wtOverlays&&this.wot.wtOverlays.refresh(!0);else{this.isWorkingOnClone()?this.tableOffset=this.wot.cloneSource.wtTable.tableOffset:this.tableOffset=offset(this.TABLE);var startRow;startRow=WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_DEBUG)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP_LEFT_CORNER)?0:WalkontableOverlay.isOverlayTypeOf(this.instance.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM)||WalkontableOverlay.isOverlayTypeOf(this.instance.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)?Math.max(totalRows-this.wot.getSetting("fixedRowsBottom"),0):this.wot.wtViewport.rowsRenderCalculator.startRow;var startColumn;startColumn=WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_DEBUG)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_LEFT)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_TOP_LEFT_CORNER)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER)?0:this.wot.wtViewport.columnsRenderCalculator.startColumn,this.rowFilter=new WalkontableRowFilter(startRow,totalRows,this.wot.getSetting("columnHeaders").length),this.columnFilter=new WalkontableColumnFilter(startColumn,this.wot.getSetting("totalColumns"),this.wot.getSetting("rowHeaders").length),this.alignOverlaysWithTrimmingContainer(),this._doDraw()}return this.refreshSelections(fastDraw),this.isWorkingOnClone()||(this.wot.wtOverlays.topOverlay.resetFixedPosition(),this.wot.wtOverlays.bottomOverlay.clone&&this.wot.wtOverlays.bottomOverlay.resetFixedPosition(),this.wot.wtOverlays.leftOverlay.resetFixedPosition(),this.wot.wtOverlays.topLeftCornerOverlay&&this.wot.wtOverlays.topLeftCornerOverlay.resetFixedPosition(),this.instance.wtOverlays.bottomLeftCornerOverlay&&this.instance.wtOverlays.bottomLeftCornerOverlay.clone&&this.wot.wtOverlays.bottomLeftCornerOverlay.resetFixedPosition()),this.wot.drawn=!0,this},_doDraw:function(){var wtRenderer=new WalkontableTableRenderer(this);wtRenderer.render()},removeClassFromCells:function(className){for(var nodes=this.TABLE.querySelectorAll("."+className),i=0,len=nodes.length;i<len;i++)removeClass(nodes[i],className)},refreshSelections:function(fastDraw){if(this.wot.selections){var len=this.wot.selections.length;if(fastDraw)for(var i=0;i<len;i++)this.wot.selections[i].settings.className&&this.removeClassFromCells(this.wot.selections[i].settings.className),this.wot.selections[i].settings.highlightHeaderClassName&&this.removeClassFromCells(this.wot.selections[i].settings.highlightHeaderClassName),this.wot.selections[i].settings.highlightRowClassName&&this.removeClassFromCells(this.wot.selections[i].settings.highlightRowClassName),this.wot.selections[i].settings.highlightColumnClassName&&this.removeClassFromCells(this.wot.selections[i].settings.highlightColumnClassName);for(var i$__7=0;i$__7<len;i$__7++)this.wot.selections[i$__7].draw(this.wot,fastDraw)}},getCell:function(coords){if(this.isRowBeforeRenderedRows(coords.row))return-1;if(this.isRowAfterRenderedRows(coords.row))return-2;var TR=this.TBODY.childNodes[this.rowFilter.sourceToRendered(coords.row)];return TR?TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(coords.col)]:void 0},getColumnHeader:function(col){var level=void 0!==arguments[1]?arguments[1]:0,TR=this.THEAD.childNodes[level];if(TR)return TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(col)]},getRowHeader:function(row){if(0===this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0))return null;var TR=this.TBODY.childNodes[this.rowFilter.sourceToRendered(row)];return TR?TR.childNodes[0]:void 0},getCoords:function(TD){"TD"!==TD.nodeName&&"TH"!==TD.nodeName&&(TD=closest(TD,["TD","TH"]));var TR=TD.parentNode,CONTAINER=TR.parentNode,row=index(TR),col=TD.cellIndex;return overlayContainsElement(WalkontableOverlay.CLONE_TOP_LEFT_CORNER,TD)||overlayContainsElement(WalkontableOverlay.CLONE_TOP,TD)?"THEAD"===CONTAINER.nodeName&&(row-=CONTAINER.childNodes.length):row=CONTAINER===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(row):this.rowFilter.renderedToSource(row),col=overlayContainsElement(WalkontableOverlay.CLONE_TOP_LEFT_CORNER,TD)||overlayContainsElement(WalkontableOverlay.CLONE_LEFT,TD)?this.columnFilter.offsettedTH(col):this.columnFilter.visibleRowHeadedColumnToSourceColumn(col),new WalkontableCellCoords(row,col)},getTrForRow:function(row){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(row)]},getFirstRenderedRow:function(){return this.wot.wtViewport.rowsRenderCalculator.startRow},getFirstVisibleRow:function(){return this.wot.wtViewport.rowsVisibleCalculator.startRow},getFirstRenderedColumn:function(){return this.wot.wtViewport.columnsRenderCalculator.startColumn},getFirstVisibleColumn:function(){return this.wot.wtViewport.columnsVisibleCalculator.startColumn},getLastRenderedRow:function(){return this.wot.wtViewport.rowsRenderCalculator.endRow},getLastVisibleRow:function(){return this.wot.wtViewport.rowsVisibleCalculator.endRow},getLastRenderedColumn:function(){return this.wot.wtViewport.columnsRenderCalculator.endColumn},getLastVisibleColumn:function(){return this.wot.wtViewport.columnsVisibleCalculator.endColumn},isRowBeforeRenderedRows:function(row){return this.rowFilter&&this.rowFilter.sourceToRendered(row)<0&&row>=0},isRowAfterViewport:function(row){return this.rowFilter&&this.rowFilter.sourceToRendered(row)>this.getLastVisibleRow()},isRowAfterRenderedRows:function(row){return this.rowFilter&&this.rowFilter.sourceToRendered(row)>this.getLastRenderedRow()},isColumnBeforeViewport:function(column){return this.columnFilter&&this.columnFilter.sourceToRendered(column)<0&&column>=0},isColumnAfterViewport:function(column){return this.columnFilter&&this.columnFilter.sourceToRendered(column)>this.getLastVisibleColumn()},isLastRowFullyVisible:function(){return this.getLastVisibleRow()===this.getLastRenderedRow()},isLastColumnFullyVisible:function(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()},getRenderedColumnsCount:function(){var columnsCount=this.wot.wtViewport.columnsRenderCalculator.count,totalColumns=this.wot.getSetting("totalColumns");if(this.wot.isOverlayName(WalkontableOverlay.CLONE_DEBUG))columnsCount=totalColumns;else if(this.wot.isOverlayName(WalkontableOverlay.CLONE_LEFT)||this.wot.isOverlayName(WalkontableOverlay.CLONE_TOP_LEFT_CORNER)||this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER))return Math.min(this.wot.getSetting("fixedColumnsLeft"),totalColumns);return columnsCount},getRenderedRowsCount:function(){var rowsCount=this.wot.wtViewport.rowsRenderCalculator.count,totalRows=this.wot.getSetting("totalRows");return this.wot.isOverlayName(WalkontableOverlay.CLONE_DEBUG)?rowsCount=totalRows:this.wot.isOverlayName(WalkontableOverlay.CLONE_TOP)||this.wot.isOverlayName(WalkontableOverlay.CLONE_TOP_LEFT_CORNER)?rowsCount=Math.min(this.wot.getSetting("fixedRowsTop"),totalRows):(this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM)||this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER))&&(rowsCount=Math.min(this.wot.getSetting("fixedRowsBottom"),totalRows)),rowsCount},getVisibleRowsCount:function(){return this.wot.wtViewport.rowsVisibleCalculator.count},allRowsInViewport:function(){return this.wot.getSetting("totalRows")==this.getVisibleRowsCount()},getRowHeight:function(sourceRow){var height=this.wot.wtSettings.settings.rowHeight(sourceRow),oversizedHeight=this.wot.wtViewport.oversizedRows[sourceRow];return void 0!==oversizedHeight&&(height=void 0===height?oversizedHeight:Math.max(height,oversizedHeight)),height},getColumnHeaderHeight:function(level){var height=this.wot.wtSettings.settings.defaultRowHeight,oversizedHeight=this.wot.wtViewport.oversizedColumnHeaders[level];return void 0!==oversizedHeight&&(height=height?Math.max(height,oversizedHeight):oversizedHeight),height},getVisibleColumnsCount:function(){return this.wot.wtViewport.columnsVisibleCalculator.count},allColumnsInViewport:function(){return this.wot.getSetting("totalColumns")==this.getVisibleColumnsCount()},getColumnWidth:function(sourceColumn){var width=this.wot.wtSettings.settings.columnWidth;return"function"==typeof width?width=width(sourceColumn):"object"===("undefined"==typeof width?"undefined":_typeof(width))&&(width=width[sourceColumn]),width||this.wot.wtSettings.settings.defaultColumnWidth},getStretchedColumnWidth:function(sourceColumn){var columnWidth=this.getColumnWidth(sourceColumn),width=null==columnWidth?this.instance.wtSettings.settings.defaultColumnWidth:columnWidth,calculator=this.wot.wtViewport.columnsRenderCalculator;if(calculator){var stretchedWidth=calculator.getStretchedColumnWidth(sourceColumn,width);stretchedWidth&&(width=stretchedWidth)}return width}},{}),window.WalkontableTable=WalkontableTable},{"cell/coords":6,"cell/range":7,"filter/column":10,"filter/row":11,"helpers/dom/element":47,tableRenderer:22}],22:[function(_dereq_,module,exports){function replaceTdWithTh(TD,TR){var TH=document.createElement("TH");return TR.insertBefore(TH,TD),TR.removeChild(TD),TH}function replaceThWithTd(TH,TR){var TD=document.createElement("TD");return TR.insertBefore(TD,TH),TR.removeChild(TH),TD}Object.defineProperties(exports,{WalkontableTableRenderer:{get:function(){return WalkontableTableRenderer}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$__0=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,empty=$__0.empty,getScrollbarWidth=$__0.getScrollbarWidth,hasClass=$__0.hasClass,innerHeight=$__0.innerHeight,outerWidth=$__0.outerWidth,performanceWarningAppeared=!1,WalkontableTableRenderer=function(wtTable){this.wtTable=wtTable,this.wot=wtTable.instance,this.instance=wtTable.instance,this.rowFilter=wtTable.rowFilter,this.columnFilter=wtTable.columnFilter,this.TABLE=wtTable.TABLE,this.THEAD=wtTable.THEAD,this.TBODY=wtTable.TBODY,this.COLGROUP=wtTable.COLGROUP,this.rowHeaders=[],this.rowHeaderCount=0,this.columnHeaders=[],this.columnHeaderCount=0,this.fixedRowsTop=0,this.fixedRowsBottom=0};$traceurRuntime.createClass(WalkontableTableRenderer,{render:function(){if(!this.wtTable.isWorkingOnClone()){var skipRender={};if(this.wot.getSetting("beforeDraw",!0,skipRender),skipRender.skipRender===!0)return}this.rowHeaders=this.wot.getSetting("rowHeaders"),this.rowHeaderCount=this.rowHeaders.length,this.fixedRowsTop=this.wot.getSetting("fixedRowsTop"),this.fixedRowsBottom=this.wot.getSetting("fixedRowsBottom"),this.columnHeaders=this.wot.getSetting("columnHeaders"),this.columnHeaderCount=this.columnHeaders.length;var workspaceWidth,columnsToRender=this.wtTable.getRenderedColumnsCount(),rowsToRender=this.wtTable.getRenderedRowsCount(),totalColumns=this.wot.getSetting("totalColumns"),totalRows=this.wot.getSetting("totalRows"),adjusted=!1;if((WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM)||WalkontableOverlay.isOverlayTypeOf(this.wot.cloneOverlay,WalkontableOverlay.CLONE_BOTTOM_LEFT_CORNER))&&(this.columnHeaders=[],this.columnHeaderCount=0),totalColumns>=0&&(this.adjustAvailableNodes(),adjusted=!0,this.renderColumnHeaders(),this.renderRows(totalRows,rowsToRender,columnsToRender),this.wtTable.isWorkingOnClone()||(workspaceWidth=this.wot.wtViewport.getWorkspaceWidth(),this.wot.wtViewport.containerWidth=null),this.adjustColumnWidths(columnsToRender),this.markOversizedColumnHeaders(),this.adjustColumnHeaderHeights()),adjusted||this.adjustAvailableNodes(),this.removeRedundantRows(rowsToRender),this.wtTable.isWorkingOnClone()&&!this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM)||this.markOversizedRows(),this.wtTable.isWorkingOnClone())this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM)&&this.wot.cloneSource.wtOverlays.adjustElementsSize();else{this.wot.wtViewport.createVisibleCalculators(),this.wot.wtOverlays.refresh(!1),this.wot.wtOverlays.applyToDOM();var hiderWidth=outerWidth(this.wtTable.hider),tableWidth=outerWidth(this.wtTable.TABLE);if(0!==hiderWidth&&tableWidth!==hiderWidth&&this.adjustColumnWidths(columnsToRender),workspaceWidth!==this.wot.wtViewport.getWorkspaceWidth()){this.wot.wtViewport.containerWidth=null;var firstRendered=this.wtTable.getFirstRenderedColumn(),lastRendered=this.wtTable.getLastRenderedColumn(),rowHeaderWidthSetting=this.wot.getSetting("rowHeaderWidth");if(rowHeaderWidthSetting=this.instance.getSetting("onModifyRowHeaderWidth",rowHeaderWidthSetting)||rowHeaderWidthSetting,null!=rowHeaderWidthSetting)for(var i=0;i<this.rowHeaderCount;i++)this.COLGROUP.childNodes[i].style.width=(isNaN(rowHeaderWidthSetting)?rowHeaderWidthSetting[i]:rowHeaderWidthSetting)+"px";for(var i$__2=firstRendered;i$__2<lastRendered;i$__2++){var width=this.wtTable.getStretchedColumnWidth(i$__2),renderedIndex=this.columnFilter.sourceToRendered(i$__2);this.COLGROUP.childNodes[renderedIndex+this.rowHeaderCount].style.width=width+"px"}}this.wot.getSetting("onDraw",!0)}},removeRedundantRows:function(renderedRowsCount){for(;this.wtTable.tbodyChildrenLength>renderedRowsCount;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--},renderRows:function(totalRows,rowsToRender,columnsToRender){for(var lastTD,TR,visibleRowIndex=0,sourceRowIndex=this.rowFilter.renderedToSource(visibleRowIndex),isWorkingOnClone=this.wtTable.isWorkingOnClone();sourceRowIndex<totalRows&&sourceRowIndex>=0&&(!performanceWarningAppeared&&visibleRowIndex>1e3&&(performanceWarningAppeared=!0,console.warn('Performance tip: Handsontable rendered more than 1000 visible rows. Consider limiting the number of rendered rows by specifying the table height and/or turning off the "renderAllRows" option.')),void 0===rowsToRender||visibleRowIndex!==rowsToRender);){if(TR=this.getOrCreateTrForRow(visibleRowIndex,TR),this.renderRowHeaders(sourceRowIndex,TR),this.adjustColumns(TR,columnsToRender+this.rowHeaderCount),lastTD=this.renderCells(sourceRowIndex,TR,columnsToRender),isWorkingOnClone&&!this.wot.isOverlayName(WalkontableOverlay.CLONE_BOTTOM)||this.resetOversizedRow(sourceRowIndex),TR.firstChild){var height=this.wot.wtTable.getRowHeight(sourceRowIndex);height?(height--,TR.firstChild.style.height=height+"px"):TR.firstChild.style.height=""}visibleRowIndex++,sourceRowIndex=this.rowFilter.renderedToSource(visibleRowIndex)}},resetOversizedRow:function(sourceRow){this.wot.getSetting("externalRowCalculator")||this.wot.wtViewport.oversizedRows&&this.wot.wtViewport.oversizedRows[sourceRow]&&(this.wot.wtViewport.oversizedRows[sourceRow]=void 0)},markOversizedRows:function(){if(!this.wot.getSetting("externalRowCalculator")){var previousRowHeight,rowInnerHeight,sourceRowIndex,currentTr,rowHeader,rowCount=this.instance.wtTable.TBODY.childNodes.length,expectedTableHeight=rowCount*this.instance.wtSettings.settings.defaultRowHeight,actualTableHeight=innerHeight(this.instance.wtTable.TBODY)-1;this.instance.getSetting("totalRows");if(expectedTableHeight!==actualTableHeight||this.instance.getSetting("fixedRowsBottom"))for(;rowCount;)rowCount--,sourceRowIndex=this.instance.wtTable.rowFilter.renderedToSource(rowCount),previousRowHeight=this.instance.wtTable.getRowHeight(sourceRowIndex),currentTr=this.instance.wtTable.getTrForRow(sourceRowIndex),rowHeader=currentTr.querySelector("th"),rowInnerHeight=rowHeader?innerHeight(rowHeader):innerHeight(currentTr)-1,(!previousRowHeight&&this.instance.wtSettings.settings.defaultRowHeight<rowInnerHeight||previousRowHeight<rowInnerHeight)&&(this.instance.wtViewport.oversizedRows[sourceRowIndex]=++rowInnerHeight)}},markOversizedColumnHeaders:function(){var overlayName=this.wot.getOverlayName();if(this.columnHeaderCount&&!this.wot.wtViewport.hasOversizedColumnHeadersMarked[overlayName]&&!this.wtTable.isWorkingOnClone()){for(var columnCount=this.wtTable.getRenderedColumnsCount(),i=0;i<this.columnHeaderCount;i++)for(var renderedColumnIndex=-1*this.rowHeaderCount;renderedColumnIndex<columnCount;renderedColumnIndex++)this.markIfOversizedColumnHeader(renderedColumnIndex);this.wot.wtViewport.hasOversizedColumnHeadersMarked[overlayName]=!0}},adjustColumnHeaderHeights:function(){for(var columnHeaders=this.wot.getSetting("columnHeaders"),children=this.wot.wtTable.THEAD.childNodes,oversizedColumnHeaders=this.wot.wtViewport.oversizedColumnHeaders,i=0,len=columnHeaders.length;i<len;i++)if(oversizedColumnHeaders[i]){if(0===children[i].childNodes.length)return;children[i].childNodes[0].style.height=oversizedColumnHeaders[i]+"px"}},markIfOversizedColumnHeader:function(col){for(var previousColHeaderHeight,currentHeader,currentHeaderHeight,sourceColIndex=this.wot.wtTable.columnFilter.renderedToSource(col),level=this.columnHeaderCount,defaultRowHeight=this.wot.wtSettings.settings.defaultRowHeight,columnHeaderHeightSetting=this.wot.getSetting("columnHeaderHeight")||[];level;)level--,previousColHeaderHeight=this.wot.wtTable.getColumnHeaderHeight(level),currentHeader=this.wot.wtTable.getColumnHeader(sourceColIndex,level),currentHeader&&(currentHeaderHeight=innerHeight(currentHeader),(!previousColHeaderHeight&&defaultRowHeight<currentHeaderHeight||previousColHeaderHeight<currentHeaderHeight)&&(this.wot.wtViewport.oversizedColumnHeaders[level]=currentHeaderHeight),Array.isArray(columnHeaderHeightSetting)?null!=columnHeaderHeightSetting[level]&&(this.wot.wtViewport.oversizedColumnHeaders[level]=columnHeaderHeightSetting[level]):isNaN(columnHeaderHeightSetting)||(this.wot.wtViewport.oversizedColumnHeaders[level]=columnHeaderHeightSetting),this.wot.wtViewport.oversizedColumnHeaders[level]<(columnHeaderHeightSetting[level]||columnHeaderHeightSetting)&&(this.wot.wtViewport.oversizedColumnHeaders[level]=columnHeaderHeightSetting[level]||columnHeaderHeightSetting))},renderCells:function(sourceRowIndex,TR,columnsToRender){for(var TD,sourceColIndex,visibleColIndex=0;visibleColIndex<columnsToRender;visibleColIndex++)sourceColIndex=this.columnFilter.renderedToSource(visibleColIndex),TD=0===visibleColIndex?TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(sourceColIndex)]:TD.nextSibling,"TH"==TD.nodeName&&(TD=replaceThWithTd(TD,TR)),hasClass(TD,"hide")||(TD.className=""),TD.removeAttribute("style"),this.wot.wtSettings.settings.cellRenderer(sourceRowIndex,sourceColIndex,TD);return TD},adjustColumnWidths:function(columnsToRender){var scrollbarCompensation=0,sourceInstance=this.wot.cloneSource?this.wot.cloneSource:this.wot,mainHolder=sourceInstance.wtTable.holder;mainHolder.offsetHeight<mainHolder.scrollHeight&&(scrollbarCompensation=getScrollbarWidth()),
this.wot.wtViewport.columnsRenderCalculator.refreshStretching(this.wot.wtViewport.getViewportWidth()-scrollbarCompensation);var rowHeaderWidthSetting=this.wot.getSetting("rowHeaderWidth");if(rowHeaderWidthSetting=this.instance.getSetting("onModifyRowHeaderWidth",rowHeaderWidthSetting)||rowHeaderWidthSetting,null!=rowHeaderWidthSetting)for(var i=0;i<this.rowHeaderCount;i++)this.COLGROUP.childNodes[i].style.width=(isNaN(rowHeaderWidthSetting)?rowHeaderWidthSetting[i]:rowHeaderWidthSetting)+"px";for(var renderedColIndex=0;renderedColIndex<columnsToRender;renderedColIndex++){var width=this.wtTable.getStretchedColumnWidth(this.columnFilter.renderedToSource(renderedColIndex));this.COLGROUP.childNodes[renderedColIndex+this.rowHeaderCount].style.width=width+"px"}},appendToTbody:function(TR){this.TBODY.appendChild(TR),this.wtTable.tbodyChildrenLength++},getOrCreateTrForRow:function(rowIndex,currentTr){var TR;return rowIndex>=this.wtTable.tbodyChildrenLength?(TR=this.createRow(),this.appendToTbody(TR)):TR=0===rowIndex?this.TBODY.firstChild:currentTr.nextSibling,TR.className&&TR.removeAttribute("class"),TR},createRow:function(){for(var TR=document.createElement("TR"),visibleColIndex=0;visibleColIndex<this.rowHeaderCount;visibleColIndex++)TR.appendChild(document.createElement("TH"));return TR},renderRowHeader:function(row,col,TH){TH.className="",TH.removeAttribute("style"),this.rowHeaders[col](row,TH,col)},renderRowHeaders:function(row,TR){for(var TH=TR.firstChild,visibleColIndex=0;visibleColIndex<this.rowHeaderCount;visibleColIndex++)TH?"TD"==TH.nodeName&&(TH=replaceTdWithTh(TH,TR)):(TH=document.createElement("TH"),TR.appendChild(TH)),this.renderRowHeader(row,visibleColIndex,TH),TH=TH.nextSibling},adjustAvailableNodes:function(){this.adjustColGroups(),this.adjustThead()},renderColumnHeaders:function(){if(this.columnHeaderCount)for(var columnCount=this.wtTable.getRenderedColumnsCount(),i=0;i<this.columnHeaderCount;i++)for(var TR=this.getTrForColumnHeaders(i),renderedColumnIndex=-1*this.rowHeaderCount;renderedColumnIndex<columnCount;renderedColumnIndex++){var sourceCol=this.columnFilter.renderedToSource(renderedColumnIndex);this.renderColumnHeader(i,sourceCol,TR.childNodes[renderedColumnIndex+this.rowHeaderCount])}},adjustColGroups:function(){for(var columnCount=this.wtTable.getRenderedColumnsCount();this.wtTable.colgroupChildrenLength<columnCount+this.rowHeaderCount;)this.COLGROUP.appendChild(document.createElement("COL")),this.wtTable.colgroupChildrenLength++;for(;this.wtTable.colgroupChildrenLength>columnCount+this.rowHeaderCount;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.wtTable.colgroupChildrenLength--;this.rowHeaderCount&&addClass(this.COLGROUP.childNodes[0],"rowHeader")},adjustThead:function(){var columnCount=this.wtTable.getRenderedColumnsCount(),TR=this.THEAD.firstChild;if(this.columnHeaders.length){for(var i=0,len=this.columnHeaders.length;i<len;i++){for(TR=this.THEAD.childNodes[i],TR||(TR=document.createElement("TR"),this.THEAD.appendChild(TR)),this.theadChildrenLength=TR.childNodes.length;this.theadChildrenLength<columnCount+this.rowHeaderCount;)TR.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength>columnCount+this.rowHeaderCount;)TR.removeChild(TR.lastChild),this.theadChildrenLength--}var theadChildrenLength=this.THEAD.childNodes.length;if(theadChildrenLength>this.columnHeaders.length)for(var i$__3=this.columnHeaders.length;i$__3<theadChildrenLength;i$__3++)this.THEAD.removeChild(this.THEAD.lastChild)}else TR&&empty(TR)},getTrForColumnHeaders:function(index){return this.THEAD.childNodes[index]},renderColumnHeader:function(row,col,TH){return TH.className="",TH.removeAttribute("style"),this.columnHeaders[row](col,TH,row)},adjustColumns:function(TR,desiredCount){for(var count=TR.childNodes.length;count<desiredCount;){var TD=document.createElement("TD");TR.appendChild(TD),count++}for(;count>desiredCount;)TR.removeChild(TR.lastChild),count--},removeRedundantColumns:function(columnsToRender){for(;this.wtTable.tbodyChildrenLength>columnsToRender;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--}},{}),window.WalkontableTableRenderer=WalkontableTableRenderer},{"helpers/dom/element":47}],23:[function(_dereq_,module,exports){Object.defineProperties(exports,{WalkontableViewport:{get:function(){return WalkontableViewport}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_browser__,$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47__46__46__47_eventManager__,$__calculator_47_viewportColumns__,$__calculator_47_viewportRows__,Handsontable=($___46__46__47__46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47__46__46__47_browser__})["default"],$__1=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}),getScrollbarWidth=$__1.getScrollbarWidth,getStyle=($__1.getScrollTop,$__1.getStyle),offset=$__1.offset,outerHeight=$__1.outerHeight,outerWidth=$__1.outerWidth,EventManager=($___46__46__47__46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47__46__46__47_eventManager__}).EventManager,WalkontableViewportColumnsCalculator=($__calculator_47_viewportColumns__=_dereq_("calculator/viewportColumns"),$__calculator_47_viewportColumns__&&$__calculator_47_viewportColumns__.__esModule&&$__calculator_47_viewportColumns__||{"default":$__calculator_47_viewportColumns__}).WalkontableViewportColumnsCalculator,WalkontableViewportRowsCalculator=($__calculator_47_viewportRows__=_dereq_("calculator/viewportRows"),$__calculator_47_viewportRows__&&$__calculator_47_viewportRows__.__esModule&&$__calculator_47_viewportRows__||{"default":$__calculator_47_viewportRows__}).WalkontableViewportRowsCalculator,WalkontableViewport=function(wotInstance){var $__5=this;this.wot=wotInstance,this.instance=this.wot,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.eventManager=new EventManager(this.wot),this.eventManager.addEventListener(window,"resize",function(){$__5.clientHeight=$__5.getWorkspaceHeight()})};$traceurRuntime.createClass(WalkontableViewport,{getWorkspaceHeight:function(){var elemHeight,trimmingContainer=this.instance.wtOverlays.topOverlay.trimmingContainer,height=0;return trimmingContainer===window?height=document.documentElement.clientHeight:(elemHeight=outerHeight(trimmingContainer),height=elemHeight>0&&trimmingContainer.clientHeight>0?trimmingContainer.clientHeight:1/0),height},getWorkspaceWidth:function(){var width,overflow,totalColumns=this.wot.getSetting("totalColumns"),trimmingContainer=this.instance.wtOverlays.leftOverlay.trimmingContainer,stretchSetting=this.wot.getSetting("stretchH"),docOffsetWidth=document.documentElement.offsetWidth,preventOverflow=this.wot.getSetting("preventOverflow");return preventOverflow?outerWidth(this.instance.wtTable.wtRootElement):(width=Handsontable.freezeOverlays?Math.min(docOffsetWidth-this.getWorkspaceOffset().left,docOffsetWidth):Math.min(this.getContainerFillWidth(),docOffsetWidth-this.getWorkspaceOffset().left,docOffsetWidth),trimmingContainer===window&&totalColumns>0&&this.sumColumnWidths(0,totalColumns-1)>width?document.documentElement.clientWidth:trimmingContainer!==window&&(overflow=getStyle(this.instance.wtOverlays.leftOverlay.trimmingContainer,"overflow"),"scroll"==overflow||"hidden"==overflow||"auto"==overflow)?Math.max(width,trimmingContainer.clientWidth):"none"!==stretchSetting&&stretchSetting?width:Math.max(width,outerWidth(this.instance.wtTable.TABLE)))},hasVerticalScroll:function(){return this.getWorkspaceActualHeight()>this.getWorkspaceHeight()},hasHorizontalScroll:function(){return this.getWorkspaceActualWidth()>this.getWorkspaceWidth()},sumColumnWidths:function(from,length){for(var sum=0;from<length;)sum+=this.wot.wtTable.getColumnWidth(from),from++;return sum},getContainerFillWidth:function(){if(this.containerWidth)return this.containerWidth;var fillWidth,dummyElement,mainContainer=this.instance.wtTable.holder;return dummyElement=document.createElement("div"),dummyElement.style.width="100%",dummyElement.style.height="1px",mainContainer.appendChild(dummyElement),fillWidth=dummyElement.offsetWidth,this.containerWidth=fillWidth,mainContainer.removeChild(dummyElement),fillWidth},getWorkspaceOffset:function(){return offset(this.wot.wtTable.TABLE)},getWorkspaceActualHeight:function(){return outerHeight(this.wot.wtTable.TABLE)},getWorkspaceActualWidth:function(){return outerWidth(this.wot.wtTable.TABLE)||outerWidth(this.wot.wtTable.TBODY)||outerWidth(this.wot.wtTable.THEAD)},getColumnHeaderHeight:function(){return isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=outerHeight(this.wot.wtTable.THEAD)),this.columnHeaderHeight},getViewportHeight:function(){var columnHeaderHeight,containerHeight=this.getWorkspaceHeight();return containerHeight===1/0?containerHeight:(columnHeaderHeight=this.getColumnHeaderHeight(),columnHeaderHeight>0&&(containerHeight-=columnHeaderHeight),containerHeight)},getRowHeaderWidth:function(){var rowHeadersHeightSetting=this.instance.getSetting("rowHeaderWidth"),rowHeaders=this.instance.getSetting("rowHeaders");if(rowHeadersHeightSetting){this.rowHeaderWidth=0;for(var i=0,len=rowHeaders.length;i<len;i++)this.rowHeaderWidth+=rowHeadersHeightSetting[i]||rowHeadersHeightSetting}if(this.wot.cloneSource)return this.wot.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth))if(rowHeaders.length){var TH=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var i$__7=0,len$__8=rowHeaders.length;i$__7<len$__8;i$__7++)TH?(this.rowHeaderWidth+=outerWidth(TH),TH=TH.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.instance.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth},getViewportWidth:function(){var rowHeaderWidth,containerWidth=this.getWorkspaceWidth();return containerWidth===1/0?containerWidth:(rowHeaderWidth=this.getRowHeaderWidth(),rowHeaderWidth>0?containerWidth-rowHeaderWidth:containerWidth)},createRowsCalculator:function(){var height,pos,fixedRowsTop,scrollbarHeight,fixedRowsBottom,fixedRowsHeight,totalRows,visible=void 0!==arguments[0]&&arguments[0],$__5=this;return this.rowHeaderWidth=NaN,height=this.wot.wtSettings.settings.renderAllRows?1/0:this.getViewportHeight(),pos=this.wot.wtOverlays.topOverlay.getScrollPosition()-this.wot.wtOverlays.topOverlay.getTableParentOffset(),pos<0&&(pos=0),fixedRowsTop=this.wot.getSetting("fixedRowsTop"),fixedRowsBottom=this.wot.getSetting("fixedRowsBottom"),totalRows=this.wot.getSetting("totalRows"),fixedRowsTop&&(fixedRowsHeight=this.wot.wtOverlays.topOverlay.sumCellSizes(0,fixedRowsTop),pos+=fixedRowsHeight,height-=fixedRowsHeight),fixedRowsBottom&&this.wot.wtOverlays.bottomOverlay.clone&&(fixedRowsHeight=this.wot.wtOverlays.bottomOverlay.sumCellSizes(totalRows-fixedRowsBottom,totalRows),height-=fixedRowsHeight),scrollbarHeight=this.wot.wtTable.holder.clientHeight===this.wot.wtTable.holder.offsetHeight?0:getScrollbarWidth(),new WalkontableViewportRowsCalculator(height,pos,this.wot.getSetting("totalRows"),function(sourceRow){return $__5.wot.wtTable.getRowHeight(sourceRow)},visible?null:this.wot.wtSettings.settings.viewportRowCalculatorOverride,visible,scrollbarHeight)},createColumnsCalculator:function(){var pos,fixedColumnsLeft,visible=void 0!==arguments[0]&&arguments[0],$__5=this,width=this.getViewportWidth();if(this.columnHeaderHeight=NaN,pos=this.wot.wtOverlays.leftOverlay.getScrollPosition()-this.wot.wtOverlays.leftOverlay.getTableParentOffset(),pos<0&&(pos=0),fixedColumnsLeft=this.wot.getSetting("fixedColumnsLeft")){var fixedColumnsWidth=this.wot.wtOverlays.leftOverlay.sumCellSizes(0,fixedColumnsLeft);pos+=fixedColumnsWidth,width-=fixedColumnsWidth}return this.wot.wtTable.holder.clientWidth!==this.wot.wtTable.holder.offsetWidth&&(width-=getScrollbarWidth()),new WalkontableViewportColumnsCalculator(width,pos,this.wot.getSetting("totalColumns"),function(sourceCol){return $__5.wot.wtTable.getColumnWidth(sourceCol)},visible?null:this.wot.wtSettings.settings.viewportColumnCalculatorOverride,visible,this.wot.getSetting("stretchH"),function(stretchedWidth,column){return $__5.wot.getSetting("onBeforeStretchingColumnWidth",stretchedWidth,column)})},createRenderCalculators:function(){var fastDraw=void 0!==arguments[0]&&arguments[0];if(fastDraw){var proposedRowsVisibleCalculator=this.createRowsCalculator(!0),proposedColumnsVisibleCalculator=this.createColumnsCalculator(!0);this.areAllProposedVisibleRowsAlreadyRendered(proposedRowsVisibleCalculator)&&this.areAllProposedVisibleColumnsAlreadyRendered(proposedColumnsVisibleCalculator)||(fastDraw=!1)}return fastDraw||(this.rowsRenderCalculator=this.createRowsCalculator(),this.columnsRenderCalculator=this.createColumnsCalculator()),this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,fastDraw},createVisibleCalculators:function(){this.rowsVisibleCalculator=this.createRowsCalculator(!0),this.columnsVisibleCalculator=this.createColumnsCalculator(!0)},areAllProposedVisibleRowsAlreadyRendered:function(proposedRowsVisibleCalculator){return!!this.rowsVisibleCalculator&&(!(proposedRowsVisibleCalculator.startRow<this.rowsRenderCalculator.startRow||proposedRowsVisibleCalculator.startRow===this.rowsRenderCalculator.startRow&&proposedRowsVisibleCalculator.startRow>0)&&!(proposedRowsVisibleCalculator.endRow>this.rowsRenderCalculator.endRow||proposedRowsVisibleCalculator.endRow===this.rowsRenderCalculator.endRow&&proposedRowsVisibleCalculator.endRow<this.wot.getSetting("totalRows")-1))},areAllProposedVisibleColumnsAlreadyRendered:function(proposedColumnsVisibleCalculator){return!!this.columnsVisibleCalculator&&(!(proposedColumnsVisibleCalculator.startColumn<this.columnsRenderCalculator.startColumn||proposedColumnsVisibleCalculator.startColumn===this.columnsRenderCalculator.startColumn&&proposedColumnsVisibleCalculator.startColumn>0)&&!(proposedColumnsVisibleCalculator.endColumn>this.columnsRenderCalculator.endColumn||proposedColumnsVisibleCalculator.endColumn===this.columnsRenderCalculator.endColumn&&proposedColumnsVisibleCalculator.endColumn<this.wot.getSetting("totalColumns")-1))}},{}),window.WalkontableViewport=WalkontableViewport},{browser:24,"calculator/viewportColumns":4,"calculator/viewportRows":5,eventManager:42,"helpers/dom/element":47}],24:[function(_dereq_,module,exports){function Handsontable(rootElement,userSettings){var instance=new Handsontable.Core(rootElement,userSettings||{});return instance.init(),instance}var $__shims_47_runtime__,$__es6collections__,$__pluginHooks__,$__numbro__,$__moment__,$__core__,$__renderers_47__95_cellDecorator__,$__cellTypes__,$___46__46__47_plugins_47_jqueryHandsontable__,$__helpers_47_array__,$__helpers_47_browser__,$__helpers_47_data__,$__helpers_47_date__,$__helpers_47_feature__,$__helpers_47_function__,$__helpers_47_mixed__,$__helpers_47_number__,$__helpers_47_object__,$__helpers_47_setting__,$__helpers_47_string__,$__helpers_47_unicode__,$__helpers_47_dom_47_element__,$__helpers_47_dom_47_event__,$__plugins__;module.exports=Handsontable,Handsontable.utils={},$__shims_47_runtime__=_dereq_("shims/runtime"),$__shims_47_runtime__&&$__shims_47_runtime__.__esModule&&$__shims_47_runtime__||{"default":$__shims_47_runtime__},$__es6collections__=_dereq_("es6collections"),$__es6collections__&&$__es6collections__.__esModule&&$__es6collections__||{"default":$__es6collections__};var Hooks=($__pluginHooks__=_dereq_("pluginHooks"),$__pluginHooks__&&$__pluginHooks__.__esModule&&$__pluginHooks__||{"default":$__pluginHooks__}).Hooks,numbro=($__numbro__=_dereq_("numbro"),$__numbro__&&$__numbro__.__esModule&&$__numbro__||{"default":$__numbro__})["default"],moment=($__moment__=_dereq_("moment"),$__moment__&&$__moment__.__esModule&&$__moment__||{"default":$__moment__})["default"];"object"===("undefined"==typeof window?"undefined":_typeof(window))&&("undefined"==typeof window.numbro&&(window.numbro=numbro),"undefined"==typeof window.moment&&(window.moment=moment)),Handsontable.hooks||(Handsontable.hooks=new Hooks),Handsontable.utils.Hooks=Hooks,$__core__=_dereq_("core"),$__core__&&$__core__.__esModule&&$__core__||{"default":$__core__},$__renderers_47__95_cellDecorator__=_dereq_("renderers/_cellDecorator"),$__renderers_47__95_cellDecorator__&&$__renderers_47__95_cellDecorator__.__esModule&&$__renderers_47__95_cellDecorator__||{"default":$__renderers_47__95_cellDecorator__},$__cellTypes__=_dereq_("cellTypes"),$__cellTypes__&&$__cellTypes__.__esModule&&$__cellTypes__||{"default":$__cellTypes__},$___46__46__47_plugins_47_jqueryHandsontable__=_dereq_("plugins/jqueryHandsontable"),$___46__46__47_plugins_47_jqueryHandsontable__&&$___46__46__47_plugins_47_jqueryHandsontable__.__esModule&&$___46__46__47_plugins_47_jqueryHandsontable__||{"default":$___46__46__47_plugins_47_jqueryHandsontable__};var arrayHelpers=($__helpers_47_array__=_dereq_("helpers/array"),$__helpers_47_array__&&$__helpers_47_array__.__esModule&&$__helpers_47_array__||{"default":$__helpers_47_array__}),browserHelpers=($__helpers_47_browser__=_dereq_("helpers/browser"),$__helpers_47_browser__&&$__helpers_47_browser__.__esModule&&$__helpers_47_browser__||{"default":$__helpers_47_browser__}),dataHelpers=($__helpers_47_data__=_dereq_("helpers/data"),$__helpers_47_data__&&$__helpers_47_data__.__esModule&&$__helpers_47_data__||{"default":$__helpers_47_data__}),dateHelpers=($__helpers_47_date__=_dereq_("helpers/date"),$__helpers_47_date__&&$__helpers_47_date__.__esModule&&$__helpers_47_date__||{"default":$__helpers_47_date__}),featureHelpers=($__helpers_47_feature__=_dereq_("helpers/feature"),$__helpers_47_feature__&&$__helpers_47_feature__.__esModule&&$__helpers_47_feature__||{"default":$__helpers_47_feature__}),functionHelpers=($__helpers_47_function__=_dereq_("helpers/function"),$__helpers_47_function__&&$__helpers_47_function__.__esModule&&$__helpers_47_function__||{"default":$__helpers_47_function__}),mixedHelpers=($__helpers_47_mixed__=_dereq_("helpers/mixed"),$__helpers_47_mixed__&&$__helpers_47_mixed__.__esModule&&$__helpers_47_mixed__||{"default":$__helpers_47_mixed__}),numberHelpers=($__helpers_47_number__=_dereq_("helpers/number"),$__helpers_47_number__&&$__helpers_47_number__.__esModule&&$__helpers_47_number__||{"default":$__helpers_47_number__}),objectHelpers=($__helpers_47_object__=_dereq_("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{"default":$__helpers_47_object__}),settingHelpers=($__helpers_47_setting__=_dereq_("helpers/setting"),$__helpers_47_setting__&&$__helpers_47_setting__.__esModule&&$__helpers_47_setting__||{"default":$__helpers_47_setting__}),stringHelpers=($__helpers_47_string__=_dereq_("helpers/string"),$__helpers_47_string__&&$__helpers_47_string__.__esModule&&$__helpers_47_string__||{"default":$__helpers_47_string__}),unicodeHelpers=($__helpers_47_unicode__=_dereq_("helpers/unicode"),$__helpers_47_unicode__&&$__helpers_47_unicode__.__esModule&&$__helpers_47_unicode__||{"default":$__helpers_47_unicode__}),domHelpers=($__helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$__helpers_47_dom_47_element__&&$__helpers_47_dom_47_element__.__esModule&&$__helpers_47_dom_47_element__||{"default":$__helpers_47_dom_47_element__}),domEventHelpers=($__helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$__helpers_47_dom_47_event__&&$__helpers_47_dom_47_event__.__esModule&&$__helpers_47_dom_47_event__||{"default":$__helpers_47_dom_47_event__}),HELPERS=[arrayHelpers,browserHelpers,dataHelpers,dateHelpers,featureHelpers,functionHelpers,mixedHelpers,numberHelpers,objectHelpers,settingHelpers,stringHelpers,unicodeHelpers],DOM=[domHelpers,domEventHelpers];Handsontable.buildDate="Thu Oct 13 2016 13:58:53 GMT+0200 (CEST)",Handsontable.packageName="handsontable",Handsontable.version="0.28.4";var baseVersion="@@baseVersion";/^@@/.test(baseVersion)||(Handsontable.baseVersion=baseVersion),Handsontable.plugins={};var registerPlugin=($__plugins__=_dereq_("plugins"),$__plugins__&&$__plugins__.__esModule&&$__plugins__||{"default":$__plugins__}).registerPlugin;Handsontable.plugins.registerPlugin=registerPlugin,Handsontable.helper={},Handsontable.dom={},Handsontable.Dom=Handsontable.dom,arrayHelpers.arrayEach(HELPERS,function(helper){arrayHelpers.arrayEach(Object.getOwnPropertyNames(helper),function(key){"_"!==key.charAt(0)&&(Handsontable.helper[key]=helper[key])})}),arrayHelpers.arrayEach(DOM,function(helper){arrayHelpers.arrayEach(Object.getOwnPropertyNames(helper),function(key){"_"!==key.charAt(0)&&(Handsontable.dom[key]=helper[key])})})},{cellTypes:25,core:26,es6collections:"es6collections","helpers/array":43,"helpers/browser":44,"helpers/data":45,"helpers/date":46,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/feature":49,"helpers/function":50,"helpers/mixed":51,"helpers/number":52,"helpers/object":53,"helpers/setting":54,"helpers/string":55,"helpers/unicode":56,moment:"moment",numbro:"numbro",pluginHooks:60,plugins:61,"plugins/jqueryHandsontable":2,"renderers/_cellDecorator":117,"shims/runtime":124}],25:[function(_dereq_,module,exports){var $__helpers_47_browser__,$__editors__,$__renderers__,$__editors_47_autocompleteEditor__,$__editors_47_checkboxEditor__,$__editors_47_dateEditor__,$__editors_47_dropdownEditor__,$__editors_47_handsontableEditor__,$__editors_47_mobileTextEditor__,$__editors_47_numericEditor__,$__editors_47_passwordEditor__,$__editors_47_selectEditor__,$__editors_47_textEditor__,$__renderers_47_autocompleteRenderer__,$__renderers_47_checkboxRenderer__,$__renderers_47_htmlRenderer__,$__renderers_47_numericRenderer__,$__renderers_47_passwordRenderer__,$__renderers_47_textRenderer__,$__validators_47_autocompleteValidator__,$__validators_47_dateValidator__,$__validators_47_timeValidator__,$__validators_47_numericValidator__,$__browser__,isMobileBrowser=($__helpers_47_browser__=_dereq_("helpers/browser"),$__helpers_47_browser__&&$__helpers_47_browser__.__esModule&&$__helpers_47_browser__||{"default":$__helpers_47_browser__}).isMobileBrowser,getEditorConstructor=($__editors__=_dereq_("editors"),$__editors__&&$__editors__.__esModule&&$__editors__||{"default":$__editors__}).getEditorConstructor,getRenderer=($__renderers__=_dereq_("renderers"),$__renderers__&&$__renderers__.__esModule&&$__renderers__||{"default":$__renderers__}).getRenderer,Handsontable=(($__editors_47_autocompleteEditor__=_dereq_("editors/autocompleteEditor"),$__editors_47_autocompleteEditor__&&$__editors_47_autocompleteEditor__.__esModule&&$__editors_47_autocompleteEditor__||{"default":$__editors_47_autocompleteEditor__}).AutocompleteEditor,($__editors_47_checkboxEditor__=_dereq_("editors/checkboxEditor"),$__editors_47_checkboxEditor__&&$__editors_47_checkboxEditor__.__esModule&&$__editors_47_checkboxEditor__||{"default":$__editors_47_checkboxEditor__}).CheckboxEditor,($__editors_47_dateEditor__=_dereq_("editors/dateEditor"),$__editors_47_dateEditor__&&$__editors_47_dateEditor__.__esModule&&$__editors_47_dateEditor__||{"default":$__editors_47_dateEditor__}).DateEditor,($__editors_47_dropdownEditor__=_dereq_("editors/dropdownEditor"),$__editors_47_dropdownEditor__&&$__editors_47_dropdownEditor__.__esModule&&$__editors_47_dropdownEditor__||{"default":$__editors_47_dropdownEditor__}).DropdownEditor,($__editors_47_handsontableEditor__=_dereq_("editors/handsontableEditor"),$__editors_47_handsontableEditor__&&$__editors_47_handsontableEditor__.__esModule&&$__editors_47_handsontableEditor__||{"default":$__editors_47_handsontableEditor__}).HandsontableEditor,($__editors_47_mobileTextEditor__=_dereq_("editors/mobileTextEditor"),$__editors_47_mobileTextEditor__&&$__editors_47_mobileTextEditor__.__esModule&&$__editors_47_mobileTextEditor__||{"default":$__editors_47_mobileTextEditor__}).MobileTextEditor,($__editors_47_numericEditor__=_dereq_("editors/numericEditor"),$__editors_47_numericEditor__&&$__editors_47_numericEditor__.__esModule&&$__editors_47_numericEditor__||{"default":$__editors_47_numericEditor__}).NumericEditor,($__editors_47_passwordEditor__=_dereq_("editors/passwordEditor"),$__editors_47_passwordEditor__&&$__editors_47_passwordEditor__.__esModule&&$__editors_47_passwordEditor__||{"default":$__editors_47_passwordEditor__}).PasswordEditor,($__editors_47_selectEditor__=_dereq_("editors/selectEditor"),$__editors_47_selectEditor__&&$__editors_47_selectEditor__.__esModule&&$__editors_47_selectEditor__||{"default":$__editors_47_selectEditor__}).SelectEditor,($__editors_47_textEditor__=_dereq_("editors/textEditor"),$__editors_47_textEditor__&&$__editors_47_textEditor__.__esModule&&$__editors_47_textEditor__||{"default":$__editors_47_textEditor__}).TextEditor,($__renderers_47_autocompleteRenderer__=_dereq_("renderers/autocompleteRenderer"),$__renderers_47_autocompleteRenderer__&&$__renderers_47_autocompleteRenderer__.__esModule&&$__renderers_47_autocompleteRenderer__||{"default":$__renderers_47_autocompleteRenderer__}).AutocompleteRenderer,($__renderers_47_checkboxRenderer__=_dereq_("renderers/checkboxRenderer"),$__renderers_47_checkboxRenderer__&&$__renderers_47_checkboxRenderer__.__esModule&&$__renderers_47_checkboxRenderer__||{"default":$__renderers_47_checkboxRenderer__}).CheckboxRenderer,($__renderers_47_htmlRenderer__=_dereq_("renderers/htmlRenderer"),$__renderers_47_htmlRenderer__&&$__renderers_47_htmlRenderer__.__esModule&&$__renderers_47_htmlRenderer__||{"default":$__renderers_47_htmlRenderer__}).HtmlRenderer,($__renderers_47_numericRenderer__=_dereq_("renderers/numericRenderer"),$__renderers_47_numericRenderer__&&$__renderers_47_numericRenderer__.__esModule&&$__renderers_47_numericRenderer__||{"default":$__renderers_47_numericRenderer__}).NumericRenderer,($__renderers_47_passwordRenderer__=_dereq_("renderers/passwordRenderer"),$__renderers_47_passwordRenderer__&&$__renderers_47_passwordRenderer__.__esModule&&$__renderers_47_passwordRenderer__||{"default":$__renderers_47_passwordRenderer__}).PasswordRenderer,($__renderers_47_textRenderer__=_dereq_("renderers/textRenderer"),$__renderers_47_textRenderer__&&$__renderers_47_textRenderer__.__esModule&&$__renderers_47_textRenderer__||{"default":$__renderers_47_textRenderer__}).TextRenderer,($__validators_47_autocompleteValidator__=_dereq_("validators/autocompleteValidator"),$__validators_47_autocompleteValidator__&&$__validators_47_autocompleteValidator__.__esModule&&$__validators_47_autocompleteValidator__||{"default":$__validators_47_autocompleteValidator__}).AutocompleteValidator,($__validators_47_dateValidator__=_dereq_("validators/dateValidator"),$__validators_47_dateValidator__&&$__validators_47_dateValidator__.__esModule&&$__validators_47_dateValidator__||{"default":$__validators_47_dateValidator__}).DateValidator,($__validators_47_timeValidator__=_dereq_("validators/timeValidator"),$__validators_47_timeValidator__&&$__validators_47_timeValidator__.__esModule&&$__validators_47_timeValidator__||{"default":$__validators_47_timeValidator__}).TimeValidator,($__validators_47_numericValidator__=_dereq_("validators/numericValidator"),$__validators_47_numericValidator__&&$__validators_47_numericValidator__.__esModule&&$__validators_47_numericValidator__||{"default":$__validators_47_numericValidator__}).NumericValidator,($__browser__=_dereq_("browser"),$__browser__&&$__browser__.__esModule&&$__browser__||{"default":$__browser__})["default"]);Handsontable.AutocompleteCell={editor:getEditorConstructor("autocomplete"),renderer:getRenderer("autocomplete"),validator:Handsontable.AutocompleteValidator},Handsontable.CheckboxCell={editor:getEditorConstructor("checkbox"),renderer:getRenderer("checkbox")},Handsontable.TextCell={editor:getEditorConstructor(isMobileBrowser()?"mobile":"text"),renderer:getRenderer("text")},Handsontable.NumericCell={editor:getEditorConstructor("numeric"),renderer:getRenderer("numeric"),validator:Handsontable.NumericValidator,dataType:"number"},Handsontable.DateCell={editor:getEditorConstructor("date"),validator:Handsontable.DateValidator,renderer:getRenderer("autocomplete")},Handsontable.TimeCell={editor:getEditorConstructor("text"),validator:Handsontable.TimeValidator,renderer:getRenderer("text")},Handsontable.HandsontableCell={editor:getEditorConstructor("handsontable"),renderer:getRenderer("autocomplete")},Handsontable.PasswordCell={editor:getEditorConstructor("password"),renderer:getRenderer("password"),copyable:!1},Handsontable.DropdownCell={editor:getEditorConstructor("dropdown"),renderer:getRenderer("autocomplete"),validator:Handsontable.AutocompleteValidator},Handsontable.cellTypes={text:Handsontable.TextCell,date:Handsontable.DateCell,time:Handsontable.TimeCell,numeric:Handsontable.NumericCell,checkbox:Handsontable.CheckboxCell,autocomplete:Handsontable.AutocompleteCell,handsontable:Handsontable.HandsontableCell,password:Handsontable.PasswordCell,dropdown:Handsontable.DropdownCell},Handsontable.cellLookup={validator:{numeric:Handsontable.NumericValidator,autocomplete:Handsontable.AutocompleteValidator}}},{browser:24,editors:30,"editors/autocompleteEditor":32,"editors/checkboxEditor":33,"editors/dateEditor":34,"editors/dropdownEditor":35,"editors/handsontableEditor":36,"editors/mobileTextEditor":37,"editors/numericEditor":38,"editors/passwordEditor":39,"editors/selectEditor":40,"editors/textEditor":41,"helpers/browser":44,renderers:116,"renderers/autocompleteRenderer":118,"renderers/checkboxRenderer":119,"renderers/htmlRenderer":120,"renderers/numericRenderer":121,"renderers/passwordRenderer":122,"renderers/textRenderer":123,"validators/autocompleteValidator":130,"validators/dateValidator":131,"validators/numericValidator":132,"validators/timeValidator":133}],26:[function(_dereq_,module,exports){var $__browser__,$__numbro__,$__helpers_47_dom_47_element__,$__helpers_47_setting__,$__helpers_47_function__,$__helpers_47_mixed__,$__helpers_47_browser__,$__dataMap__,$__editorManager__,$__eventManager__,$__helpers_47_object__,$__helpers_47_array__,$__plugins__,$__renderers__,$__helpers_47_string__,$__helpers_47_number__,$__tableView__,$__dataSource__,$__helpers_47_data__,$__utils_47_recordTranslator__,$__3rdparty_47_walkontable_47_src_47_cell_47_coords__,$__3rdparty_47_walkontable_47_src_47_cell_47_range__,$__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__,Handsontable=($__browser__=_dereq_("browser"),$__browser__&&$__browser__.__esModule&&$__browser__||{"default":$__browser__})["default"],numbro=($__numbro__=_dereq_("numbro"),$__numbro__&&$__numbro__.__esModule&&$__numbro__||{"default":$__numbro__})["default"],$__2=($__helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$__helpers_47_dom_47_element__&&$__helpers_47_dom_47_element__.__esModule&&$__helpers_47_dom_47_element__||{"default":$__helpers_47_dom_47_element__}),addClass=$__2.addClass,empty=$__2.empty,isChildOfWebComponentTable=$__2.isChildOfWebComponentTable,removeClass=$__2.removeClass,columnFactory=($__helpers_47_setting__=_dereq_("helpers/setting"),$__helpers_47_setting__&&$__helpers_47_setting__.__esModule&&$__helpers_47_setting__||{"default":$__helpers_47_setting__}).columnFactory,isFunction=($__helpers_47_function__=_dereq_("helpers/function"),
$__helpers_47_function__&&$__helpers_47_function__.__esModule&&$__helpers_47_function__||{"default":$__helpers_47_function__}).isFunction,$__5=($__helpers_47_mixed__=_dereq_("helpers/mixed"),$__helpers_47_mixed__&&$__helpers_47_mixed__.__esModule&&$__helpers_47_mixed__||{"default":$__helpers_47_mixed__}),isDefined=$__5.isDefined,isUndefined=$__5.isUndefined,isMobileBrowser=($__helpers_47_browser__=_dereq_("helpers/browser"),$__helpers_47_browser__&&$__helpers_47_browser__.__esModule&&$__helpers_47_browser__||{"default":$__helpers_47_browser__}).isMobileBrowser,DataMap=($__dataMap__=_dereq_("dataMap"),$__dataMap__&&$__dataMap__.__esModule&&$__dataMap__||{"default":$__dataMap__}).DataMap,EditorManager=($__editorManager__=_dereq_("editorManager"),$__editorManager__&&$__editorManager__.__esModule&&$__editorManager__||{"default":$__editorManager__}).EditorManager,eventManagerObject=($__eventManager__=_dereq_("eventManager"),$__eventManager__&&$__eventManager__.__esModule&&$__eventManager__||{"default":$__eventManager__}).eventManager,$__10=($__helpers_47_object__=_dereq_("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{"default":$__helpers_47_object__}),deepClone=$__10.deepClone,duckSchema=$__10.duckSchema,extend=$__10.extend,isObject=$__10.isObject,isObjectEquals=$__10.isObjectEquals,deepObjectSize=$__10.deepObjectSize,$__11=($__helpers_47_array__=_dereq_("helpers/array"),$__helpers_47_array__&&$__helpers_47_array__.__esModule&&$__helpers_47_array__||{"default":$__helpers_47_array__}),arrayFlatten=$__11.arrayFlatten,arrayMap=$__11.arrayMap,getPlugin=($__plugins__=_dereq_("plugins"),$__plugins__&&$__plugins__.__esModule&&$__plugins__||{"default":$__plugins__}).getPlugin,getRenderer=($__renderers__=_dereq_("renderers"),$__renderers__&&$__renderers__.__esModule&&$__renderers__||{"default":$__renderers__}).getRenderer,randomString=($__helpers_47_string__=_dereq_("helpers/string"),$__helpers_47_string__&&$__helpers_47_string__.__esModule&&$__helpers_47_string__||{"default":$__helpers_47_string__}).randomString,rangeEach=($__helpers_47_number__=_dereq_("helpers/number"),$__helpers_47_number__&&$__helpers_47_number__.__esModule&&$__helpers_47_number__||{"default":$__helpers_47_number__}).rangeEach,TableView=($__tableView__=_dereq_("tableView"),$__tableView__&&$__tableView__.__esModule&&$__tableView__||{"default":$__tableView__}).TableView,DataSource=($__dataSource__=_dereq_("dataSource"),$__dataSource__&&$__dataSource__.__esModule&&$__dataSource__||{"default":$__dataSource__}).DataSource,$__18=($__helpers_47_data__=_dereq_("helpers/data"),$__helpers_47_data__&&$__helpers_47_data__.__esModule&&$__helpers_47_data__||{"default":$__helpers_47_data__}),translateRowsToColumns=$__18.translateRowsToColumns,cellMethodLookupFactory=$__18.cellMethodLookupFactory,spreadsheetColumnLabel=$__18.spreadsheetColumnLabel,getTranslator=($__utils_47_recordTranslator__=_dereq_("utils/recordTranslator"),$__utils_47_recordTranslator__&&$__utils_47_recordTranslator__.__esModule&&$__utils_47_recordTranslator__||{"default":$__utils_47_recordTranslator__}).getTranslator,WalkontableCellCoords=($__3rdparty_47_walkontable_47_src_47_cell_47_coords__=_dereq_("3rdparty/walkontable/src/cell/coords"),$__3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__||{"default":$__3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords,WalkontableCellRange=($__3rdparty_47_walkontable_47_src_47_cell_47_range__=_dereq_("3rdparty/walkontable/src/cell/range"),$__3rdparty_47_walkontable_47_src_47_cell_47_range__&&$__3rdparty_47_walkontable_47_src_47_cell_47_range__.__esModule&&$__3rdparty_47_walkontable_47_src_47_cell_47_range__||{"default":$__3rdparty_47_walkontable_47_src_47_cell_47_range__}).WalkontableCellRange,WalkontableViewportColumnsCalculator=($__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__=_dereq_("3rdparty/walkontable/src/calculator/viewportColumns"),$__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__&&$__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__.__esModule&&$__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__||{"default":$__3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__}).WalkontableViewportColumnsCalculator;Handsontable.activeGuid=null,Handsontable.Core=function(rootElement,userSettings){function ValidatorsQueue(){var resolved=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue:function(){this.validatorsInQueue++,resolved=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(valid){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&&0==resolved&&(resolved=!0,this.onQueueEmpty(this.valid))}}}function validateChanges(changes,source,callback){function resolve(){var beforeChangeResult;changes.length&&(beforeChangeResult=Handsontable.hooks.run(instance,"beforeChange",changes,source),isFunction(beforeChangeResult)?console.warn("Your beforeChange callback returns a function. It's not supported since Handsontable 0.12.1 (and the returned function will not be executed)."):beforeChangeResult===!1&&changes.splice(0,changes.length)),callback()}var waitingForValidator=new ValidatorsQueue;waitingForValidator.onQueueEmpty=resolve;for(var i=changes.length-1;i>=0;i--)if(null===changes[i])changes.splice(i,1);else{var row=changes[i][0],col=datamap.propToCol(changes[i][1]),cellProperties=instance.getCellMeta(row,col);if("numeric"===cellProperties.type&&"string"==typeof changes[i][3]&&changes[i][3].length>0&&(/^-?[\d\s]*(\.|\,)?\d*$/.test(changes[i][3])||cellProperties.format)){var len=changes[i][3].length;isUndefined(cellProperties.language)?numbro.culture("en-US"):changes[i][3].indexOf(".")===len-3&&changes[i][3].indexOf(",")===-1?numbro.culture("en-US"):numbro.culture(cellProperties.language);numbro.cultureData(numbro.culture()).delimiters;numbro.validate(changes[i][3])&&!isNaN(changes[i][3])?changes[i][3]=parseFloat(changes[i][3]):changes[i][3]=numbro().unformat(changes[i][3])}instance.getCellValidator(cellProperties)&&(waitingForValidator.addValidatorToQueue(),instance.validateCell(changes[i][3],cellProperties,function(i,cellProperties){return function(result){if("boolean"!=typeof result)throw new Error("Validation error: result is not boolean");result===!1&&cellProperties.allowInvalid===!1&&(changes.splice(i,1),cellProperties.valid=!0,--i),waitingForValidator.removeValidatorFormQueue()}}(i,cellProperties),source))}waitingForValidator.checkIfQueueIsEmpty()}function applyChanges(changes,source){var i=changes.length-1;if(!(i<0)){for(;0<=i;i--){var skipThisChange=!1;if(null!==changes[i]){if(null!=changes[i][2]||null!=changes[i][3]){if(priv.settings.allowInsertRow)for(;changes[i][0]>instance.countRows()-1;){var numberOfCreatedRows=datamap.createRow();if(0===numberOfCreatedRows){skipThisChange=!0;break}}if(!skipThisChange){if("array"===instance.dataType&&(!priv.settings.columns||0===priv.settings.columns.length)&&priv.settings.allowInsertColumn)for(;datamap.propToCol(changes[i][1])>instance.countCols()-1;)datamap.createCol();datamap.set(changes[i][0],changes[i][1],changes[i][3])}}}else changes.splice(i,1)}instance.forceFullRender=!0,grid.adjustRowsAndCols(),Handsontable.hooks.run(instance,"beforeChangeRender",changes,source),selection.refreshBorders(null,!0),instance.view.wt.wtOverlays.adjustElementsSize(),Handsontable.hooks.run(instance,"afterChange",changes,source||"edit")}}function setDataInputToArray(row,propOrCol,value){return"object"===("undefined"==typeof row?"undefined":_typeof(row))?row:[[row,propOrCol,value]]}function expandType(obj){if(obj.hasOwnProperty("type")){var type,expandedType={};if("object"===_typeof(obj.type))type=obj.type;else if("string"==typeof obj.type&&(type=Handsontable.cellTypes[obj.type],void 0===type))throw new Error('You declared cell type "'+obj.type+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');for(var i in type)type.hasOwnProperty(i)&&!obj.hasOwnProperty(i)&&(expandedType[i]=type[i]);return expandedType}}function postMortem(){throw new Error("This method cannot be called because this Handsontable instance has been destroyed")}var priv,datamap,dataSource,grid,selection,editorManager,instance=this,GridSettings=function(){},eventManager=eventManagerObject(instance),recordTranslator=getTranslator(instance);extend(GridSettings.prototype,DefaultSettings.prototype),extend(GridSettings.prototype,userSettings),extend(GridSettings.prototype,expandType(userSettings)),this.rootElement=rootElement,this.isHotTableEnv=isChildOfWebComponentTable(this.rootElement),Handsontable.eventManager.isHotTableEnv=this.isHotTableEnv,this.container=document.createElement("DIV"),this.renderCall=!1,rootElement.insertBefore(this.container,rootElement.firstChild),this.guid="ht_"+randomString(),dataSource=new DataSource(instance),this.rootElement.id&&"ht_"!==this.rootElement.id.substring(0,3)||(this.rootElement.id=this.guid),priv={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width"],settings:new GridSettings,selRange:null,isPopulated:null,scrollable:null,firstRun:!0},grid={alter:function(action,index,amount,source,keepEmptyRows){function spliceWith(data,index,count,toInject){var valueFactory=function(){var result;return"array"===toInject?result=[]:"object"===toInject&&(result={}),result},spliceArgs=arrayMap(new Array(count),function(){return valueFactory()});spliceArgs.unshift(index,0),data.splice.apply(data,spliceArgs)}var delta;switch(amount=amount||1,action){case"insert_row":if(instance.getSettings().maxRows===instance.countSourceRows())return;delta=datamap.createRow(index,amount,source),spliceWith(priv.cellSettings,index,amount,"array"),delta&&(selection.isSelected()&&priv.selRange.from.row>=index?(priv.selRange.from.row=priv.selRange.from.row+delta,selection.transformEnd(delta,0)):selection.refreshBorders());break;case"insert_col":delta=datamap.createCol(index,amount,source);for(var row=0,len=instance.countSourceRows();row<len;row++)priv.cellSettings[row]&&spliceWith(priv.cellSettings[row],index,amount);if(delta){if(Array.isArray(instance.getSettings().colHeaders)){var spliceArray=[index,0];spliceArray.length+=delta,Array.prototype.splice.apply(instance.getSettings().colHeaders,spliceArray)}selection.isSelected()&&priv.selRange.from.col>=index?(priv.selRange.from.col=priv.selRange.from.col+delta,selection.transformEnd(0,delta)):selection.refreshBorders()}break;case"remove_row":datamap.removeRow(index,amount,source),priv.cellSettings.splice(index,amount);var totalRows=instance.countRows(),fixedRowsTop=instance.getSettings().fixedRowsTop;fixedRowsTop>=index+1&&(instance.getSettings().fixedRowsTop-=Math.min(amount,fixedRowsTop-index));var fixedRowsBottom=instance.getSettings().fixedRowsBottom;fixedRowsBottom&&index>=totalRows-fixedRowsBottom&&(instance.getSettings().fixedRowsBottom-=Math.min(amount,fixedRowsBottom)),grid.adjustRowsAndCols(),selection.refreshBorders();break;case"remove_col":var logicalColumnIndex=recordTranslator.toPhysicalColumn(index);datamap.removeCol(index,amount,source);for(var row$__25=0,len$__26=instance.countSourceRows();row$__25<len$__26;row$__25++)priv.cellSettings[row$__25]&&priv.cellSettings[row$__25].splice(logicalColumnIndex,amount);var fixedColumnsLeft=instance.getSettings().fixedColumnsLeft;fixedColumnsLeft>=index+1&&(instance.getSettings().fixedColumnsLeft-=Math.min(amount,fixedColumnsLeft-index)),Array.isArray(instance.getSettings().colHeaders)&&("undefined"==typeof logicalColumnIndex&&(logicalColumnIndex=-1),instance.getSettings().colHeaders.splice(logicalColumnIndex,amount)),grid.adjustRowsAndCols(),selection.refreshBorders();break;default:throw new Error('There is no such action "'+action+'"')}keepEmptyRows||grid.adjustRowsAndCols()},adjustRowsAndCols:function(){if(priv.settings.minRows){var rows=instance.countRows();if(rows<priv.settings.minRows)for(var r=0,minRows=priv.settings.minRows;r<minRows-rows;r++)datamap.createRow(instance.countRows(),1,"auto")}if(priv.settings.minSpareRows){var emptyRows=instance.countEmptyRows(!0);if(emptyRows<priv.settings.minSpareRows)for(;emptyRows<priv.settings.minSpareRows&&instance.countSourceRows()<priv.settings.maxRows;emptyRows++)datamap.createRow(instance.countRows(),1,"auto")}var emptyCols;if((priv.settings.minCols||priv.settings.minSpareCols)&&(emptyCols=instance.countEmptyCols(!0)),priv.settings.minCols&&!priv.settings.columns&&instance.countCols()<priv.settings.minCols)for(;instance.countCols()<priv.settings.minCols;emptyCols++)datamap.createCol(instance.countCols(),1,"auto");if(priv.settings.minSpareCols&&!priv.settings.columns&&"array"===instance.dataType&&emptyCols<priv.settings.minSpareCols)for(;emptyCols<priv.settings.minSpareCols&&instance.countCols()<priv.settings.maxCols;emptyCols++)datamap.createCol(instance.countCols(),1,"auto");var rowCount=instance.countRows(),colCount=instance.countCols();if(0!==rowCount&&0!==colCount||selection.deselect(),selection.isSelected()){var selectionChanged=!1,fromRow=priv.selRange.from.row,fromCol=priv.selRange.from.col,toRow=priv.selRange.to.row,toCol=priv.selRange.to.col;fromRow>rowCount-1?(fromRow=rowCount-1,selectionChanged=!0,toRow>fromRow&&(toRow=fromRow)):toRow>rowCount-1&&(toRow=rowCount-1,selectionChanged=!0,fromRow>toRow&&(fromRow=toRow)),fromCol>colCount-1?(fromCol=colCount-1,selectionChanged=!0,toCol>fromCol&&(toCol=fromCol)):toCol>colCount-1&&(toCol=colCount-1,selectionChanged=!0,fromCol>toCol&&(fromCol=toCol)),selectionChanged&&instance.selectCell(fromRow,fromCol,toRow,toCol)}instance.view&&instance.view.wt.wtOverlays.adjustElementsSize()},populateFromArray:function(start,input,end,source,method,direction,deltas){var r,rlen,c,clen,setData=[],current={};if(rlen=input.length,0===rlen)return!1;var repeatCol,repeatRow,cmax,rmax;({row:null===end?null:end.row,col:null===end?null:end.col});switch(method){case"shift_down":for(repeatCol=end?end.col-start.col+1:0,repeatRow=end?end.row-start.row+1:0,input=translateRowsToColumns(input),c=0,clen=input.length,cmax=Math.max(clen,repeatCol);c<cmax;c++)if(c<clen){for(r=0,rlen=input[c].length;r<repeatRow-rlen;r++)input[c].push(input[c][r%rlen]);input[c].unshift(start.col+c,start.row,0),instance.spliceCol.apply(instance,input[c])}else input[c%clen][0]=start.col+c,instance.spliceCol.apply(instance,input[c%clen]);break;case"shift_right":for(repeatCol=end?end.col-start.col+1:0,repeatRow=end?end.row-start.row+1:0,r=0,rlen=input.length,rmax=Math.max(rlen,repeatRow);r<rmax;r++)if(r<rlen){for(c=0,clen=input[r].length;c<repeatCol-clen;c++)input[r].push(input[r][c%clen]);input[r].unshift(start.row+r,start.col,0),instance.spliceRow.apply(instance,input[r])}else input[r%rlen][0]=start.row+r,instance.spliceRow.apply(instance,input[r%rlen]);break;case"overwrite":default:current.row=start.row,current.col=start.col;var cellMeta,selected={row:end&&start?end.row-start.row+1:1,col:end&&start?end.col-start.col+1:1},skippedRow=0,skippedColumn=0,pushData=!0,getInputValue=function(row){var col=void 0!==arguments[1]?arguments[1]:null,rowValue=input[row%input.length];return null!==col?rowValue[col%rowValue.length]:rowValue},rowInputLength=input.length,rowSelectionLength=end?end.row-start.row+1:0;for(rlen=end?rowSelectionLength:Math.max(rowInputLength,rowSelectionLength),r=0;r<rlen&&!(end&&current.row>end.row&&rowSelectionLength>rowInputLength||!priv.settings.allowInsertRow&&current.row>instance.countRows()-1||current.row>=priv.settings.maxRows);r++){var logicalRow=r-skippedRow,colInputLength=getInputValue(logicalRow).length,colSelectionLength=end?end.col-start.col+1:0;if(clen=end?colSelectionLength:Math.max(colInputLength,colSelectionLength),current.col=start.col,cellMeta=instance.getCellMeta(current.row,current.col),"paste"!==source&&"autofill"!==source||!cellMeta.skipRowOnPaste){for(skippedColumn=0,c=0;c<clen&&!(end&&current.col>end.col&&colSelectionLength>colInputLength||!priv.settings.allowInsertColumn&&current.col>instance.countCols()-1||current.col>=priv.settings.maxCols);c++)if(cellMeta=instance.getCellMeta(current.row,current.col),"paste"!==source&&"autofill"!==source||!cellMeta.skipColumnOnPaste)if(cellMeta.readOnly)current.col++;else{var logicalColumn=c-skippedColumn,value=getInputValue(logicalRow,logicalColumn),orgValue=instance.getDataAtCell(current.row,current.col),index={row:logicalRow,col:logicalColumn};if("autofill"===source){var result=instance.runHooks("beforeAutofillInsidePopulate",index,direction,input,deltas,{},selected);result&&(value=isUndefined(result.value)?value:result.value)}if(null!==value&&"object"===("undefined"==typeof value?"undefined":_typeof(value)))if(null===orgValue||"object"!==("undefined"==typeof orgValue?"undefined":_typeof(orgValue)))pushData=!1;else{var orgValueSchema=duckSchema(orgValue[0]||orgValue),valueSchema=duckSchema(value[0]||value);isObjectEquals(orgValueSchema,valueSchema)?value=deepClone(value):pushData=!1}else null!==orgValue&&"object"===("undefined"==typeof orgValue?"undefined":_typeof(orgValue))&&(pushData=!1);pushData&&setData.push([current.row,current.col,value]),pushData=!0,current.col++}else skippedColumn++,current.col++,clen++;current.row++}else skippedRow++,current.row++,rlen++}instance.setDataAtCell(setData,null,null,source||"populateFromArray")}}},this.selection=selection={inProgress:!1,selectedHeader:{cols:!1,rows:!1},setSelectedHeaders:function(){var rows=void 0!==arguments[0]&&arguments[0],cols=void 0!==arguments[1]&&arguments[1],corner=void 0!==arguments[2]&&arguments[2];instance.selection.selectedHeader.rows=rows,instance.selection.selectedHeader.cols=cols,instance.selection.selectedHeader.corner=corner},begin:function(){instance.selection.inProgress=!0},finish:function(){var sel=instance.getSelected();Handsontable.hooks.run(instance,"afterSelectionEnd",sel[0],sel[1],sel[2],sel[3]),Handsontable.hooks.run(instance,"afterSelectionEndByProp",sel[0],instance.colToProp(sel[1]),sel[2],instance.colToProp(sel[3])),instance.selection.inProgress=!1},isInProgress:function(){return instance.selection.inProgress},setRangeStart:function(coords,keepEditorOpened){Handsontable.hooks.run(instance,"beforeSetRangeStart",coords),priv.selRange=new WalkontableCellRange(coords,coords,coords),selection.setRangeEnd(coords,null,keepEditorOpened)},setRangeStartOnly:function(coords){Handsontable.hooks.run(instance,"beforeSetRangeStartOnly",coords),priv.selRange=new WalkontableCellRange(coords,coords,coords)},setRangeEnd:function(coords,scrollToCell,keepEditorOpened){if(null!==priv.selRange){var disableVisualSelection,isHeaderSelected=!1,areCoordsPositive=!0,firstVisibleRow=instance.view.wt.wtTable.getFirstVisibleRow(),firstVisibleColumn=instance.view.wt.wtTable.getFirstVisibleColumn(),newRangeCoords={row:null,col:null};Handsontable.hooks.run(instance,"beforeSetRangeEnd",coords),instance.selection.begin(),newRangeCoords.row=coords.row<0?firstVisibleRow:coords.row,newRangeCoords.col=coords.col<0?firstVisibleColumn:coords.col,priv.selRange.to=new WalkontableCellCoords(newRangeCoords.row,newRangeCoords.col),priv.settings.multiSelect||(priv.selRange.from=coords),instance.view.wt.selections.current.clear(),disableVisualSelection=instance.getCellMeta(priv.selRange.highlight.row,priv.selRange.highlight.col).disableVisualSelection,"string"==typeof disableVisualSelection&&(disableVisualSelection=[disableVisualSelection]),(disableVisualSelection===!1||Array.isArray(disableVisualSelection)&&disableVisualSelection.indexOf("current")===-1)&&instance.view.wt.selections.current.add(priv.selRange.highlight),instance.view.wt.selections.area.clear(),(disableVisualSelection===!1||Array.isArray(disableVisualSelection)&&disableVisualSelection.indexOf("area")===-1)&&selection.isMultiple()&&(instance.view.wt.selections.area.add(priv.selRange.from),instance.view.wt.selections.area.add(priv.selRange.to)),(priv.settings.currentHeaderClassName||priv.settings.currentRowClassName||priv.settings.currentColClassName)&&(instance.view.wt.selections.highlight.clear(),instance.view.wt.selections.highlight.add(priv.selRange.from),instance.view.wt.selections.highlight.add(priv.selRange.to)),Handsontable.hooks.run(instance,"afterSelection",priv.selRange.from.row,priv.selRange.from.col,priv.selRange.to.row,priv.selRange.to.col),Handsontable.hooks.run(instance,"afterSelectionByProp",priv.selRange.from.row,datamap.colToProp(priv.selRange.from.col),priv.selRange.to.row,datamap.colToProp(priv.selRange.to.col)),(0===priv.selRange.from.row&&priv.selRange.to.row===instance.countRows()-1&&instance.countRows()>1||0===priv.selRange.from.col&&priv.selRange.to.col===instance.countCols()-1&&instance.countCols()>1)&&(isHeaderSelected=!0),(coords.row<0||coords.col<0)&&(areCoordsPositive=!1),scrollToCell!==!1&&!isHeaderSelected&&areCoordsPositive&&(priv.selRange.from&&!selection.isMultiple()?instance.view.scrollViewport(priv.selRange.from):instance.view.scrollViewport(coords)),selection.refreshBorders(null,keepEditorOpened)}},refreshBorders:function(revertOriginal,keepEditor){keepEditor||editorManager.destroyEditor(revertOriginal),instance.view.render(),selection.isSelected()&&!keepEditor&&editorManager.prepareEditor()},isMultiple:function isMultiple(){var isMultiple=!(priv.selRange.to.col===priv.selRange.from.col&&priv.selRange.to.row===priv.selRange.from.row),modifier=Handsontable.hooks.run(instance,"afterIsMultipleSelection",isMultiple);if(isMultiple)return modifier},transformStart:function(rowDelta,colDelta,force,keepEditorOpened){var totalRows,totalCols,coords,fixedRowsBottom,delta=new WalkontableCellCoords(rowDelta,colDelta),rowTransformDir=0,colTransformDir=0;instance.runHooks("modifyTransformStart",delta),totalRows=instance.countRows(),totalCols=instance.countCols(),fixedRowsBottom=instance.getSettings().fixedRowsBottom,priv.selRange.highlight.row+rowDelta>totalRows-1?force&&priv.settings.minSpareRows>0&&!(fixedRowsBottom&&priv.selRange.highlight.row>=totalRows-fixedRowsBottom-1)?(instance.alter("insert_row",totalRows),totalRows=instance.countRows()):priv.settings.autoWrapCol&&(delta.row=1-totalRows,delta.col=priv.selRange.highlight.col+delta.col==totalCols-1?1-totalCols:1):priv.settings.autoWrapCol&&priv.selRange.highlight.row+delta.row<0&&priv.selRange.highlight.col+delta.col>=0&&(delta.row=totalRows-1,delta.col=priv.selRange.highlight.col+delta.col==0?totalCols-1:-1),priv.selRange.highlight.col+delta.col>totalCols-1?force&&priv.settings.minSpareCols>0?(instance.alter("insert_col",totalCols),totalCols=instance.countCols()):priv.settings.autoWrapRow&&(delta.row=priv.selRange.highlight.row+delta.row==totalRows-1?1-totalRows:1,delta.col=1-totalCols):priv.settings.autoWrapRow&&priv.selRange.highlight.col+delta.col<0&&priv.selRange.highlight.row+delta.row>=0&&(delta.row=priv.selRange.highlight.row+delta.row==0?totalRows-1:-1,delta.col=totalCols-1),coords=new WalkontableCellCoords(priv.selRange.highlight.row+delta.row,priv.selRange.highlight.col+delta.col),coords.row<0?(rowTransformDir=-1,coords.row=0):coords.row>0&&coords.row>=totalRows&&(rowTransformDir=1,coords.row=totalRows-1),coords.col<0?(colTransformDir=-1,coords.col=0):coords.col>0&&coords.col>=totalCols&&(colTransformDir=1,coords.col=totalCols-1),instance.runHooks("afterModifyTransformStart",coords,rowTransformDir,colTransformDir),selection.setRangeStart(coords,keepEditorOpened)},transformEnd:function(rowDelta,colDelta){var totalRows,totalCols,coords,delta=new WalkontableCellCoords(rowDelta,colDelta),rowTransformDir=0,colTransformDir=0;instance.runHooks("modifyTransformEnd",delta),totalRows=instance.countRows(),totalCols=instance.countCols(),coords=new WalkontableCellCoords(priv.selRange.to.row+delta.row,priv.selRange.to.col+delta.col),coords.row<0?(rowTransformDir=-1,coords.row=0):coords.row>0&&coords.row>=totalRows&&(rowTransformDir=1,coords.row=totalRows-1),coords.col<0?(colTransformDir=-1,coords.col=0):coords.col>0&&coords.col>=totalCols&&(colTransformDir=1,coords.col=totalCols-1),instance.runHooks("afterModifyTransformEnd",coords,rowTransformDir,colTransformDir),selection.setRangeEnd(coords,!0)},isSelected:function(){return null!==priv.selRange},inInSelection:function(coords){return!!selection.isSelected()&&priv.selRange.includes(coords)},deselect:function(){selection.isSelected()&&(instance.selection.inProgress=!1,priv.selRange=null,instance.view.wt.selections.current.clear(),instance.view.wt.selections.area.clear(),(priv.settings.currentHeaderClassName||priv.settings.currentRowClassName||priv.settings.currentColClassName)&&instance.view.wt.selections.highlight.clear(),editorManager.destroyEditor(),selection.refreshBorders(),removeClass(instance.rootElement,["ht__selection--rows","ht__selection--columns"]),Handsontable.hooks.run(instance,"afterDeselect"))},selectAll:function(){priv.settings.multiSelect&&(selection.setRangeStart(new WalkontableCellCoords(0,0)),selection.setRangeEnd(new WalkontableCellCoords(instance.countRows()-1,instance.countCols()-1),!1))},empty:function(){if(selection.isSelected()){var r,c,topLeft=priv.selRange.getTopLeftCorner(),bottomRight=priv.selRange.getBottomRightCorner(),changes=[];for(r=topLeft.row;r<=bottomRight.row;r++)for(c=topLeft.col;c<=bottomRight.col;c++)instance.getCellMeta(r,c).readOnly||changes.push([r,c,""]);instance.setDataAtCell(changes)}}},this.init=function(){dataSource.setData(priv.settings.data),Handsontable.hooks.run(instance,"beforeInit"),isMobileBrowser()&&addClass(instance.rootElement,"mobile"),this.updateSettings(priv.settings,!0),this.view=new TableView(this),editorManager=new EditorManager(instance,priv,selection,datamap),this.forceFullRender=!0,Handsontable.hooks.run(instance,"init"),this.view.render(),"object"===_typeof(priv.firstRun)&&(Handsontable.hooks.run(instance,"afterChange",priv.firstRun[0],priv.firstRun[1]),priv.firstRun=!1),Handsontable.hooks.run(instance,"afterInit")},this.validateCell=function(value,cellProperties,callback,source){function done(valid){var col=cellProperties.visualCol,row=cellProperties.visualRow,td=instance.getCell(row,col,!0);td&&"TH"!=td.nodeName&&instance.view.wt.wtSettings.settings.cellRenderer(row,col,td),callback(valid)}var validator=instance.getCellValidator(cellProperties);"[object RegExp]"===Object.prototype.toString.call(validator)&&(validator=function(validator){return function(value,callback){callback(validator.test(value))}}(validator)),isFunction(validator)?(value=Handsontable.hooks.run(instance,"beforeValidate",value,cellProperties.visualRow,cellProperties.prop,source),instance._registerTimeout(setTimeout(function(){validator.call(cellProperties,value,function(valid){valid=Handsontable.hooks.run(instance,"afterValidate",valid,value,cellProperties.visualRow,cellProperties.prop,source),cellProperties.valid=valid,done(valid),Handsontable.hooks.run(instance,"postAfterValidate",valid,value,cellProperties.visualRow,cellProperties.prop,source)})},0))):instance._registerTimeout(setTimeout(function(){cellProperties.valid=!0,done(cellProperties.valid)},0))},this.setDataAtCell=function(row,col,value,source){var i,ilen,prop,input=setDataInputToArray(row,col,value),changes=[];for(i=0,ilen=input.length;i<ilen;i++){if("object"!==_typeof(input[i]))throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof input[i][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");prop=datamap.colToProp(input[i][1]),changes.push([input[i][0],prop,dataSource.getAtCell(recordTranslator.toPhysicalRow(input[i][0]),input[i][1]),input[i][2]])}source||"object"!==("undefined"==typeof row?"undefined":_typeof(row))||(source=col),instance.runHooks("afterSetDataAtCell",changes,source),validateChanges(changes,source,function(){applyChanges(changes,source)})},this.setDataAtRowProp=function(row,prop,value,source){var i,ilen,input=setDataInputToArray(row,prop,value),changes=[];for(i=0,ilen=input.length;i<ilen;i++)changes.push([input[i][0],input[i][1],dataSource.getAtCell(recordTranslator.toPhysicalRow(input[i][0]),input[i][1]),input[i][2]]);source||"object"!==("undefined"==typeof row?"undefined":_typeof(row))||(source=prop),instance.runHooks("afterSetDataAtRowProp",changes,source),validateChanges(changes,source,function(){applyChanges(changes,source)})},this.listen=function(){Handsontable.activeGuid=instance.guid},this.unlisten=function(){Handsontable.activeGuid=null},this.isListening=function(){return Handsontable.activeGuid===instance.guid},this.destroyEditor=function(revertOriginal){selection.refreshBorders(revertOriginal)},this.populateFromArray=function(row,col,input,endRow,endCol,source,method,direction,deltas){var c;if("object"!==("undefined"==typeof input?"undefined":_typeof(input))||"object"!==_typeof(input[0]))throw new Error("populateFromArray parameter `input` must be an array of arrays");return c="number"==typeof endRow?new WalkontableCellCoords(endRow,endCol):null,grid.populateFromArray(new WalkontableCellCoords(row,col),input,c,source,method,direction,deltas)},this.spliceCol=function(col,index,amount){return datamap.spliceCol.apply(datamap,arguments)},this.spliceRow=function(row,index,amount){return datamap.spliceRow.apply(datamap,arguments)},this.getSelected=function(){if(selection.isSelected())return[priv.selRange.from.row,priv.selRange.from.col,priv.selRange.to.row,priv.selRange.to.col]},this.getSelectedRange=function(){if(selection.isSelected())return priv.selRange},this.render=function(){instance.view&&(instance.renderCall=!0,instance.forceFullRender=!0,selection.refreshBorders(null,!0))},this.loadData=function(data){function clearCellSettingCache(){priv.cellSettings.length=0}if(Array.isArray(priv.settings.dataSchema)?instance.dataType="array":isFunction(priv.settings.dataSchema)?instance.dataType="function":instance.dataType="object",datamap&&datamap.destroy(),datamap=new DataMap(instance,priv,GridSettings),"object"===("undefined"==typeof data?"undefined":_typeof(data))&&null!==data)data.push&&data.splice||(data=[data]);else{if(null!==data)throw new Error("loadData only accepts array of objects or array of arrays ("+("undefined"==typeof data?"undefined":_typeof(data))+" given)");data=[];var row,r=0,rlen=0,dataSchema=datamap.getSchema();for(r=0,rlen=priv.settings.startRows;r<rlen;r++)if("object"!==instance.dataType&&"function"!==instance.dataType||!priv.settings.dataSchema)if("array"===instance.dataType)row=deepClone(dataSchema[0]),data.push(row);else{row=[];for(var c=0,clen=priv.settings.startCols;c<clen;c++)row.push(null);data.push(row)}else row=deepClone(dataSchema),data.push(row)}priv.isPopulated=!1,GridSettings.prototype.data=data,Array.isArray(data[0])&&(instance.dataType="array"),datamap.dataSource=data,dataSource.data=data,dataSource.dataType=instance.dataType,dataSource.colToProp=datamap.colToProp.bind(datamap),dataSource.propToCol=datamap.propToCol.bind(datamap),clearCellSettingCache(),grid.adjustRowsAndCols(),Handsontable.hooks.run(instance,"afterLoadData",priv.firstRun),priv.firstRun?priv.firstRun=[null,"loadData"]:(Handsontable.hooks.run(instance,"afterChange",null,"loadData"),instance.render()),priv.isPopulated=!0},this.getData=function(r,c,r2,c2){return isUndefined(r)?datamap.getAll():datamap.getRange(new WalkontableCellCoords(r,c),new WalkontableCellCoords(r2,c2),datamap.DESTINATION_RENDERER)},this.getCopyableText=function(startRow,startCol,endRow,endCol){return datamap.getCopyableText(new WalkontableCellCoords(startRow,startCol),new WalkontableCellCoords(endRow,endCol))},this.getCopyableData=function(row,column){return datamap.getCopyable(row,datamap.colToProp(column))},this.getSchema=function(){return datamap.getSchema()},this.updateSettings=function(settings,init){
var i,j,clen,columnsAsFunc=!1;if(isDefined(settings.rows))throw new Error('"rows" setting is no longer supported. do you mean startRows, minRows or maxRows?');if(isDefined(settings.cols))throw new Error('"cols" setting is no longer supported. do you mean startCols, minCols or maxCols?');for(i in settings)"data"!==i&&(Handsontable.hooks.getRegistered().indexOf(i)>-1?(isFunction(settings[i])||Array.isArray(settings[i]))&&instance.addHook(i,settings[i]):!init&&settings.hasOwnProperty(i)&&(GridSettings.prototype[i]=settings[i]));if(void 0===settings.data&&void 0===priv.settings.data?instance.loadData(null):void 0!==settings.data?instance.loadData(settings.data):void 0!==settings.columns&&datamap.createMap(),clen=instance.countCols(),settings.columns&&isFunction(settings.columns)&&(clen=instance.countSourceCols(),columnsAsFunc=!0),void 0===settings.cell&&void 0===settings.cells&&void 0===settings.columns||(priv.cellSettings.length=0),clen>0){var proto,column;for(i=0,j=0;i<clen;i++)columnsAsFunc&&!settings.columns(i)||(priv.columnSettings[j]=columnFactory(GridSettings,priv.columnsSettingConflicts),proto=priv.columnSettings[j].prototype,GridSettings.prototype.columns&&(column=columnsAsFunc?GridSettings.prototype.columns(i):GridSettings.prototype.columns[j],column&&(extend(proto,column),extend(proto,expandType(column)))),j++)}if(isDefined(settings.cell))for(var key in settings.cell)if(settings.cell.hasOwnProperty(key)){var cell=settings.cell[key];instance.setCellMetaObject(cell.row,cell.col,cell)}Handsontable.hooks.run(instance,"afterCellMetaReset"),isDefined(settings.className)&&(GridSettings.prototype.className&&removeClass(instance.rootElement,GridSettings.prototype.className),settings.className&&addClass(instance.rootElement,settings.className));var currentHeight=instance.rootElement.style.height;""!==currentHeight&&(currentHeight=parseInt(instance.rootElement.style.height,10));var height=settings.height;if(isFunction(height)&&(height=height()),init){var initialStyle=instance.rootElement.getAttribute("style");initialStyle&&instance.rootElement.setAttribute("data-initialstyle",instance.rootElement.getAttribute("style"))}if(null===height){var initialStyle$__27=instance.rootElement.getAttribute("data-initialstyle");initialStyle$__27&&(initialStyle$__27.indexOf("height")>-1||initialStyle$__27.indexOf("overflow")>-1)?instance.rootElement.setAttribute("style",initialStyle$__27):(instance.rootElement.style.height="",instance.rootElement.style.overflow="")}else void 0!==height&&(instance.rootElement.style.height=height+"px",instance.rootElement.style.overflow="hidden");if("undefined"!=typeof settings.width){var width=settings.width;isFunction(width)&&(width=width()),instance.rootElement.style.width=width+"px"}init||(datamap.clearLengthCache(),Handsontable.hooks.run(instance,"afterUpdateSettings")),grid.adjustRowsAndCols(),instance.view&&!priv.firstRun&&(instance.forceFullRender=!0,selection.refreshBorders(null,!0)),init||!instance.view||""!==currentHeight&&""!==height&&void 0!==height||currentHeight===height||instance.view.wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){var sel=instance.getSelected();if(GridSettings.prototype.getValue){if(isFunction(GridSettings.prototype.getValue))return GridSettings.prototype.getValue.call(instance);if(sel)return instance.getData()[sel[0]][GridSettings.prototype.getValue]}else if(sel)return instance.getDataAtCell(sel[0],sel[1])},this.getSettings=function(){return priv.settings},this.clear=function(){selection.selectAll(),selection.empty()},this.alter=function(action,index,amount,source,keepEmptyRows){grid.alter(action,index,amount,source,keepEmptyRows)},this.getCell=function(row,col,topmost){return instance.view.getCellAtCoords(new WalkontableCellCoords(row,col),topmost)},this.getCoords=function(elem){return this.view.wt.wtTable.getCoords.call(this.view.wt.wtTable,elem)},this.colToProp=function(col){return datamap.colToProp(col)},this.propToCol=function(prop){return datamap.propToCol(prop)},this.toVisualRow=function(row){return recordTranslator.toVisualRow(row)},this.toVisualColumn=function(column){return recordTranslator.toVisualColumn(column)},this.toPhysicalRow=function(row){return recordTranslator.toPhysicalRow(row)},this.toPhysicalColumn=function(column){return recordTranslator.toPhysicalColumn(column)},this.getDataAtCell=function(row,col){return datamap.get(row,datamap.colToProp(col))},this.getDataAtRowProp=function(row,prop){return datamap.get(row,prop)},this.getDataAtCol=function(col){var out=[];return out.concat.apply(out,datamap.getRange(new WalkontableCellCoords(0,col),new WalkontableCellCoords(priv.settings.data.length-1,col),datamap.DESTINATION_RENDERER))},this.getDataAtProp=function(prop){var range,out=[];return range=datamap.getRange(new WalkontableCellCoords(0,datamap.propToCol(prop)),new WalkontableCellCoords(priv.settings.data.length-1,datamap.propToCol(prop)),datamap.DESTINATION_RENDERER),out.concat.apply(out,range)},this.getSourceData=function(r,c,r2,c2){var data;return data=void 0===r?dataSource.getData():dataSource.getByRange(new WalkontableCellCoords(r,c),new WalkontableCellCoords(r2,c2))},this.getSourceDataArray=function(r,c,r2,c2){var data;return data=void 0===r?dataSource.getData(!0):dataSource.getByRange(new WalkontableCellCoords(r,c),new WalkontableCellCoords(r2,c2),!0)},this.getSourceDataAtCol=function(column){return dataSource.getAtColumn(column)},this.getSourceDataAtRow=function(row){return dataSource.getAtRow(row)},this.getSourceDataAtCell=function(row,column){return dataSource.getAtCell(row,column)},this.getDataAtRow=function(row){var data=datamap.getRange(new WalkontableCellCoords(row,0),new WalkontableCellCoords(row,this.countCols()-1),datamap.DESTINATION_RENDERER);return data[0]},this.getDataType=function(rowFrom,columnFrom,rowTo,columnTo){var $__23=this,previousType=null,currentType=null;void 0===rowFrom&&(rowFrom=0,rowTo=this.countRows(),columnFrom=0,columnTo=this.countCols()),void 0===rowTo&&(rowTo=rowFrom),void 0===columnTo&&(columnTo=columnFrom);var type="mixed";return rangeEach(Math.min(rowFrom,rowTo),Math.max(rowFrom,rowTo),function(row){var isTypeEqual=!0;return rangeEach(Math.min(columnFrom,columnTo),Math.max(columnFrom,columnTo),function(column){var cellType=$__23.getCellMeta(row,column);return currentType=cellType.type,previousType?isTypeEqual=previousType===currentType:previousType=currentType,isTypeEqual}),type=isTypeEqual?currentType:"mixed",isTypeEqual}),type},this.removeCellMeta=function(row,col,key){var cellMeta=instance.getCellMeta(row,col);void 0!=cellMeta[key]&&delete priv.cellSettings[row][col][key]},this.setCellMetaObject=function(row,col,prop){if("object"===("undefined"==typeof prop?"undefined":_typeof(prop)))for(var key in prop)if(prop.hasOwnProperty(key)){var value=prop[key];this.setCellMeta(row,col,key,value)}},this.setCellMeta=function(row,col,key,val){priv.cellSettings[row]||(priv.cellSettings[row]=[]),priv.cellSettings[row][col]||(priv.cellSettings[row][col]=new priv.columnSettings[col]),priv.cellSettings[row][col][key]=val,Handsontable.hooks.run(instance,"afterSetCellMeta",row,col,key,val)},this.getCellsMeta=function(){return arrayFlatten(priv.cellSettings)},this.getCellMeta=function(row,col){var $__24,cellProperties,prop=datamap.colToProp(col),visualRow=row,visualCol=col;if($__24=recordTranslator.toPhysical(row,col),row=$__24[0],col=$__24[1],$__24,priv.columnSettings[col]||(priv.columnSettings[col]=columnFactory(GridSettings,priv.columnsSettingConflicts)),priv.cellSettings[row]||(priv.cellSettings[row]=[]),priv.cellSettings[row][col]||(priv.cellSettings[row][col]=new priv.columnSettings[col]),cellProperties=priv.cellSettings[row][col],cellProperties.row=row,cellProperties.col=col,cellProperties.visualRow=visualRow,cellProperties.visualCol=visualCol,cellProperties.prop=prop,cellProperties.instance=instance,Handsontable.hooks.run(instance,"beforeGetCellMeta",row,col,cellProperties),extend(cellProperties,expandType(cellProperties)),cellProperties.cells){var settings=cellProperties.cells.call(cellProperties,row,col,prop);settings&&(extend(cellProperties,settings),extend(cellProperties,expandType(settings)))}return Handsontable.hooks.run(instance,"afterGetCellMeta",row,col,cellProperties),cellProperties},this.isColumnModificationAllowed=function(){return!("object"===instance.dataType||instance.getSettings().columns)};var rendererLookup=cellMethodLookupFactory("renderer");this.getCellRenderer=function(row,col){var renderer=rendererLookup.call(this,row,col);return getRenderer(renderer)},this.getCellEditor=cellMethodLookupFactory("editor"),this.getCellValidator=cellMethodLookupFactory("validator"),this.validateCells=function(callback){var waitingForValidator=new ValidatorsQueue;callback&&(waitingForValidator.onQueueEmpty=callback);for(var i=instance.countRows()-1;i>=0;){for(var j=instance.countCols()-1;j>=0;)waitingForValidator.addValidatorToQueue(),instance.validateCell(instance.getDataAtCell(i,j),instance.getCellMeta(i,j),function(result){if("boolean"!=typeof result)throw new Error("Validation error: result is not boolean");result===!1&&(waitingForValidator.valid=!1),waitingForValidator.removeValidatorFormQueue()},"validateCells"),j--;i--}waitingForValidator.checkIfQueueIsEmpty()},this.getRowHeader=function(row){var rowHeader=priv.settings.rowHeaders;return void 0!==row&&(row=Handsontable.hooks.run(instance,"modifyRowHeader",row)),void 0===row?(rowHeader=[],rangeEach(instance.countRows()-1,function(i){rowHeader.push(instance.getRowHeader(i))})):Array.isArray(rowHeader)&&void 0!==rowHeader[row]?rowHeader=rowHeader[row]:isFunction(rowHeader)?rowHeader=rowHeader(row):rowHeader&&"string"!=typeof rowHeader&&"number"!=typeof rowHeader&&(rowHeader=row+1),rowHeader},this.hasRowHeaders=function(){return!!priv.settings.rowHeaders},this.hasColHeaders=function(){if(void 0!==priv.settings.colHeaders&&null!==priv.settings.colHeaders)return!!priv.settings.colHeaders;for(var i=0,ilen=instance.countCols();i<ilen;i++)if(instance.getColHeader(i))return!0;return!1},this.getColHeader=function(col){var columnsAsFunc=priv.settings.columns&&isFunction(priv.settings.columns),result=priv.settings.colHeaders;if(col=Handsontable.hooks.run(instance,"modifyColHeader",col),void 0===col){for(var out=[],ilen=columnsAsFunc?instance.countSourceCols():instance.countCols(),i=0;i<ilen;i++)out.push(instance.getColHeader(i));result=out}else{var translateVisualIndexToColumns=function(col){for(var arr=[],columnsLen=instance.countSourceCols(),index=0;index<columnsLen;index++)isFunction(instance.getSettings().columns)&&instance.getSettings().columns(index)&&arr.push(index);return arr[col]},baseCol=col;col=Handsontable.hooks.run(instance,"modifyCol",col);var prop=translateVisualIndexToColumns(col);priv.settings.columns&&isFunction(priv.settings.columns)&&priv.settings.columns(prop)&&priv.settings.columns(prop).title?result=priv.settings.columns(prop).title:priv.settings.columns&&priv.settings.columns[col]&&priv.settings.columns[col].title?result=priv.settings.columns[col].title:Array.isArray(priv.settings.colHeaders)&&void 0!==priv.settings.colHeaders[col]?result=priv.settings.colHeaders[col]:isFunction(priv.settings.colHeaders)?result=priv.settings.colHeaders(col):priv.settings.colHeaders&&"string"!=typeof priv.settings.colHeaders&&"number"!=typeof priv.settings.colHeaders&&(result=spreadsheetColumnLabel(baseCol))}return result},this._getColWidthFromSettings=function(col){var cellProperties=instance.getCellMeta(0,col),width=cellProperties.width;if(void 0!==width&&width!==priv.settings.width||(width=cellProperties.colWidths),void 0!==width&&null!==width){switch("undefined"==typeof width?"undefined":_typeof(width)){case"object":width=width[col];break;case"function":width=width(col)}"string"==typeof width&&(width=parseInt(width,10))}return width},this.getColWidth=function(col){var width=instance._getColWidthFromSettings(col);return width=Handsontable.hooks.run(instance,"modifyColWidth",width,col),void 0===width&&(width=WalkontableViewportColumnsCalculator.DEFAULT_WIDTH),width},this._getRowHeightFromSettings=function(row){var height=priv.settings.rowHeights;if(void 0!==height&&null!==height){switch("undefined"==typeof height?"undefined":_typeof(height)){case"object":height=height[row];break;case"function":height=height(row)}"string"==typeof height&&(height=parseInt(height,10))}return height},this.getRowHeight=function(row){var height=instance._getRowHeightFromSettings(row);return height=Handsontable.hooks.run(instance,"modifyRowHeight",height,row)},this.countSourceRows=function(){var sourceLength=Handsontable.hooks.run(instance,"modifySourceLength");return sourceLength||(instance.getSourceData()?instance.getSourceData().length:0)},this.countSourceCols=function(){var len=0,obj=instance.getSourceData()&&instance.getSourceData()[0]?instance.getSourceData()[0]:[];return len=isObject(obj)?deepObjectSize(obj):obj.length||0},this.countRows=function(){return datamap.getLength()},this.countCols=function(){var dataHasLength=!1,dataLen=0;if("array"===instance.dataType&&(dataHasLength=priv.settings.data&&priv.settings.data[0]&&priv.settings.data[0].length),dataHasLength&&(dataLen=priv.settings.data[0].length),priv.settings.columns){var columnsIsFunction=isFunction(priv.settings.columns);if(columnsIsFunction)if("array"===instance.dataType){for(var columnLen=0,i=0;i<dataLen;i++)priv.settings.columns(i)&&columnLen++;dataLen=columnLen}else"object"!==instance.dataType&&"function"!==instance.dataType||(dataLen=datamap.colToPropCache.length);else dataLen=priv.settings.columns.length}else"object"!==instance.dataType&&"function"!==instance.dataType||(dataLen=datamap.colToPropCache.length);return dataLen},this.rowOffset=function(){return instance.view.wt.wtTable.getFirstRenderedRow()},this.colOffset=function(){return instance.view.wt.wtTable.getFirstRenderedColumn()},this.countRenderedRows=function(){return instance.view.wt.drawn?instance.view.wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return instance.view.wt.drawn?instance.view.wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return instance.view.wt.drawn?instance.view.wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return instance.view.wt.drawn?instance.view.wt.wtTable.getVisibleColumnsCount():-1},this.countEmptyRows=function(ending){for(var row,i=instance.countRows()-1,empty=0;i>=0;){if(row=Handsontable.hooks.run(this,"modifyRow",i),instance.isEmptyRow(row))empty++;else if(ending)break;i--}return empty},this.countEmptyCols=function(ending){if(instance.countRows()<1)return 0;for(var i=instance.countCols()-1,empty=0;i>=0;){if(instance.isEmptyCol(i))empty++;else if(ending)break;i--}return empty},this.isEmptyRow=function(row){return priv.settings.isEmptyRow.call(instance,row)},this.isEmptyCol=function(col){return priv.settings.isEmptyCol.call(instance,col)},this.selectCell=function(row,col,endRow,endCol,scrollToCell,changeListener){var coords;if(changeListener=isUndefined(changeListener)||changeListener===!0,"number"!=typeof row||row<0||row>=instance.countRows())return!1;if("number"!=typeof col||col<0||col>=instance.countCols())return!1;if(isDefined(endRow)){if("number"!=typeof endRow||endRow<0||endRow>=instance.countRows())return!1;if("number"!=typeof endCol||endCol<0||endCol>=instance.countCols())return!1}return coords=new WalkontableCellCoords(row,col),priv.selRange=new WalkontableCellRange(coords,coords,coords),changeListener&&instance.listen(),isUndefined(endRow)?selection.setRangeEnd(priv.selRange.from,scrollToCell):selection.setRangeEnd(new WalkontableCellCoords(endRow,endCol),scrollToCell),instance.selection.finish(),!0},this.selectCellByProp=function(row,prop,endRow,endProp,scrollToCell){return arguments[1]=datamap.propToCol(arguments[1]),isDefined(arguments[3])&&(arguments[3]=datamap.propToCol(arguments[3])),instance.selectCell.apply(instance,arguments)},this.deselectCell=function(){selection.deselect()},this.scrollViewportTo=function(row,column){var snapToBottom=void 0!==arguments[2]&&arguments[2],snapToRight=void 0!==arguments[3]&&arguments[3];if(void 0!==row&&(row<0||row>=instance.countRows()))return!1;if(void 0!==column&&(column<0||column>=instance.countCols()))return!1;var result=!1;return void 0!==row&&void 0!==column&&(instance.view.wt.wtOverlays.topOverlay.scrollTo(row,snapToBottom),instance.view.wt.wtOverlays.leftOverlay.scrollTo(column,snapToRight),result=!0),"number"==typeof row&&"number"!=typeof column&&(instance.view.wt.wtOverlays.topOverlay.scrollTo(row,snapToBottom),result=!0),"number"==typeof column&&"number"!=typeof row&&(instance.view.wt.wtOverlays.leftOverlay.scrollTo(column,snapToRight),result=!0),result},this.destroy=function(){instance._clearTimeouts(),instance.view&&instance.view.destroy(),dataSource&&dataSource.destroy(),dataSource=null,empty(instance.rootElement),eventManager.destroy(),Handsontable.hooks.run(instance,"afterDestroy"),Handsontable.hooks.destroy(instance);for(var i in instance)instance.hasOwnProperty(i)&&(isFunction(instance[i])?instance[i]=postMortem:"guid"!==i&&(instance[i]=null));datamap&&datamap.destroy(),datamap=null,priv=null,grid=null,selection=null,editorManager=null,instance=null,GridSettings=null},this.getActiveEditor=function(){return editorManager.getActiveEditor()},this.getPlugin=function(pluginName){return getPlugin(this,pluginName)},this.getInstance=function(){return instance},this.addHook=function(key,callback){Handsontable.hooks.add(key,callback,instance)},this.hasHook=function(key){return Handsontable.hooks.has(key,instance)},this.addHookOnce=function(key,callback){Handsontable.hooks.once(key,callback,instance)},this.removeHook=function(key,callback){Handsontable.hooks.remove(key,callback,instance)},this.runHooks=function(key,p1,p2,p3,p4,p5,p6){return Handsontable.hooks.run(instance,key,p1,p2,p3,p4,p5,p6)},this.timeouts=[],this._registerTimeout=function(handle){this.timeouts.push(handle)},this._clearTimeouts=function(){for(var i=0,ilen=this.timeouts.length;i<ilen;i++)clearTimeout(this.timeouts[i])},this.version=Handsontable.version,Handsontable.hooks.run(instance,"construct")};var DefaultSettings=function(){};DefaultSettings.prototype={data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:void 0,colHeaders:null,colWidths:void 0,rowHeights:void 0,columns:void 0,cells:void 0,cell:[],comments:!1,customBorders:!1,minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,allowInsertRow:!0,allowInsertColumn:!0,allowRemoveRow:!0,allowRemoveColumn:!0,multiSelect:!0,fillHandle:!0,fixedRowsTop:0,fixedRowsBottom:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,copyRowsLimit:1e3,copyColsLimit:1e3,pasteMode:"overwrite",persistentState:void 0,currentRowClassName:void 0,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",className:void 0,tableClassName:void 0,stretchH:"none",isEmptyRow:function(row){var col,colLen,value,meta;for(col=0,colLen=this.countCols();col<colLen;col++)if(value=this.getDataAtCell(row,col),""!==value&&null!==value&&isDefined(value))return"object"===("undefined"==typeof value?"undefined":_typeof(value))&&(meta=this.getCellMeta(row,col),isObjectEquals(this.getSchema()[meta.prop],value));return!0},isEmptyCol:function(col){var row,rowLen,value;for(row=0,rowLen=this.countRows();row<rowLen;row++)if(value=this.getDataAtCell(row,col),""!==value&&null!==value&&isDefined(value))return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,allowEmpty:!0,invalidCellClassName:"htInvalid",placeholder:!1,placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",renderer:void 0,commentedCellClassName:"htCommentCell",fragmentSelection:!1,readOnly:!1,skipColumnOnPaste:!1,search:!1,type:"text",copyable:!0,editor:void 0,autoComplete:void 0,visibleRows:10,trimDropdown:!0,debug:!1,wordWrap:!0,noWordWrapClassName:"htNoWrap",contextMenu:void 0,contextMenuCopyPaste:void 0,copyPaste:void 0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,mergeCells:!1,viewportRowRenderingOffset:"auto",viewportColumnRenderingOffset:"auto",validator:void 0,disableVisualSelection:!1,sortIndicator:void 0,manualColumnFreeze:void 0,trimWhitespace:!0,settings:void 0,source:void 0,title:void 0,checkedTemplate:void 0,uncheckedTemplate:void 0,label:void 0,format:void 0,language:void 0,selectOptions:void 0,autoColumnSize:void 0,autoRowSize:void 0,dateFormat:void 0,correctFormat:!1,defaultDate:void 0,strict:void 0,renderAllRows:void 0,preventOverflow:!1,bindRowsWithHeaders:void 0,collapsibleColumns:void 0,columnSummary:void 0,dropdownMenu:void 0,filters:void 0,formulas:void 0,ganttChart:void 0,headerTooltips:void 0,hiddenColumns:void 0,hiddenRows:void 0,nestedHeaders:void 0,trimRows:void 0,rowHeaderWidth:void 0,columnHeaderHeight:void 0,observeChanges:void 0,sortFunction:void 0,sortByRelevance:!0,filter:!0,filteringCaseSensitive:!1},Handsontable.DefaultSettings=DefaultSettings},{"3rdparty/walkontable/src/calculator/viewportColumns":4,"3rdparty/walkontable/src/cell/coords":6,"3rdparty/walkontable/src/cell/range":7,browser:24,dataMap:27,dataSource:28,editorManager:29,eventManager:42,"helpers/array":43,"helpers/browser":44,"helpers/data":45,"helpers/dom/element":47,"helpers/function":50,"helpers/mixed":51,"helpers/number":52,"helpers/object":53,"helpers/setting":54,"helpers/string":55,numbro:"numbro",plugins:61,renderers:116,tableView:125,"utils/recordTranslator":128}],27:[function(_dereq_,module,exports){function DataMap(instance,priv,GridSettings){var $__9=this;this.instance=instance,this.priv=priv,this.GridSettings=GridSettings,this.dataSource=this.instance.getSettings().data,this.cachedLength=null,this.skipCache=!1,this.latestSourceRowsCount=0,this.dataSource&&this.dataSource[0]?this.duckSchema=this.recursiveDuckSchema(this.dataSource[0]):this.duckSchema={},this.createMap(),this.interval=Interval.create(function(){return $__9.clearLengthCache()},"15fps"),this.instance.addHook("skipLengthCache",function(delay){return $__9.onSkipLengthCache(delay)})}Object.defineProperties(exports,{DataMap:{get:function(){return DataMap}},__esModule:{value:!0}});var $__browser__,$__SheetClip__,$__helpers_47_data__,$__helpers_47_setting__,$__helpers_47_object__,$__helpers_47_array__,$__utils_47_interval__,$__helpers_47_number__,$__multiMap__,Handsontable=($__browser__=_dereq_("browser"),$__browser__&&$__browser__.__esModule&&$__browser__||{"default":$__browser__})["default"],SheetClip=($__SheetClip__=_dereq_("SheetClip"),$__SheetClip__&&$__SheetClip__.__esModule&&$__SheetClip__||{"default":$__SheetClip__})["default"],cellMethodLookupFactory=($__helpers_47_data__=_dereq_("helpers/data"),$__helpers_47_data__&&$__helpers_47_data__.__esModule&&$__helpers_47_data__||{"default":$__helpers_47_data__}).cellMethodLookupFactory,columnFactory=($__helpers_47_setting__=_dereq_("helpers/setting"),$__helpers_47_setting__&&$__helpers_47_setting__.__esModule&&$__helpers_47_setting__||{"default":$__helpers_47_setting__}).columnFactory,$__4=($__helpers_47_object__=_dereq_("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{"default":$__helpers_47_object__}),createObjectPropListener=$__4.createObjectPropListener,duckSchema=$__4.duckSchema,deepExtend=$__4.deepExtend,deepClone=$__4.deepClone,isObject=$__4.isObject,deepObjectSize=$__4.deepObjectSize,$__5=($__helpers_47_array__=_dereq_("helpers/array"),$__helpers_47_array__&&$__helpers_47_array__.__esModule&&$__helpers_47_array__||{"default":$__helpers_47_array__}),extendArray=$__5.extendArray,to2dArray=$__5.to2dArray,Interval=($__utils_47_interval__=_dereq_("utils/interval"),$__utils_47_interval__&&$__utils_47_interval__.__esModule&&$__utils_47_interval__||{"default":$__utils_47_interval__}).Interval,rangeEach=($__helpers_47_number__=_dereq_("helpers/number"),$__helpers_47_number__&&$__helpers_47_number__.__esModule&&$__helpers_47_number__||{"default":$__helpers_47_number__}).rangeEach,MultiMap=($__multiMap__=_dereq_("multiMap"),$__multiMap__&&$__multiMap__.__esModule&&$__multiMap__||{"default":$__multiMap__}).MultiMap;DataMap.prototype.DESTINATION_RENDERER=1,DataMap.prototype.DESTINATION_CLIPBOARD_GENERATOR=2,DataMap.prototype.recursiveDuckSchema=function(object){return duckSchema(object)},DataMap.prototype.recursiveDuckColumns=function(schema,lastCol,parent){var prop,i;if("undefined"==typeof lastCol&&(lastCol=0,parent=""),"object"===("undefined"==typeof schema?"undefined":_typeof(schema))&&!Array.isArray(schema))for(i in schema)schema.hasOwnProperty(i)&&(null===schema[i]?(prop=parent+i,this.colToPropCache.push(prop),this.propToColCache.set(prop,lastCol),lastCol++):lastCol=this.recursiveDuckColumns(schema[i],lastCol,i+"."));return lastCol},DataMap.prototype.createMap=function(){var i,schema=this.getSchema();if("undefined"==typeof schema)throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");this.colToPropCache=[],this.propToColCache=new MultiMap;var columns=this.instance.getSettings().columns;if(columns){var columnsLen=columns.length,filteredIndex=0,columnsAsFunc=!1,schemaLen=deepObjectSize(schema);for("function"==typeof columns&&(columnsLen=schemaLen>0?schemaLen:this.instance.countSourceCols(),columnsAsFunc=!0),i=0;i<columnsLen;i++){var column=columnsAsFunc?columns(i):columns[i];if(isObject(column)){if("undefined"!=typeof column.data){var index=columnsAsFunc?filteredIndex:i;this.colToPropCache[index]=column.data,this.propToColCache.set(column.data,index)}filteredIndex++}}}else this.recursiveDuckColumns(schema)},DataMap.prototype.colToProp=function(col){return col=Handsontable.hooks.run(this.instance,"modifyCol",col),this.colToPropCache&&"undefined"!=typeof this.colToPropCache[col]?this.colToPropCache[col]:col},DataMap.prototype.propToCol=function(prop){var col;return col="undefined"==typeof this.propToColCache.get(prop)?prop:this.propToColCache.get(prop),col=Handsontable.hooks.run(this.instance,"unmodifyCol",col)},DataMap.prototype.getSchema=function(){var schema=this.instance.getSettings().dataSchema;return schema?"function"==typeof schema?schema():schema:this.duckSchema},DataMap.prototype.createRow=function(index,amount,source){var row,currentIndex,colCount=this.instance.countCols(),numberOfCreatedRows=0;amount||(amount=1),("number"!=typeof index||index>=this.instance.countSourceRows())&&(index=this.instance.countSourceRows()),Handsontable.hooks.run(this.instance,"beforeCreateRow",index,amount,source),currentIndex=index;for(var maxRows=this.instance.getSettings().maxRows;numberOfCreatedRows<amount&&this.instance.countSourceRows()<maxRows;)"array"===this.instance.dataType?this.instance.getSettings().dataSchema?row=deepClone(this.getSchema()):(row=[],rangeEach(colCount-1,function(){return row.push(null)})):"function"===this.instance.dataType?row=this.instance.getSettings().dataSchema(index):(row={},deepExtend(row,this.getSchema())),index===this.instance.countSourceRows()?this.dataSource.push(row):this.spliceData(index,0,row),numberOfCreatedRows++,currentIndex++;return Handsontable.hooks.run(this.instance,"afterCreateRow",index,numberOfCreatedRows,source),this.instance.forceFullRender=!0,numberOfCreatedRows},DataMap.prototype.createCol=function(index,amount,source){if(!this.instance.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var constructor,currentIndex,rlen=this.instance.countSourceRows(),data=this.dataSource,numberOfCreatedCols=0;amount||(amount=1),("number"!=typeof index||index>=this.instance.countCols())&&(index=this.instance.countCols()),Handsontable.hooks.run(this.instance,"beforeCreateCol",index,amount,source),currentIndex=index;for(var maxCols=this.instance.getSettings().maxCols;numberOfCreatedCols<amount&&this.instance.countCols()<maxCols;){if(constructor=columnFactory(this.GridSettings,this.priv.columnsSettingConflicts),"number"!=typeof index||index>=this.instance.countCols()){if(rlen>0)for(var r=0;r<rlen;r++)"undefined"==typeof data[r]&&(data[r]=[]),data[r].push(null);else data.push([null]);this.priv.columnSettings.push(constructor)}else{for(var r=0;r<rlen;r++)data[r].splice(currentIndex,0,null);this.priv.columnSettings.splice(currentIndex,0,constructor)}numberOfCreatedCols++,currentIndex++}return Handsontable.hooks.run(this.instance,"afterCreateCol",index,numberOfCreatedCols,source),this.instance.forceFullRender=!0,numberOfCreatedCols},DataMap.prototype.removeRow=function(index,amount,source){amount||(amount=1),"number"!=typeof index&&(index=-amount),amount=Handsontable.hooks.run(this.instance,"modifyRemovedAmount",amount,index),index=(this.instance.countSourceRows()+index)%this.instance.countSourceRows();var logicRows=this.physicalRowsToLogical(index,amount),actionWasNotCancelled=Handsontable.hooks.run(this.instance,"beforeRemoveRow",index,amount,logicRows,source);if(actionWasNotCancelled!==!1){var newData,data=this.dataSource;newData=this.filterData(index,amount),newData&&(data.length=0,Array.prototype.push.apply(data,newData)),Handsontable.hooks.run(this.instance,"afterRemoveRow",index,amount,logicRows,source),this.instance.forceFullRender=!0}},DataMap.prototype.removeCol=function(index,amount,source){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("cannot remove column with object data source or columns option specified");amount||(amount=1),"number"!=typeof index&&(index=-amount),index=(this.instance.countCols()+index)%this.instance.countCols();var logicColumns=this.physicalColumnsToLogical(index,amount),descendingLogicColumns=logicColumns.slice(0).sort(function(a,b){return b-a}),actionWasNotCancelled=Handsontable.hooks.run(this.instance,"beforeRemoveCol",index,amount,logicColumns,source);if(actionWasNotCancelled!==!1){for(var isTableUniform=!0,removedColumnsCount=descendingLogicColumns.length,data=this.dataSource,c=0;c<removedColumnsCount;c++)isTableUniform&&logicColumns[0]!==logicColumns[c]-c&&(isTableUniform=!1);if(isTableUniform)for(var r=0,rlen=this.instance.countSourceRows();r<rlen;r++)data[r].splice(logicColumns[0],amount);else{for(var r$__10=0,rlen$__11=this.instance.countSourceRows();r$__10<rlen$__11;r$__10++)for(var c$__12=0;c$__12<removedColumnsCount;c$__12++)data[r$__10].splice(descendingLogicColumns[c$__12],1);for(var c$__13=0;c$__13<removedColumnsCount;c$__13++)this.priv.columnSettings.splice(logicColumns[c$__13],1)}Handsontable.hooks.run(this.instance,"afterRemoveCol",index,amount,logicColumns,source),this.instance.forceFullRender=!0}},DataMap.prototype.spliceCol=function(col,index,amount){var elements=4<=arguments.length?[].slice.call(arguments,3):[],colData=this.instance.getDataAtCol(col),removed=colData.slice(index,index+amount),after=colData.slice(index+amount);extendArray(elements,after);for(var i=0;i<amount;)elements.push(null),i++;return to2dArray(elements),this.instance.populateFromArray(index,col,elements,null,null,"spliceCol"),removed},DataMap.prototype.spliceRow=function(row,index,amount){var elements=4<=arguments.length?[].slice.call(arguments,3):[],rowData=this.instance.getSourceDataAtRow(row),removed=rowData.slice(index,index+amount),after=rowData.slice(index+amount);extendArray(elements,after);for(var i=0;i<amount;)elements.push(null),i++;return this.instance.populateFromArray(row,index,[elements],null,null,"spliceRow"),removed},DataMap.prototype.spliceData=function(index,amount,element){var continueSplicing=Handsontable.hooks.run(this.instance,"beforeDataSplice",index,amount,element);continueSplicing!==!1&&this.dataSource.splice(index,amount,element)},DataMap.prototype.filterData=function(index,amount){var logicRows=this.physicalRowsToLogical(index,amount),continueSplicing=Handsontable.hooks.run(this.instance,"beforeDataFilter",index,amount,logicRows);
if(continueSplicing!==!1){var newData=this.dataSource.filter(function(row,index){return logicRows.indexOf(index)==-1});return newData}},DataMap.prototype.get=function(row,prop){row=Handsontable.hooks.run(this.instance,"modifyRow",row);var dataRow=this.dataSource[row],modifiedRowData=Handsontable.hooks.run(this.instance,"modifyRowData",row,dataRow,"get");dataRow=isNaN(modifiedRowData)?modifiedRowData:dataRow;var value=null;if(dataRow&&dataRow.hasOwnProperty&&dataRow.hasOwnProperty(prop))value=dataRow[prop];else if("string"==typeof prop&&prop.indexOf(".")>-1){var sliced=prop.split("."),out=dataRow;if(!out)return null;for(var i=0,ilen=sliced.length;i<ilen;i++)if(out=out[sliced[i]],"undefined"==typeof out)return null;value=out}else"function"==typeof prop&&(value=prop(this.dataSource.slice(row,row+1)[0]));if(Handsontable.hooks.has("modifyData",this.instance)){var valueHolder=createObjectPropListener(value);Handsontable.hooks.run(this.instance,"modifyData",row,this.propToCol(prop),valueHolder,"get"),valueHolder.isTouched()&&(value=valueHolder.value)}return value};var copyableLookup=cellMethodLookupFactory("copyable",!1);DataMap.prototype.getCopyable=function(row,prop){return copyableLookup.call(this.instance,row,this.propToCol(prop))?this.get(row,prop):""},DataMap.prototype.set=function(row,prop,value,source){row=Handsontable.hooks.run(this.instance,"modifyRow",row,source||"datamapGet");var dataRow=this.dataSource[row],modifiedRowData=Handsontable.hooks.run(this.instance,"modifyRowData",row,dataRow,"set",source);if(dataRow=isNaN(modifiedRowData)?modifiedRowData:dataRow,Handsontable.hooks.has("modifyData",this.instance)){var valueHolder=createObjectPropListener(value);Handsontable.hooks.run(this.instance,"modifyData",row,this.propToCol(prop),valueHolder,"set"),valueHolder.isTouched()&&(value=valueHolder.value)}if(dataRow&&dataRow.hasOwnProperty&&dataRow.hasOwnProperty(prop))dataRow[prop]=value;else if("string"==typeof prop&&prop.indexOf(".")>-1){for(var sliced=prop.split("."),out=dataRow,i=0,ilen=sliced.length-1;i<ilen;i++)"undefined"==typeof out[sliced[i]]&&(out[sliced[i]]={}),out=out[sliced[i]];out[sliced[i]]=value}else"function"==typeof prop?prop(this.dataSource.slice(row,row+1)[0],value):dataRow[prop]=value},DataMap.prototype.physicalRowsToLogical=function(index,amount){for(var row,totalRows=this.instance.countSourceRows(),physicRow=(totalRows+index)%totalRows,logicRows=[],rowsToRemove=amount;physicRow<totalRows&&rowsToRemove;)row=Handsontable.hooks.run(this.instance,"modifyRow",physicRow),logicRows.push(row),rowsToRemove--,physicRow++;return logicRows},DataMap.prototype.physicalColumnsToLogical=function(index,amount){for(var totalCols=this.instance.countCols(),physicalCol=(totalCols+index)%totalCols,logicalCols=[],colsToRemove=amount;physicalCol<totalCols&&colsToRemove;){var col=Handsontable.hooks.run(this.instance,"modifyCol",physicalCol);logicalCols.push(col),colsToRemove--,physicalCol++}return logicalCols},DataMap.prototype.clear=function(){for(var r=0;r<this.instance.countSourceRows();r++)for(var c=0;c<this.instance.countCols();c++)this.set(r,this.colToProp(c),"")},DataMap.prototype.clearLengthCache=function(){this.cachedLength=null},DataMap.prototype.getLength=function(){var $__9=this,length=this.instance.countSourceRows();if(Handsontable.hooks.has("modifyRow",this.instance)){var reValidate=this.skipCache;this.interval.start(),length!==this.latestSourceRowsCount&&(reValidate=!0),this.latestSourceRowsCount=length,null===this.cachedLength||reValidate?(rangeEach(length-1,function(row){row=Handsontable.hooks.run($__9.instance,"modifyRow",row),null===row&&--length}),this.cachedLength=length):length=this.cachedLength}else this.interval.stop();return length},DataMap.prototype.getAll=function(){var start={row:0,col:0},end={row:Math.max(this.instance.countSourceRows()-1,0),col:Math.max(this.instance.countCols()-1,0)};return start.row-end.row!==0||this.instance.countSourceRows()?this.getRange(start,end,DataMap.prototype.DESTINATION_RENDERER):[]},DataMap.prototype.getRange=function(start,end,destination){var r,rlen,c,clen,row,output=[],getFn=destination===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;for(rlen=Math.max(start.row,end.row),clen=Math.max(start.col,end.col),r=Math.min(start.row,end.row);r<=rlen;r++){row=[];var physicalRow=Handsontable.hooks.run(this.instance,"modifyRow",r);for(c=Math.min(start.col,end.col);c<=clen;c++){if(null===physicalRow)break;row.push(getFn.call(this,r,this.colToProp(c)))}null!==physicalRow&&output.push(row)}return output},DataMap.prototype.getText=function(start,end){return SheetClip.stringify(this.getRange(start,end,this.DESTINATION_RENDERER))},DataMap.prototype.getCopyableText=function(start,end){return SheetClip.stringify(this.getRange(start,end,this.DESTINATION_CLIPBOARD_GENERATOR))},DataMap.prototype.onSkipLengthCache=function(delay){var $__9=this;this.skipCache=!0,setTimeout(function(){$__9.skipCache=!1},delay)},DataMap.prototype.destroy=function(){this.interval.stop(),this.interval=null,this.instance=null,this.priv=null,this.GridSettings=null,this.dataSource=null,this.cachedLength=null,this.duckSchema=null}},{SheetClip:"SheetClip",browser:24,"helpers/array":43,"helpers/data":45,"helpers/number":52,"helpers/object":53,"helpers/setting":54,multiMap:59,"utils/interval":127}],28:[function(_dereq_,module,exports){Object.defineProperties(exports,{DataSource:{get:function(){return DataSource}},__esModule:{value:!0}});var $__helpers_47_object__,$__helpers_47_array__,$__helpers_47_number__,getProperty=($__helpers_47_object__=_dereq_("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{"default":$__helpers_47_object__}).getProperty,arrayEach=($__helpers_47_array__=_dereq_("helpers/array"),$__helpers_47_array__&&$__helpers_47_array__.__esModule&&$__helpers_47_array__||{"default":$__helpers_47_array__}).arrayEach,rangeEach=($__helpers_47_number__=_dereq_("helpers/number"),$__helpers_47_number__&&$__helpers_47_number__.__esModule&&$__helpers_47_number__||{"default":$__helpers_47_number__}).rangeEach,DataSource=function(hotInstance){var dataSource=void 0!==arguments[1]?arguments[1]:[];this.hot=hotInstance,this.data=dataSource,this.dataType="array",this.colToProp=function(){},this.propToCol=function(){}};$traceurRuntime.createClass(DataSource,{getData:function(){var toArray=void 0!==arguments[0]&&arguments[0],result=this.data;return toArray&&(result=this.getByRange({row:0,col:0},{row:Math.max(this.countRows()-1,0),col:Math.max(this.countColumns()-1,0)},!0)),result},setData:function(data){this.data=data},getAtColumn:function(column){var $__3=this,result=[];return arrayEach(this.data,function(row){var property=$__3.colToProp(column);row="string"==typeof property?getProperty(row,property):row[property],result.push(row)}),result},getAtRow:function(row){return this.data[row]},getAtCell:function(row,column){var result=null;if(this.data[row]){var prop=this.colToProp(column);result="string"==typeof prop?getProperty(this.data[row],prop):this.data[row][prop]}return result},getByRange:function(start,end){var toArray=void 0!==arguments[2]&&arguments[2],$__3=this,startRow=Math.min(start.row,end.row),startCol=Math.min(start.col,end.col),endRow=Math.max(start.row,end.row),endCol=Math.max(start.col,end.col),result=[];return rangeEach(startRow,endRow,function(currentRow){var newRow,row=$__3.getAtRow(currentRow);"array"===$__3.dataType?newRow=row.slice(startCol,endCol+1):"object"===$__3.dataType&&(newRow=toArray?[]:{},rangeEach(startCol,endCol,function(column){var prop=$__3.colToProp(column);toArray?newRow.push(row[prop]):newRow[prop]=row[prop]})),result.push(newRow)}),result},countRows:function(){return Array.isArray(this.data)?this.data.length:0},countColumns:function(){var result=0;return Array.isArray(this.data)&&("array"===this.dataType?result=this.data[0].length:"object"===this.dataType&&(result=Object.keys(this.data[0]).length)),result},destroy:function(){this.data=null,this.hot=null}},{})},{"helpers/array":43,"helpers/number":52,"helpers/object":53}],29:[function(_dereq_,module,exports){function EditorManager(instance,priv,selection){function moveSelectionAfterEnter(shiftKey){var enterMoves="function"==typeof priv.settings.enterMoves?priv.settings.enterMoves(event):priv.settings.enterMoves;shiftKey?selection.transformStart(-enterMoves.row,-enterMoves.col):selection.transformStart(enterMoves.row,enterMoves.col,!0)}function moveSelectionUp(shiftKey){shiftKey?selection.transformEnd(-1,0):selection.transformStart(-1,0)}function moveSelectionDown(shiftKey){shiftKey?selection.transformEnd(1,0):selection.transformStart(1,0)}function moveSelectionRight(shiftKey){shiftKey?selection.transformEnd(0,1):selection.transformStart(0,1)}function moveSelectionLeft(shiftKey){shiftKey?selection.transformEnd(0,-1):selection.transformStart(0,-1)}function onKeyDown(event){var ctrlDown,rangeModifier;if(instance.isListening()&&(Handsontable.hooks.run(instance,"beforeKeyDown",event),!destroyed&&!isImmediatePropagationStopped(event)&&(priv.lastKeyCode=event.keyCode,selection.isSelected()))){if(ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey,activeEditor&&!activeEditor.isWaiting()&&!(isMetaKey(event.keyCode)||isCtrlKey(event.keyCode)||ctrlDown||_this.isEditorOpened()))return void _this.openEditor("",event);switch(rangeModifier=event.shiftKey?selection.setRangeEnd:selection.setRangeStart,event.keyCode){case KEY_CODES.A:!_this.isEditorOpened()&&ctrlDown&&(selection.selectAll(),event.preventDefault(),stopPropagation(event));break;case KEY_CODES.ARROW_UP:_this.isEditorOpened()&&!activeEditor.isWaiting()&&_this.closeEditorAndSaveChanges(ctrlDown),moveSelectionUp(event.shiftKey),event.preventDefault(),stopPropagation(event);break;case KEY_CODES.ARROW_DOWN:_this.isEditorOpened()&&!activeEditor.isWaiting()&&_this.closeEditorAndSaveChanges(ctrlDown),moveSelectionDown(event.shiftKey),event.preventDefault(),stopPropagation(event);break;case KEY_CODES.ARROW_RIGHT:_this.isEditorOpened()&&!activeEditor.isWaiting()&&_this.closeEditorAndSaveChanges(ctrlDown),moveSelectionRight(event.shiftKey),event.preventDefault(),stopPropagation(event);break;case KEY_CODES.ARROW_LEFT:_this.isEditorOpened()&&!activeEditor.isWaiting()&&_this.closeEditorAndSaveChanges(ctrlDown),moveSelectionLeft(event.shiftKey),event.preventDefault(),stopPropagation(event);break;case KEY_CODES.TAB:var tabMoves="function"==typeof priv.settings.tabMoves?priv.settings.tabMoves(event):priv.settings.tabMoves;event.shiftKey?selection.transformStart(-tabMoves.row,-tabMoves.col):selection.transformStart(tabMoves.row,tabMoves.col,!0),event.preventDefault(),stopPropagation(event);break;case KEY_CODES.BACKSPACE:case KEY_CODES.DELETE:selection.empty(event),_this.prepareEditor(),event.preventDefault();break;case KEY_CODES.F2:_this.openEditor(null,event),activeEditor&&activeEditor.enableFullEditMode(),event.preventDefault();break;case KEY_CODES.ENTER:_this.isEditorOpened()?(activeEditor&&activeEditor.state!==Handsontable.EditorState.WAITING&&_this.closeEditorAndSaveChanges(ctrlDown),moveSelectionAfterEnter(event.shiftKey)):instance.getSettings().enterBeginsEditing?(_this.openEditor(null,event),activeEditor&&activeEditor.enableFullEditMode()):moveSelectionAfterEnter(event.shiftKey),event.preventDefault(),stopImmediatePropagation(event);break;case KEY_CODES.ESCAPE:_this.isEditorOpened()&&_this.closeEditorAndRestoreOriginalValue(ctrlDown),event.preventDefault();break;case KEY_CODES.HOME:rangeModifier(event.ctrlKey||event.metaKey?new WalkontableCellCoords(0,priv.selRange.from.col):new WalkontableCellCoords(priv.selRange.from.row,0)),event.preventDefault(),stopPropagation(event);break;case KEY_CODES.END:rangeModifier(event.ctrlKey||event.metaKey?new WalkontableCellCoords(instance.countRows()-1,priv.selRange.from.col):new WalkontableCellCoords(priv.selRange.from.row,instance.countCols()-1)),event.preventDefault(),stopPropagation(event);break;case KEY_CODES.PAGE_UP:selection.transformStart(-instance.countVisibleRows(),0),event.preventDefault(),stopPropagation(event);break;case KEY_CODES.PAGE_DOWN:selection.transformStart(instance.countVisibleRows(),0),event.preventDefault(),stopPropagation(event)}}}function init(){function onDblClick(event,coords,elem){"TD"==elem.nodeName&&(_this.openEditor(),activeEditor&&activeEditor.enableFullEditMode())}instance.addHook("afterDocumentKeyDown",onKeyDown),eventManager.addEventListener(document.documentElement,"keydown",function(event){instance.runHooks("afterDocumentKeyDown",event)}),instance.view.wt.update("onCellDblClick",onDblClick),instance.addHook("afterDestroy",function(){destroyed=!0})}var eventManager,activeEditor,_this=this,destroyed=!1;eventManager=eventManagerObject(instance),this.destroyEditor=function(revertOriginal){this.closeEditor(revertOriginal)},this.getActiveEditor=function(){return activeEditor},this.prepareEditor=function(){var row,col,prop,td,originalValue,cellProperties,editorClass;return activeEditor&&activeEditor.isWaiting()?void this.closeEditor(!1,!1,function(dataSaved){dataSaved&&_this.prepareEditor()}):(row=priv.selRange.highlight.row,col=priv.selRange.highlight.col,prop=instance.colToProp(col),td=instance.getCell(row,col),originalValue=instance.getSourceDataAtCell(instance.runHooks("modifyRow",row),col),cellProperties=instance.getCellMeta(row,col),editorClass=instance.getCellEditor(cellProperties),void(editorClass?(activeEditor=Handsontable.editors.getEditor(editorClass,instance),activeEditor.prepare(row,col,prop,td,originalValue,cellProperties)):activeEditor=void 0))},this.isEditorOpened=function(){return activeEditor&&activeEditor.isOpened()},this.openEditor=function(initialValue,event){activeEditor&&!activeEditor.cellProperties.readOnly?activeEditor.beginEditing(initialValue,event):activeEditor&&activeEditor.cellProperties.readOnly&&event&&event.keyCode===KEY_CODES.ENTER&&moveSelectionAfterEnter()},this.closeEditor=function(restoreOriginalValue,ctrlDown,callback){activeEditor?activeEditor.finishEditing(restoreOriginalValue,ctrlDown,callback):callback&&callback(!1)},this.closeEditorAndSaveChanges=function(ctrlDown){return this.closeEditor(!1,ctrlDown)},this.closeEditorAndRestoreOriginalValue=function(ctrlDown){return this.closeEditor(!0,ctrlDown)},init()}Object.defineProperties(exports,{EditorManager:{get:function(){return EditorManager}},__esModule:{value:!0}});var $__browser__,$__3rdparty_47_walkontable_47_src_47_cell_47_coords__,$__helpers_47_unicode__,$__helpers_47_dom_47_event__,$__editors__,$__eventManager__,Handsontable=($__browser__=_dereq_("browser"),$__browser__&&$__browser__.__esModule&&$__browser__||{"default":$__browser__})["default"],WalkontableCellCoords=($__3rdparty_47_walkontable_47_src_47_cell_47_coords__=_dereq_("3rdparty/walkontable/src/cell/coords"),$__3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__||{"default":$__3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords,$__2=($__helpers_47_unicode__=_dereq_("helpers/unicode"),$__helpers_47_unicode__&&$__helpers_47_unicode__.__esModule&&$__helpers_47_unicode__||{"default":$__helpers_47_unicode__}),KEY_CODES=$__2.KEY_CODES,isMetaKey=$__2.isMetaKey,isCtrlKey=$__2.isCtrlKey,$__3=($__helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$__helpers_47_dom_47_event__&&$__helpers_47_dom_47_event__.__esModule&&$__helpers_47_dom_47_event__||{"default":$__helpers_47_dom_47_event__}),stopPropagation=$__3.stopPropagation,stopImmediatePropagation=$__3.stopImmediatePropagation,isImmediatePropagationStopped=$__3.isImmediatePropagationStopped,eventManagerObject=(($__editors__=_dereq_("editors"),$__editors__&&$__editors__.__esModule&&$__editors__||{"default":$__editors__}).getEditor,($__eventManager__=_dereq_("eventManager"),$__eventManager__&&$__eventManager__.__esModule&&$__eventManager__||{"default":$__eventManager__}).eventManager);Handsontable.EditorManager=EditorManager},{"3rdparty/walkontable/src/cell/coords":6,browser:24,editors:30,eventManager:42,"helpers/dom/event":48,"helpers/unicode":56}],30:[function(_dereq_,module,exports){function RegisteredEditor(editorClass){var Clazz,instances;instances={},Clazz=editorClass,this.getConstructor=function(){return editorClass},this.getInstance=function(hotInstance){return hotInstance.guid in instances||(instances[hotInstance.guid]=new Clazz(hotInstance)),instances[hotInstance.guid]}}function registerEditor(editorName,editorClass){var editor=new RegisteredEditor(editorClass);"string"==typeof editorName&&(registeredEditorNames[editorName]=editor,Handsontable.editors[toUpperCaseFirst(editorName)+"Editor"]=editorClass),registeredEditorClasses.set(editorClass,editor)}function getEditor(editorName,hotInstance){var editor;if("function"==typeof editorName)registeredEditorClasses.get(editorName)||registerEditor(null,editorName),editor=registeredEditorClasses.get(editorName);else{if("string"!=typeof editorName)throw Error('Only strings and functions can be passed as "editor" parameter ');editor=registeredEditorNames[editorName]}if(!editor)throw Error('No editor registered under name "'+editorName+'"');return editor.getInstance(hotInstance)}function getEditorConstructor(editorName){var editor;if("string"!=typeof editorName)throw Error('Only strings and functions can be passed as "editor" parameter ');if(editor=registeredEditorNames[editorName],!editor)throw Error('No editor registered under name "'+editorName+'"');return editor.getConstructor()}function hasEditor(editorName){return!!registeredEditorNames[editorName]}Object.defineProperties(exports,{registerEditor:{get:function(){return registerEditor}},getEditor:{get:function(){return getEditor}},hasEditor:{get:function(){return hasEditor}},getEditorConstructor:{get:function(){return getEditorConstructor}},__esModule:{value:!0}});var $__browser__,$__helpers_47_string__,Handsontable=($__browser__=_dereq_("browser"),$__browser__&&$__browser__.__esModule&&$__browser__||{"default":$__browser__})["default"],toUpperCaseFirst=($__helpers_47_string__=_dereq_("helpers/string"),$__helpers_47_string__&&$__helpers_47_string__.__esModule&&$__helpers_47_string__||{"default":$__helpers_47_string__}).toUpperCaseFirst,registeredEditorNames={},registeredEditorClasses=new WeakMap;Handsontable.editors=Handsontable.editors||{},Handsontable.editors.registerEditor=registerEditor,Handsontable.editors.getEditor=getEditor},{browser:24,"helpers/string":55}],31:[function(_dereq_,module,exports){function BaseEditor(instance){this.instance=instance,this.state=Handsontable.EditorState.VIRGIN,this._opened=!1,this._fullEditMode=!1,this._closeCallback=null,this.init()}Object.defineProperties(exports,{BaseEditor:{get:function(){return BaseEditor}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_mixed__,$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],stringify=($___46__46__47_helpers_47_mixed__=_dereq_("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{"default":$___46__46__47_helpers_47_mixed__}).stringify,WalkontableCellCoords=($___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=_dereq_("3rdparty/walkontable/src/cell/coords"),$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{"default":$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords;Handsontable.editors=Handsontable.editors||{},Handsontable.editors.BaseEditor=BaseEditor,Handsontable.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"},BaseEditor.prototype._fireCallbacks=function(result){this._closeCallback&&(this._closeCallback(result),this._closeCallback=null)},BaseEditor.prototype.init=function(){},BaseEditor.prototype.getValue=function(){throw Error("Editor getValue() method unimplemented")},BaseEditor.prototype.setValue=function(newValue){throw Error("Editor setValue() method unimplemented")},BaseEditor.prototype.open=function(){throw Error("Editor open() method unimplemented")},BaseEditor.prototype.close=function(){throw Error("Editor close() method unimplemented")},BaseEditor.prototype.prepare=function(row,col,prop,td,originalValue,cellProperties){this.TD=td,this.row=row,this.col=col,this.prop=prop,this.originalValue=originalValue,this.cellProperties=cellProperties,this.instance.view.isMouseDown()&&document.activeElement&&document.activeElement!==document.body?document.activeElement.blur():document.activeElement||document.body.focus(),this.state=Handsontable.EditorState.VIRGIN},BaseEditor.prototype.extend=function(){function Editor(){baseClass.apply(this,arguments)}function inherit(Child,Parent){function Bridge(){}return Bridge.prototype=Parent.prototype,Child.prototype=new Bridge,Child.prototype.constructor=Child,Child}var baseClass=this.constructor;return inherit(Editor,baseClass)},BaseEditor.prototype.saveValue=function(value,ctrlDown){var selection,tmp;ctrlDown?(selection=this.instance.getSelected(),selection[0]>selection[2]&&(tmp=selection[0],selection[0]=selection[2],selection[2]=tmp),selection[1]>selection[3]&&(tmp=selection[1],selection[1]=selection[3],selection[3]=tmp)):selection=[this.row,this.col,null,null],this.instance.populateFromArray(selection[0],selection[1],value,selection[2],selection[3],"edit")},BaseEditor.prototype.beginEditing=function(initialValue,event){this.state==Handsontable.EditorState.VIRGIN&&(this.instance.view.scrollViewport(new WalkontableCellCoords(this.row,this.col)),this.instance.view.render(),this.state=Handsontable.EditorState.EDITING,initialValue="string"==typeof initialValue?initialValue:this.originalValue,this.setValue(stringify(initialValue)),this.open(event),this._opened=!0,this.focus(),this.instance.view.render())},BaseEditor.prototype.finishEditing=function(restoreOriginalValue,ctrlDown,callback){var val,_this=this;if(callback){var previousCloseCallback=this._closeCallback;this._closeCallback=function(result){previousCloseCallback&&previousCloseCallback(result),callback(result)}}if(!this.isWaiting()){if(this.state==Handsontable.EditorState.VIRGIN)return void this.instance._registerTimeout(setTimeout(function(){_this._fireCallbacks(!0)},0));if(this.state==Handsontable.EditorState.EDITING){if(restoreOriginalValue)return this.cancelChanges(),void this.instance.view.render();var value=this.getValue();val=this.instance.getSettings().trimWhitespace?[["string"==typeof value?String.prototype.trim.call(value||""):value]]:[[value]],this.state=Handsontable.EditorState.WAITING,this.saveValue(val,ctrlDown),this.instance.getCellValidator(this.cellProperties)?this.instance.addHookOnce("postAfterValidate",function(result){_this.state=Handsontable.EditorState.FINISHED,_this.discardEditor(result)}):(this.state=Handsontable.EditorState.FINISHED,this.discardEditor(!0))}}},BaseEditor.prototype.cancelChanges=function(){this.state=Handsontable.EditorState.FINISHED,this.discardEditor()},BaseEditor.prototype.discardEditor=function(result){this.state===Handsontable.EditorState.FINISHED&&(result===!1&&this.cellProperties.allowInvalid!==!0?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=Handsontable.EditorState.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=Handsontable.EditorState.VIRGIN,this._fireCallbacks(!0)))},BaseEditor.prototype.enableFullEditMode=function(){this._fullEditMode=!0},BaseEditor.prototype.isInFullEditMode=function(){return this._fullEditMode},BaseEditor.prototype.isOpened=function(){return this._opened},BaseEditor.prototype.isWaiting=function(){return this.state===Handsontable.EditorState.WAITING},BaseEditor.prototype.checkEditorSection=function(){var totalRows=this.instance.countRows(),section="";return this.row<this.instance.getSettings().fixedRowsTop?section=this.col<this.instance.getSettings().fixedColumnsLeft?"top-left-corner":"top":this.instance.getSettings().fixedRowsBottom&&this.row>=totalRows-this.instance.getSettings().fixedRowsBottom?section=this.col<this.instance.getSettings().fixedColumnsLeft?"bottom-left-corner":"bottom":this.col<this.instance.getSettings().fixedColumnsLeft&&(section="left"),section}},{"3rdparty/walkontable/src/cell/coords":6,browser:24,"helpers/mixed":51}],32:[function(_dereq_,module,exports){function onBeforeKeyDown(event){skipOne=!1;var editor=this.getActiveEditor();if(isPrintableChar(event.keyCode)||event.keyCode===KEY_CODES.BACKSPACE||event.keyCode===KEY_CODES.DELETE||event.keyCode===KEY_CODES.INSERT){var timeOffset=0;if(event.keyCode===KEY_CODES.C&&(event.ctrlKey||event.metaKey))return;editor.isOpened()||(timeOffset+=10),editor.htEditor&&editor.instance._registerTimeout(setTimeout(function(){editor.queryChoices(editor.TEXTAREA.value),skipOne=!0},timeOffset))}}Object.defineProperties(exports,{AutocompleteEditor:{get:function(){return AutocompleteEditor}},__esModule:{value:!0}});var $___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_mixed__,$___46__46__47_helpers_47_array__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_editors__,$__handsontableEditor__,$__0=($___46__46__47_helpers_47_unicode__=_dereq_("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{"default":$___46__46__47_helpers_47_unicode__}),KEY_CODES=$__0.KEY_CODES,isPrintableChar=$__0.isPrintableChar,stringify=($___46__46__47_helpers_47_mixed__=_dereq_("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{"default":$___46__46__47_helpers_47_mixed__}).stringify,pivot=($___46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47_helpers_47_array__&&$___46__46__47_helpers_47_array__.__esModule&&$___46__46__47_helpers_47_array__||{"default":$___46__46__47_helpers_47_array__}).pivot,$__3=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),addClass=$__3.addClass,getCaretPosition=$__3.getCaretPosition,getScrollbarWidth=$__3.getScrollbarWidth,getSelectionEndPosition=$__3.getSelectionEndPosition,outerWidth=$__3.outerWidth,outerHeight=$__3.outerHeight,offset=$__3.offset,getTrimmingContainer=$__3.getTrimmingContainer,setCaretPosition=$__3.setCaretPosition,registerEditor=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}).registerEditor,HandsontableEditor=($__handsontableEditor__=_dereq_("handsontableEditor"),$__handsontableEditor__&&$__handsontableEditor__.__esModule&&$__handsontableEditor__||{"default":$__handsontableEditor__}).HandsontableEditor,AutocompleteEditor=HandsontableEditor.prototype.extend();AutocompleteEditor.prototype.init=function(){HandsontableEditor.prototype.init.apply(this,arguments),this.query=null,this.choices=[]},AutocompleteEditor.prototype.createElements=function(){HandsontableEditor.prototype.createElements.apply(this,arguments),addClass(this.htContainer,"autocompleteEditor"),addClass(this.htContainer,window.navigator.platform.indexOf("Mac")===-1?"":"htMacScroll")};var skipOne=!1;AutocompleteEditor.prototype.prepare=function(){this.instance.addHook("beforeKeyDown",onBeforeKeyDown),HandsontableEditor.prototype.prepare.apply(this,arguments)},AutocompleteEditor.prototype.open=function(){this.TEXTAREA_PARENT.style.overflow="auto",HandsontableEditor.prototype.open.apply(this,arguments),this.TEXTAREA_PARENT.style.overflow="";var choicesListHot=this.htEditor.getInstance(),_this=this,trimDropdown=void 0===this.cellProperties.trimDropdown||this.cellProperties.trimDropdown;this.TEXTAREA.style.visibility="visible",this.focus(),choicesListHot.updateSettings({colWidths:trimDropdown?[outerWidth(this.TEXTAREA)-2]:void 0,width:trimDropdown?outerWidth(this.TEXTAREA)+getScrollbarWidth()+2:void 0,afterRenderer:function(TD,row,col,prop,value){var indexOfMatch,match,caseSensitive=this.getCellMeta(row,col).filteringCaseSensitive===!0;value=stringify(value),value&&(indexOfMatch=caseSensitive?value.indexOf(this.query):value.toLowerCase().indexOf(_this.query.toLowerCase()),indexOfMatch!=-1&&(match=value.substr(indexOfMatch,_this.query.length),TD.innerHTML=value.replace(match,"<strong>"+match+"</strong>")))},autoColumnSize:!0,modifyColWidth:function(width,col){var autoWidths=this.getPlugin("autoColumnSize").widths;return autoWidths[col]&&(width=autoWidths[col]),trimDropdown?width:width+15}}),this.htEditor.view.wt.wtTable.holder.parentNode.style["padding-right"]=getScrollbarWidth()+2+"px",skipOne&&(skipOne=!1),_this.instance._registerTimeout(setTimeout(function(){_this.queryChoices(_this.TEXTAREA.value)},0))},AutocompleteEditor.prototype.close=function(){HandsontableEditor.prototype.close.apply(this,arguments)},AutocompleteEditor.prototype.queryChoices=function(query){this.query=query;var source=this.cellProperties.source,hasFilter=this.cellProperties.filter,filteringCaseSensitive=this.cellProperties.filteringCaseSensitive;if("function"==typeof source){var _this=this;source.call(this.cellProperties,query,function(choices){_this.updateChoicesList(choices)})}else if(Array.isArray(source)){var choices;if(query&&hasFilter!==!1){var lowerCaseQuery=query.toLowerCase();choices=source.filter(function(choice){return filteringCaseSensitive?choice.toString().indexOf(query)!=-1:choice.toString().toLowerCase().indexOf(lowerCaseQuery)!=-1})}else choices=source;this.updateChoicesList(choices)}else this.updateChoicesList([])},AutocompleteEditor.prototype.updateChoicesList=function(choices){var pos=getCaretPosition(this.TEXTAREA),endPos=getSelectionEndPosition(this.TEXTAREA),sortByRelevanceSetting=this.cellProperties.sortByRelevance,filterSetting=this.cellProperties.filter,orderByRelevance=null,highlightIndex=null;if(sortByRelevanceSetting&&(orderByRelevance=AutocompleteEditor.sortByRelevance(this.getValue(),choices,this.cellProperties.filteringCaseSensitive)),filterSetting===!1)highlightIndex=orderByRelevance?orderByRelevance[0]:0;else{for(var sorted=[],i=0,choicesCount=choices.length;i<choicesCount;i++)orderByRelevance?sorted.push(choices[orderByRelevance[i]]):sorted.push(choices[i]);highlightIndex=0,choices=sorted}this.choices=choices,this.htEditor.loadData(pivot([choices])),this.updateDropdownHeight(),this.flipDropdownIfNeeded(),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(highlightIndex),this.instance.listen(),this.TEXTAREA.focus(),setCaretPosition(this.TEXTAREA,pos,pos===endPos?void 0:endPos)},AutocompleteEditor.prototype.flipDropdownIfNeeded=function(){var textareaOffset=offset(this.TEXTAREA),textareaHeight=outerHeight(this.TEXTAREA),dropdownHeight=this.getDropdownHeight(),trimmingContainer=getTrimmingContainer(this.instance.view.wt.wtTable.TABLE),trimmingContainerScrollTop=trimmingContainer.scrollTop,headersHeight=outerHeight(this.instance.view.wt.wtTable.THEAD),containerOffset={row:0,col:0};trimmingContainer!==window&&(containerOffset=offset(trimmingContainer));var spaceAbove=textareaOffset.top-containerOffset.top-headersHeight+trimmingContainerScrollTop,spaceBelow=trimmingContainer.scrollHeight-spaceAbove-headersHeight-textareaHeight,flipNeeded=dropdownHeight>spaceBelow&&spaceAbove>spaceBelow;return flipNeeded?this.flipDropdown(dropdownHeight):this.unflipDropdown(),this.limitDropdownIfNeeded(flipNeeded?spaceAbove:spaceBelow,dropdownHeight),
flipNeeded},AutocompleteEditor.prototype.limitDropdownIfNeeded=function(spaceAvailable,dropdownHeight){if(dropdownHeight>spaceAvailable){var tempHeight=0,i=0,lastRowHeight=0,height=null;do lastRowHeight=this.htEditor.getRowHeight(i)||this.htEditor.view.wt.wtSettings.settings.defaultRowHeight,tempHeight+=lastRowHeight,i++;while(tempHeight<spaceAvailable);height=tempHeight-lastRowHeight,this.htEditor.flipped&&(this.htEditor.rootElement.style.top=parseInt(this.htEditor.rootElement.style.top,10)+dropdownHeight-height+"px"),this.setDropdownHeight(tempHeight-lastRowHeight)}},AutocompleteEditor.prototype.flipDropdown=function(dropdownHeight){var dropdownStyle=this.htEditor.rootElement.style;dropdownStyle.position="absolute",dropdownStyle.top=-dropdownHeight+"px",this.htEditor.flipped=!0},AutocompleteEditor.prototype.unflipDropdown=function(){var dropdownStyle=this.htEditor.rootElement.style;"absolute"===dropdownStyle.position&&(dropdownStyle.position="",dropdownStyle.top=""),this.htEditor.flipped=void 0},AutocompleteEditor.prototype.updateDropdownHeight=function(){var currentDropdownWidth=this.htEditor.getColWidth(0)+getScrollbarWidth()+2,trimDropdown=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:trimDropdown?void 0:currentDropdownWidth}),this.htEditor.view.wt.wtTable.alignOverlaysWithTrimmingContainer()},AutocompleteEditor.prototype.setDropdownHeight=function(height){this.htEditor.updateSettings({height:height})},AutocompleteEditor.prototype.finishEditing=function(restoreOriginalValue){restoreOriginalValue||this.instance.removeHook("beforeKeyDown",onBeforeKeyDown),HandsontableEditor.prototype.finishEditing.apply(this,arguments)},AutocompleteEditor.prototype.highlightBestMatchingChoice=function(index){"number"==typeof index?this.htEditor.selectCell(index,0):this.htEditor.deselectCell()},AutocompleteEditor.sortByRelevance=function(value,choices,caseSensitive){var currentItem,valueIndex,charsLeft,i,choicesRelevance=[],valueLength=value.length,result=[],choicesCount=choices.length;if(0===valueLength){for(i=0;i<choicesCount;i++)result.push(i);return result}for(i=0;i<choicesCount;i++)currentItem=stringify(choices[i]),valueIndex=caseSensitive?currentItem.indexOf(value):currentItem.toLowerCase().indexOf(value.toLowerCase()),valueIndex!=-1&&(charsLeft=currentItem.length-valueIndex-valueLength,choicesRelevance.push({baseIndex:i,index:valueIndex,charsLeft:charsLeft,value:currentItem}));for(choicesRelevance.sort(function(a,b){return b.index===-1?-1:a.index===-1?1:a.index<b.index?-1:b.index<a.index?1:a.index===b.index?a.charsLeft<b.charsLeft?-1:a.charsLeft>b.charsLeft?1:0:void 0}),i=0,choicesCount=choicesRelevance.length;i<choicesCount;i++)result.push(choicesRelevance[i].baseIndex);return result},AutocompleteEditor.prototype.getDropdownHeight=function(){var firstRowHeight=this.htEditor.getInstance().getRowHeight(0)||23,visibleRows=this.cellProperties.visibleRows;return this.choices.length>=visibleRows?visibleRows*firstRowHeight:this.choices.length*firstRowHeight+8},AutocompleteEditor.prototype.allowKeyEventPropagation=function(keyCode){var selected={row:this.htEditor.getSelectedRange()?this.htEditor.getSelectedRange().from.row:-1},allowed=!1;return keyCode===KEY_CODES.ARROW_DOWN&&selected.row>0&&selected.row<this.htEditor.countRows()-1&&(allowed=!0),keyCode===KEY_CODES.ARROW_UP&&selected.row>-1&&(allowed=!0),allowed},AutocompleteEditor.prototype.discardEditor=function(result){HandsontableEditor.prototype.discardEditor.apply(this,arguments),this.instance.view.render()},registerEditor("autocomplete",AutocompleteEditor)},{editors:30,handsontableEditor:36,"helpers/array":43,"helpers/dom/element":47,"helpers/mixed":51,"helpers/unicode":56}],33:[function(_dereq_,module,exports){Object.defineProperties(exports,{CheckboxEditor:{get:function(){return CheckboxEditor}},__esModule:{value:!0}});var $___46__46__47_editors__,$___95_baseEditor__,$___46__46__47_helpers_47_dom_47_element__,registerEditor=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}).registerEditor,BaseEditor=($___95_baseEditor__=_dereq_("_baseEditor"),$___95_baseEditor__&&$___95_baseEditor__.__esModule&&$___95_baseEditor__||{"default":$___95_baseEditor__}).BaseEditor,hasClass=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}).hasClass,CheckboxEditor=function(){$traceurRuntime.superConstructor($CheckboxEditor).apply(this,arguments)},$CheckboxEditor=CheckboxEditor;$traceurRuntime.createClass(CheckboxEditor,{beginEditing:function(initialValue,event){if(void 0===event){var checkbox=this.TD.querySelector('input[type="checkbox"]');hasClass(checkbox,"htBadValue")||checkbox.click()}},finishEditing:function(){},init:function(){},open:function(){},close:function(){},getValue:function(){},setValue:function(){},focus:function(){}},{},BaseEditor),registerEditor("checkbox",CheckboxEditor)},{_baseEditor:31,editors:30,"helpers/dom/element":47}],34:[function(_dereq_,module,exports){Object.defineProperties(exports,{DateEditor:{get:function(){return DateEditor}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_object__,$___46__46__47_eventManager__,$___46__46__47_editors__,$___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_dom_47_event__,$__textEditor__,$__moment__,$__pikaday__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],$__1=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,outerHeight=$__1.outerHeight,deepExtend=($___46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{"default":$___46__46__47_helpers_47_object__}).deepExtend,EventManager=($___46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47_eventManager__&&$___46__46__47_eventManager__.__esModule&&$___46__46__47_eventManager__||{"default":$___46__46__47_eventManager__}).EventManager,$__4=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}),registerEditor=($__4.getEditor,$__4.registerEditor),isMetaKey=($___46__46__47_helpers_47_unicode__=_dereq_("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{"default":$___46__46__47_helpers_47_unicode__}).isMetaKey,stopPropagation=($___46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47_helpers_47_dom_47_event__}).stopPropagation,TextEditor=($__textEditor__=_dereq_("textEditor"),$__textEditor__&&$__textEditor__.__esModule&&$__textEditor__||{"default":$__textEditor__}).TextEditor,moment=($__moment__=_dereq_("moment"),$__moment__&&$__moment__.__esModule&&$__moment__||{"default":$__moment__})["default"],Pikaday=($__pikaday__=_dereq_("pikaday"),$__pikaday__&&$__pikaday__.__esModule&&$__pikaday__||{"default":$__pikaday__})["default"];Handsontable.editors=Handsontable.editors||{},Handsontable.editors.DateEditor=DateEditor;var DateEditor=function(hotInstance){this.$datePicker=null,this.datePicker=null,this.datePickerStyle=null,this.defaultDateFormat="DD/MM/YYYY",this.isCellEdited=!1,this.parentDestroyed=!1,$traceurRuntime.superConstructor($DateEditor).call(this,hotInstance)},$DateEditor=DateEditor;$traceurRuntime.createClass(DateEditor,{init:function(){var $__10=this;if("function"!=typeof moment)throw new Error("You need to include moment.js to your project.");if("function"!=typeof Pikaday)throw new Error("You need to include Pikaday to your project.");$traceurRuntime.superGet(this,$DateEditor.prototype,"init").call(this),this.instance.addHook("afterDestroy",function(){$__10.parentDestroyed=!0,$__10.destroyElements()})},createElements:function(){$traceurRuntime.superGet(this,$DateEditor.prototype,"createElements").call(this),this.datePicker=document.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,addClass(this.datePicker,"htDatepickerHolder"),document.body.appendChild(this.datePicker),this.$datePicker=new Pikaday(this.getDatePickerConfig());var eventManager=new EventManager(this);eventManager.addEventListener(this.datePicker,"mousedown",function(event){return stopPropagation(event)}),this.hideDatepicker()},destroyElements:function(){this.$datePicker.destroy()},prepare:function(row,col,prop,td,originalValue,cellProperties){this._opened=!1,$traceurRuntime.superGet(this,$DateEditor.prototype,"prepare").call(this,row,col,prop,td,originalValue,cellProperties)},open:function(){var event=void 0!==arguments[0]?arguments[0]:null;$traceurRuntime.superGet(this,$DateEditor.prototype,"open").call(this),this.showDatepicker(event)},close:function(){var $__10=this;this._opened=!1,this.instance._registerTimeout(setTimeout(function(){$__10.instance.selection.refreshBorders()},0)),$traceurRuntime.superGet(this,$DateEditor.prototype,"close").call(this)},finishEditing:function(){var isCancelled=void 0!==arguments[0]&&arguments[0],ctrlDown=void 0!==arguments[1]&&arguments[1];if(isCancelled){var value=this.originalValue;void 0!==value&&this.setValue(value)}this.hideDatepicker(),$traceurRuntime.superGet(this,$DateEditor.prototype,"finishEditing").call(this,isCancelled,ctrlDown)},showDatepicker:function(event){this.$datePicker.config(this.getDatePickerConfig());var dateStr,offset=this.TD.getBoundingClientRect(),dateFormat=this.cellProperties.dateFormat||this.defaultDateFormat,datePickerConfig=this.$datePicker.config(),isMouseDown=this.instance.view.isMouseDown(),isMeta=!!event&&isMetaKey(event.keyCode);this.datePickerStyle.top=window.pageYOffset+offset.top+outerHeight(this.TD)+"px",this.datePickerStyle.left=window.pageXOffset+offset.left+"px",this.$datePicker._onInputFocus=function(){},datePickerConfig.format=dateFormat,this.originalValue?(dateStr=this.originalValue,moment(dateStr,dateFormat,!0).isValid()&&this.$datePicker.setMoment(moment(dateStr,dateFormat),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),isMeta||isMouseDown||this.setValue("")):this.cellProperties.defaultDate?(dateStr=this.cellProperties.defaultDate,datePickerConfig.defaultDate=dateStr,moment(dateStr,dateFormat,!0).isValid()&&this.$datePicker.setMoment(moment(dateStr,dateFormat),!0),isMeta||isMouseDown||this.setValue("")):this.$datePicker.gotoToday(),this.datePickerStyle.display="block",this.$datePicker.show()},hideDatepicker:function(){this.datePickerStyle.display="none",this.$datePicker.hide()},getDatePickerConfig:function(){var $__10=this,htInput=this.TEXTAREA,options={};this.cellProperties&&this.cellProperties.datePickerConfig&&deepExtend(options,this.cellProperties.datePickerConfig);var origOnSelect=options.onSelect,origOnClose=options.onClose;return options.field=htInput,options.trigger=htInput,options.container=this.datePicker,options.bound=!1,options.format=options.format||this.defaultDateFormat,options.reposition=options.reposition||!1,options.onSelect=function(dateStr){isNaN(dateStr.getTime())||(dateStr=moment(dateStr).format($__10.cellProperties.dateFormat||$__10.defaultDateFormat)),$__10.setValue(dateStr),$__10.hideDatepicker(),origOnSelect&&origOnSelect()},options.onClose=function(){$__10.parentDestroyed||$__10.finishEditing(!1),origOnClose&&origOnClose()},options}},{},TextEditor),registerEditor("date",DateEditor)},{browser:24,editors:30,eventManager:42,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/object":53,"helpers/unicode":56,moment:"moment",pikaday:"pikaday",textEditor:41}],35:[function(_dereq_,module,exports){Object.defineProperties(exports,{DropdownEditor:{get:function(){return DropdownEditor}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_editors__,$__autocompleteEditor__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],$__1=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}),registerEditor=($__1.getEditor,$__1.registerEditor),AutocompleteEditor=($__1.getEditorConstructor,($__autocompleteEditor__=_dereq_("autocompleteEditor"),$__autocompleteEditor__&&$__autocompleteEditor__.__esModule&&$__autocompleteEditor__||{"default":$__autocompleteEditor__}).AutocompleteEditor),DropdownEditor=function(){$traceurRuntime.superConstructor($DropdownEditor).apply(this,arguments)},$DropdownEditor=DropdownEditor;$traceurRuntime.createClass(DropdownEditor,{prepare:function(row,col,prop,td,originalValue,cellProperties){$traceurRuntime.superGet(this,$DropdownEditor.prototype,"prepare").call(this,row,col,prop,td,originalValue,cellProperties),this.cellProperties.filter=!1,this.cellProperties.strict=!0}},{},AutocompleteEditor),Handsontable.hooks.add("beforeValidate",function(value,row,col,source){var cellMeta=this.getCellMeta(row,this.propToCol(col));cellMeta.editor===Handsontable.editors.DropdownEditor&&void 0===cellMeta.strict&&(cellMeta.filter=!1,cellMeta.strict=!0)}),registerEditor("dropdown",DropdownEditor)},{autocompleteEditor:32,browser:24,editors:30}],36:[function(_dereq_,module,exports){Object.defineProperties(exports,{HandsontableEditor:{get:function(){return HandsontableEditor}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_object__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_dom_47_event__,$___46__46__47_editors__,$__textEditor__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],KEY_CODES=($___46__46__47_helpers_47_unicode__=_dereq_("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{"default":$___46__46__47_helpers_47_unicode__}).KEY_CODES,extend=($___46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{"default":$___46__46__47_helpers_47_object__}).extend,setCaretPosition=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}).setCaretPosition,$__4=($___46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47_helpers_47_dom_47_event__}),stopImmediatePropagation=$__4.stopImmediatePropagation,isImmediatePropagationStopped=$__4.isImmediatePropagationStopped,$__5=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}),registerEditor=($__5.getEditor,$__5.registerEditor),TextEditor=($__textEditor__=_dereq_("textEditor"),$__textEditor__&&$__textEditor__.__esModule&&$__textEditor__||{"default":$__textEditor__}).TextEditor,HandsontableEditor=TextEditor.prototype.extend();HandsontableEditor.prototype.createElements=function(){TextEditor.prototype.createElements.apply(this,arguments);var DIV=document.createElement("DIV");DIV.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(DIV),this.htContainer=DIV,this.assignHooks()},HandsontableEditor.prototype.prepare=function(td,row,col,prop,value,cellProperties){TextEditor.prototype.prepare.apply(this,arguments);var parent=this,options={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,afterOnCellMouseDown:function(){var value=this.getValue();void 0!==value&&parent.setValue(value),parent.instance.destroyEditor()}};this.cellProperties.handsontable&&extend(options,cellProperties.handsontable),this.htOptions=options};var onBeforeKeyDown=function(event){if(!isImmediatePropagationStopped(event)){var rowToSelect,editor=this.getActiveEditor(),innerHOT=editor.htEditor.getInstance();if(event.keyCode==KEY_CODES.ARROW_DOWN)if(innerHOT.getSelected()||innerHOT.flipped){if(innerHOT.getSelected())if(innerHOT.flipped)rowToSelect=innerHOT.getSelected()[0]+1;else if(!innerHOT.flipped){var selectedRow=innerHOT.getSelected()[0],lastRow=innerHOT.countRows()-1;rowToSelect=Math.min(lastRow,selectedRow+1)}}else rowToSelect=0;else if(event.keyCode==KEY_CODES.ARROW_UP)if(!innerHOT.getSelected()&&innerHOT.flipped)rowToSelect=innerHOT.countRows()-1;else if(innerHOT.getSelected())if(innerHOT.flipped){var selectedRow=innerHOT.getSelected()[0];rowToSelect=Math.max(0,selectedRow-1)}else{var selectedRow=innerHOT.getSelected()[0];rowToSelect=selectedRow-1}void 0!==rowToSelect&&(rowToSelect<0||innerHOT.flipped&&rowToSelect>innerHOT.countRows()-1?innerHOT.deselectCell():innerHOT.selectCell(rowToSelect,0),innerHOT.getData().length&&(event.preventDefault(),stopImmediatePropagation(event),editor.instance.listen(),editor.TEXTAREA.focus()))}};HandsontableEditor.prototype.open=function(){this.instance.addHook("beforeKeyDown",onBeforeKeyDown),TextEditor.prototype.open.apply(this,arguments),this.htEditor&&this.htEditor.destroy(),this.htEditor=new Handsontable(this.htContainer,this.htOptions),this.cellProperties.strict?(this.htEditor.selectCell(0,0),this.TEXTAREA.style.visibility="hidden"):(this.htEditor.deselectCell(),this.TEXTAREA.style.visibility="visible"),setCaretPosition(this.TEXTAREA,0,this.TEXTAREA.value.length)},HandsontableEditor.prototype.close=function(){this.instance.removeHook("beforeKeyDown",onBeforeKeyDown),this.instance.listen(),TextEditor.prototype.close.apply(this,arguments)},HandsontableEditor.prototype.focus=function(){this.instance.listen(),TextEditor.prototype.focus.apply(this,arguments)},HandsontableEditor.prototype.beginEditing=function(initialValue){var onBeginEditing=this.instance.getSettings().onBeginEditing;onBeginEditing&&onBeginEditing()===!1||TextEditor.prototype.beginEditing.apply(this,arguments)},HandsontableEditor.prototype.finishEditing=function(isCancelled,ctrlDown){if(this.htEditor&&this.htEditor.isListening()&&this.instance.listen(),this.htEditor&&this.htEditor.getSelected()){var value=this.htEditor.getInstance().getValue();void 0!==value&&this.setValue(value)}return TextEditor.prototype.finishEditing.apply(this,arguments)},HandsontableEditor.prototype.assignHooks=function(){var _this=this;this.instance.addHook("afterDestroy",function(){_this.htEditor&&_this.htEditor.destroy()})},registerEditor("handsontable",HandsontableEditor)},{browser:24,editors:30,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/object":53,"helpers/unicode":56,textEditor:41}],37:[function(_dereq_,module,exports){Object.defineProperties(exports,{MobileTextEditor:{get:function(){return MobileTextEditor}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_dom_47_event__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_editors__,$___95_baseEditor__,$___46__46__47_eventManager__,KEY_CODES=(($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],($___46__46__47_helpers_47_unicode__=_dereq_("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{"default":$___46__46__47_helpers_47_unicode__}).KEY_CODES),$__2=($___46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47_helpers_47_dom_47_event__}),stopImmediatePropagation=$__2.stopImmediatePropagation,isImmediatePropagationStopped=$__2.isImmediatePropagationStopped,$__3=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),addClass=$__3.addClass,getScrollLeft=$__3.getScrollLeft,getScrollTop=$__3.getScrollTop,hasClass=$__3.hasClass,isChildOf=$__3.isChildOf,offset=$__3.offset,outerHeight=$__3.outerHeight,outerWidth=$__3.outerWidth,removeClass=$__3.removeClass,setCaretPosition=$__3.setCaretPosition,$__4=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}),registerEditor=($__4.getEditor,$__4.registerEditor),BaseEditor=($___95_baseEditor__=_dereq_("_baseEditor"),$___95_baseEditor__&&$___95_baseEditor__.__esModule&&$___95_baseEditor__||{"default":$___95_baseEditor__}).BaseEditor,eventManagerObject=($___46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47_eventManager__&&$___46__46__47_eventManager__.__esModule&&$___46__46__47_eventManager__||{"default":$___46__46__47_eventManager__}).eventManager,MobileTextEditor=BaseEditor.prototype.extend(),domDimensionsCache={},createControls=function(){this.controls={},this.controls.leftButton=document.createElement("DIV"),this.controls.leftButton.className="leftButton",this.controls.rightButton=document.createElement("DIV"),this.controls.rightButton.className="rightButton",this.controls.upButton=document.createElement("DIV"),this.controls.upButton.className="upButton",this.controls.downButton=document.createElement("DIV"),this.controls.downButton.className="downButton";for(var button in this.controls)this.controls.hasOwnProperty(button)&&this.positionControls.appendChild(this.controls[button])};MobileTextEditor.prototype.valueChanged=function(){return this.initValue!=this.getValue()},MobileTextEditor.prototype.init=function(){var that=this;this.eventManager=eventManagerObject(this.instance),this.createElements(),this.bindEvents(),this.instance.addHook("afterDestroy",function(){that.destroy()})},MobileTextEditor.prototype.getValue=function(){return this.TEXTAREA.value},MobileTextEditor.prototype.setValue=function(newValue){this.initValue=newValue,this.TEXTAREA.value=newValue},MobileTextEditor.prototype.createElements=function(){this.editorContainer=document.createElement("DIV"),this.editorContainer.className="htMobileEditorContainer",this.cellPointer=document.createElement("DIV"),this.cellPointer.className="cellPointer",this.moveHandle=document.createElement("DIV"),this.moveHandle.className="moveHandle",this.inputPane=document.createElement("DIV"),this.inputPane.className="inputs",this.positionControls=document.createElement("DIV"),this.positionControls.className="positionControls",this.TEXTAREA=document.createElement("TEXTAREA"),addClass(this.TEXTAREA,"handsontableInput"),this.inputPane.appendChild(this.TEXTAREA),this.editorContainer.appendChild(this.cellPointer),this.editorContainer.appendChild(this.moveHandle),this.editorContainer.appendChild(this.inputPane),this.editorContainer.appendChild(this.positionControls),createControls.call(this),document.body.appendChild(this.editorContainer)},MobileTextEditor.prototype.onBeforeKeyDown=function(event){var instance=this,that=instance.getActiveEditor();if(event.target===that.TEXTAREA&&!isImmediatePropagationStopped(event))switch(event.keyCode){case KEY_CODES.ENTER:that.close(),event.preventDefault();break;case KEY_CODES.BACKSPACE:stopImmediatePropagation(event)}},MobileTextEditor.prototype.open=function(){this.instance.addHook("beforeKeyDown",this.onBeforeKeyDown),addClass(this.editorContainer,"active"),removeClass(this.cellPointer,"hidden"),this.updateEditorPosition()},MobileTextEditor.prototype.focus=function(){this.TEXTAREA.focus(),setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},MobileTextEditor.prototype.close=function(){this.TEXTAREA.blur(),this.instance.removeHook("beforeKeyDown",this.onBeforeKeyDown),removeClass(this.editorContainer,"active")},MobileTextEditor.prototype.scrollToView=function(){var coords=this.instance.getSelectedRange().highlight;this.instance.view.scrollViewport(coords)},MobileTextEditor.prototype.hideCellPointer=function(){hasClass(this.cellPointer,"hidden")||addClass(this.cellPointer,"hidden")},MobileTextEditor.prototype.updateEditorPosition=function(x,y){if(x&&y)x=parseInt(x,10),y=parseInt(y,10),this.editorContainer.style.top=y+"px",this.editorContainer.style.left=x+"px";else{var selection=this.instance.getSelected(),selectedCell=this.instance.getCell(selection[0],selection[1]);if(domDimensionsCache.cellPointer||(domDimensionsCache.cellPointer={height:outerHeight(this.cellPointer),width:outerWidth(this.cellPointer)}),domDimensionsCache.editorContainer||(domDimensionsCache.editorContainer={width:outerWidth(this.editorContainer)}),void 0!==selectedCell){var scrollLeft=this.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer==window?0:getScrollLeft(this.instance.view.wt.wtOverlays.leftOverlay.holder),scrollTop=this.instance.view.wt.wtOverlays.topOverlay.trimmingContainer==window?0:getScrollTop(this.instance.view.wt.wtOverlays.topOverlay.holder),selectedCellOffset=offset(selectedCell),selectedCellWidth=outerWidth(selectedCell),currentScrollPosition={x:scrollLeft,y:scrollTop};this.editorContainer.style.top=parseInt(selectedCellOffset.top+outerHeight(selectedCell)-currentScrollPosition.y+domDimensionsCache.cellPointer.height,10)+"px",this.editorContainer.style.left=parseInt(window.innerWidth/2-domDimensionsCache.editorContainer.width/2,10)+"px",selectedCellOffset.left+selectedCellWidth/2>parseInt(this.editorContainer.style.left,10)+domDimensionsCache.editorContainer.width?this.editorContainer.style.left=window.innerWidth-domDimensionsCache.editorContainer.width+"px":selectedCellOffset.left+selectedCellWidth/2<parseInt(this.editorContainer.style.left,10)+20&&(this.editorContainer.style.left="0px"),this.cellPointer.style.left=parseInt(selectedCellOffset.left-domDimensionsCache.cellPointer.width/2-offset(this.editorContainer).left+selectedCellWidth/2-currentScrollPosition.x,10)+"px"}}},MobileTextEditor.prototype.updateEditorData=function(){var selected=this.instance.getSelected(),selectedValue=this.instance.getDataAtCell(selected[0],selected[1]);this.row=selected[0],this.col=selected[1],this.setValue(selectedValue),this.updateEditorPosition()},MobileTextEditor.prototype.prepareAndSave=function(){var val;return!this.valueChanged()||(val=this.instance.getSettings().trimWhitespace?[[String.prototype.trim.call(this.getValue())]]:[[this.getValue()]],void this.saveValue(val))},MobileTextEditor.prototype.bindEvents=function(){var that=this;this.eventManager.addEventListener(this.controls.leftButton,"touchend",function(event){that.prepareAndSave(),that.instance.selection.transformStart(0,-1,null,!0),that.updateEditorData(),event.preventDefault()}),this.eventManager.addEventListener(this.controls.rightButton,"touchend",function(event){that.prepareAndSave(),that.instance.selection.transformStart(0,1,null,!0),that.updateEditorData(),event.preventDefault()}),this.eventManager.addEventListener(this.controls.upButton,"touchend",function(event){that.prepareAndSave(),that.instance.selection.transformStart(-1,0,null,!0),that.updateEditorData(),event.preventDefault()}),this.eventManager.addEventListener(this.controls.downButton,"touchend",function(event){that.prepareAndSave(),that.instance.selection.transformStart(1,0,null,!0),that.updateEditorData(),event.preventDefault()}),this.eventManager.addEventListener(this.moveHandle,"touchstart",function(event){if(1==event.touches.length){var touch=event.touches[0],onTouchPosition={x:that.editorContainer.offsetLeft,y:that.editorContainer.offsetTop},onTouchOffset={x:touch.pageX-onTouchPosition.x,y:touch.pageY-onTouchPosition.y};that.eventManager.addEventListener(this,"touchmove",function(event){var touch=event.touches[0];that.updateEditorPosition(touch.pageX-onTouchOffset.x,touch.pageY-onTouchOffset.y),that.hideCellPointer(),event.preventDefault()})}}),this.eventManager.addEventListener(document.body,"touchend",function(event){isChildOf(event.target,that.editorContainer)||isChildOf(event.target,that.instance.rootElement)||that.close()}),this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.leftOverlay.holder,"scroll",function(event){that.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer!=window&&that.hideCellPointer()}),this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.topOverlay.holder,"scroll",function(event){that.instance.view.wt.wtOverlays.topOverlay.trimmingContainer!=window&&that.hideCellPointer()})},MobileTextEditor.prototype.destroy=function(){this.eventManager.clear(),this.editorContainer.parentNode.removeChild(this.editorContainer)},registerEditor("mobile",MobileTextEditor)},{_baseEditor:31,browser:24,editors:30,eventManager:42,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/unicode":56}],38:[function(_dereq_,module,exports){Object.defineProperties(exports,{NumericEditor:{get:function(){return NumericEditor}},__esModule:{value:!0}});var $__numbro__,$___46__46__47_editors__,$__textEditor__,numbro=($__numbro__=_dereq_("numbro"),$__numbro__&&$__numbro__.__esModule&&$__numbro__||{"default":$__numbro__})["default"],registerEditor=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}).registerEditor,TextEditor=($__textEditor__=_dereq_("textEditor"),$__textEditor__&&$__textEditor__.__esModule&&$__textEditor__||{"default":$__textEditor__}).TextEditor,NumericEditor=function(){$traceurRuntime.superConstructor($NumericEditor).apply(this,arguments)},$NumericEditor=NumericEditor;$traceurRuntime.createClass(NumericEditor,{beginEditing:function(initialValue){if("undefined"==typeof initialValue&&this.originalValue){"undefined"!=typeof this.cellProperties.language&&numbro.culture(this.cellProperties.language);var decimalDelimiter=numbro.cultureData().delimiters.decimal;initialValue=(""+this.originalValue).replace(".",decimalDelimiter)}$traceurRuntime.superGet(this,$NumericEditor.prototype,"beginEditing").call(this,initialValue)}},{},TextEditor),registerEditor("numeric",NumericEditor)},{editors:30,numbro:"numbro",textEditor:41}],39:[function(_dereq_,module,exports){Object.defineProperties(exports,{PasswordEditor:{get:function(){return PasswordEditor}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_editors__,$__textEditor__,empty=(($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{
"default":$___46__46__47_browser__})["default"],($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}).empty),$__2=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}),registerEditor=($__2.getEditor,$__2.registerEditor),TextEditor=($__textEditor__=_dereq_("textEditor"),$__textEditor__&&$__textEditor__.__esModule&&$__textEditor__||{"default":$__textEditor__}).TextEditor,PasswordEditor=function(){$traceurRuntime.superConstructor($PasswordEditor).apply(this,arguments)},$PasswordEditor=PasswordEditor;$traceurRuntime.createClass(PasswordEditor,{createElements:function(){$traceurRuntime.superGet(this,$PasswordEditor.prototype,"createElements").call(this),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,empty(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}},{},TextEditor),registerEditor("password",PasswordEditor)},{browser:24,editors:30,"helpers/dom/element":47,textEditor:41}],40:[function(_dereq_,module,exports){Object.defineProperties(exports,{SelectEditor:{get:function(){return SelectEditor}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_dom_47_event__,$___46__46__47_helpers_47_unicode__,$___46__46__47_editors__,$___95_baseEditor__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],$__1=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,empty=$__1.empty,fastInnerHTML=$__1.fastInnerHTML,getComputedStyle=$__1.getComputedStyle,getCssTransform=$__1.getCssTransform,getScrollableElement=$__1.getScrollableElement,offset=$__1.offset,outerHeight=$__1.outerHeight,outerWidth=$__1.outerWidth,resetCssTransform=$__1.resetCssTransform,stopImmediatePropagation=($___46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47_helpers_47_dom_47_event__}).stopImmediatePropagation,KEY_CODES=($___46__46__47_helpers_47_unicode__=_dereq_("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{"default":$___46__46__47_helpers_47_unicode__}).KEY_CODES,$__4=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}),registerEditor=($__4.getEditor,$__4.registerEditor),BaseEditor=($___95_baseEditor__=_dereq_("_baseEditor"),$___95_baseEditor__&&$___95_baseEditor__.__esModule&&$___95_baseEditor__||{"default":$___95_baseEditor__}).BaseEditor,SelectEditor=BaseEditor.prototype.extend();SelectEditor.prototype.init=function(){this.select=document.createElement("SELECT"),addClass(this.select,"htSelectEditor"),this.select.style.display="none",this.instance.rootElement.appendChild(this.select),this.registerHooks()},SelectEditor.prototype.registerHooks=function(){var $__6=this;this.instance.addHook("afterScrollHorizontally",function(){return $__6.refreshDimensions()}),this.instance.addHook("afterScrollVertically",function(){return $__6.refreshDimensions()}),this.instance.addHook("afterColumnResize",function(){return $__6.refreshDimensions()}),this.instance.addHook("afterRowResize",function(){return $__6.refreshDimensions()})},SelectEditor.prototype.prepare=function(){BaseEditor.prototype.prepare.apply(this,arguments);var options,selectOptions=this.cellProperties.selectOptions;options="function"==typeof selectOptions?this.prepareOptions(selectOptions(this.row,this.col,this.prop)):this.prepareOptions(selectOptions),empty(this.select);for(var option in options)if(options.hasOwnProperty(option)){var optionElement=document.createElement("OPTION");optionElement.value=option,fastInnerHTML(optionElement,options[option]),this.select.appendChild(optionElement)}},SelectEditor.prototype.prepareOptions=function(optionsToPrepare){var preparedOptions={};if(Array.isArray(optionsToPrepare))for(var i=0,len=optionsToPrepare.length;i<len;i++)preparedOptions[optionsToPrepare[i]]=optionsToPrepare[i];else"object"==("undefined"==typeof optionsToPrepare?"undefined":_typeof(optionsToPrepare))&&(preparedOptions=optionsToPrepare);return preparedOptions},SelectEditor.prototype.getValue=function(){return this.select.value},SelectEditor.prototype.setValue=function(value){this.select.value=value};var onBeforeKeyDown=function(event){var instance=this,editor=instance.getActiveEditor();switch(event.keyCode){case KEY_CODES.ARROW_UP:var previousOptionIndex=editor.select.selectedIndex-1;previousOptionIndex>=0&&(editor.select[previousOptionIndex].selected=!0),stopImmediatePropagation(event),event.preventDefault();break;case KEY_CODES.ARROW_DOWN:var nextOptionIndex=editor.select.selectedIndex+1;nextOptionIndex<=editor.select.length-1&&(editor.select[nextOptionIndex].selected=!0),stopImmediatePropagation(event),event.preventDefault()}};SelectEditor.prototype.open=function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.instance.addHook("beforeKeyDown",onBeforeKeyDown)},SelectEditor.prototype.close=function(){this._opened=!1,this.select.style.display="none",this.instance.removeHook("beforeKeyDown",onBeforeKeyDown)},SelectEditor.prototype.focus=function(){this.select.focus()},SelectEditor.prototype.refreshDimensions=function(){if(this.state===Handsontable.EditorState.EDITING){if(this.TD=this.getEditedCell(),!this.TD)return void this.close();var cssTransformOffset,width=outerWidth(this.TD)+1,height=outerHeight(this.TD)+1,currentOffset=offset(this.TD),containerOffset=offset(this.instance.rootElement),scrollableContainer=getScrollableElement(this.TD),editTop=currentOffset.top-containerOffset.top-1-(scrollableContainer.scrollTop||0),editLeft=currentOffset.left-containerOffset.left-1-(scrollableContainer.scrollLeft||0),editorSection=this.checkEditorSection(),settings=this.instance.getSettings();settings.rowHeaders?1:0,settings.colHeaders?1:0;switch(editorSection){case"top":cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case"left":cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case"top-left-corner":cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom-left-corner":cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom":cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode)}0===this.instance.getSelected()[0]&&(editTop+=1),0===this.instance.getSelected()[1]&&(editLeft+=1);var selectStyle=this.select.style;cssTransformOffset&&cssTransformOffset!=-1?selectStyle[cssTransformOffset[0]]=cssTransformOffset[1]:resetCssTransform(this.select);var cellComputedStyle=getComputedStyle(this.TD);parseInt(cellComputedStyle.borderTopWidth,10)>0&&(height-=1),parseInt(cellComputedStyle.borderLeftWidth,10)>0&&(width-=1),selectStyle.height=height+"px",selectStyle.minWidth=width+"px",selectStyle.top=editTop+"px",selectStyle.left=editLeft+"px",selectStyle.margin="0px"}},SelectEditor.prototype.getEditedCell=function(){var editedCell,editorSection=this.checkEditorSection();switch(editorSection){case"top":editedCell=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=101;break;case"corner":editedCell=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=103;break;case"left":editedCell=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.select.style.zIndex=102;break;default:editedCell=this.instance.getCell(this.row,this.col),this.select.style.zIndex=""}return editedCell!=-1&&editedCell!=-2?editedCell:void 0},registerEditor("select",SelectEditor)},{_baseEditor:31,browser:24,editors:30,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/unicode":56}],41:[function(_dereq_,module,exports){Object.defineProperties(exports,{TextEditor:{get:function(){return TextEditor}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_dom_47_element__,$__autoResize__,$___95_baseEditor__,$___46__46__47_eventManager__,$___46__46__47_editors__,$___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_dom_47_event__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],$__1=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,getCaretPosition=$__1.getCaretPosition,getComputedStyle=$__1.getComputedStyle,getCssTransform=$__1.getCssTransform,getScrollableElement=$__1.getScrollableElement,getScrollbarWidth=$__1.getScrollbarWidth,innerWidth=$__1.innerWidth,offset=$__1.offset,resetCssTransform=$__1.resetCssTransform,setCaretPosition=$__1.setCaretPosition,hasVerticalScrollbar=$__1.hasVerticalScrollbar,hasHorizontalScrollbar=$__1.hasHorizontalScrollbar,autoResize=($__autoResize__=_dereq_("autoResize"),$__autoResize__&&$__autoResize__.__esModule&&$__autoResize__||{"default":$__autoResize__})["default"],BaseEditor=($___95_baseEditor__=_dereq_("_baseEditor"),$___95_baseEditor__&&$___95_baseEditor__.__esModule&&$___95_baseEditor__||{"default":$___95_baseEditor__}).BaseEditor,eventManagerObject=($___46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47_eventManager__&&$___46__46__47_eventManager__.__esModule&&$___46__46__47_eventManager__||{"default":$___46__46__47_eventManager__}).eventManager,$__5=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}),registerEditor=($__5.getEditor,$__5.registerEditor),KEY_CODES=($___46__46__47_helpers_47_unicode__=_dereq_("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{"default":$___46__46__47_helpers_47_unicode__}).KEY_CODES,$__7=($___46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47_helpers_47_dom_47_event__}),stopPropagation=$__7.stopPropagation,stopImmediatePropagation=$__7.stopImmediatePropagation,isImmediatePropagationStopped=$__7.isImmediatePropagationStopped,TextEditor=BaseEditor.prototype.extend();TextEditor.prototype.init=function(){var that=this;this.createElements(),this.eventManager=eventManagerObject(this),this.bindEvents(),this.autoResize=autoResize(),this.instance.addHook("afterDestroy",function(){that.destroy()})},TextEditor.prototype.getValue=function(){return this.TEXTAREA.value},TextEditor.prototype.setValue=function(newValue){this.TEXTAREA.value=newValue};var onBeforeKeyDown=function(event){var ctrlDown,instance=this,that=instance.getActiveEditor();if(ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey,event.target===that.TEXTAREA&&!isImmediatePropagationStopped(event)){if(17===event.keyCode||224===event.keyCode||91===event.keyCode||93===event.keyCode)return void stopImmediatePropagation(event);switch(event.keyCode){case KEY_CODES.ARROW_RIGHT:that.isInFullEditMode()&&(!that.isWaiting()&&!that.allowKeyEventPropagation||!that.isWaiting()&&that.allowKeyEventPropagation&&!that.allowKeyEventPropagation(event.keyCode))&&stopImmediatePropagation(event);break;case KEY_CODES.ARROW_LEFT:that.isInFullEditMode()&&(!that.isWaiting()&&!that.allowKeyEventPropagation||!that.isWaiting()&&that.allowKeyEventPropagation&&!that.allowKeyEventPropagation(event.keyCode))&&stopImmediatePropagation(event);break;case KEY_CODES.ARROW_UP:case KEY_CODES.ARROW_DOWN:that.isInFullEditMode()&&(!that.isWaiting()&&!that.allowKeyEventPropagation||!that.isWaiting()&&that.allowKeyEventPropagation&&!that.allowKeyEventPropagation(event.keyCode))&&stopImmediatePropagation(event);break;case KEY_CODES.ENTER:var selected=that.instance.getSelected(),isMultipleSelection=!(selected[0]===selected[2]&&selected[1]===selected[3]);if(ctrlDown&&!isMultipleSelection||event.altKey){if(that.isOpened()){var caretPosition=getCaretPosition(that.TEXTAREA),value=that.getValue(),newValue=value.slice(0,caretPosition)+"\n"+value.slice(caretPosition);that.setValue(newValue),setCaretPosition(that.TEXTAREA,caretPosition+1)}else that.beginEditing(that.originalValue+"\n");stopImmediatePropagation(event)}event.preventDefault();break;case KEY_CODES.A:case KEY_CODES.X:case KEY_CODES.C:case KEY_CODES.V:ctrlDown&&stopImmediatePropagation(event);break;case KEY_CODES.BACKSPACE:case KEY_CODES.DELETE:case KEY_CODES.HOME:case KEY_CODES.END:stopImmediatePropagation(event)}[KEY_CODES.ARROW_UP,KEY_CODES.ARROW_RIGHT,KEY_CODES.ARROW_DOWN,KEY_CODES.ARROW_LEFT].indexOf(event.keyCode)===-1&&that.autoResize.resize(String.fromCharCode(event.keyCode))}};TextEditor.prototype.open=function(){this.refreshDimensions(),this.instance.addHook("beforeKeyDown",onBeforeKeyDown)},TextEditor.prototype.close=function(tdOutside){this.textareaParentStyle.display="none",this.autoResize.unObserve(),document.activeElement===this.TEXTAREA&&this.instance.listen(),this.instance.removeHook("beforeKeyDown",onBeforeKeyDown)},TextEditor.prototype.focus=function(){this.TEXTAREA.focus(),setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},TextEditor.prototype.createElements=function(){this.TEXTAREA=document.createElement("TEXTAREA"),addClass(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),addClass(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement.appendChild(this.TEXTAREA_PARENT);var that=this;this.instance._registerTimeout(setTimeout(function(){that.refreshDimensions()},0))},TextEditor.prototype.getEditedCell=function(){var editedCell,editorSection=this.checkEditorSection();switch(editorSection){case"top":editedCell=this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=101;break;case"top-left-corner":editedCell=this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"bottom-left-corner":editedCell=this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"left":editedCell=this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;case"bottom":editedCell=this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;default:editedCell=this.instance.getCell(this.row,this.col),this.textareaParentStyle.zIndex=""}return editedCell!=-1&&editedCell!=-2?editedCell:void 0},TextEditor.prototype.refreshDimensions=function(){if(this.state===Handsontable.EditorState.EDITING){if(this.TD=this.getEditedCell(),!this.TD)return void this.close(!0);var cssTransformOffset,currentOffset=offset(this.TD),containerOffset=offset(this.instance.rootElement),scrollableContainer=getScrollableElement(this.TD),totalRowsCount=this.instance.countRows(),editTopModifier=currentOffset.top===containerOffset.top?0:1,editTop=currentOffset.top-containerOffset.top-editTopModifier-(scrollableContainer.scrollTop||0),editLeft=currentOffset.left-containerOffset.left-1-(scrollableContainer.scrollLeft||0),settings=this.instance.getSettings(),colHeadersCount=(this.instance.hasRowHeaders(),this.instance.hasColHeaders()),editorSection=this.checkEditorSection(),backgroundColor=this.TD.style.backgroundColor;switch(editorSection){case"top":cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);break;case"left":cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);break;case"top-left-corner":cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom-left-corner":cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);break;case"bottom":cssTransformOffset=getCssTransform(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode)}(colHeadersCount&&0===this.instance.getSelected()[0]||settings.fixedRowsBottom&&this.instance.getSelected()[0]===totalRowsCount-settings.fixedRowsBottom)&&(editTop+=1),0===this.instance.getSelected()[1]&&(editLeft+=1),cssTransformOffset&&cssTransformOffset!=-1?this.textareaParentStyle[cssTransformOffset[0]]=cssTransformOffset[1]:resetCssTransform(this.TEXTAREA_PARENT),this.textareaParentStyle.top=editTop+"px",this.textareaParentStyle.left=editLeft+"px";var firstRowOffset=this.instance.view.wt.wtViewport.rowsRenderCalculator.startPosition,firstColumnOffset=this.instance.view.wt.wtViewport.columnsRenderCalculator.startPosition,horizontalScrollPosition=this.instance.view.wt.wtOverlays.leftOverlay.getScrollPosition(),verticalScrollPosition=this.instance.view.wt.wtOverlays.topOverlay.getScrollPosition(),scrollbarWidth=getScrollbarWidth(),cellTopOffset=this.TD.offsetTop+firstRowOffset-verticalScrollPosition,cellLeftOffset=this.TD.offsetLeft+firstColumnOffset-horizontalScrollPosition,width=innerWidth(this.TD)-8,actualVerticalScrollbarWidth=hasVerticalScrollbar(scrollableContainer)?scrollbarWidth:0,actualHorizontalScrollbarWidth=hasHorizontalScrollbar(scrollableContainer)?scrollbarWidth:0,maxWidth=this.instance.view.maximumVisibleElementWidth(cellLeftOffset)-9-actualVerticalScrollbarWidth,height=this.TD.scrollHeight+1,maxHeight=Math.max(this.instance.view.maximumVisibleElementHeight(cellTopOffset)-actualHorizontalScrollbarWidth,23),cellComputedStyle=getComputedStyle(this.TD);this.TEXTAREA.style.fontSize=cellComputedStyle.fontSize,this.TEXTAREA.style.fontFamily=cellComputedStyle.fontFamily,this.TEXTAREA.style.backgroundColor="",this.TEXTAREA.style.backgroundColor=backgroundColor?backgroundColor:getComputedStyle(this.TEXTAREA).backgroundColor,this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(height,maxHeight),maxHeight:maxHeight,minWidth:Math.min(width,maxWidth),maxWidth:maxWidth},!0),this.textareaParentStyle.display="block"}},TextEditor.prototype.bindEvents=function(){var editor=this;this.eventManager.addEventListener(this.TEXTAREA,"cut",function(event){stopPropagation(event)}),this.eventManager.addEventListener(this.TEXTAREA,"paste",function(event){stopPropagation(event)}),this.instance.addHook("afterScrollHorizontally",function(){editor.refreshDimensions()}),this.instance.addHook("afterScrollVertically",function(){editor.refreshDimensions()}),this.instance.addHook("afterColumnResize",function(){editor.refreshDimensions(),editor.focus()}),this.instance.addHook("afterRowResize",function(){editor.refreshDimensions(),editor.focus()}),this.instance.addHook("afterDestroy",function(){editor.eventManager.destroy()})},TextEditor.prototype.destroy=function(){this.eventManager.destroy()},registerEditor("text",TextEditor)},{_baseEditor:31,autoResize:"autoResize",browser:24,editors:30,eventManager:42,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/unicode":56}],42:[function(_dereq_,module,exports){function extendEvent(context,event){var isHotTableSpotted,fromElement,realTarget,target,len,nativeStopImmediatePropagation,componentName="HOT-TABLE";if(event.isTargetWebComponent=!1,event.realTarget=event.target,nativeStopImmediatePropagation=event.stopImmediatePropagation,event.stopImmediatePropagation=function(){nativeStopImmediatePropagation.apply(this),_stopImmediatePropagation(this)},!Handsontable.eventManager.isHotTableEnv)return event;for(event=polymerWrap(event),len=event.path?event.path.length:0;len--;){if(event.path[len].nodeName===componentName)isHotTableSpotted=!0;else if(isHotTableSpotted&&event.path[len].shadowRoot){target=event.path[len];break}0!==len||target||(target=event.path[len])}return target||(target=event.target),event.isTargetWebComponent=!0,isWebComponentSupportedNatively()?event.realTarget=event.srcElement||event.toElement:(context instanceof Handsontable.Core||context instanceof Walkontable)&&(context instanceof Handsontable.Core?fromElement=context.view?context.view.wt.wtTable.TABLE:null:context instanceof Walkontable&&(fromElement=context.wtTable.TABLE.parentNode.parentNode),realTarget=closest(event.target,[componentName],fromElement),realTarget?event.realTarget=fromElement.querySelector(componentName)||event.target:event.realTarget=event.target),Object.defineProperty(event,"target",{get:function(){return polymerWrap(target)},enumerable:!0,configurable:!0}),event}function eventManager(context){return new EventManager(context)}Object.defineProperties(exports,{EventManager:{get:function(){return EventManager}},eventManager:{get:function(){return eventManager}},__esModule:{value:!0}});var $__browser__,$__helpers_47_dom_47_element__,$__helpers_47_feature__,$__helpers_47_dom_47_event__,Handsontable=($__browser__=_dereq_("browser"),$__browser__&&$__browser__.__esModule&&$__browser__||{"default":$__browser__})["default"],$__1=($__helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$__helpers_47_dom_47_element__&&$__helpers_47_dom_47_element__.__esModule&&$__helpers_47_dom_47_element__||{"default":$__helpers_47_dom_47_element__}),polymerWrap=$__1.polymerWrap,closest=$__1.closest,isWebComponentSupportedNatively=($__helpers_47_feature__=_dereq_("helpers/feature"),$__helpers_47_feature__&&$__helpers_47_feature__.__esModule&&$__helpers_47_feature__||{"default":$__helpers_47_feature__}).isWebComponentSupportedNatively,_stopImmediatePropagation=($__helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$__helpers_47_dom_47_event__&&$__helpers_47_dom_47_event__.__esModule&&$__helpers_47_dom_47_event__||{"default":$__helpers_47_dom_47_event__}).stopImmediatePropagation,EventManager=function(){var context=void 0!==arguments[0]?arguments[0]:null;this.context=context||this,this.context.eventListeners||(this.context.eventListeners=[])};$traceurRuntime.createClass(EventManager,{addEventListener:function(element,eventName,callback){function callbackProxy(event){event=extendEvent(context,event),callback.call(this,event)}var $__4=this,context=this.context;return this.context.eventListeners.push({element:element,event:eventName,callback:callback,callbackProxy:callbackProxy}),window.addEventListener?element.addEventListener(eventName,callbackProxy,!1):element.attachEvent("on"+eventName,callbackProxy),Handsontable.countEventManagerListeners++,function(){$__4.removeEventListener(element,eventName,callback)}},removeEventListener:function(element,eventName,callback){for(var tmpEvent,len=this.context.eventListeners.length;len--;)if(tmpEvent=this.context.eventListeners[len],tmpEvent.event==eventName&&tmpEvent.element==element){if(callback&&callback!=tmpEvent.callback)continue;this.context.eventListeners.splice(len,1),tmpEvent.element.removeEventListener?tmpEvent.element.removeEventListener(tmpEvent.event,tmpEvent.callbackProxy,!1):tmpEvent.element.detachEvent("on"+tmpEvent.event,tmpEvent.callbackProxy),Handsontable.countEventManagerListeners--}},clearEvents:function(){if(this.context)for(var len=this.context.eventListeners.length;len--;){var event=this.context.eventListeners[len];event&&this.removeEventListener(event.element,event.event,event.callback)}},clear:function(){this.clearEvents()},destroy:function(){this.clearEvents(),this.context=null},fireEvent:function(element,eventName){var event,options={bubbles:!0,cancelable:"mousemove"!==eventName,view:window,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};document.createEvent?(event=document.createEvent("MouseEvents"),event.initMouseEvent(eventName,options.bubbles,options.cancelable,options.view,options.detail,options.screenX,options.screenY,options.clientX,options.clientY,options.ctrlKey,options.altKey,options.shiftKey,options.metaKey,options.button,options.relatedTarget||document.body.parentNode)):event=document.createEventObject(),element.dispatchEvent?element.dispatchEvent(event):element.fireEvent("on"+eventName,event)}},{}),Handsontable.countEventManagerListeners=0,Handsontable.eventManager=eventManager},{browser:24,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/feature":49}],43:[function(_dereq_,module,exports){function to2dArray(arr){for(var i=0,ilen=arr.length;i<ilen;)arr[i]=[arr[i]],i++}function extendArray(arr,extension){for(var i=0,ilen=extension.length;i<ilen;)arr.push(extension[i]),i++}function pivot(arr){var pivotedArr=[];if(!arr||0===arr.length||!arr[0]||0===arr[0].length)return pivotedArr;for(var rowCount=arr.length,colCount=arr[0].length,i=0;i<rowCount;i++)for(var j=0;j<colCount;j++)pivotedArr[j]||(pivotedArr[j]=[]),pivotedArr[j][i]=arr[i][j];return pivotedArr}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;for(initFromArray&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayFilter(array,predicate){for(var index=-1,length=array.length,resIndex=-1,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[++resIndex]=value)}return result}function arrayMap(array,iteratee){for(var index=-1,length=array.length,resIndex=-1,result=[];++index<length;){var value=array[index];result[++resIndex]=iteratee(value,index,array)}return result}function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function arraySum(array){return arrayReduce(array,function(a,b){return a+b},0)}function arrayMax(array){return arrayReduce(array,function(a,b){return a>b?a:b},Array.isArray(array)?array[0]:void 0)}function arrayMin(array){return arrayReduce(array,function(a,b){return a<b?a:b},Array.isArray(array)?array[0]:void 0)}function arrayAvg(array){return array.length?arraySum(array)/array.length:0}function arrayFlatten(array){return arrayReduce(array,function(initial,value){return initial.concat(Array.isArray(value)?arrayFlatten(value):value)},[])}function arrayUnique(array){var unique=[];return arrayEach(array,function(value){unique.indexOf(value)===-1&&unique.push(value)}),unique}Object.defineProperties(exports,{to2dArray:{get:function(){return to2dArray}},extendArray:{get:function(){return extendArray}},pivot:{get:function(){return pivot}},arrayReduce:{get:function(){return arrayReduce}},arrayFilter:{get:function(){return arrayFilter}},arrayMap:{get:function(){return arrayMap}},arrayEach:{get:function(){return arrayEach}},arraySum:{get:function(){return arraySum}},arrayMax:{get:function(){return arrayMax}},arrayMin:{get:function(){return arrayMin}},arrayAvg:{get:function(){return arrayAvg}},arrayFlatten:{get:function(){return arrayFlatten}},arrayUnique:{get:function(){return arrayUnique}},__esModule:{value:!0}})},{}],44:[function(_dereq_,module,exports){function isIE8(){return _isIE8}function isIE9(){return _isIE9}function isSafari(){return _isSafari}function isChrome(){return _isChrome}function isMobileBrowser(userAgent){return userAgent||(userAgent=navigator.userAgent),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent)}Object.defineProperties(exports,{isIE8:{get:function(){return isIE8}},isIE9:{get:function(){return isIE9}},isSafari:{get:function(){return isSafari}},isChrome:{get:function(){return isChrome}},isMobileBrowser:{get:function(){return isMobileBrowser}},__esModule:{value:!0}});var _isIE8=!document.createTextNode("test").textContent,_isIE9=!!document.documentMode,_isSafari=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),_isChrome=/Chrome/.test(navigator.userAgent)&&/Google/.test(navigator.vendor)},{}],45:[function(_dereq_,module,exports){function spreadsheetColumnLabel(index){for(var modulo,dividend=index+1,columnLabel="";dividend>0;)modulo=(dividend-1)%COLUMN_LABEL_BASE_LENGTH,columnLabel=String.fromCharCode(65+modulo)+columnLabel,dividend=parseInt((dividend-modulo)/COLUMN_LABEL_BASE_LENGTH,10);return columnLabel}function spreadsheetColumnIndex(label){var result=0;if(label)for(var i=0,j=label.length-1;i<label.length;i+=1,j-=1)result+=Math.pow(COLUMN_LABEL_BASE_LENGTH,j)*(COLUMN_LABEL_BASE.indexOf(label[i])+1);return--result,result}function createSpreadsheetData(){var i,j,rows=void 0!==arguments[0]?arguments[0]:100,columns=void 0!==arguments[1]?arguments[1]:4,_rows=[];for(i=0;i<rows;i++){var row=[];for(j=0;j<columns;j++)row.push(spreadsheetColumnLabel(j)+(i+1));_rows.push(row)}return _rows}function createSpreadsheetObjectData(){var i,j,rows=void 0!==arguments[0]?arguments[0]:100,colCount=void 0!==arguments[1]?arguments[1]:4,_rows=[];for(i=0;i<rows;i++){var row={};for(j=0;j<colCount;j++)row["prop"+j]=spreadsheetColumnLabel(j)+(i+1);_rows.push(row)}return _rows}function createEmptySpreadsheetData(rows,columns){for(var row,data=[],i=0;i<rows;i++){row=[];for(var j=0;j<columns;j++)row.push("");data.push(row)}return data}function translateRowsToColumns(input){var i,ilen,j,jlen,output=[],olen=0;for(i=0,ilen=input.length;i<ilen;i++)for(j=0,jlen=input[i].length;j<jlen;j++)j==olen&&(output.push([]),olen++),output[j].push(input[i][j]);return output}function cellMethodLookupFactory(methodName,allowUndefined){function translateTypeNameToObject(typeName){var type=Handsontable.cellTypes[typeName];if("undefined"==typeof type)throw new Error('You declared cell type "'+typeName+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');return type}return allowUndefined="undefined"==typeof allowUndefined||allowUndefined,function(row,col){return function getMethodFromProperties(properties){if(properties){if(properties.hasOwnProperty(methodName)&&void 0!==properties[methodName])return properties[methodName];if(properties.hasOwnProperty("type")&&properties.type){var type;if("string"!=typeof properties.type)throw new Error("Cell type must be a string ");if(type=translateTypeNameToObject(properties.type),type.hasOwnProperty(methodName))return type[methodName];
if(allowUndefined)return}return getMethodFromProperties(getPrototypeOf(properties))}}("number"==typeof row?this.getCellMeta(row,col):row)}}Object.defineProperties(exports,{spreadsheetColumnLabel:{get:function(){return spreadsheetColumnLabel}},spreadsheetColumnIndex:{get:function(){return spreadsheetColumnIndex}},createSpreadsheetData:{get:function(){return createSpreadsheetData}},createSpreadsheetObjectData:{get:function(){return createSpreadsheetObjectData}},createEmptySpreadsheetData:{get:function(){return createEmptySpreadsheetData}},translateRowsToColumns:{get:function(){return translateRowsToColumns}},cellMethodLookupFactory:{get:function(){return cellMethodLookupFactory}},__esModule:{value:!0}});var $___46__46__47_browser__,$__object__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],getPrototypeOf=($__object__=_dereq_("object"),$__object__&&$__object__.__esModule&&$__object__||{"default":$__object__}).getPrototypeOf,COLUMN_LABEL_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZ",COLUMN_LABEL_BASE_LENGTH=COLUMN_LABEL_BASE.length},{browser:24,object:53}],46:[function(_dereq_,module,exports){function getNormalizedDate(dateString){var nativeDate=new Date(dateString);return isNaN(new Date(dateString+"T00:00").getDate())?nativeDate:new Date(nativeDate.getTime()+6e4*nativeDate.getTimezoneOffset())}Object.defineProperties(exports,{getNormalizedDate:{get:function(){return getNormalizedDate}},__esModule:{value:!0}})},{}],47:[function(_dereq_,module,exports){function closest(element,nodes,until){for(;null!=element&&element!==until;){if(element.nodeType===Node.ELEMENT_NODE&&(nodes.indexOf(element.nodeName)>-1||nodes.indexOf(element)>-1))return element;element=element.host&&element.nodeType===Node.DOCUMENT_FRAGMENT_NODE?element.host:element.parentNode}return null}function closestDown(element,nodes,until){for(var matched=[];element&&(element=closest(element,nodes,until),element&&(!until||until.contains(element)));)matched.push(element),element=element.host&&element.nodeType===Node.DOCUMENT_FRAGMENT_NODE?element.host:element.parentNode;var length=matched.length;return length?matched[length-1]:null}function isChildOf(child,parent){var node=child.parentNode,queriedParents=[];for("string"==typeof parent?queriedParents=Array.prototype.slice.call(document.querySelectorAll(parent),0):queriedParents.push(parent);null!=node;){if(queriedParents.indexOf(node)>-1)return!0;node=node.parentNode}return!1}function isChildOfWebComponentTable(element){function isHotTable(element){return element.nodeType===Node.ELEMENT_NODE&&element.nodeName===hotTableName.toUpperCase()}var parentNode,hotTableName="hot-table",result=!1;for(parentNode=polymerWrap(element);null!=parentNode;){if(isHotTable(parentNode)){result=!0;break}if(parentNode.host&&parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(result=isHotTable(parentNode.host))break;parentNode=parentNode.host}parentNode=parentNode.parentNode}return result}function polymerWrap(element){return"undefined"!=typeof Polymer&&"function"==typeof wrap?wrap(element):element}function polymerUnwrap(element){return"undefined"!=typeof Polymer&&"function"==typeof unwrap?unwrap(element):element}function index(element){var i=0;if(element.previousSibling)for(;element=element.previousSibling;)++i;return i}function overlayContainsElement(overlayType,element){var overlayElement=document.querySelector(".ht_clone_"+overlayType);return overlayElement?overlayElement.contains(element):null}function filterEmptyClassNames(classNames){var len=0,result=[];if(!classNames||!classNames.length)return result;for(;classNames[len];)result.push(classNames[len]),len++;return result}function hasClass(element,className){return _hasClass(element,className)}function addClass(element,className){return _addClass(element,className)}function removeClass(element,className){return _removeClass(element,className)}function removeTextNodes(element,parent){if(3===element.nodeType)parent.removeChild(element);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(element.nodeName)>-1)for(var childs=element.childNodes,i=childs.length-1;i>=0;i--)removeTextNodes(childs[i],element)}function empty(element){for(var child;child=element.lastChild;)element.removeChild(child)}function fastInnerHTML(element,content){HTML_CHARACTERS.test(content)?element.innerHTML=content:fastInnerText(element,content)}function fastInnerText(element,content){var child=element.firstChild;child&&3===child.nodeType&&null===child.nextSibling?textContextSupport?child.textContent=content:child.data=content:(empty(element),element.appendChild(document.createTextNode(content)))}function isVisible(elem){for(var next=elem;polymerUnwrap(next)!==document.documentElement;){if(null===next)return!1;if(next.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(next.host){if(next.host.impl)return isVisible(next.host.impl);if(next.host)return isVisible(next.host);throw new Error("Lost in Web Components world")}return!1}if("none"===next.style.display)return!1;next=next.parentNode}return!0}function offset(elem){var offsetLeft,offsetTop,lastElem,docElem,box;if(docElem=document.documentElement,hasCaptionProblem()&&elem.firstChild&&"CAPTION"===elem.firstChild.nodeName)return box=elem.getBoundingClientRect(),{top:box.top+(window.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(window.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)};for(offsetLeft=elem.offsetLeft,offsetTop=elem.offsetTop,lastElem=elem;(elem=elem.offsetParent)&&elem!==document.body;)offsetLeft+=elem.offsetLeft,offsetTop+=elem.offsetTop,lastElem=elem;return lastElem&&"fixed"===lastElem.style.position&&(offsetLeft+=window.pageXOffset||docElem.scrollLeft,offsetTop+=window.pageYOffset||docElem.scrollTop),{left:offsetLeft,top:offsetTop}}function getWindowScrollTop(){var res=window.scrollY;return void 0===res&&(res=document.documentElement.scrollTop),res}function getWindowScrollLeft(){var res=window.scrollX;return void 0===res&&(res=document.documentElement.scrollLeft),res}function getScrollTop(element){return element===window?getWindowScrollTop():element.scrollTop}function getScrollLeft(element){return element===window?getWindowScrollLeft():element.scrollLeft}function getScrollableElement(element){for(var overflow,overflowX,overflowY,el=element.parentNode,props=["auto","scroll"],computedStyle="",computedOverflow="",computedOverflowY="",computedOverflowX="";el&&el.style&&document.body!==el;){if(overflow=el.style.overflow,overflowX=el.style.overflowX,overflowY=el.style.overflowY,"scroll"==overflow||"scroll"==overflowX||"scroll"==overflowY)return el;if(window.getComputedStyle&&(computedStyle=window.getComputedStyle(el),computedOverflow=computedStyle.getPropertyValue("overflow"),computedOverflowY=computedStyle.getPropertyValue("overflow-y"),computedOverflowX=computedStyle.getPropertyValue("overflow-x"),"scroll"===computedOverflow||"scroll"===computedOverflowX||"scroll"===computedOverflowY))return el;if(el.clientHeight<=el.scrollHeight&&(props.indexOf(overflowY)!==-1||props.indexOf(overflow)!==-1||props.indexOf(computedOverflow)!==-1||props.indexOf(computedOverflowY)!==-1))return el;if(el.clientWidth<=el.scrollWidth&&(props.indexOf(overflowX)!==-1||props.indexOf(overflow)!==-1||props.indexOf(computedOverflow)!==-1||props.indexOf(computedOverflowX)!==-1))return el;el=el.parentNode}return window}function getTrimmingContainer(base){for(var el=base.parentNode;el&&el.style&&document.body!==el;){if("visible"!==el.style.overflow&&""!==el.style.overflow)return el;if(window.getComputedStyle){var computedStyle=window.getComputedStyle(el);if("visible"!==computedStyle.getPropertyValue("overflow")&&""!==computedStyle.getPropertyValue("overflow"))return el}el=el.parentNode}return window}function getStyle(element,prop){if(element){if(element!==window){var computedStyle,styleProp=element.style[prop];return""!==styleProp&&void 0!==styleProp?styleProp:(computedStyle=getComputedStyle(element),""!==computedStyle[prop]&&void 0!==computedStyle[prop]?computedStyle[prop]:void 0)}if("width"===prop)return window.innerWidth+"px";if("height"===prop)return window.innerHeight+"px"}}function getComputedStyle(element){return element.currentStyle||document.defaultView.getComputedStyle(element)}function outerWidth(element){return element.offsetWidth}function outerHeight(elem){return hasCaptionProblem()&&elem.firstChild&&"CAPTION"===elem.firstChild.nodeName?elem.offsetHeight+elem.firstChild.offsetHeight:elem.offsetHeight}function innerHeight(element){return element.clientHeight||element.innerHeight}function innerWidth(element){return element.clientWidth||element.innerWidth}function addEvent(element,event,callback){window.addEventListener?element.addEventListener(event,callback,!1):element.attachEvent("on"+event,callback)}function removeEvent(element,event,callback){window.removeEventListener?element.removeEventListener(event,callback,!1):element.detachEvent("on"+event,callback)}function getCaretPosition(el){if(el.selectionStart)return el.selectionStart;if(document.selection){el.focus();var r=document.selection.createRange();if(null==r)return 0;var re=el.createTextRange(),rc=re.duplicate();return re.moveToBookmark(r.getBookmark()),rc.setEndPoint("EndToStart",re),rc.text.length}return 0}function getSelectionEndPosition(el){if(el.selectionEnd)return el.selectionEnd;if(document.selection){var r=document.selection.createRange();if(null==r)return 0;var re=el.createTextRange();return re.text.indexOf(r.text)+r.text.length}}function getSelectionText(){var text="";return window.getSelection?text=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(text=document.selection.createRange().text),text}function setCaretPosition(element,pos,endPos){if(void 0===endPos&&(endPos=pos),element.setSelectionRange){element.focus();try{element.setSelectionRange(pos,endPos)}catch(err){var elementParent=element.parentNode,parentDisplayValue=elementParent.style.display;elementParent.style.display="block",element.setSelectionRange(pos,endPos),elementParent.style.display=parentDisplayValue}}else if(element.createTextRange){var range=element.createTextRange();range.collapse(!0),range.moveEnd("character",endPos),range.moveStart("character",pos),range.select()}}function walkontableCalculateScrollbarWidth(){var inner=document.createElement("p");inner.style.width="100%",inner.style.height="200px";var outer=document.createElement("div");outer.style.position="absolute",outer.style.top="0px",outer.style.left="0px",outer.style.visibility="hidden",outer.style.width="200px",outer.style.height="150px",outer.style.overflow="hidden",outer.appendChild(inner),(document.body||document.documentElement).appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;return w1==w2&&(w2=outer.clientWidth),(document.body||document.documentElement).removeChild(outer),w1-w2}function getScrollbarWidth(){return void 0===cachedScrollbarWidth&&(cachedScrollbarWidth=walkontableCalculateScrollbarWidth()),cachedScrollbarWidth}function hasVerticalScrollbar(element){return element.offsetWidth!==element.clientWidth}function hasHorizontalScrollbar(element){return element.offsetHeight!==element.clientHeight}function setOverlayPosition(overlayElem,left,top){isIE8()||isIE9()?(overlayElem.style.top=top,overlayElem.style.left=left):isSafari()?overlayElem.style["-webkit-transform"]="translate3d("+left+","+top+",0)":overlayElem.style.transform="translate3d("+left+","+top+",0)"}function getCssTransform(element){var transform;return element.style.transform&&""!==(transform=element.style.transform)?["transform",transform]:element.style["-webkit-transform"]&&""!==(transform=element.style["-webkit-transform"])?["-webkit-transform",transform]:-1}function resetCssTransform(element){element.style.transform&&""!==element.style.transform?element.style.transform="":element.style["-webkit-transform"]&&""!==element.style["-webkit-transform"]&&(element.style["-webkit-transform"]="")}function isInput(element){var inputs=["INPUT","SELECT","TEXTAREA"];return element&&(inputs.indexOf(element.nodeName)>-1||"true"===element.contentEditable)}function isOutsideInput(element){return isInput(element)&&element.className.indexOf("handsontableInput")==-1&&element.className.indexOf("copyPaste")==-1}Object.defineProperties(exports,{closest:{get:function(){return closest}},closestDown:{get:function(){return closestDown}},isChildOf:{get:function(){return isChildOf}},isChildOfWebComponentTable:{get:function(){return isChildOfWebComponentTable}},polymerWrap:{get:function(){return polymerWrap}},polymerUnwrap:{get:function(){return polymerUnwrap}},index:{get:function(){return index}},overlayContainsElement:{get:function(){return overlayContainsElement}},hasClass:{get:function(){return hasClass}},addClass:{get:function(){return addClass}},removeClass:{get:function(){return removeClass}},removeTextNodes:{get:function(){return removeTextNodes}},empty:{get:function(){return empty}},HTML_CHARACTERS:{get:function(){return HTML_CHARACTERS}},fastInnerHTML:{get:function(){return fastInnerHTML}},fastInnerText:{get:function(){return fastInnerText}},isVisible:{get:function(){return isVisible}},offset:{get:function(){return offset}},getWindowScrollTop:{get:function(){return getWindowScrollTop}},getWindowScrollLeft:{get:function(){return getWindowScrollLeft}},getScrollTop:{get:function(){return getScrollTop}},getScrollLeft:{get:function(){return getScrollLeft}},getScrollableElement:{get:function(){return getScrollableElement}},getTrimmingContainer:{get:function(){return getTrimmingContainer}},getStyle:{get:function(){return getStyle}},getComputedStyle:{get:function(){return getComputedStyle}},outerWidth:{get:function(){return outerWidth}},outerHeight:{get:function(){return outerHeight}},innerHeight:{get:function(){return innerHeight}},innerWidth:{get:function(){return innerWidth}},addEvent:{get:function(){return addEvent}},removeEvent:{get:function(){return removeEvent}},getCaretPosition:{get:function(){return getCaretPosition}},getSelectionEndPosition:{get:function(){return getSelectionEndPosition}},getSelectionText:{get:function(){return getSelectionText}},setCaretPosition:{get:function(){return setCaretPosition}},getScrollbarWidth:{get:function(){return getScrollbarWidth}},hasVerticalScrollbar:{get:function(){return hasVerticalScrollbar}},hasHorizontalScrollbar:{get:function(){return hasHorizontalScrollbar}},setOverlayPosition:{get:function(){return setOverlayPosition}},getCssTransform:{get:function(){return getCssTransform}},resetCssTransform:{get:function(){return resetCssTransform}},isInput:{get:function(){return isInput}},isOutsideInput:{get:function(){return isOutsideInput}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_feature__,_hasClass,_addClass,_removeClass,$__0=($___46__46__47_browser__=_dereq_("../browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__}),isIE8=$__0.isIE8,isIE9=$__0.isIE9,isSafari=$__0.isSafari,hasCaptionProblem=($___46__46__47_feature__=_dereq_("../feature"),$___46__46__47_feature__&&$___46__46__47_feature__.__esModule&&$___46__46__47_feature__||{"default":$___46__46__47_feature__}).hasCaptionProblem,classListSupport=!!document.documentElement.classList;if(classListSupport){var isSupportMultipleClassesArg=function(){var element=document.createElement("div");return element.classList.add("test","test2"),element.classList.contains("test2")}();_hasClass=function(element,className){return""!==className&&element.classList.contains(className)},_addClass=function(element,className){var len=0;if("string"==typeof className&&(className=className.split(" ")),className=filterEmptyClassNames(className),isSupportMultipleClassesArg)element.classList.add.apply(element.classList,className);else for(;className&&className[len];)element.classList.add(className[len]),len++},_removeClass=function(element,className){var len=0;if("string"==typeof className&&(className=className.split(" ")),className=filterEmptyClassNames(className),isSupportMultipleClassesArg)element.classList.remove.apply(element.classList,className);else for(;className&&className[len];)element.classList.remove(className[len]),len++}}else{var createClassNameRegExp=function(className){return new RegExp("(\\s|^)"+className+"(\\s|$)")};_hasClass=function(element,className){return!!element.className.match(createClassNameRegExp(className))},_addClass=function(element,className){var len=0,_className=element.className;if("string"==typeof className&&(className=className.split(" ")),""===_className)_className=className.join(" ");else for(;className&&className[len];)createClassNameRegExp(className[len]).test(_className)||(_className+=" "+className[len]),len++;element.className=_className},_removeClass=function(element,className){var len=0,_className=element.className;for("string"==typeof className&&(className=className.split(" "));className&&className[len];)_className=_className.replace(createClassNameRegExp(className[len])," ").trim(),len++;element.className!==_className&&(element.className=_className)}}var cachedScrollbarWidth,HTML_CHARACTERS=/(<(.*)>|&(.*);)/,textContextSupport=!!document.createTextNode("test").textContent},{"../browser":44,"../feature":49}],48:[function(_dereq_,module,exports){function stopImmediatePropagation(event){event.isImmediatePropagationEnabled=!1,event.cancelBubble=!0}function isImmediatePropagationStopped(event){return event.isImmediatePropagationEnabled===!1}function stopPropagation(event){"function"==typeof event.stopPropagation?event.stopPropagation():event.cancelBubble=!0}function pageX(event){return event.pageX?event.pageX:event.clientX+getWindowScrollLeft()}function pageY(event){return event.pageY?event.pageY:event.clientY+getWindowScrollTop()}function isRightClick(event){return 2===event.button}function isLeftClick(event){return 0===event.button}Object.defineProperties(exports,{stopImmediatePropagation:{get:function(){return stopImmediatePropagation}},isImmediatePropagationStopped:{get:function(){return isImmediatePropagationStopped}},stopPropagation:{get:function(){return stopPropagation}},pageX:{get:function(){return pageX}},pageY:{get:function(){return pageY}},isRightClick:{get:function(){return isRightClick}},isLeftClick:{get:function(){return isLeftClick}},__esModule:{value:!0}});var $__element__,$__0=($__element__=_dereq_("element"),$__element__&&$__element__.__esModule&&$__element__||{"default":$__element__}),getWindowScrollTop=$__0.getWindowScrollTop,getWindowScrollLeft=$__0.getWindowScrollLeft},{element:47}],49:[function(_dereq_,module,exports){function requestAnimationFrame(callback){return _requestAnimationFrame.call(window,callback)}function cancelAnimationFrame(id){_cancelAnimationFrame.call(window,id)}function isTouchSupported(){return"ontouchstart"in window}function isWebComponentSupportedNatively(){var test=document.createElement("div");return!(!test.createShadowRoot||!test.createShadowRoot.toString().match(/\[native code\]/))}function detectCaptionProblem(){var TABLE=document.createElement("TABLE");TABLE.style.borderSpacing=0,TABLE.style.borderWidth=0,TABLE.style.padding=0;var TBODY=document.createElement("TBODY");TABLE.appendChild(TBODY),TBODY.appendChild(document.createElement("TR")),TBODY.firstChild.appendChild(document.createElement("TD")),TBODY.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var CAPTION=document.createElement("CAPTION");CAPTION.innerHTML="c<br>c<br>c<br>c",CAPTION.style.padding=0,CAPTION.style.margin=0,TABLE.insertBefore(CAPTION,TBODY),document.body.appendChild(TABLE),_hasCaptionProblem=TABLE.offsetHeight<2*TABLE.lastChild.offsetHeight,document.body.removeChild(TABLE)}function hasCaptionProblem(){return void 0===_hasCaptionProblem&&detectCaptionProblem(),_hasCaptionProblem}function getComparisonFunction(language){var options=void 0!==arguments[1]?arguments[1]:{};return comparisonFunction?comparisonFunction:comparisonFunction="object"===("undefined"==typeof Intl?"undefined":_typeof(Intl))?new Intl.Collator(language,options).compare:"function"==typeof String.prototype.localeCompare?function(a,b){return(a+"").localeCompare(b)}:function(a,b){return a===b?0:a>b?-1:1}}Object.defineProperties(exports,{requestAnimationFrame:{get:function(){return requestAnimationFrame}},cancelAnimationFrame:{get:function(){return cancelAnimationFrame}},isTouchSupported:{get:function(){return isTouchSupported}},isWebComponentSupportedNatively:{get:function(){return isWebComponentSupportedNatively}},hasCaptionProblem:{get:function(){return hasCaptionProblem}},getComparisonFunction:{get:function(){return getComparisonFunction}},__esModule:{value:!0}});for(var lastTime=0,vendors=["ms","moz","webkit","o"],_requestAnimationFrame=window.requestAnimationFrame,_cancelAnimationFrame=window.cancelAnimationFrame,x=0;x<vendors.length&&!_requestAnimationFrame;++x)_requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],_cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];_requestAnimationFrame||(_requestAnimationFrame=function(callback){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),_cancelAnimationFrame||(_cancelAnimationFrame=function(id){clearTimeout(id)});var _hasCaptionProblem,comparisonFunction},{}],50:[function(_dereq_,module,exports){function isFunction(func){return"function"==typeof func}function proxy(func,context){return function(){return func.apply(context,arguments)}}function throttle(func){function _throttle(){var $__1=this,args=arguments,stamp=Date.now(),needCall=!1;result.lastCallThrottled=!0,lastCalled||(lastCalled=stamp,needCall=!0);var remaining=wait-(stamp-lastCalled);return needCall?(result.lastCallThrottled=!1,func.apply(this,args)):(lastTimer&&clearTimeout(lastTimer),lastTimer=setTimeout(function(){result.lastCallThrottled=!1,func.apply($__1,args),lastCalled=0,lastTimer=void 0},remaining)),result}var wait=void 0!==arguments[1]?arguments[1]:200,lastCalled=0,result={lastCallThrottled:!0},lastTimer=null;return _throttle}function throttleAfterHits(func){function _clearHits(){remainHits=hits}function _throttleAfterHits(){return remainHits?(remainHits--,func.apply(this,arguments)):funcThrottle.apply(this,arguments)}var wait=void 0!==arguments[1]?arguments[1]:200,hits=void 0!==arguments[2]?arguments[2]:10,funcThrottle=throttle(func,wait),remainHits=hits;return _throttleAfterHits.clearHits=_clearHits,_throttleAfterHits}function debounce(func){function _debounce(){var $__1=this,args=arguments;return lastTimer&&clearTimeout(lastTimer),lastTimer=setTimeout(function(){result=func.apply($__1,args)},wait),result}var result,wait=void 0!==arguments[1]?arguments[1]:200,lastTimer=null;return _debounce}function pipe(){for(var functions=[],$__2=0;$__2<arguments.length;$__2++)functions[$__2]=arguments[$__2];var $__5=functions,firstFunc=$__5[0],restFunc=Array.prototype.slice.call($__5,1);return function(){return arrayReduce(restFunc,function(acc,fn){return fn(acc)},firstFunc.apply(this,arguments))}}function partial(func){for(var params=[],$__3=1;$__3<arguments.length;$__3++)params[$__3-1]=arguments[$__3];return function(){for(var restParams=[],$__4=0;$__4<arguments.length;$__4++)restParams[$__4]=arguments[$__4];return func.apply(this,params.concat(restParams))}}function curry(func){function given(argsSoFar){return function(){for(var params=[],$__4=0;$__4<arguments.length;$__4++)params[$__4]=arguments[$__4];var result,passedArgsSoFar=argsSoFar.concat(params);return result=passedArgsSoFar.length>=argsLength?func.apply(this,passedArgsSoFar):given(passedArgsSoFar)}}var argsLength=func.length;return given([])}function curryRight(func){function given(argsSoFar){return function(){for(var params=[],$__4=0;$__4<arguments.length;$__4++)params[$__4]=arguments[$__4];var result,passedArgsSoFar=argsSoFar.concat(params.reverse());return result=passedArgsSoFar.length>=argsLength?func.apply(this,passedArgsSoFar):given(passedArgsSoFar)}}var argsLength=func.length;return given([])}Object.defineProperties(exports,{isFunction:{get:function(){return isFunction}},proxy:{get:function(){return proxy}},throttle:{get:function(){return throttle}},throttleAfterHits:{get:function(){return throttleAfterHits}},debounce:{get:function(){return debounce}},pipe:{get:function(){return pipe}},partial:{get:function(){return partial}},curry:{get:function(){return curry}},curryRight:{get:function(){return curryRight}},__esModule:{value:!0}});var $__array__,arrayReduce=($__array__=_dereq_("array"),$__array__&&$__array__.__esModule&&$__array__||{"default":$__array__}).arrayReduce},{array:43}],51:[function(_dereq_,module,exports){function stringify(value){switch("undefined"==typeof value?"undefined":_typeof(value)){case"string":case"number":return value+"";case"object":return null===value?"":value.toString();case"undefined":return"";default:return value.toString()}}function isDefined(variable){return"undefined"!=typeof variable}function isUndefined(variable){return"undefined"==typeof variable}Object.defineProperties(exports,{stringify:{get:function(){return stringify}},isDefined:{get:function(){return isDefined}},isUndefined:{get:function(){return isUndefined}},__esModule:{value:!0}})},{}],52:[function(_dereq_,module,exports){function isNumeric(n){var t="undefined"==typeof n?"undefined":_typeof(n);return"number"==t?!isNaN(n)&&isFinite(n):"string"==t?!!n.length&&(1==n.length?/\d/.test(n):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(n)):"object"==t&&!(!n||"number"!=typeof n.valueOf()||n instanceof Date)}function rangeEach(rangeFrom,rangeTo,iteratee){var index=-1;for("function"==typeof rangeTo?(iteratee=rangeTo,rangeTo=rangeFrom):index=rangeFrom-1;++index<=rangeTo&&iteratee(index)!==!1;);}function rangeEachReverse(rangeFrom,rangeTo,iteratee){var index=rangeFrom+1;for("function"==typeof rangeTo&&(iteratee=rangeTo,rangeTo=0);--index>=rangeTo&&iteratee(index)!==!1;);}function valueAccordingPercent(value,percent){return percent=parseInt(percent.toString().replace("%",""),10),percent=parseInt(value*percent/100)}Object.defineProperties(exports,{isNumeric:{get:function(){return isNumeric}},rangeEach:{get:function(){return rangeEach}},rangeEachReverse:{get:function(){return rangeEachReverse}},valueAccordingPercent:{get:function(){return valueAccordingPercent}},__esModule:{value:!0}})},{}],53:[function(_dereq_,module,exports){function duckSchema(object){var schema;return Array.isArray(object)?schema=[]:(schema={},objectEach(object,function(value,key){"__children"!==key&&(value&&"object"===("undefined"==typeof value?"undefined":_typeof(value))&&!Array.isArray(value)?schema[key]=duckSchema(value):Array.isArray(value)?value.length&&"object"===_typeof(value[0])&&!Array.isArray(value[0])?schema[key]=[duckSchema(value[0])]:schema[key]=[]:schema[key]=null)})),schema}function inherit(Child,Parent){return Parent.prototype.constructor=Parent,Child.prototype=new Parent,Child.prototype.constructor=Child,Child}function extend(target,extension){return objectEach(extension,function(value,key){target[key]=value}),target}function deepExtend(target,extension){objectEach(extension,function(value,key){extension[key]&&"object"===_typeof(extension[key])?(target[key]||(Array.isArray(extension[key])?target[key]=[]:"[object Date]"===Object.prototype.toString.call(extension[key])?target[key]=extension[key]:target[key]={}),deepExtend(target[key],extension[key])):target[key]=extension[key]})}function deepClone(obj){return"object"===("undefined"==typeof obj?"undefined":_typeof(obj))?JSON.parse(JSON.stringify(obj)):obj}function clone(object){var result={};return objectEach(object,function(value,key){result[key]=value}),result}function mixin(Base){for(var mixins=[],$__2=1;$__2<arguments.length;$__2++)mixins[$__2-1]=arguments[$__2];return Base.MIXINS||(Base.MIXINS=[]),arrayEach(mixins,function(mixin){Base.MIXINS.push(mixin.MIXIN_NAME),objectEach(mixin,function(value,key){if(void 0!==Base.prototype[key])throw new Error("Mixin conflict. Property '"+key+"' already exist and cannot be overwritten.");if("function"==typeof value)Base.prototype[key]=value;else{var getter=function(propertyName,initialValue){propertyName="_"+propertyName;var initValue=function(value){return(Array.isArray(value)||isObject(value))&&(value=deepClone(value)),value};return function(){return void 0===this[propertyName]&&(this[propertyName]=initValue(initialValue)),this[propertyName]}},setter=function(propertyName){return propertyName="_"+propertyName,function(value){this[propertyName]=value}};Object.defineProperty(Base.prototype,key,{get:getter(key,value),set:setter(key),configurable:!0})}})}),Base}function isObjectEquals(object1,object2){return JSON.stringify(object1)===JSON.stringify(object2)}function isObject(obj){return"[object Object]"==Object.prototype.toString.call(obj)}function getPrototypeOf(obj){var prototype;if("object"==_typeof(obj.__proto__))prototype=obj.__proto__;else{var oldConstructor,constructor=obj.constructor;"function"==typeof obj.constructor&&(oldConstructor=constructor,delete obj.constructor&&(constructor=obj.constructor,obj.constructor=oldConstructor)),prototype=constructor?constructor.prototype:null}return prototype}function defineGetter(object,property,value,options){options.value=value,options.writable=options.writable!==!1,options.enumerable=options.enumerable!==!1,options.configurable=options.configurable!==!1,Object.defineProperty(object,property,options)}function objectEach(object,iteratee){for(var key in object)if((!object.hasOwnProperty||object.hasOwnProperty&&object.hasOwnProperty(key))&&iteratee(object[key],key,object)===!1)break;return object}function getProperty(object,name){var names=name.split("."),result=object;return objectEach(names,function(name){if(result=result[name],void 0===result)return result=void 0,!1}),result}function deepObjectSize(object){if(!isObject(object))return 0;var recursObjLen=function recursObjLen(obj){var result=0;return isObject(obj)?objectEach(obj,function(key){result+=recursObjLen(key)}):result++,result};return recursObjLen(object)}function createObjectPropListener(defaultValue){var $__1,propertyToListen=void 0!==arguments[1]?arguments[1]:"value",privateProperty="_"+propertyToListen,holder=($__1={},Object.defineProperty($__1,"_touched",{value:!1,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__1,privateProperty,{value:defaultValue,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__1,"isTouched",{value:function(){return this._touched},configurable:!0,enumerable:!0,writable:!0}),$__1);return Object.defineProperty(holder,propertyToListen,{get:function(){return this[privateProperty]},set:function(value){this._touched=!0,this[privateProperty]=value},enumerable:!0,configurable:!0}),holder}Object.defineProperties(exports,{duckSchema:{get:function(){return duckSchema}},inherit:{get:function(){return inherit}},extend:{get:function(){return extend}},deepExtend:{get:function(){return deepExtend}},deepClone:{get:function(){return deepClone}},clone:{get:function(){return clone}},mixin:{get:function(){return mixin}},isObjectEquals:{get:function(){return isObjectEquals}},isObject:{get:function(){return isObject}},getPrototypeOf:{get:function(){return getPrototypeOf}},defineGetter:{get:function(){return defineGetter}},objectEach:{get:function(){return objectEach}},getProperty:{get:function(){return getProperty}},deepObjectSize:{get:function(){return deepObjectSize}},createObjectPropListener:{get:function(){return createObjectPropListener}},__esModule:{value:!0}});var $__array__,arrayEach=($__array__=_dereq_("array"),$__array__&&$__array__.__esModule&&$__array__||{"default":$__array__}).arrayEach},{array:43}],54:[function(_dereq_,module,exports){
function columnFactory(GridSettings,conflictList){function ColumnSettings(){}inherit(ColumnSettings,GridSettings);for(var i=0,len=conflictList.length;i<len;i++)ColumnSettings.prototype[conflictList[i]]=void 0;return ColumnSettings}Object.defineProperties(exports,{columnFactory:{get:function(){return columnFactory}},__esModule:{value:!0}});var $__object__,inherit=($__object__=_dereq_("object"),$__object__&&$__object__.__esModule&&$__object__||{"default":$__object__}).inherit},{object:53}],55:[function(_dereq_,module,exports){function toUpperCaseFirst(string){return string[0].toUpperCase()+string.substr(1)}function startsWith(string,needle){var result=!0;return rangeEach(needle.length-1,function(index){if(string.charAt(index)!==needle.charAt(index))return result=!1,!1}),result}function endsWith(string,needle){var result=!0,needleLength=needle.length-1,stringLength=string.length-1;return rangeEach(needleLength,function(index){var stringIndex=stringLength-index,needleIndex=needleLength-index;if(string.charAt(stringIndex)!==needle.charAt(needleIndex))return result=!1,!1}),result}function equalsIgnoreCase(){for(var strings=[],$__2=0;$__2<arguments.length;$__2++)strings[$__2]=arguments[$__2];for(var unique=[],length=strings.length;length--;){var string=stringify(strings[length]).toLowerCase();unique.indexOf(string)===-1&&unique.push(string)}return 1===unique.length}function randomString(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return s4()+s4()+s4()+s4()}function isPercentValue(value){return/^([0-9][0-9]?\%$)|(^100\%$)/.test(value)}function substitute(template){var variables=void 0!==arguments[1]?arguments[1]:{};return(template+"").replace(/(?:\\)?\[([^\[\]]+)]/g,function(match,name){return"\\"===match.charAt(0)?match.substr(1,match.length-1):void 0===variables[name]?"":variables[name]})}function padStart(string,maxLength){var fillString=void 0!==arguments[2]?arguments[2]:" ";if(string+="",string.length>=maxLength)return string;fillString=String(fillString);var fillStringLength=fillString.length;fillStringLength||(fillString=" ");var fillLen=maxLength-string.length,timesToRepeat=Math.ceil(fillLen/fillString.length),truncatedString="";return rangeEach(timesToRepeat,function(index){truncatedString+=fillString}),truncatedString=truncatedString.slice(0,fillLen),truncatedString+string}Object.defineProperties(exports,{toUpperCaseFirst:{get:function(){return toUpperCaseFirst}},startsWith:{get:function(){return startsWith}},endsWith:{get:function(){return endsWith}},equalsIgnoreCase:{get:function(){return equalsIgnoreCase}},randomString:{get:function(){return randomString}},isPercentValue:{get:function(){return isPercentValue}},substitute:{get:function(){return substitute}},padStart:{get:function(){return padStart}},__esModule:{value:!0}});var $__mixed__,$__number__,stringify=($__mixed__=_dereq_("mixed"),$__mixed__&&$__mixed__.__esModule&&$__mixed__||{"default":$__mixed__}).stringify,rangeEach=($__number__=_dereq_("number"),$__number__&&$__number__.__esModule&&$__number__||{"default":$__number__}).rangeEach},{mixed:51,number:52}],56:[function(_dereq_,module,exports){function isPrintableChar(keyCode){return 32==keyCode||keyCode>=48&&keyCode<=57||keyCode>=96&&keyCode<=111||keyCode>=186&&keyCode<=192||keyCode>=219&&keyCode<=222||keyCode>=226||keyCode>=65&&keyCode<=90}function isMetaKey(keyCode){var metaKeys=[KEY_CODES.ARROW_DOWN,KEY_CODES.ARROW_UP,KEY_CODES.ARROW_LEFT,KEY_CODES.ARROW_RIGHT,KEY_CODES.HOME,KEY_CODES.END,KEY_CODES.DELETE,KEY_CODES.BACKSPACE,KEY_CODES.F1,KEY_CODES.F2,KEY_CODES.F3,KEY_CODES.F4,KEY_CODES.F5,KEY_CODES.F6,KEY_CODES.F7,KEY_CODES.F8,KEY_CODES.F9,KEY_CODES.F10,KEY_CODES.F11,KEY_CODES.F12,KEY_CODES.TAB,KEY_CODES.PAGE_DOWN,KEY_CODES.PAGE_UP,KEY_CODES.ENTER,KEY_CODES.ESCAPE,KEY_CODES.SHIFT,KEY_CODES.CAPS_LOCK,KEY_CODES.ALT];return metaKeys.indexOf(keyCode)!==-1}function isCtrlKey(keyCode){return[KEY_CODES.CONTROL_LEFT,224,KEY_CODES.COMMAND_LEFT,KEY_CODES.COMMAND_RIGHT].indexOf(keyCode)!==-1}function isKey(keyCode,baseCode){var keys=baseCode.split("|"),result=!1;return arrayEach(keys,function(key){if(keyCode===KEY_CODES[key])return result=!0,!1}),result}Object.defineProperties(exports,{KEY_CODES:{get:function(){return KEY_CODES}},isPrintableChar:{get:function(){return isPrintableChar}},isMetaKey:{get:function(){return isMetaKey}},isCtrlKey:{get:function(){return isCtrlKey}},isKey:{get:function(){return isKey}},__esModule:{value:!0}});var $__array__,arrayEach=($__array__=_dereq_("array"),$__array__&&$__array__.__esModule&&$__array__||{"default":$__array__}).arrayEach,KEY_CODES={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL_LEFT:91,COMMAND_LEFT:17,COMMAND_RIGHT:93,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86}},{array:43}],57:[function(_dereq_,module,exports){Object.defineProperties(exports,{arrayMapper:{get:function(){return arrayMapper}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_array__,$___46__46__47_helpers_47_object__,$___46__46__47_helpers_47_number__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],$__1=($___46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47_helpers_47_array__&&$___46__46__47_helpers_47_array__.__esModule&&$___46__46__47_helpers_47_array__||{"default":$___46__46__47_helpers_47_array__}),arrayReduce=($__1.arrayEach,$__1.arrayReduce),arrayMap=$__1.arrayMap,arrayMax=$__1.arrayMax,defineGetter=($___46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{"default":$___46__46__47_helpers_47_object__}).defineGetter,rangeEach=($___46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47_helpers_47_number__&&$___46__46__47_helpers_47_number__.__esModule&&$___46__46__47_helpers_47_number__||{"default":$___46__46__47_helpers_47_number__}).rangeEach,MIXIN_NAME="arrayMapper",arrayMapper={_arrayMap:[],getValueByIndex:function(index){var value;return void 0===(value=this._arrayMap[index])?null:value},getIndexByValue:function(value){var index;return(index=this._arrayMap.indexOf(value))===-1?null:index},insertItems:function(index){var amount=void 0!==arguments[1]?arguments[1]:1,$__4=this,newIndex=arrayMax(this._arrayMap)+1,addedItems=[];return rangeEach(amount-1,function(count){addedItems.push($__4._arrayMap.splice(index+count,0,newIndex+count))}),addedItems},removeItems:function(index){var amount=void 0!==arguments[1]?arguments[1]:1,$__4=this,removedItems=[];if(Array.isArray(index)){var mapCopy=[].concat(this._arrayMap);index.sort(function(a,b){return b-a}),removedItems=arrayReduce(index,function(acc,item){return $__4._arrayMap.splice(item,1),acc.concat(mapCopy.slice(item,item+1))},[])}else removedItems=this._arrayMap.splice(index,amount);return removedItems},unshiftItems:function(index){function countRowShift(logicalRow){return arrayReduce(removedItems,function(count,removedLogicalRow){return logicalRow>removedLogicalRow&&count++,count},0)}var amount=void 0!==arguments[1]?arguments[1]:1,removedItems=this.removeItems(index,amount);this._arrayMap=arrayMap(this._arrayMap,function(logicalRow,physicalRow){var rowShift=countRowShift(logicalRow);return rowShift&&(logicalRow-=rowShift),logicalRow})},shiftItems:function(index){var amount=void 0!==arguments[1]?arguments[1]:1,$__4=this;this._arrayMap=arrayMap(this._arrayMap,function(row){return row>=index&&(row+=amount),row}),rangeEach(amount-1,function(count){$__4._arrayMap.splice(index+count,0,index+count)})},clearMap:function(){this._arrayMap.length=0}};defineGetter(arrayMapper,"MIXIN_NAME",MIXIN_NAME,{writable:!1,enumerable:!1}),Handsontable.utils.arrayMapper=arrayMapper},{browser:24,"helpers/array":43,"helpers/number":52,"helpers/object":53}],58:[function(_dereq_,module,exports){Object.defineProperties(exports,{localHooks:{get:function(){return localHooks}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_array__,$___46__46__47_helpers_47_object__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],arrayEach=($___46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47_helpers_47_array__&&$___46__46__47_helpers_47_array__.__esModule&&$___46__46__47_helpers_47_array__||{"default":$___46__46__47_helpers_47_array__}).arrayEach,defineGetter=($___46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{"default":$___46__46__47_helpers_47_object__}).defineGetter,MIXIN_NAME="localHooks",localHooks={_localHooks:Object.create(null),addLocalHook:function(key,callback){this._localHooks[key]||(this._localHooks[key]=[]),this._localHooks[key].push(callback)},runLocalHooks:function(key){for(var params=[],$__4=1;$__4<arguments.length;$__4++)params[$__4-1]=arguments[$__4];var $__3=this;this._localHooks[key]&&arrayEach(this._localHooks[key],function(callback){return callback.apply($__3,params)})},clearLocalHooks:function(){this._localHooks={}}};defineGetter(localHooks,"MIXIN_NAME",MIXIN_NAME,{writable:!1,enumerable:!1}),Handsontable.utils.localHooks=localHooks},{browser:24,"helpers/array":43,"helpers/object":53}],59:[function(_dereq_,module,exports){function MultiMap(){function canBeAnArrayMapKey(obj){return null!==obj&&!isNaNSymbol(obj)&&("string"==typeof obj||"number"==typeof obj)}function canBeAWeakMapKey(obj){return null!==obj&&("object"==("undefined"==typeof obj?"undefined":_typeof(obj))||"function"==typeof obj)}function isNaNSymbol(obj){return obj!==obj}var map={arrayMap:[],weakMap:new WeakMap};return{get:function(key){return canBeAnArrayMapKey(key)?map.arrayMap[key]:canBeAWeakMapKey(key)?map.weakMap.get(key):void 0},set:function(key,value){if(canBeAnArrayMapKey(key))map.arrayMap[key]=value;else{if(!canBeAWeakMapKey(key))throw new Error("Invalid key type");map.weakMap.set(key,value)}},"delete":function(key){canBeAnArrayMapKey(key)?delete map.arrayMap[key]:canBeAWeakMapKey(key)&&map.weakMap["delete"](key)}}}Object.defineProperties(exports,{MultiMap:{get:function(){return MultiMap}},__esModule:{value:!0}}),window.MultiMap=MultiMap},{}],60:[function(_dereq_,module,exports){Object.defineProperties(exports,{Hooks:{get:function(){return Hooks}},__esModule:{value:!0}});var $__helpers_47_array__,$__helpers_47_object__,REGISTERED_HOOKS=["afterCellMetaReset","afterChange","afterChangesObserved","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellMouseDown","afterOnCellMouseOver","afterRemoveCol","afterRemoveRow","afterRender","beforeRenderer","afterRenderer","afterScrollHorizontally","afterScrollVertically","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSetCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterUpdateSettings","afterValidate","beforeAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeInit","beforeInitWalkontable","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseOver","beforeRemoveCol","beforeRemoveRow","beforeRender","beforeSetRangeStart","beforeSetRangeEnd","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyCol","unmodifyCol","unmodifyRow","modifyColHeader","modifyColWidth","modifyRow","modifyRowHeader","modifyRowHeight","modifyData","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","afterAutofillApplyValues","modifyCopyableRange","beforeColumnMove","afterColumnMove","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","modifyColumnHeaderHeight","beforeUndo","afterUndo","beforeRedo","afterRedo","modifyRowHeaderWidth","beforeAutofillInsidePopulate","modifyTransformStart","modifyTransformEnd","afterModifyTransformStart","afterModifyTransformEnd","beforeValueRender","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","manualRowHeights","skipLengthCache","afterTrimRow","afterUntrimRow","afterDropdownMenuShow","afterDropdownMenuHide","hiddenRow","hiddenColumn","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild"],arrayEach=($__helpers_47_array__=_dereq_("helpers/array"),$__helpers_47_array__&&$__helpers_47_array__.__esModule&&$__helpers_47_array__||{"default":$__helpers_47_array__}).arrayEach,objectEach=($__helpers_47_object__=_dereq_("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{"default":$__helpers_47_object__}).objectEach,Hooks=function(){this.globalBucket=this.createEmptyBucket()};$traceurRuntime.createClass(Hooks,{createEmptyBucket:function(){var bucket=Object.create(null);return arrayEach(REGISTERED_HOOKS,function(hook){return bucket[hook]=[]}),bucket},getBucket:function(){var context=void 0!==arguments[0]?arguments[0]:null;return context?(context.pluginHookBucket||(context.pluginHookBucket=this.createEmptyBucket()),context.pluginHookBucket):this.globalBucket},add:function(key,callback){var context=void 0!==arguments[2]?arguments[2]:null,$__2=this;if(Array.isArray(callback))arrayEach(callback,function(c){return $__2.add(key,c,context)});else{var bucket=this.getBucket(context);"undefined"==typeof bucket[key]&&(this.register(key),bucket[key]=[]),callback.skip=!1,bucket[key].indexOf(callback)===-1&&bucket[key].push(callback)}return this},once:function(key,callback){var context=void 0!==arguments[2]?arguments[2]:null,$__2=this;Array.isArray(callback)?arrayEach(callback,function(c){return $__2.once(key,c,context)}):(callback.runOnce=!0,this.add(key,callback,context))},remove:function(key,callback){var context=void 0!==arguments[2]?arguments[2]:null,bucket=this.getBucket(context);return"undefined"!=typeof bucket[key]&&bucket[key].indexOf(callback)>=0&&(callback.skip=!0,!0)},has:function(key){var context=void 0!==arguments[1]?arguments[1]:null,bucket=this.getBucket(context);return!(void 0===bucket[key]||!bucket[key].length)},run:function(context,key,p1,p2,p3,p4,p5,p6){var globalHandlers=this.globalBucket[key],index=-1,length=globalHandlers?globalHandlers.length:0;if(length)for(;++index<length;)if(globalHandlers[index]&&!globalHandlers[index].skip){var res=globalHandlers[index].call(context,p1,p2,p3,p4,p5,p6);void 0!==res&&(p1=res),globalHandlers[index]&&globalHandlers[index].runOnce&&this.remove(key,globalHandlers[index])}var localHandlers=this.getBucket(context)[key],index$__4=-1,length$__5=localHandlers?localHandlers.length:0;if(length$__5)for(;++index$__4<length$__5;)if(localHandlers[index$__4]&&!localHandlers[index$__4].skip){var res$__6=localHandlers[index$__4].call(context,p1,p2,p3,p4,p5,p6);void 0!==res$__6&&(p1=res$__6),localHandlers[index$__4]&&localHandlers[index$__4].runOnce&&this.remove(key,localHandlers[index$__4],context)}return p1},destroy:function(){var context=void 0!==arguments[0]?arguments[0]:null;objectEach(this.getBucket(context),function(value,key,bucket){return bucket[key].length=0})},register:function(key){this.isRegistered(key)||REGISTERED_HOOKS.push(key)},deregister:function(key){this.isRegistered(key)&&REGISTERED_HOOKS.splice(REGISTERED_HOOKS.indexOf(key),1)},isRegistered:function(key){return REGISTERED_HOOKS.indexOf(key)>=0},getRegistered:function(){return REGISTERED_HOOKS}},{})},{"helpers/array":43,"helpers/object":53}],61:[function(_dereq_,module,exports){function registerPlugin(pluginName,PluginClass){pluginName=toUpperCaseFirst(pluginName),Handsontable.plugins[pluginName]=PluginClass,Handsontable.hooks.add("construct",function(){var holder;registeredPlugins.has(this)||registeredPlugins.set(this,{}),holder=registeredPlugins.get(this),holder[pluginName]||(holder[pluginName]=new PluginClass(this))}),Handsontable.hooks.add("afterDestroy",function(){if(registeredPlugins.has(this)){var pluginsHolder=registeredPlugins.get(this);objectEach(pluginsHolder,function(plugin){return plugin.destroy()}),registeredPlugins["delete"](this)}})}function getPlugin(instance,pluginName){if("string"!=typeof pluginName)throw Error('Only strings can be passed as "plugin" parameter');var _pluginName=toUpperCaseFirst(pluginName);if(registeredPlugins.has(instance)&&registeredPlugins.get(instance)[_pluginName])return registeredPlugins.get(instance)[_pluginName]}function getRegistredPluginNames(hotInstance){return registeredPlugins.has(hotInstance)?Object.keys(registeredPlugins.get(hotInstance)):[]}function getPluginName(hotInstance,plugin){var pluginName=null;return registeredPlugins.has(hotInstance)&&objectEach(registeredPlugins.get(hotInstance),function(pluginInstance,name){pluginInstance===plugin&&(pluginName=name)}),pluginName}Object.defineProperties(exports,{registerPlugin:{get:function(){return registerPlugin}},getPlugin:{get:function(){return getPlugin}},getRegistredPluginNames:{get:function(){return getRegistredPluginNames}},getPluginName:{get:function(){return getPluginName}},__esModule:{value:!0}});var $__browser__,$__helpers_47_object__,$__helpers_47_string__,Handsontable=($__browser__=_dereq_("browser"),$__browser__&&$__browser__.__esModule&&$__browser__||{"default":$__browser__})["default"],objectEach=($__helpers_47_object__=_dereq_("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{"default":$__helpers_47_object__}).objectEach,toUpperCaseFirst=($__helpers_47_string__=_dereq_("helpers/string"),$__helpers_47_string__&&$__helpers_47_string__.__esModule&&$__helpers_47_string__||{"default":$__helpers_47_string__}).toUpperCaseFirst,registeredPlugins=new WeakMap},{browser:24,"helpers/object":53,"helpers/string":55}],62:[function(_dereq_,module,exports){Object.defineProperties(exports,{"default":{get:function(){return $__default}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_object__,$___46__46__47_helpers_47_array__,$___46__46__47_utils_47_recordTranslator__,$___46__46__47_plugins__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],$__1=($___46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{"default":$___46__46__47_helpers_47_object__}),defineGetter=$__1.defineGetter,objectEach=$__1.objectEach,arrayEach=($___46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47_helpers_47_array__&&$___46__46__47_helpers_47_array__.__esModule&&$___46__46__47_helpers_47_array__||{"default":$___46__46__47_helpers_47_array__}).arrayEach,$__3=($___46__46__47_utils_47_recordTranslator__=_dereq_("utils/recordTranslator"),$___46__46__47_utils_47_recordTranslator__&&$___46__46__47_utils_47_recordTranslator__.__esModule&&$___46__46__47_utils_47_recordTranslator__||{"default":$___46__46__47_utils_47_recordTranslator__}),getTranslator=($__3.registerIdentity,$__3.getTranslator),$__4=($___46__46__47_plugins__=_dereq_("plugins"),$___46__46__47_plugins__&&$___46__46__47_plugins__.__esModule&&$___46__46__47_plugins__||{"default":$___46__46__47_plugins__}),getRegistredPluginNames=$__4.getRegistredPluginNames,getPluginName=$__4.getPluginName,privatePool=new WeakMap,initializedPlugins=null,BasePlugin=function(hotInstance){var $__5=this;defineGetter(this,"hot",hotInstance,{writable:!1}),defineGetter(this,"t",getTranslator(hotInstance),{writable:!1}),privatePool.set(this,{hooks:{}}),initializedPlugins=null,this.pluginName=null,this.pluginsInitializedCallbacks=[],this.isPluginsReady=!1,this.enabled=!1,this.initialized=!1,this.hot.addHook("afterPluginsInitialized",function(){return $__5.onAfterPluginsInitialized()}),this.hot.addHook("afterUpdateSettings",function(){return $__5.onUpdateSettings()}),this.hot.addHook("beforeInit",function(){return $__5.init()})};$traceurRuntime.createClass(BasePlugin,{init:function(){this.pluginName=getPluginName(this.hot,this),this.isEnabled&&this.isEnabled()&&this.enablePlugin(),initializedPlugins||(initializedPlugins=getRegistredPluginNames(this.hot)),initializedPlugins.indexOf(this.pluginName)>=0&&initializedPlugins.splice(initializedPlugins.indexOf(this.pluginName),1),initializedPlugins.length||this.hot.runHooks("afterPluginsInitialized"),this.initialized=!0},enablePlugin:function(){this.enabled=!0},disablePlugin:function(){this.eventManager&&this.eventManager.clear(),this.clearHooks(),this.enabled=!1},addHook:function(name,callback){var hooks=privatePool.get(this).hooks[name]=privatePool.get(this).hooks[name]||[];this.hot.addHook(name,callback),hooks.push(callback),privatePool.get(this).hooks[name]=hooks},removeHooks:function(name){var $__5=this;arrayEach(privatePool.get(this).hooks[name]||[],function(callback){$__5.hot.removeHook(name,callback)})},clearHooks:function(){var $__5=this,hooks=privatePool.get(this).hooks;objectEach(hooks,function(callbacks,name){return $__5.removeHooks(name)}),hooks.length=0},callOnPluginsReady:function(callback){this.isPluginsReady?callback():this.pluginsInitializedCallbacks.push(callback)},onAfterPluginsInitialized:function(){arrayEach(this.pluginsInitializedCallbacks,function(callback){return callback()}),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0},onUpdateSettings:function(){this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&this.updatePlugin())},updatePlugin:function(){},destroy:function(){var $__5=this;this.eventManager&&this.eventManager.destroy(),this.clearHooks(),objectEach(this,function(value,property){"hot"!==property&&"t"!==property&&($__5[property]=null)}),delete this.t,delete this.hot}},{});var $__default=BasePlugin;Handsontable.plugins.BasePlugin=BasePlugin},{browser:24,"helpers/array":43,"helpers/object":53,plugins:61,"utils/recordTranslator":128}],63:[function(_dereq_,module,exports){Object.defineProperties(exports,{AutoColumnSize:{get:function(){return AutoColumnSize}},__esModule:{value:!0}});var $___46__46__47__95_base__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_feature__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_utils_47_ghostTable__,$___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_utils_47_samplesGenerator__,$___46__46__47__46__46__47_helpers_47_string__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__,BasePlugin=($___46__46__47__95_base__=_dereq_("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{"default":$___46__46__47__95_base__})["default"],$__1=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}),arrayEach=$__1.arrayEach,arrayFilter=$__1.arrayFilter,$__2=($___46__46__47__46__46__47_helpers_47_feature__=_dereq_("helpers/feature"),$___46__46__47__46__46__47_helpers_47_feature__&&$___46__46__47__46__46__47_helpers_47_feature__.__esModule&&$___46__46__47__46__46__47_helpers_47_feature__||{"default":$___46__46__47__46__46__47_helpers_47_feature__}),cancelAnimationFrame=$__2.cancelAnimationFrame,requestAnimationFrame=$__2.requestAnimationFrame,isVisible=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}).isVisible,GhostTable=($___46__46__47__46__46__47_utils_47_ghostTable__=_dereq_("utils/ghostTable"),$___46__46__47__46__46__47_utils_47_ghostTable__&&$___46__46__47__46__46__47_utils_47_ghostTable__.__esModule&&$___46__46__47__46__46__47_utils_47_ghostTable__||{"default":$___46__46__47__46__46__47_utils_47_ghostTable__}).GhostTable,$__5=($___46__46__47__46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{"default":$___46__46__47__46__46__47_helpers_47_object__}),isObject=$__5.isObject,$__6=($__5.objectEach,$___46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47_helpers_47_number__}),valueAccordingPercent=$__6.valueAccordingPercent,rangeEach=$__6.rangeEach,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,SamplesGenerator=($___46__46__47__46__46__47_utils_47_samplesGenerator__=_dereq_("utils/samplesGenerator"),$___46__46__47__46__46__47_utils_47_samplesGenerator__&&$___46__46__47__46__46__47_utils_47_samplesGenerator__.__esModule&&$___46__46__47__46__46__47_utils_47_samplesGenerator__||{"default":$___46__46__47__46__46__47_utils_47_samplesGenerator__}).SamplesGenerator,isPercentValue=($___46__46__47__46__46__47_helpers_47_string__=_dereq_("helpers/string"),$___46__46__47__46__46__47_helpers_47_string__&&$___46__46__47__46__46__47_helpers_47_string__.__esModule&&$___46__46__47__46__46__47_helpers_47_string__||{"default":$___46__46__47__46__46__47_helpers_47_string__}).isPercentValue,WalkontableViewportColumnsCalculator=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__=_dereq_("3rdparty/walkontable/src/calculator/viewportColumns"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__||{"default":$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_calculator_47_viewportColumns__}).WalkontableViewportColumnsCalculator,AutoColumnSize=function(hotInstance){var $__11=this;$traceurRuntime.superConstructor($AutoColumnSize).call(this,hotInstance),this.widths=[],this.ghostTable=new GhostTable(this.hot),this.samplesGenerator=new SamplesGenerator(function(row,col){return $__11.hot.getDataAtCell(row,col)}),this.firstCalculation=!0,this.inProgress=!1,this.addHook("beforeColumnResize",function(col,size,isDblClick){return $__11.onBeforeColumnResize(col,size,isDblClick)})},$AutoColumnSize=AutoColumnSize;$traceurRuntime.createClass(AutoColumnSize,{isEnabled:function(){return this.hot.getSettings().autoColumnSize!==!1&&!this.hot.getSettings().colWidths},enablePlugin:function(){var $__11=this;if(!this.enabled){var setting=this.hot.getSettings().autoColumnSize;setting&&null!=setting.useHeaders&&this.ghostTable.setSetting("useHeaders",setting.useHeaders),this.addHook("afterLoadData",function(){return $__11.onAfterLoadData()}),this.addHook("beforeChange",function(changes){return $__11.onBeforeChange(changes)}),this.addHook("beforeRender",function(force){return $__11.onBeforeRender(force)}),this.addHook("modifyColWidth",function(width,col){return $__11.getColumnWidth(col,width)}),$traceurRuntime.superGet(this,$AutoColumnSize.prototype,"enablePlugin").call(this)}},disablePlugin:function(){$traceurRuntime.superGet(this,$AutoColumnSize.prototype,"disablePlugin").call(this)},calculateColumnsWidth:function(){var colRange=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},rowRange=void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},force=void 0!==arguments[2]&&arguments[2],$__11=this;"number"==typeof colRange&&(colRange={from:colRange,to:colRange}),"number"==typeof rowRange&&(rowRange={from:rowRange,to:rowRange}),rangeEach(colRange.from,colRange.to,function(col){if(force||void 0===$__11.widths[col]&&!$__11.hot._getColWidthFromSettings(col)){var samples=$__11.samplesGenerator.generateColumnSamples(col,rowRange);samples.forEach(function(sample,col){return $__11.ghostTable.addColumn(col,sample)})}}),this.ghostTable.columns.length&&(this.ghostTable.getWidths(function(col,width){return $__11.widths[col]=width}),this.ghostTable.clean())},calculateAllColumnsWidth:function(){var rowRange=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},$__11=this,current=0,length=this.hot.countCols()-1,timer=null;this.inProgress=!0;var loop=function loop(){return $__11.hot?($__11.calculateColumnsWidth({from:current,to:Math.min(current+$AutoColumnSize.CALCULATION_STEP,length)},rowRange),current=current+$AutoColumnSize.CALCULATION_STEP+1,void(current<length?timer=requestAnimationFrame(loop):(cancelAnimationFrame(timer),$__11.inProgress=!1,$__11.hot.view.wt.wtOverlays.adjustElementsSize(!0),$__11.hot.view.wt.wtOverlays.leftOverlay.needFullRender&&$__11.hot.view.wt.wtOverlays.leftOverlay.clone.draw()))):(cancelAnimationFrame(timer),void($__11.inProgress=!1))};this.firstCalculation&&this.getSyncCalculationLimit()&&(this.calculateColumnsWidth({from:0,to:this.getSyncCalculationLimit()},rowRange),this.firstCalculation=!1,current=this.getSyncCalculationLimit()+1),current<length?loop():this.inProgress=!1},setSamplingOptions:function(){var setting=this.hot.getSettings().autoColumnSize,samplingRatio=setting&&setting.hasOwnProperty("samplingRatio")?this.hot.getSettings().autoColumnSize.samplingRatio:void 0,allowSampleDuplicates=setting&&setting.hasOwnProperty("allowSampleDuplicates")?this.hot.getSettings().autoColumnSize.allowSampleDuplicates:void 0;samplingRatio&&!isNaN(samplingRatio)&&this.samplesGenerator.setSampleCount(parseInt(samplingRatio,10)),allowSampleDuplicates&&this.samplesGenerator.setAllowDuplicates(allowSampleDuplicates)},recalculateAllColumnsWidth:function(){this.hot.view&&isVisible(this.hot.view.wt.wtTable.TABLE)&&(this.clearCache(),this.calculateAllColumnsWidth())},getSyncCalculationLimit:function(){var limit=$AutoColumnSize.SYNC_CALCULATION_LIMIT,colsLimit=this.hot.countCols()-1;return isObject(this.hot.getSettings().autoColumnSize)&&(limit=this.hot.getSettings().autoColumnSize.syncLimit,isPercentValue(limit)?limit=valueAccordingPercent(colsLimit,limit):limit>>=0),Math.min(limit,colsLimit)},getColumnWidth:function(col){var defaultWidth=arguments[1],keepMinimum=void 0===arguments[2]||arguments[2],width=defaultWidth;return void 0===width&&(width=this.widths[col],keepMinimum&&"number"==typeof width&&(width=Math.max(width,WalkontableViewportColumnsCalculator.DEFAULT_WIDTH))),
width},getFirstVisibleColumn:function(){var wot=this.hot.view.wt;return wot.wtViewport.columnsVisibleCalculator?wot.wtTable.getFirstVisibleColumn():wot.wtViewport.columnsRenderCalculator?wot.wtTable.getFirstRenderedColumn():-1},getLastVisibleColumn:function(){var wot=this.hot.view.wt;return wot.wtViewport.columnsVisibleCalculator?wot.wtTable.getLastVisibleColumn():wot.wtViewport.columnsRenderCalculator?wot.wtTable.getLastRenderedColumn():-1},clearCache:function(){this.widths.length=0},isNeedRecalculate:function(){return!!arrayFilter(this.widths,function(item){return void 0===item}).length},onBeforeRender:function(){var force=this.hot.renderCall,rowsCount=this.hot.countRows();rowsCount&&(this.calculateColumnsWidth({from:this.getFirstVisibleColumn(),to:this.getLastVisibleColumn()},void 0,force),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth())},onAfterLoadData:function(){var $__11=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){$__11.hot&&$__11.recalculateAllColumnsWidth()},0)},onBeforeChange:function(changes){var $__11=this;arrayEach(changes,function(data){return $__11.widths[$__11.hot.propToCol(data[1])]=void 0})},onBeforeColumnResize:function(col,size,isDblClick){return isDblClick&&(this.calculateColumnsWidth(col,void 0,!0),size=this.getColumnWidth(col,void 0,!1)),size},destroy:function(){this.ghostTable.clean(),$traceurRuntime.superGet(this,$AutoColumnSize.prototype,"destroy").call(this)}},{get CALCULATION_STEP(){return 50},get SYNC_CALCULATION_LIMIT(){return 50}},BasePlugin),registerPlugin("autoColumnSize",AutoColumnSize)},{"3rdparty/walkontable/src/calculator/viewportColumns":4,_base:62,"helpers/array":43,"helpers/dom/element":47,"helpers/feature":49,"helpers/number":52,"helpers/object":53,"helpers/string":55,plugins:61,"utils/ghostTable":126,"utils/samplesGenerator":129}],64:[function(_dereq_,module,exports){Object.defineProperties(exports,{AutoRowSize:{get:function(){return AutoRowSize}},__esModule:{value:!0}});var $___46__46__47__95_base__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_feature__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_utils_47_ghostTable__,$___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_utils_47_samplesGenerator__,$___46__46__47__46__46__47_helpers_47_string__,BasePlugin=($___46__46__47__95_base__=_dereq_("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{"default":$___46__46__47__95_base__})["default"],$__1=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}),arrayFilter=($__1.arrayEach,$__1.arrayFilter),$__2=($___46__46__47__46__46__47_helpers_47_feature__=_dereq_("helpers/feature"),$___46__46__47__46__46__47_helpers_47_feature__&&$___46__46__47__46__46__47_helpers_47_feature__.__esModule&&$___46__46__47__46__46__47_helpers_47_feature__||{"default":$___46__46__47__46__46__47_helpers_47_feature__}),cancelAnimationFrame=$__2.cancelAnimationFrame,requestAnimationFrame=$__2.requestAnimationFrame,isVisible=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}).isVisible,GhostTable=($___46__46__47__46__46__47_utils_47_ghostTable__=_dereq_("utils/ghostTable"),$___46__46__47__46__46__47_utils_47_ghostTable__&&$___46__46__47__46__46__47_utils_47_ghostTable__.__esModule&&$___46__46__47__46__46__47_utils_47_ghostTable__||{"default":$___46__46__47__46__46__47_utils_47_ghostTable__}).GhostTable,$__5=($___46__46__47__46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{"default":$___46__46__47__46__46__47_helpers_47_object__}),isObject=$__5.isObject,$__6=($__5.objectEach,$___46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47_helpers_47_number__}),valueAccordingPercent=$__6.valueAccordingPercent,rangeEach=$__6.rangeEach,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,SamplesGenerator=($___46__46__47__46__46__47_utils_47_samplesGenerator__=_dereq_("utils/samplesGenerator"),$___46__46__47__46__46__47_utils_47_samplesGenerator__&&$___46__46__47__46__46__47_utils_47_samplesGenerator__.__esModule&&$___46__46__47__46__46__47_utils_47_samplesGenerator__||{"default":$___46__46__47__46__46__47_utils_47_samplesGenerator__}).SamplesGenerator,isPercentValue=($___46__46__47__46__46__47_helpers_47_string__=_dereq_("helpers/string"),$___46__46__47__46__46__47_helpers_47_string__&&$___46__46__47__46__46__47_helpers_47_string__.__esModule&&$___46__46__47__46__46__47_helpers_47_string__||{"default":$___46__46__47__46__46__47_helpers_47_string__}).isPercentValue,AutoRowSize=function(hotInstance){var $__10=this;$traceurRuntime.superConstructor($AutoRowSize).call(this,hotInstance),this.heights=[],this.ghostTable=new GhostTable(this.hot),this.samplesGenerator=new SamplesGenerator(function(row,col){return row>=0?$__10.hot.getDataAtCell(row,col):row===-1?$__10.hot.getColHeader(col):null}),this.firstCalculation=!0,this.inProgress=!1,this.addHook("beforeRowResize",function(row,size,isDblClick){return $__10.onBeforeRowResize(row,size,isDblClick)})},$AutoRowSize=AutoRowSize;$traceurRuntime.createClass(AutoRowSize,{isEnabled:function(){return this.hot.getSettings().autoRowSize===!0||isObject(this.hot.getSettings().autoRowSize)},enablePlugin:function(){var $__10=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){return $__10.onAfterLoadData()}),this.addHook("beforeChange",function(changes){return $__10.onBeforeChange(changes)}),this.addHook("beforeColumnMove",function(){return $__10.recalculateAllRowsHeight()}),this.addHook("beforeColumnResize",function(){return $__10.recalculateAllRowsHeight()}),this.addHook("beforeColumnSort",function(){return $__10.clearCache()}),this.addHook("beforeRender",function(force){return $__10.onBeforeRender(force)}),this.addHook("beforeRowMove",function(rowStart,rowEnd){return $__10.onBeforeRowMove(rowStart,rowEnd)}),this.addHook("modifyRowHeight",function(height,row){return $__10.getRowHeight(row,height)}),this.addHook("modifyColumnHeaderHeight",function(){return $__10.getColumnHeaderHeight()}),$traceurRuntime.superGet(this,$AutoRowSize.prototype,"enablePlugin").call(this))},disablePlugin:function(){$traceurRuntime.superGet(this,$AutoRowSize.prototype,"disablePlugin").call(this)},calculateRowsHeight:function(){var rowRange=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},colRange=void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},force=void 0!==arguments[2]&&arguments[2],$__10=this;if("number"==typeof rowRange&&(rowRange={from:rowRange,to:rowRange}),"number"==typeof colRange&&(colRange={from:colRange,to:colRange}),null!==this.hot.getColHeader(0)){var samples=this.samplesGenerator.generateRowSamples(-1,colRange);this.ghostTable.addColumnHeadersRow(samples.get(-1))}rangeEach(rowRange.from,rowRange.to,function(row){if(force||void 0===$__10.heights[row]){var samples=$__10.samplesGenerator.generateRowSamples(row,colRange);samples.forEach(function(sample,row){return $__10.ghostTable.addRow(row,sample)})}}),this.ghostTable.rows.length&&(this.ghostTable.getHeights(function(row,height){return $__10.heights[row]=height}),this.ghostTable.clean())},calculateAllRowsHeight:function(){var colRange=void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},$__10=this,current=0,length=this.hot.countRows()-1,timer=null;this.inProgress=!0;var loop=function loop(){return $__10.hot?($__10.calculateRowsHeight({from:current,to:Math.min(current+$AutoRowSize.CALCULATION_STEP,length)},colRange),current=current+$AutoRowSize.CALCULATION_STEP+1,void(current<length?timer=requestAnimationFrame(loop):(cancelAnimationFrame(timer),$__10.inProgress=!1,$__10.hot.view.wt.wtOverlays.adjustElementsSize(!0),$__10.hot.view.wt.wtOverlays.leftOverlay.needFullRender&&$__10.hot.view.wt.wtOverlays.leftOverlay.clone.draw()))):(cancelAnimationFrame(timer),void($__10.inProgress=!1))};this.firstCalculation&&this.getSyncCalculationLimit()&&(this.calculateRowsHeight({from:0,to:this.getSyncCalculationLimit()},colRange),this.firstCalculation=!1,current=this.getSyncCalculationLimit()+1),current<length?loop():this.inProgress=!1},setSamplingOptions:function(){var setting=this.hot.getSettings().autoRowSize,samplingRatio=setting&&setting.hasOwnProperty("samplingRatio")?this.hot.getSettings().autoRowSize.samplingRatio:void 0,allowSampleDuplicates=setting&&setting.hasOwnProperty("allowSampleDuplicates")?this.hot.getSettings().autoRowSize.allowSampleDuplicates:void 0;samplingRatio&&!isNaN(samplingRatio)&&this.samplesGenerator.setSampleCount(parseInt(samplingRatio,10)),allowSampleDuplicates&&this.samplesGenerator.setAllowDuplicates(allowSampleDuplicates)},recalculateAllRowsHeight:function(){isVisible(this.hot.view.wt.wtTable.TABLE)&&(this.clearCache(),this.calculateAllRowsHeight())},getSyncCalculationLimit:function(){var limit=$AutoRowSize.SYNC_CALCULATION_LIMIT,rowsLimit=this.hot.countRows()-1;return isObject(this.hot.getSettings().autoRowSize)&&(limit=this.hot.getSettings().autoRowSize.syncLimit,isPercentValue(limit)?limit=valueAccordingPercent(rowsLimit,limit):limit>>=0),Math.min(limit,rowsLimit)},getRowHeight:function(row){var defaultHeight=arguments[1],height=defaultHeight;return void 0!==this.heights[row]&&this.heights[row]>(defaultHeight||0)&&(height=this.heights[row]),height},getColumnHeaderHeight:function(){return this.heights[-1]},getFirstVisibleRow:function(){var wot=this.hot.view.wt;return wot.wtViewport.rowsVisibleCalculator?wot.wtTable.getFirstVisibleRow():wot.wtViewport.rowsRenderCalculator?wot.wtTable.getFirstRenderedRow():-1},getLastVisibleRow:function(){var wot=this.hot.view.wt;return wot.wtViewport.rowsVisibleCalculator?wot.wtTable.getLastVisibleRow():wot.wtViewport.rowsRenderCalculator?wot.wtTable.getLastRenderedRow():-1},clearCache:function(){this.heights.length=0,this.heights[-1]=void 0},clearCacheByRange:function(range){var $__10=this;"number"==typeof range&&(range={from:range,to:range}),rangeEach(Math.min(range.from,range.to),Math.max(range.from,range.to),function(row){return $__10.heights[row]=void 0})},isNeedRecalculate:function(){return!!arrayFilter(this.heights,function(item){return void 0===item}).length},onBeforeRender:function(){var force=this.hot.renderCall;this.calculateRowsHeight({from:this.getFirstVisibleRow(),to:this.getLastVisibleRow()},void 0,force);var fixedRowsBottom=this.hot.getSettings().fixedRowsBottom;if(fixedRowsBottom){var totalRows=this.hot.countRows()-1;this.calculateRowsHeight({from:totalRows-fixedRowsBottom,to:totalRows})}this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllRowsHeight()},onBeforeRowMove:function(from,to){this.clearCacheByRange({from:from,to:to}),this.calculateAllRowsHeight()},onBeforeRowResize:function(row,size,isDblClick){return isDblClick&&(this.calculateRowsHeight(row,void 0,!0),size=this.getRowHeight(row)),size},onAfterLoadData:function(){var $__10=this;this.hot.view?this.recalculateAllRowsHeight():setTimeout(function(){$__10.hot&&$__10.recalculateAllRowsHeight()},0)},onBeforeChange:function(changes){var range=null;1===changes.length?range=changes[0][0]:changes.length>1&&(range={from:changes[0][0],to:changes[changes.length-1][0]}),null!==range&&this.clearCacheByRange(range)},destroy:function(){this.ghostTable.clean(),$traceurRuntime.superGet(this,$AutoRowSize.prototype,"destroy").call(this)}},{get CALCULATION_STEP(){return 50},get SYNC_CALCULATION_LIMIT(){return 500}},BasePlugin),registerPlugin("autoRowSize",AutoRowSize)},{_base:62,"helpers/array":43,"helpers/dom/element":47,"helpers/feature":49,"helpers/number":52,"helpers/object":53,"helpers/string":55,plugins:61,"utils/ghostTable":126,"utils/samplesGenerator":129}],65:[function(_dereq_,module,exports){function getDeltas(start,end,data,direction){var diffRow,diffCol,startValue,endValue,delta,rlength=data.length,clength=data?data[0].length:0,deltas=[],arr=[];if(diffRow=end.row-start.row,diffCol=end.col-start.col,["down","up"].indexOf(direction)!==-1){for(var col=0;col<=diffCol;col++)startValue=parseInt(data[0][col],10),endValue=parseInt(data[rlength-1][col],10),delta=("down"===direction?endValue-startValue:startValue-endValue)/(rlength-1)||0,arr.push(delta);deltas.push(arr)}if(["right","left"].indexOf(direction)!==-1)for(var row=0;row<=diffRow;row++)startValue=parseInt(data[row][0],10),endValue=parseInt(data[row][clength-1],10),delta=("right"===direction?endValue-startValue:startValue-endValue)/(clength-1)||0,arr=[],arr.push(delta),deltas.push(arr);return deltas}function Autofill(instance){function mouseUpCallback(event){return!instance.autofill||void(instance.autofill.handle&&instance.autofill.handle.isDragged&&(instance.autofill.handle.isDragged>1&&instance.autofill.apply(),instance.autofill.handle.isDragged=0,mouseDownOnCellCorner=!1))}function mouseMoveCallback(event){var tableBottom,tableRight;return!!_this.instance.autofill&&(tableBottom=offset(_this.instance.table).top-(window.pageYOffset||document.documentElement.scrollTop)+outerHeight(_this.instance.table),tableRight=offset(_this.instance.table).left-(window.pageXOffset||document.documentElement.scrollLeft)+outerWidth(_this.instance.table),_this.addingStarted===!1&&_this.instance.autofill.handle.isDragged>0&&event.clientY>tableBottom&&event.clientX<=tableRight?(_this.instance.mouseDragOutside=!0,_this.addingStarted=!0):_this.instance.mouseDragOutside=!1,void(_this.instance.mouseDragOutside&&settings("autoInsertRow")&&setTimeout(function(){_this.addingStarted=!1,_this.instance.alter("insert_row")},200)))}var wtOnCellCornerMouseDown,wtOnCellMouseOver,eventManager,_this=this,mouseDownOnCellCorner=!1;this.instance=instance,this.addingStarted=!1,eventManager=eventManagerObject(instance),eventManager.addEventListener(document,"mouseup",mouseUpCallback),eventManager.addEventListener(document,"mousemove",mouseMoveCallback),wtOnCellCornerMouseDown=this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown,this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown=function(event){instance.autofill.handle.isDragged=1,mouseDownOnCellCorner=!0,wtOnCellCornerMouseDown(event)},wtOnCellMouseOver=this.instance.view.wt.wtSettings.settings.onCellMouseOver,this.instance.view.wt.wtSettings.settings.onCellMouseOver=function(event,coords,TD,wt){instance.autofill&&mouseDownOnCellCorner&&!instance.view.isMouseDown()&&instance.autofill.handle&&instance.autofill.handle.isDragged&&(instance.autofill.handle.isDragged++,instance.autofill.showBorder(coords),instance.autofill.checkIfNewRowNeeded()),wtOnCellMouseOver(event,coords,TD,wt)},this.instance.view.wt.wtSettings.settings.onCellCornerDblClick=function(){instance.autofill.selectAdjacent()}}function settingsFactory(settings){return function(key){var result;return"direction"===key?result="string"==typeof settings?settings:"object"!==("undefined"==typeof settings?"undefined":_typeof(settings))||void 0===settings[key]||settings[key]:"autoInsertRow"===key?result="object"!==("undefined"==typeof settings?"undefined":_typeof(settings))||void 0===settings[key]||settings[key]:"fillHandle"===key&&(result=!!settings),result}}Object.defineProperties(exports,{Autofill:{get:function(){return Autofill}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],$__1=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),offset=$__1.offset,outerHeight=$__1.outerHeight,outerWidth=$__1.outerWidth,eventManagerObject=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).eventManager,WalkontableCellCoords=(($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=_dereq_("3rdparty/walkontable/src/cell/coords"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{"default":$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords);Autofill.prototype.init=function(){this.handle={}},Autofill.prototype.disable=function(){this.handle.disabled=!0},Autofill.prototype.selectAdjacent=function(){var select,data,r,maxR,c;select=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners(),data=this.instance.getData();rows:for(r=select[2]+1;r<this.instance.countRows();r++){for(c=select[1];c<=select[3];c++)if(data[r][c])break rows;(data[r][select[1]-1]||data[r][select[3]+1])&&(maxR=r)}maxR&&(this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(new WalkontableCellCoords(select[0],select[1])),this.instance.view.wt.selections.fill.add(new WalkontableCellCoords(maxR,select[3])),this.apply())},Autofill.prototype.apply=function(){var drag,select,start,end,_data,direction,deltas,selRange;this.handle.isDragged=0,this.instance.view.wt.selections.fill.isEmpty()||(drag=this.instance.view.wt.selections.fill.getCorners(),this.instance.view.wt.selections.fill.clear(),select=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners(),Handsontable.hooks.run(this.instance,"afterAutofillApplyValues",select,drag),drag[0]===select[0]&&drag[1]<select[1]?(direction="left",start=new WalkontableCellCoords(drag[0],drag[1]),end=new WalkontableCellCoords(drag[2],select[1]-1)):drag[0]===select[0]&&drag[3]>select[3]?(direction="right",start=new WalkontableCellCoords(drag[0],select[3]+1),end=new WalkontableCellCoords(drag[2],drag[3])):drag[0]<select[0]&&drag[1]===select[1]?(direction="up",start=new WalkontableCellCoords(drag[0],drag[1]),end=new WalkontableCellCoords(select[0]-1,drag[3])):drag[2]>select[2]&&drag[1]===select[1]&&(direction="down",start=new WalkontableCellCoords(select[2]+1,drag[1]),end=new WalkontableCellCoords(drag[2],drag[3])),start&&start.row>-1&&start.col>-1?(selRange={from:this.instance.getSelectedRange().from,to:this.instance.getSelectedRange().to},_data=this.instance.getData(selRange.from.row,selRange.from.col,selRange.to.row,selRange.to.col),deltas=getDeltas(start,end,_data,direction),Handsontable.hooks.run(this.instance,"beforeAutofill",start,end,_data),this.instance.populateFromArray(start.row,start.col,_data,end.row,end.col,"autofill",null,direction,deltas),this.instance.selection.setRangeStart(new WalkontableCellCoords(drag[0],drag[1])),this.instance.selection.setRangeEnd(new WalkontableCellCoords(drag[2],drag[3]))):this.instance.selection.refreshBorders())},Autofill.prototype.showBorder=function(coords){var topLeft=this.instance.getSelectedRange().getTopLeftCorner(),bottomRight=this.instance.getSelectedRange().getBottomRightCorner();if("horizontal"!==settings("direction")&&(bottomRight.row<coords.row||topLeft.row>coords.row))coords=new WalkontableCellCoords(coords.row,bottomRight.col);else{if("vertical"===settings("direction"))return;coords=new WalkontableCellCoords(bottomRight.row,coords.col)}this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().from),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().to),this.instance.view.wt.selections.fill.add(coords),this.instance.view.render()},Autofill.prototype.checkIfNewRowNeeded=function(){var fillCorners,selection,tableRows=this.instance.countRows(),that=this;this.instance.view.wt.selections.fill.cellRange&&this.addingStarted===!1&&settings("autoInsertRow")&&(selection=this.instance.getSelected(),fillCorners=this.instance.view.wt.selections.fill.getCorners(),selection[2]<tableRows-1&&fillCorners[2]===tableRows-1&&(this.addingStarted=!0,this.instance._registerTimeout(setTimeout(function(){that.instance.alter("insert_row"),that.addingStarted=!1},200))))},Handsontable.hooks.add("afterInit",function(){var autofill=new Autofill(this);settings=settingsFactory(this.getSettings().fillHandle),void 0!==settings("fillHandle")&&(autofill.handle&&settings("fillHandle")===!1?autofill.disable():autofill.handle||settings("fillHandle")===!1||(this.autofill=autofill,this.autofill.init()))});var settings;Handsontable.Autofill=Autofill},{"3rdparty/walkontable/src/cell/coords":6,browser:24,eventManager:42,"helpers/dom/element":47,plugins:61}],66:[function(_dereq_,module,exports){Object.defineProperties(exports,{ColumnSorting:{get:function(){return ColumnSorting}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__95_base__,$___46__46__47__46__46__47_plugins__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],$__1=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,hasClass=($__1.closest,$__1.hasClass),removeClass=($__1.index,$__1.removeClass),$__2=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}),arrayMap=($__2.arrayEach,$__2.arrayMap),arrayReduce=$__2.arrayReduce,BasePlugin=(($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).eventManager,($___46__46__47__95_base__=_dereq_("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{"default":$___46__46__47__95_base__})["default"]),registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin;Handsontable.hooks.register("beforeColumnSort"),Handsontable.hooks.register("afterColumnSort");var ColumnSorting=function(hotInstance){$traceurRuntime.superConstructor($ColumnSorting).call(this,hotInstance),this.sortIndicators=[],this.lastSortedColumn=null},$ColumnSorting=ColumnSorting;$traceurRuntime.createClass(ColumnSorting,{isEnabled:function(){return!!this.hot.getSettings().columnSorting},enablePlugin:function(){var $__6=this;if(!this.enabled){var _this=this;this.hot.sortIndex=[],this.hot.sort=function(){var args=Array.prototype.slice.call(arguments);return _this.sortByColumn.apply(_this,args)},"undefined"==typeof this.hot.getSettings().observeChanges&&this.enableObserveChangesPlugin(),this.addHook("afterTrimRow",function(row){return $__6.sort()}),this.addHook("afterUntrimRow",function(row){return $__6.sort()}),this.addHook("modifyRow",function(row){return $__6.translateRow(row)}),this.addHook("unmodifyRow",function(row){return $__6.untranslateRow(row)}),this.addHook("afterUpdateSettings",function(){return $__6.onAfterUpdateSettings()}),this.addHook("afterGetColHeader",function(col,TH){return $__6.getColHeader(col,TH)}),this.addHook("afterOnCellMouseDown",function(event,target){return $__6.onAfterOnCellMouseDown(event,target)}),this.addHook("afterCreateRow",function(){_this.afterCreateRow.apply(_this,arguments)}),this.addHook("afterRemoveRow",function(){_this.afterRemoveRow.apply(_this,arguments)}),this.addHook("afterInit",function(){return $__6.sortBySettings()}),this.addHook("afterLoadData",function(){$__6.hot.sortIndex=[],$__6.hot.view&&$__6.sortBySettings()}),this.hot.view&&this.sortBySettings(),$traceurRuntime.superGet(this,$ColumnSorting.prototype,"enablePlugin").call(this)}},disablePlugin:function(){this.hot.sort=void 0,$traceurRuntime.superGet(this,$ColumnSorting.prototype,"disablePlugin").call(this)},onAfterUpdateSettings:function(){this.sortBySettings()},sortBySettings:function(){var sortingColumn,sortingOrder,sortingSettings=this.hot.getSettings().columnSorting,loadedSortingState=this.loadSortingState();"undefined"==typeof loadedSortingState?(sortingColumn=sortingSettings.column,sortingOrder=sortingSettings.sortOrder):(sortingColumn=loadedSortingState.sortColumn,sortingOrder=loadedSortingState.sortOrder),"number"==typeof sortingColumn&&(this.lastSortedColumn=sortingColumn,this.sortByColumn(sortingColumn,sortingOrder))},setSortingColumn:function(col,order){return"undefined"==typeof col?(this.hot.sortColumn=void 0,void(this.hot.sortOrder=void 0)):(this.hot.sortColumn===col&&"undefined"==typeof order?this.hot.sortOrder===!1?this.hot.sortOrder=void 0:this.hot.sortOrder=!this.hot.sortOrder:this.hot.sortOrder="undefined"==typeof order||order,void(this.hot.sortColumn=col))},sortByColumn:function(col,order){if(this.setSortingColumn(col,order),"undefined"!=typeof this.hot.sortColumn){var allowSorting=Handsontable.hooks.run(this.hot,"beforeColumnSort",this.hot.sortColumn,this.hot.sortOrder);allowSorting!==!1&&this.sort(),this.updateOrderClass(),this.updateSortIndicator(),Handsontable.hooks.run(this.hot,"afterColumnSort",this.hot.sortColumn,this.hot.sortOrder),this.hot.render(),this.saveSortingState()}},saveSortingState:function(){var sortingState={};"undefined"!=typeof this.hot.sortColumn&&(sortingState.sortColumn=this.hot.sortColumn),"undefined"!=typeof this.hot.sortOrder&&(sortingState.sortOrder=this.hot.sortOrder),(sortingState.hasOwnProperty("sortColumn")||sortingState.hasOwnProperty("sortOrder"))&&Handsontable.hooks.run(this.hot,"persistentStateSave","columnSorting",sortingState)},loadSortingState:function(){var storedState={};return Handsontable.hooks.run(this.hot,"persistentStateLoad","columnSorting",storedState),storedState.value},updateOrderClass:function(){var orderClass;this.hot.sortOrder===!0?orderClass="ascending":this.hot.sortOrder===!1&&(orderClass="descending"),this.sortOrderClass=orderClass},enableObserveChangesPlugin:function(){var _this=this;this.hot._registerTimeout(setTimeout(function(){_this.hot.updateSettings({observeChanges:!0})},0))},defaultSort:function(sortOrder){return function(a,b){return"string"==typeof a[1]&&(a[1]=a[1].toLowerCase()),"string"==typeof b[1]&&(b[1]=b[1].toLowerCase()),a[1]===b[1]?0:null===a[1]||""===a[1]?1:null===b[1]||""===b[1]?-1:isNaN(a[1])&&!isNaN(b[1])?sortOrder?1:-1:!isNaN(a[1])&&isNaN(b[1])?sortOrder?-1:1:(isNaN(a[1])||isNaN(b[1])||(a[1]=parseFloat(a[1]),b[1]=parseFloat(b[1])),a[1]<b[1]?sortOrder?-1:1:a[1]>b[1]?sortOrder?1:-1:0)}},dateSort:function(sortOrder){return function(a,b){if(a[1]===b[1])return 0;if(null===a[1]||""===a[1])return 1;if(null===b[1]||""===b[1])return-1;var aDate=new Date(a[1]),bDate=new Date(b[1]);return aDate<bDate?sortOrder?-1:1:aDate>bDate?sortOrder?1:-1:0}},numericSort:function(sortOrder){return function(a,b){var parsedA=parseFloat(a[1]),parsedB=parseFloat(b[1]);return parsedA===parsedB||isNaN(parsedA)&&isNaN(parsedB)?0:isNaN(parsedA)?1:isNaN(parsedB)?-1:parsedA<parsedB?sortOrder?-1:1:parsedA>parsedB?sortOrder?1:-1:0}},sort:function(){if("undefined"==typeof this.hot.sortOrder)return void(this.hot.sortIndex.length=0);var colMeta,sortFunction;this.hot.sortingEnabled=!1,this.hot.sortIndex.length=0;for(var i=0,ilen=this.hot.countRows()-this.hot.getSettings().minSpareRows;i<ilen;i++)this.hot.sortIndex.push([i,this.hot.getDataAtCell(i,this.hot.sortColumn)]);if(colMeta=this.hot.getCellMeta(0,this.hot.sortColumn),colMeta.sortFunction)sortFunction=colMeta.sortFunction;else switch(colMeta.type){case"date":sortFunction=this.dateSort;break;case"numeric":sortFunction=this.numericSort;break;default:sortFunction=this.defaultSort}this.hot.sortIndex.sort(sortFunction(this.hot.sortOrder));for(var i$__8=this.hot.sortIndex.length;i$__8<this.hot.countRows();i$__8++)this.hot.sortIndex.push([i$__8,this.hot.getDataAtCell(i$__8,this.hot.sortColumn)]);this.hot.sortingEnabled=!0},updateSortIndicator:function(){if("undefined"!=typeof this.hot.sortOrder){var colMeta=this.hot.getCellMeta(0,this.hot.sortColumn);this.sortIndicators[this.hot.sortColumn]=colMeta.sortIndicator}},translateRow:function(row){return this.hot.sortingEnabled&&"undefined"!=typeof this.hot.sortOrder&&this.hot.sortIndex&&this.hot.sortIndex.length&&this.hot.sortIndex[row]?this.hot.sortIndex[row][0]:row},untranslateRow:function(row){if(this.hot.sortingEnabled&&this.hot.sortIndex&&this.hot.sortIndex.length)for(var i=0;i<this.hot.sortIndex.length;i++)if(this.hot.sortIndex[i][0]==row)return i},getColHeader:function(col,TH){if(col<0||!TH.parentNode)return!1;var headerLink=TH.querySelector(".colHeader"),TRs=(TH.getAttribute("colspan"),TH.parentNode.parentNode.childNodes),headerLevel=Array.prototype.indexOf.call(TRs,TH.parentNode);headerLevel-=TRs.length,headerLink&&(this.hot.getSettings().columnSorting&&col>=0&&headerLevel===-1&&addClass(headerLink,"columnSorting"),removeClass(headerLink,"descending"),removeClass(headerLink,"ascending"),this.sortIndicators[col]&&col===this.hot.sortColumn&&("ascending"===this.sortOrderClass?addClass(headerLink,"ascending"):"descending"===this.sortOrderClass&&addClass(headerLink,"descending")))},isSorted:function(){return"undefined"!=typeof this.hot.sortColumn},afterCreateRow:function(index,amount){if(this.isSorted()){for(var i=0;i<this.hot.sortIndex.length;i++)this.hot.sortIndex[i][0]>=index&&(this.hot.sortIndex[i][0]+=amount);
for(var i=0;i<amount;i++)this.hot.sortIndex.splice(index+i,0,[index+i,this.hot.getSourceData()[index+i][this.hot.sortColumn+this.hot.colOffset()]]);this.saveSortingState()}},afterRemoveRow:function(index,amount){function countRowShift(logicalRow){return arrayReduce(removedRows,function(count,removedLogicalRow){return logicalRow>removedLogicalRow&&count++,count},0)}if(this.isSorted()){var removedRows=this.hot.sortIndex.splice(index,amount);removedRows=arrayMap(removedRows,function(row){return row[0]}),this.hot.sortIndex=arrayMap(this.hot.sortIndex,function(logicalRow,physicalRow){var rowShift=countRowShift(logicalRow[0]);return rowShift&&(logicalRow[0]-=rowShift),logicalRow}),this.saveSortingState()}},onAfterOnCellMouseDown:function(event,coords){coords.row>-1||hasClass(event.realTarget,"columnSorting")&&(coords.col!==this.lastSortedColumn&&(this.hot.sortOrder=!0),this.lastSortedColumn=coords.col,this.sortByColumn(coords.col))}},{},BasePlugin),registerPlugin("columnSorting",ColumnSorting)},{_base:62,browser:24,eventManager:42,"helpers/array":43,"helpers/dom/element":47,plugins:61}],67:[function(_dereq_,module,exports){Object.defineProperties(exports,{CommentEditor:{get:function(){return CommentEditor}},__esModule:{value:!0}});var $___46__46__47__46__46__47_helpers_47_dom_47_element__,addClass=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}).addClass,CommentEditor=function(){this.editor=this.createEditor(),this.editorStyle=this.editor.style,this.editorStyle.position="absolute",this.editorStyle.zIndex=100,this.hide()},$CommentEditor=CommentEditor;$traceurRuntime.createClass(CommentEditor,{setPosition:function(x,y){this.editorStyle.left=x+"px",this.editorStyle.top=y+"px"},show:function(){this.editorStyle.display="block"},hide:function(){this.editorStyle.display="none"},isVisible:function(){return"block"===this.editorStyle.display},setValue:function(){var value=void 0!==arguments[0]?arguments[0]:"";value=value||"",this.getInputElement().value=value},getValue:function(){return this.getInputElement().value},isFocused:function(){return document.activeElement===this.getInputElement()},focus:function(){this.getInputElement().focus()},createEditor:function(){var editor,textArea,container=document.querySelector("."+$CommentEditor.CLASS_EDITOR_CONTAINER);return container||(container=document.createElement("div"),addClass(container,$CommentEditor.CLASS_EDITOR_CONTAINER),document.body.appendChild(container)),editor=document.createElement("div"),addClass(editor,$CommentEditor.CLASS_EDITOR),textArea=document.createElement("textarea"),addClass(textArea,$CommentEditor.CLASS_INPUT),editor.appendChild(textArea),container.appendChild(editor),editor},getInputElement:function(){return this.editor.querySelector("."+$CommentEditor.CLASS_INPUT)},destroy:function(){this.editor.parentNode.removeChild(this.editor),this.editor=null,this.editorStyle=null}},{get CLASS_EDITOR_CONTAINER(){return"htCommentsContainer"},get CLASS_EDITOR(){return"htComments"},get CLASS_INPUT(){return"htCommentTextArea"},get CLASS_CELL(){return"htCommentCell"}})},{"helpers/dom/element":47}],68:[function(_dereq_,module,exports){Object.defineProperties(exports,{Comments:{get:function(){return Comments}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__,$___46__46__47__46__46__47_plugins__,$___46__46__47__95_base__,$__commentEditor__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],$__1=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,closest=$__1.closest,getWindowScrollLeft=$__1.getWindowScrollLeft,getWindowScrollTop=$__1.getWindowScrollTop,hasClass=$__1.hasClass,offset=$__1.offset,EventManager=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).EventManager,WalkontableCellCoords=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=_dereq_("3rdparty/walkontable/src/cell/coords"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{"default":$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,BasePlugin=($___46__46__47__95_base__=_dereq_("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{"default":$___46__46__47__95_base__})["default"],CommentEditor=($__commentEditor__=_dereq_("commentEditor"),$__commentEditor__&&$__commentEditor__.__esModule&&$__commentEditor__||{"default":$__commentEditor__}).CommentEditor,Comments=function(hotInstance){$traceurRuntime.superConstructor($Comments).call(this,hotInstance),this.editor=null,this.eventManager=null,this.range={},this.mouseDown=!1,this.contextMenuEvent=!1,this.timer=null},$Comments=Comments;$traceurRuntime.createClass(Comments,{isEnabled:function(){return this.hot.getSettings().comments},enablePlugin:function(){var $__7=this;this.enabled||(this.editor||(this.editor=new CommentEditor),this.eventManager||(this.eventManager=new EventManager(this)),this.addHook("afterContextMenuDefaultOptions",function(options){return $__7.addToContextMenu(options)}),this.addHook("afterRenderer",function(TD,row,col,prop,value,cellProperties){return $__7.onAfterRenderer(TD,cellProperties)}),this.addHook("afterScrollHorizontally",function(){return $__7.refreshEditorPosition()}),this.addHook("afterScrollVertically",function(){return $__7.refreshEditorPosition()}),this.addHook("afterColumnResize",function(){return $__7.refreshEditorPosition()}),this.addHook("afterRowResize",function(){return $__7.refreshEditorPosition()}),this.registerListeners(),$traceurRuntime.superGet(this,$Comments.prototype,"enablePlugin").call(this))},disablePlugin:function(){$traceurRuntime.superGet(this,$Comments.prototype,"disablePlugin").call(this)},registerListeners:function(){var $__7=this;this.eventManager.addEventListener(document,"mouseover",function(event){return $__7.onMouseOver(event)}),this.eventManager.addEventListener(document,"mousedown",function(event){return $__7.onMouseDown(event)}),this.eventManager.addEventListener(document,"mousemove",function(event){return $__7.onMouseMove(event)}),this.eventManager.addEventListener(document,"mouseup",function(event){return $__7.onMouseUp(event)}),this.eventManager.addEventListener(this.editor.getInputElement(),"blur",function(event){return $__7.onEditorBlur(event)})},setRange:function(range){this.range=range},clearRange:function(){this.range={}},targetIsCellWithComment:function(event){return!(!hasClass(event.target,"htCommentCell")||!closest(event.target,[this.hot.rootElement]))},targetIsCommentTextArea:function(event){return this.editor.getInputElement()===event.target},saveComment:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var comment=this.editor.getValue(),row=this.range.from.row,col=this.range.from.col;this.hot.setCellMeta(row,col,"comment",comment),this.hot.render()},saveCommentAtCell:function(row,col){this.setRange({from:new WalkontableCellCoords(row,col)}),this.saveComment()},removeComment:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.removeCellMeta(this.range.from.row,this.range.from.col,"comment"),this.hot.render(),this.hide()},removeCommentAtCell:function(row,col){this.setRange({from:new WalkontableCellCoords(row,col)}),this.removeComment()},show:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var meta=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return this.refreshEditorPosition(!0),this.editor.setValue(meta.comment||""),this.editor.show(),!0},showAtCell:function(row,col){return this.setRange({from:new WalkontableCellCoords(row,col)}),this.show()},hide:function(){this.editor.hide()},refreshEditorPosition:function(){var force=void 0!==arguments[0]&&arguments[0];if(force||this.range.from&&this.editor.isVisible()){var TD=this.hot.view.wt.wtTable.getCell(this.range.from),cellOffset=offset(TD),lastColWidth=this.hot.getColWidth(this.range.from.col),cellTopOffset=cellOffset.top,cellLeftOffset=cellOffset.left,verticalCompensation=0,horizontalCompensation=0;this.hot.view.wt.wtViewport.hasVerticalScroll()&&(cellTopOffset-=this.hot.view.wt.wtOverlays.topOverlay.getScrollPosition(),verticalCompensation=20),this.hot.view.wt.wtViewport.hasHorizontalScroll()&&(cellLeftOffset-=this.hot.view.wt.wtOverlays.leftOverlay.getScrollPosition(),horizontalCompensation=20);var x=cellLeftOffset+lastColWidth,y=cellTopOffset,rect=this.hot.view.wt.wtTable.holder.getBoundingClientRect(),holderPos={left:rect.left+getWindowScrollLeft()+horizontalCompensation,right:rect.right+getWindowScrollLeft()-15,top:rect.top+getWindowScrollTop()+verticalCompensation,bottom:rect.bottom+getWindowScrollTop()};x<=holderPos.left||x>holderPos.right||y<=holderPos.top||y>holderPos.bottom?this.hide():this.editor.setPosition(x,y)}},onMouseDown:function(event){this.mouseDown=!0,this.hot.view&&this.hot.view.wt&&(this.contextMenuEvent||this.targetIsCommentTextArea(event)||this.targetIsCellWithComment(event)||this.hide(),this.contextMenuEvent=!1)},onMouseOver:function(event){if(!this.mouseDown&&!this.editor.isFocused())if(this.targetIsCellWithComment(event)){var coordinates=this.hot.view.wt.wtTable.getCoords(event.target),range={from:new WalkontableCellCoords(coordinates.row,coordinates.col)};this.setRange(range),this.show()}else this.targetIsCommentTextArea(event)||this.editor.isFocused()||this.hide()},onMouseMove:function(event){var $__7=this;this.targetIsCommentTextArea(event)&&(this.mouseDown=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){$__7.mouseDown=!1},200))},onMouseUp:function(event){this.mouseDown=!1},onAfterRenderer:function(TD,cellProperties){cellProperties.comment&&addClass(TD,cellProperties.commentedCellClassName)},onEditorBlur:function(event){this.saveComment()},checkSelectionCommentsConsistency:function(){var selected=this.hot.getSelectedRange();if(!selected)return!1;var hasComment=!1,cell=selected.from;return this.hot.getCellMeta(cell.row,cell.col).comment&&(hasComment=!0),hasComment},onContextMenuAddComment:function(){var $__7=this,coords=this.hot.getSelectedRange();this.contextMenuEvent=!0,this.setRange({from:coords.from}),this.show(),setTimeout(function(){$__7.hot&&($__7.hot.deselectCell(),$__7.editor.focus())},10)},onContextMenuRemoveComment:function(key,selection){this.contextMenuEvent=!0,this.removeCommentAtCell(selection.start.row,selection.start.col)},addToContextMenu:function(defaultOptions){var $__7=this;defaultOptions.items.push(Handsontable.plugins.ContextMenu.SEPARATOR,{key:"commentsAddEdit",name:function(){return $__7.checkSelectionCommentsConsistency()?"Edit Comment":"Add Comment"},callback:function(){return $__7.onContextMenuAddComment()},disabled:function(){return!(this.getSelected()&&!this.selection.selectedHeader.corner)}},{key:"commentsRemove",name:function(){return"Delete Comment"},callback:function(key,selection){return $__7.onContextMenuRemoveComment(key,selection)},disabled:function(){return $__7.hot.selection.selectedHeader.corner||!$__7.checkSelectionCommentsConsistency()}})},destroy:function(){this.editor&&this.editor.destroy(),$traceurRuntime.superGet(this,$Comments.prototype,"destroy").call(this)}},{},BasePlugin),registerPlugin("comments",Comments)},{"3rdparty/walkontable/src/cell/coords":6,_base:62,browser:24,commentEditor:67,eventManager:42,"helpers/dom/element":47,plugins:61}],69:[function(_dereq_,module,exports){function findSubCommand(subCommandName,subCommands){var command;return arrayEach(subCommands,function(cmd){var cmds=cmd.key?cmd.key.split(":"):null;if(Array.isArray(cmds)&&cmds[1]===subCommandName)return command=cmd,!1}),command}Object.defineProperties(exports,{CommandExecutor:{get:function(){return CommandExecutor}},__esModule:{value:!0}});var $___46__46__47__46__46__47_helpers_47_array__,arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,CommandExecutor=function(hotInstance){this.hot=hotInstance,this.commands={},this.commonCallback=null};$traceurRuntime.createClass(CommandExecutor,{registerCommand:function(name,commandDescriptor){this.commands[name]=commandDescriptor},setCommonCallback:function(callback){this.commonCallback=callback},execute:function(commandName){for(var params=[],$__3=1;$__3<arguments.length;$__3++)params[$__3-1]=arguments[$__3];var $__1=this,commandSplit=commandName.split(":");commandName=commandSplit[0];var subCommandName=2===commandSplit.length?commandSplit[1]:null,command=this.commands[commandName];if(!command)throw new Error("Menu command '"+commandName+"' not exists.");if(subCommandName&&command.submenu&&(command=findSubCommand(subCommandName,command.submenu.items)),command.disabled!==!0&&("function"!=typeof command.disabled||command.disabled.call(this.hot)!==!0)&&!command.hasOwnProperty("submenu")){var callbacks=[];"function"==typeof command.callback&&callbacks.push(command.callback),"function"==typeof this.commonCallback&&callbacks.push(this.commonCallback),params.unshift(commandSplit.join(":")),arrayEach(callbacks,function(callback){return callback.apply($__1.hot,params)})}}},{})},{"helpers/array":43}],70:[function(_dereq_,module,exports){Object.defineProperties(exports,{ContextMenu:{get:function(){return ContextMenu}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__95_base__,$___46__46__47__46__46__47_helpers_47_array__,$__commandExecutor__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$__itemsFactory__,$__menu__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$__predefinedItems__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],BasePlugin=($___46__46__47__95_base__=_dereq_("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{"default":$___46__46__47__95_base__})["default"],arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,CommandExecutor=($__commandExecutor__=_dereq_("commandExecutor"),$__commandExecutor__&&$__commandExecutor__.__esModule&&$__commandExecutor__||{"default":$__commandExecutor__}).CommandExecutor,EventManager=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).EventManager,hasClass=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}).hasClass,ItemsFactory=($__itemsFactory__=_dereq_("itemsFactory"),$__itemsFactory__&&$__itemsFactory__.__esModule&&$__itemsFactory__||{"default":$__itemsFactory__}).ItemsFactory,Menu=($__menu__=_dereq_("menu"),$__menu__&&$__menu__.__esModule&&$__menu__||{"default":$__menu__}).Menu,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,$__9=($___46__46__47__46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_event__}),stopPropagation=$__9.stopPropagation,pageX=$__9.pageX,pageY=$__9.pageY,$__10=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),getWindowScrollLeft=$__10.getWindowScrollLeft,getWindowScrollTop=$__10.getWindowScrollTop,$__11=($__predefinedItems__=_dereq_("predefinedItems"),$__predefinedItems__&&$__predefinedItems__.__esModule&&$__predefinedItems__||{"default":$__predefinedItems__}),ROW_ABOVE=$__11.ROW_ABOVE,ROW_BELOW=$__11.ROW_BELOW,COLUMN_LEFT=$__11.COLUMN_LEFT,COLUMN_RIGHT=$__11.COLUMN_RIGHT,REMOVE_ROW=$__11.REMOVE_ROW,REMOVE_COLUMN=$__11.REMOVE_COLUMN,UNDO=$__11.UNDO,REDO=$__11.REDO,READ_ONLY=$__11.READ_ONLY,ALIGNMENT=$__11.ALIGNMENT,SEPARATOR=$__11.SEPARATOR,ContextMenu=function(hotInstance){$traceurRuntime.superConstructor($ContextMenu).call(this,hotInstance),this.eventManager=new EventManager(this),this.commandExecutor=new CommandExecutor(this.hot),this.itemsFactory=null,this.menu=null},$ContextMenu=ContextMenu;$traceurRuntime.createClass(ContextMenu,{isEnabled:function(){return this.hot.getSettings().contextMenu},enablePlugin:function(){var $__12=this;if(!this.enabled){this.itemsFactory=new ItemsFactory(this.hot,$ContextMenu.DEFAULT_ITEMS);var settings=this.hot.getSettings().contextMenu,predefinedItems={items:this.itemsFactory.getItems(settings)};this.registerEvents(),"function"==typeof settings.callback&&this.commandExecutor.setCommonCallback(settings.callback),$traceurRuntime.superGet(this,$ContextMenu.prototype,"enablePlugin").call(this),this.callOnPluginsReady(function(){$__12.hot.runHooks("afterContextMenuDefaultOptions",predefinedItems),$__12.itemsFactory.setPredefinedItems(predefinedItems.items);var menuItems=$__12.itemsFactory.getItems(settings);$__12.menu=new Menu($__12.hot,{className:"htContextMenu",keepInViewport:!0}),$__12.hot.runHooks("beforeContextMenuSetItems",menuItems),$__12.menu.setMenuItems(menuItems),$__12.menu.addLocalHook("afterOpen",function(){return $__12.onMenuAfterOpen()}),$__12.menu.addLocalHook("afterClose",function(){return $__12.onMenuAfterClose()}),$__12.menu.addLocalHook("executeCommand",function(){for(var params=[],$__14=0;$__14<arguments.length;$__14++)params[$__14]=arguments[$__14];return $__12.executeCommand.apply($__12,params)}),arrayEach(menuItems,function(command){return $__12.commandExecutor.registerCommand(command.key,command)})})}},updatePlugin:function(){this.disablePlugin(),this.enablePlugin(),$traceurRuntime.superGet(this,$ContextMenu.prototype,"updatePlugin").call(this)},disablePlugin:function(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),$traceurRuntime.superGet(this,$ContextMenu.prototype,"disablePlugin").call(this)},registerEvents:function(){var $__12=this;this.eventManager.addEventListener(this.hot.rootElement,"contextmenu",function(event){return $__12.onContextMenu(event)})},open:function(event){this.menu&&(this.menu.open(),this.menu.setPosition({top:parseInt(pageY(event),10)-getWindowScrollTop(),left:parseInt(pageX(event),10)-getWindowScrollLeft()}),this.menu.hotMenu.isHotTableEnv=this.hot.isHotTableEnv,Handsontable.eventManager.isHotTableEnv=this.hot.isHotTableEnv)},close:function(){this.menu&&this.menu.close()},executeCommand:function(){for(var params=[],$__14=0;$__14<arguments.length;$__14++)params[$__14]=arguments[$__14];this.commandExecutor.execute.apply(this.commandExecutor,params)},onContextMenu:function(event){function isValidElement(element){return"TD"===element.nodeName||"TD"===element.parentNode.nodeName}var settings=this.hot.getSettings(),showRowHeaders=settings.rowHeaders,showColHeaders=settings.colHeaders,element=event.realTarget;this.close(),hasClass(element,"handsontableInput")||(event.preventDefault(),stopPropagation(event),(showRowHeaders||showColHeaders||isValidElement(element)||hasClass(element,"current")&&hasClass(element,"wtBorder"))&&this.open(event))},onMenuAfterOpen:function(){this.hot.runHooks("afterContextMenuShow",this)},onMenuAfterClose:function(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)},destroy:function(){this.close(),this.menu&&this.menu.destroy(),$traceurRuntime.superGet(this,$ContextMenu.prototype,"destroy").call(this)}},{get DEFAULT_ITEMS(){return[ROW_ABOVE,ROW_BELOW,SEPARATOR,COLUMN_LEFT,COLUMN_RIGHT,SEPARATOR,REMOVE_ROW,REMOVE_COLUMN,SEPARATOR,UNDO,REDO,SEPARATOR,READ_ONLY,SEPARATOR,ALIGNMENT]}},BasePlugin),ContextMenu.SEPARATOR={name:SEPARATOR},Handsontable.hooks.register("afterContextMenuDefaultOptions"),Handsontable.hooks.register("afterContextMenuShow"),Handsontable.hooks.register("afterContextMenuHide"),Handsontable.hooks.register("afterContextMenuExecute"),registerPlugin("contextMenu",ContextMenu)},{_base:62,browser:24,commandExecutor:69,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/dom/event":48,itemsFactory:72,menu:73,plugins:61,predefinedItems:74}],71:[function(_dereq_,module,exports){Object.defineProperties(exports,{Cursor:{get:function(){return Cursor}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],$__1=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),getWindowScrollLeft=$__1.getWindowScrollLeft,getWindowScrollTop=$__1.getWindowScrollTop,$__2=($___46__46__47__46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_event__}),pageX=$__2.pageX,pageY=$__2.pageY,Cursor=function(object){var top,topRelative,left,leftRelative,cellHeight,cellWidth,windowScrollTop=getWindowScrollTop(),windowScrollLeft=getWindowScrollLeft();this.type=this.getSourceType(object),"literal"===this.type?(top=parseInt(object.top,10),left=parseInt(object.left,10),cellHeight=object.height||0,cellWidth=object.width||0,topRelative=top,leftRelative=left,top+=windowScrollTop,left+=windowScrollLeft):"event"===this.type&&(top=parseInt(pageY(object),10),left=parseInt(pageX(object),10),cellHeight=object.target.clientHeight,cellWidth=object.target.clientWidth,topRelative=top-windowScrollTop,leftRelative=left-windowScrollLeft),this.top=top,this.topRelative=topRelative,this.left=left,this.leftRelative=leftRelative,this.scrollTop=windowScrollTop,this.scrollLeft=windowScrollLeft,this.cellHeight=cellHeight,this.cellWidth=cellWidth};$traceurRuntime.createClass(Cursor,{getSourceType:function(object){var type="literal";return object instanceof Event&&(type="event"),type},fitsAbove:function(element){return this.topRelative>=element.offsetHeight},fitsBelow:function(element){var viewportHeight=void 0!==arguments[1]?arguments[1]:window.innerHeight;return this.topRelative+element.offsetHeight<=viewportHeight},fitsOnRight:function(element){var viewportWidth=void 0!==arguments[1]?arguments[1]:window.innerWidth;return this.leftRelative+this.cellWidth+element.offsetWidth<=viewportWidth},fitsOnLeft:function(element){return this.leftRelative>=element.offsetWidth}},{}),Handsontable.plugins.utils=Handsontable.plugins.utils||{},Handsontable.plugins.utils.Cursor=Cursor},{browser:24,"helpers/dom/element":47,"helpers/dom/event":48}],72:[function(_dereq_,module,exports){function _getItems(){var pattern=void 0!==arguments[0]?arguments[0]:null,defaultPattern=void 0!==arguments[1]?arguments[1]:[],items=void 0!==arguments[2]?arguments[2]:{},result=[];return pattern&&pattern.items?pattern=pattern.items:Array.isArray(pattern)||(pattern=defaultPattern),isObject(pattern)?objectEach(pattern,function(value,key){var item=items["string"==typeof value?value:key];item||(item=value),isObject(value)?extend(item,value):"string"==typeof item&&(item={name:item}),void 0===item.key&&(item.key=key),result.push(item)}):arrayEach(pattern,function(name,key){var item=items[name];!item&&ITEMS.indexOf(name)>=0||(item||(item={name:name,key:key+""}),isObject(name)&&extend(item,name),void 0===item.key&&(item.key=key),result.push(item))}),result}Object.defineProperties(exports,{ItemsFactory:{get:function(){return ItemsFactory}},__esModule:{value:!0}});var $___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_array__,$__predefinedItems__,$__0=($___46__46__47__46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{"default":$___46__46__47__46__46__47_helpers_47_object__}),objectEach=$__0.objectEach,isObject=$__0.isObject,extend=$__0.extend,arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,$__2=($__predefinedItems__=_dereq_("predefinedItems"),$__predefinedItems__&&$__predefinedItems__.__esModule&&$__predefinedItems__||{"default":$__predefinedItems__}),SEPARATOR=$__2.SEPARATOR,ITEMS=$__2.ITEMS,predefinedItems=$__2.predefinedItems,ItemsFactory=function(hotInstance){var orderPattern=void 0!==arguments[1]?arguments[1]:null;this.hot=hotInstance,this.predefinedItems=predefinedItems(),this.defaultOrderPattern=orderPattern};$traceurRuntime.createClass(ItemsFactory,{setPredefinedItems:function(predefinedItems){var $__3=this,items={};this.defaultOrderPattern.length=0,objectEach(predefinedItems,function(value,key){var menuItemKey="";value.name===SEPARATOR?(items[SEPARATOR]=value,menuItemKey=SEPARATOR):isNaN(parseInt(key,10))?(value.key=void 0===value.key?key:value.key,items[key]=value,menuItemKey=value.key):(items[value.key]=value,menuItemKey=value.key),$__3.defaultOrderPattern.push(menuItemKey)}),this.predefinedItems=items},getItems:function(){var pattern=void 0!==arguments[0]?arguments[0]:null;return _getItems(pattern,this.defaultOrderPattern,this.predefinedItems)}},{})},{"helpers/array":43,"helpers/object":53,predefinedItems:74}],73:[function(_dereq_,module,exports){Object.defineProperties(exports,{Menu:{get:function(){return Menu}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_array__,$__cursor__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_function__,$__utils__,$___46__46__47__46__46__47_helpers_47_unicode__,$___46__46__47__46__46__47_mixins_47_localHooks__,$__predefinedItems__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],$__1=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,empty=$__1.empty,fastInnerHTML=$__1.fastInnerHTML,getScrollbarWidth=$__1.getScrollbarWidth,isChildOf=$__1.isChildOf,removeClass=$__1.removeClass,$__2=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}),arrayEach=$__2.arrayEach,arrayFilter=$__2.arrayFilter,arrayReduce=$__2.arrayReduce,Cursor=($__cursor__=_dereq_("cursor"),$__cursor__&&$__cursor__.__esModule&&$__cursor__||{"default":$__cursor__}).Cursor,EventManager=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).EventManager,mixin=($___46__46__47__46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{"default":$___46__46__47__46__46__47_helpers_47_object__}).mixin,debounce=($___46__46__47__46__46__47_helpers_47_function__=_dereq_("helpers/function"),$___46__46__47__46__46__47_helpers_47_function__&&$___46__46__47__46__46__47_helpers_47_function__.__esModule&&$___46__46__47__46__46__47_helpers_47_function__||{"default":$___46__46__47__46__46__47_helpers_47_function__}).debounce,$__7=($__utils__=_dereq_("utils"),$__utils__&&$__utils__.__esModule&&$__utils__||{"default":$__utils__}),filterSeparators=$__7.filterSeparators,hasSubMenu=$__7.hasSubMenu,isDisabled=$__7.isDisabled,isItemHidden=$__7.isItemHidden,isSeparator=$__7.isSeparator,isSelectionDisabled=$__7.isSelectionDisabled,normalizeSelection=$__7.normalizeSelection,KEY_CODES=($___46__46__47__46__46__47_helpers_47_unicode__=_dereq_("helpers/unicode"),
$___46__46__47__46__46__47_helpers_47_unicode__&&$___46__46__47__46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47__46__46__47_helpers_47_unicode__||{"default":$___46__46__47__46__46__47_helpers_47_unicode__}).KEY_CODES,localHooks=($___46__46__47__46__46__47_mixins_47_localHooks__=_dereq_("mixins/localHooks"),$___46__46__47__46__46__47_mixins_47_localHooks__&&$___46__46__47__46__46__47_mixins_47_localHooks__.__esModule&&$___46__46__47__46__46__47_mixins_47_localHooks__||{"default":$___46__46__47__46__46__47_mixins_47_localHooks__}).localHooks,SEPARATOR=($__predefinedItems__=_dereq_("predefinedItems"),$__predefinedItems__&&$__predefinedItems__.__esModule&&$__predefinedItems__||{"default":$__predefinedItems__}).SEPARATOR,stopImmediatePropagation=($___46__46__47__46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_event__}).stopImmediatePropagation,Menu=function(hotInstance,options){this.hot=hotInstance,this.options=options||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1},this.eventManager=new EventManager(this),this.container=this.createContainer(this.options.name),this.hotMenu=null,this.hotSubMenus={},this.parentMenu=this.options.parent||null,this.menuItems=null,this.origOutsideClickDeselects=null,this.offset={above:0,below:0,left:0,right:0},this._afterScrollCallback=null,this.registerEvents()},$Menu=Menu;$traceurRuntime.createClass(Menu,{registerEvents:function(){var $__12=this;this.eventManager.addEventListener(document.documentElement,"mousedown",function(event){return $__12.onDocumentMouseDown(event)})},setMenuItems:function(menuItems){this.menuItems=menuItems},setOffset:function(area){var offset=void 0!==arguments[1]?arguments[1]:0;this.offset[area]=offset},isSubMenu:function(){return null!==this.parentMenu},open:function(){var $__12=this;this.container.removeAttribute("style"),this.container.style.display="block";var delayedOpenSubMenu=debounce(function(row){return $__12.openSubMenu(row)},300),filteredItems=arrayFilter(this.menuItems,function(item){return isItemHidden(item,$__12.hot)});filteredItems=filterSeparators(filteredItems,SEPARATOR);var settings={data:filteredItems,colHeaders:!1,colWidths:[200],autoRowSize:!1,readOnly:!0,copyPaste:!1,columns:[{data:"name",renderer:function(hot,TD,row,col,prop,value){return $__12.menuItemRenderer(hot,TD,row,col,prop,value)}}],renderAllRows:!0,fragmentSelection:"cell",disableVisualSelection:"area",beforeKeyDown:function(event){return $__12.onBeforeKeyDown(event)},afterOnCellMouseOver:function(event,coords,TD){$__12.isAllSubMenusClosed()?delayedOpenSubMenu(coords.row):$__12.openSubMenu(coords.row)}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new Handsontable.Core(this.container,settings),this.hotMenu.addHook("afterInit",function(){return $__12.onAfterInit()}),this.hotMenu.init(),this.hotMenu.listen(),this.blockMainTableCallbacks(),this.runLocalHooks("afterOpen")},close:function(){var closeParent=void 0!==arguments[0]&&arguments[0];this.isOpened()&&(closeParent&&this.parentMenu?this.parentMenu.close():(this.closeAllSubMenus(),this.container.style.display="none",this.releaseMainTableCallbacks(),this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.parentMenu&&this.parentMenu.hotMenu.listen()))},openSubMenu:function(row){if(!this.hotMenu)return!1;var cell=this.hotMenu.getCell(row,0);if(this.closeAllSubMenus(),!cell||!hasSubMenu(cell))return!1;var dataItem=this.hotMenu.getSourceDataAtRow(row),subMenu=new $Menu(this.hot,{parent:this,name:dataItem.name,className:this.options.className,keepInViewport:!0});return subMenu.setMenuItems(dataItem.submenu.items),subMenu.open(),subMenu.setPosition(cell.getBoundingClientRect()),this.hotSubMenus[dataItem.key]=subMenu,subMenu},closeSubMenu:function(row){var dataItem=this.hotMenu.getSourceDataAtRow(row),menus=this.hotSubMenus[dataItem.key];menus&&(menus.destroy(),delete this.hotSubMenus[dataItem.key])},closeAllSubMenus:function(){var $__12=this;arrayEach(this.hotMenu.getData(),function(value,row){return $__12.closeSubMenu(row)})},isAllSubMenusClosed:function(){return 0===Object.keys(this.hotSubMenus).length},destroy:function(){this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy()},isOpened:function(){return null!==this.hotMenu},executeCommand:function(event){if(this.isOpened()&&this.hotMenu.getSelected()){var selectedItem=this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelected()[0]);if(this.runLocalHooks("select",selectedItem,event),selectedItem.isCommand!==!1&&selectedItem.name!==SEPARATOR){var selRange=this.hot.getSelectedRange(),normalizedSelection=selRange?normalizeSelection(selRange):{},autoClose=!0;(selectedItem.disabled===!0||"function"==typeof selectedItem.disabled&&selectedItem.disabled.call(this.hot)===!0||selectedItem.submenu)&&(autoClose=!1),this.runLocalHooks("executeCommand",selectedItem.key,normalizedSelection,event),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",selectedItem.key,normalizedSelection,event),autoClose&&this.close(!0)}}},setPosition:function(coords){var cursor=new Cursor(coords);this.options.keepInViewport?(cursor.fitsBelow(this.container)?this.setPositionBelowCursor(cursor):cursor.fitsAbove(this.container)?this.setPositionAboveCursor(cursor):this.setPositionBelowCursor(cursor),cursor.fitsOnRight(this.container)?this.setPositionOnRightOfCursor(cursor):this.setPositionOnLeftOfCursor(cursor)):(this.setPositionBelowCursor(cursor),this.setPositionOnRightOfCursor(cursor))},setPositionAboveCursor:function(cursor){var top=this.offset.above+cursor.top-this.container.offsetHeight;this.isSubMenu()&&(top=cursor.top+cursor.cellHeight-this.container.offsetHeight+3),this.container.style.top=top+"px"},setPositionBelowCursor:function(cursor){var top=this.offset.below+cursor.top;this.isSubMenu()&&(top=cursor.top-1),this.container.style.top=top+"px"},setPositionOnRightOfCursor:function(cursor){var left;left=this.isSubMenu()?1+cursor.left+cursor.cellWidth:this.offset.right+1+cursor.left,this.container.style.left=left+"px"},setPositionOnLeftOfCursor:function(cursor){var left=this.offset.left+cursor.left-this.container.offsetWidth+getScrollbarWidth()+4;this.container.style.left=left+"px"},selectFirstCell:function(){var cell=this.hotMenu.getCell(0,0);isSeparator(cell)||isDisabled(cell)||isSelectionDisabled(cell)?this.selectNextCell(0,0):this.hotMenu.selectCell(0,0)},selectLastCell:function(){var lastRow=this.hotMenu.countRows()-1,cell=this.hotMenu.getCell(lastRow,0);isSeparator(cell)||isDisabled(cell)||isSelectionDisabled(cell)?this.selectPrevCell(lastRow,0):this.hotMenu.selectCell(lastRow,0)},selectNextCell:function(row,col){var nextRow=row+1,cell=nextRow<this.hotMenu.countRows()?this.hotMenu.getCell(nextRow,col):null;cell&&(isSeparator(cell)||isDisabled(cell)||isSelectionDisabled(cell)?this.selectNextCell(nextRow,col):this.hotMenu.selectCell(nextRow,col))},selectPrevCell:function(row,col){var prevRow=row-1,cell=prevRow>=0?this.hotMenu.getCell(prevRow,col):null;cell&&(isSeparator(cell)||isDisabled(cell)||isSelectionDisabled(cell)?this.selectPrevCell(prevRow,col):this.hotMenu.selectCell(prevRow,col))},menuItemRenderer:function(hot,TD,row,col,prop,value){var $__12=this,item=hot.getSourceDataAtRow(row),wrapper=document.createElement("div"),isSubMenu=function(item){return item.hasOwnProperty("submenu")},itemIsSeparator=function(item){return new RegExp(SEPARATOR,"i").test(item.name)},itemIsDisabled=function(item){return item.disabled===!0||"function"==typeof item.disabled&&item.disabled.call($__12.hot)===!0},itemIsSelectionDisabled=function(item){return item.disableSelection};"function"==typeof value&&(value=value.call(this.hot)),empty(TD),addClass(wrapper,"htItemWrapper"),TD.appendChild(wrapper),itemIsSeparator(item)?addClass(TD,"htSeparator"):"function"==typeof item.renderer?(addClass(TD,"htCustomMenuRenderer"),TD.appendChild(item.renderer(hot,wrapper,row,col,prop,value))):fastInnerHTML(wrapper,value),itemIsDisabled(item)?(addClass(TD,"htDisabled"),this.eventManager.addEventListener(TD,"mouseenter",function(){return hot.deselectCell()})):itemIsSelectionDisabled(item)?(addClass(TD,"htSelectionDisabled"),this.eventManager.addEventListener(TD,"mouseenter",function(){return hot.deselectCell()})):isSubMenu(item)?(addClass(TD,"htSubmenu"),itemIsSelectionDisabled(item)?this.eventManager.addEventListener(TD,"mouseenter",function(){return hot.deselectCell()}):this.eventManager.addEventListener(TD,"mouseenter",function(){return hot.selectCell(row,col,void 0,void 0,!1,!1)})):(removeClass(TD,"htSubmenu"),removeClass(TD,"htDisabled"),itemIsSelectionDisabled(item)?this.eventManager.addEventListener(TD,"mouseenter",function(){return hot.deselectCell()}):this.eventManager.addEventListener(TD,"mouseenter",function(){return hot.selectCell(row,col,void 0,void 0,!1,!1)}))},createContainer:function(){var name=void 0!==arguments[0]?arguments[0]:null;name&&(name=name.replace(/ /g,"_"),name=this.options.className+"Sub_"+name);var container;return container=name?document.querySelector("."+this.options.className+"."+name):document.querySelector("."+this.options.className),container||(container=document.createElement("div"),addClass(container,"htMenu "+this.options.className),name&&addClass(container,name),document.getElementsByTagName("body")[0].appendChild(container)),container},blockMainTableCallbacks:function(){this._afterScrollCallback=function(){},this.hot.addHook("afterScrollVertically",this._afterScrollCallback),this.hot.addHook("afterScrollHorizontally",this._afterScrollCallback)},releaseMainTableCallbacks:function(){this._afterScrollCallback&&(this.hot.removeHook("afterScrollVertically",this._afterScrollCallback),this.hot.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)},onBeforeKeyDown:function(event){var selection=this.hotMenu.getSelected(),stopEvent=!1;switch(event.keyCode){case KEY_CODES.ESCAPE:this.close(),stopEvent=!0;break;case KEY_CODES.ENTER:selection&&(this.hotMenu.getSourceDataAtRow(selection[0]).submenu?stopEvent=!0:(this.executeCommand(event),this.close(!0)));break;case KEY_CODES.ARROW_DOWN:selection?this.selectNextCell(selection[0],selection[1]):this.selectFirstCell(),stopEvent=!0;break;case KEY_CODES.ARROW_UP:selection?this.selectPrevCell(selection[0],selection[1]):this.selectLastCell(),stopEvent=!0;break;case KEY_CODES.ARROW_RIGHT:if(selection){var menu=this.openSubMenu(selection[0]);menu&&menu.selectFirstCell()}stopEvent=!0;break;case KEY_CODES.ARROW_LEFT:selection&&this.isSubMenu()&&(this.close(),this.parentMenu&&this.parentMenu.hotMenu.listen(),stopEvent=!0)}stopEvent&&(event.preventDefault(),stopImmediatePropagation(event))},onAfterInit:function(){var data=this.hotMenu.getSettings().data,hiderStyle=this.hotMenu.view.wt.wtTable.hider.style,holderStyle=this.hotMenu.view.wt.wtTable.holder.style,currentHiderWidth=parseInt(hiderStyle.width,10),realHeight=arrayReduce(data,function(accumulator,value){return accumulator+(value.name===SEPARATOR?1:26)},0);holderStyle.width=currentHiderWidth+22+"px",holderStyle.height=realHeight+4+"px",hiderStyle.height=holderStyle.height},onDocumentMouseDown:function(event){this.isOpened()&&(this.container&&isChildOf(event.target,this.container)&&this.executeCommand(event),this.options.standalone&&this.hotMenu&&!isChildOf(event.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&&!isChildOf(event.target,".htMenu")&&isChildOf(event.target,document)&&this.close(!0))}},{}),mixin(Menu,localHooks)},{browser:24,cursor:71,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/function":50,"helpers/object":53,"helpers/unicode":56,"mixins/localHooks":58,predefinedItems:74,utils:87}],74:[function(_dereq_,module,exports){function predefinedItems(){var items={};return objectEach(_predefinedItems,function(itemFactory,key){return items[key]=itemFactory()}),items}function addItem(key,item){ITEMS.indexOf(key)===-1&&(_predefinedItems[key]=item)}var $__13;Object.defineProperties(exports,{ALIGNMENT:{get:function(){return $__predefinedItems_47_alignment__.KEY}},CLEAR_COLUMN:{get:function(){return $__predefinedItems_47_clearColumn__.KEY}},COLUMN_LEFT:{get:function(){return $__predefinedItems_47_columnLeft__.KEY}},COLUMN_RIGHT:{get:function(){return $__predefinedItems_47_columnRight__.KEY}},READ_ONLY:{get:function(){return $__predefinedItems_47_readOnly__.KEY}},REDO:{get:function(){return $__predefinedItems_47_redo__.KEY}},REMOVE_COLUMN:{get:function(){return $__predefinedItems_47_removeColumn__.KEY}},REMOVE_ROW:{get:function(){return $__predefinedItems_47_removeRow__.KEY}},ROW_ABOVE:{get:function(){return $__predefinedItems_47_rowAbove__.KEY}},ROW_BELOW:{get:function(){return $__predefinedItems_47_rowBelow__.KEY}},SEPARATOR:{get:function(){return $__predefinedItems_47_separator__.KEY}},UNDO:{get:function(){return $__predefinedItems_47_undo__.KEY}},ITEMS:{get:function(){return ITEMS}},predefinedItems:{get:function(){return predefinedItems}},addItem:{get:function(){return addItem}},__esModule:{value:!0}});var $___46__46__47__46__46__47_helpers_47_object__,$__predefinedItems_47_alignment__,$__predefinedItems_47_clearColumn__,$__predefinedItems_47_columnLeft__,$__predefinedItems_47_columnRight__,$__predefinedItems_47_readOnly__,$__predefinedItems_47_redo__,$__predefinedItems_47_removeColumn__,$__predefinedItems_47_removeRow__,$__predefinedItems_47_rowAbove__,$__predefinedItems_47_rowBelow__,$__predefinedItems_47_separator__,$__predefinedItems_47_undo__,$__predefinedItems_47_alignment__,$__predefinedItems_47_clearColumn__,$__predefinedItems_47_columnLeft__,$__predefinedItems_47_columnRight__,$__predefinedItems_47_readOnly__,$__predefinedItems_47_redo__,$__predefinedItems_47_removeColumn__,$__predefinedItems_47_removeRow__,$__predefinedItems_47_rowAbove__,$__predefinedItems_47_rowBelow__,$__predefinedItems_47_separator__,$__predefinedItems_47_undo__,objectEach=($___46__46__47__46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{"default":$___46__46__47__46__46__47_helpers_47_object__}).objectEach,$__1=($__predefinedItems_47_alignment__=_dereq_("predefinedItems/alignment"),$__predefinedItems_47_alignment__&&$__predefinedItems_47_alignment__.__esModule&&$__predefinedItems_47_alignment__||{"default":$__predefinedItems_47_alignment__}),alignmentItem=$__1.alignmentItem,ALIGNMENT=$__1.KEY,$__2=($__predefinedItems_47_clearColumn__=_dereq_("predefinedItems/clearColumn"),$__predefinedItems_47_clearColumn__&&$__predefinedItems_47_clearColumn__.__esModule&&$__predefinedItems_47_clearColumn__||{"default":$__predefinedItems_47_clearColumn__}),clearColumnItem=$__2.clearColumnItem,CLEAR_COLUMN=$__2.KEY,$__3=($__predefinedItems_47_columnLeft__=_dereq_("predefinedItems/columnLeft"),$__predefinedItems_47_columnLeft__&&$__predefinedItems_47_columnLeft__.__esModule&&$__predefinedItems_47_columnLeft__||{"default":$__predefinedItems_47_columnLeft__}),columnLeftItem=$__3.columnLeftItem,COLUMN_LEFT=$__3.KEY,$__4=($__predefinedItems_47_columnRight__=_dereq_("predefinedItems/columnRight"),$__predefinedItems_47_columnRight__&&$__predefinedItems_47_columnRight__.__esModule&&$__predefinedItems_47_columnRight__||{"default":$__predefinedItems_47_columnRight__}),columnRightItem=$__4.columnRightItem,COLUMN_RIGHT=$__4.KEY,$__5=($__predefinedItems_47_readOnly__=_dereq_("predefinedItems/readOnly"),$__predefinedItems_47_readOnly__&&$__predefinedItems_47_readOnly__.__esModule&&$__predefinedItems_47_readOnly__||{"default":$__predefinedItems_47_readOnly__}),readOnlyItem=$__5.readOnlyItem,READ_ONLY=$__5.KEY,$__6=($__predefinedItems_47_redo__=_dereq_("predefinedItems/redo"),$__predefinedItems_47_redo__&&$__predefinedItems_47_redo__.__esModule&&$__predefinedItems_47_redo__||{"default":$__predefinedItems_47_redo__}),redoItem=$__6.redoItem,REDO=$__6.KEY,$__7=($__predefinedItems_47_removeColumn__=_dereq_("predefinedItems/removeColumn"),$__predefinedItems_47_removeColumn__&&$__predefinedItems_47_removeColumn__.__esModule&&$__predefinedItems_47_removeColumn__||{"default":$__predefinedItems_47_removeColumn__}),removeColumnItem=$__7.removeColumnItem,REMOVE_COLUMN=$__7.KEY,$__8=($__predefinedItems_47_removeRow__=_dereq_("predefinedItems/removeRow"),$__predefinedItems_47_removeRow__&&$__predefinedItems_47_removeRow__.__esModule&&$__predefinedItems_47_removeRow__||{"default":$__predefinedItems_47_removeRow__}),removeRowItem=$__8.removeRowItem,REMOVE_ROW=$__8.KEY,$__9=($__predefinedItems_47_rowAbove__=_dereq_("predefinedItems/rowAbove"),$__predefinedItems_47_rowAbove__&&$__predefinedItems_47_rowAbove__.__esModule&&$__predefinedItems_47_rowAbove__||{"default":$__predefinedItems_47_rowAbove__}),rowAboveItem=$__9.rowAboveItem,ROW_ABOVE=$__9.KEY,$__10=($__predefinedItems_47_rowBelow__=_dereq_("predefinedItems/rowBelow"),$__predefinedItems_47_rowBelow__&&$__predefinedItems_47_rowBelow__.__esModule&&$__predefinedItems_47_rowBelow__||{"default":$__predefinedItems_47_rowBelow__}),rowBelowItem=$__10.rowBelowItem,ROW_BELOW=$__10.KEY,$__11=($__predefinedItems_47_separator__=_dereq_("predefinedItems/separator"),$__predefinedItems_47_separator__&&$__predefinedItems_47_separator__.__esModule&&$__predefinedItems_47_separator__||{"default":$__predefinedItems_47_separator__}),separatorItem=$__11.separatorItem,SEPARATOR=$__11.KEY,$__12=($__predefinedItems_47_undo__=_dereq_("predefinedItems/undo"),$__predefinedItems_47_undo__&&$__predefinedItems_47_undo__.__esModule&&$__predefinedItems_47_undo__||{"default":$__predefinedItems_47_undo__}),undoItem=$__12.undoItem,UNDO=$__12.KEY,$__predefinedItems_47_alignment__=($__predefinedItems_47_alignment__=_dereq_("predefinedItems/alignment"),$__predefinedItems_47_alignment__&&$__predefinedItems_47_alignment__.__esModule&&$__predefinedItems_47_alignment__||{"default":$__predefinedItems_47_alignment__}),$__predefinedItems_47_clearColumn__=($__predefinedItems_47_clearColumn__=_dereq_("predefinedItems/clearColumn"),$__predefinedItems_47_clearColumn__&&$__predefinedItems_47_clearColumn__.__esModule&&$__predefinedItems_47_clearColumn__||{"default":$__predefinedItems_47_clearColumn__}),$__predefinedItems_47_columnLeft__=($__predefinedItems_47_columnLeft__=_dereq_("predefinedItems/columnLeft"),$__predefinedItems_47_columnLeft__&&$__predefinedItems_47_columnLeft__.__esModule&&$__predefinedItems_47_columnLeft__||{"default":$__predefinedItems_47_columnLeft__}),$__predefinedItems_47_columnRight__=($__predefinedItems_47_columnRight__=_dereq_("predefinedItems/columnRight"),$__predefinedItems_47_columnRight__&&$__predefinedItems_47_columnRight__.__esModule&&$__predefinedItems_47_columnRight__||{"default":$__predefinedItems_47_columnRight__}),$__predefinedItems_47_readOnly__=($__predefinedItems_47_readOnly__=_dereq_("predefinedItems/readOnly"),$__predefinedItems_47_readOnly__&&$__predefinedItems_47_readOnly__.__esModule&&$__predefinedItems_47_readOnly__||{"default":$__predefinedItems_47_readOnly__}),$__predefinedItems_47_redo__=($__predefinedItems_47_redo__=_dereq_("predefinedItems/redo"),$__predefinedItems_47_redo__&&$__predefinedItems_47_redo__.__esModule&&$__predefinedItems_47_redo__||{"default":$__predefinedItems_47_redo__}),$__predefinedItems_47_removeColumn__=($__predefinedItems_47_removeColumn__=_dereq_("predefinedItems/removeColumn"),$__predefinedItems_47_removeColumn__&&$__predefinedItems_47_removeColumn__.__esModule&&$__predefinedItems_47_removeColumn__||{"default":$__predefinedItems_47_removeColumn__}),$__predefinedItems_47_removeRow__=($__predefinedItems_47_removeRow__=_dereq_("predefinedItems/removeRow"),$__predefinedItems_47_removeRow__&&$__predefinedItems_47_removeRow__.__esModule&&$__predefinedItems_47_removeRow__||{"default":$__predefinedItems_47_removeRow__}),$__predefinedItems_47_rowAbove__=($__predefinedItems_47_rowAbove__=_dereq_("predefinedItems/rowAbove"),$__predefinedItems_47_rowAbove__&&$__predefinedItems_47_rowAbove__.__esModule&&$__predefinedItems_47_rowAbove__||{"default":$__predefinedItems_47_rowAbove__}),$__predefinedItems_47_rowBelow__=($__predefinedItems_47_rowBelow__=_dereq_("predefinedItems/rowBelow"),$__predefinedItems_47_rowBelow__&&$__predefinedItems_47_rowBelow__.__esModule&&$__predefinedItems_47_rowBelow__||{"default":$__predefinedItems_47_rowBelow__}),$__predefinedItems_47_separator__=($__predefinedItems_47_separator__=_dereq_("predefinedItems/separator"),$__predefinedItems_47_separator__&&$__predefinedItems_47_separator__.__esModule&&$__predefinedItems_47_separator__||{"default":$__predefinedItems_47_separator__}),$__predefinedItems_47_undo__=($__predefinedItems_47_undo__=_dereq_("predefinedItems/undo"),$__predefinedItems_47_undo__&&$__predefinedItems_47_undo__.__esModule&&$__predefinedItems_47_undo__||{"default":$__predefinedItems_47_undo__}),ITEMS=[ROW_ABOVE,ROW_BELOW,COLUMN_LEFT,COLUMN_RIGHT,CLEAR_COLUMN,REMOVE_ROW,REMOVE_COLUMN,UNDO,REDO,READ_ONLY,ALIGNMENT,SEPARATOR],_predefinedItems=($__13={},Object.defineProperty($__13,SEPARATOR,{value:separatorItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,ROW_ABOVE,{value:rowAboveItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,ROW_BELOW,{value:rowBelowItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,COLUMN_LEFT,{value:columnLeftItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,COLUMN_RIGHT,{value:columnRightItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,CLEAR_COLUMN,{value:clearColumnItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,REMOVE_ROW,{value:removeRowItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,REMOVE_COLUMN,{value:removeColumnItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,UNDO,{value:undoItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,REDO,{value:redoItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,READ_ONLY,{value:readOnlyItem,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__13,ALIGNMENT,{value:alignmentItem,configurable:!0,enumerable:!0,writable:!0}),$__13)},{"helpers/object":53,"predefinedItems/alignment":75,"predefinedItems/clearColumn":76,"predefinedItems/columnLeft":77,"predefinedItems/columnRight":78,"predefinedItems/readOnly":79,"predefinedItems/redo":80,"predefinedItems/removeColumn":81,"predefinedItems/removeRow":82,"predefinedItems/rowAbove":83,"predefinedItems/rowBelow":84,"predefinedItems/separator":85,"predefinedItems/undo":86}],75:[function(_dereq_,module,exports){function alignmentItem(){return{key:KEY,name:"Alignment",disabled:function(){return!(this.getSelectedRange()&&!this.selection.selectedHeader.corner)},submenu:{items:[{key:KEY+":left",name:function(){var $__2=this,label="Left",hasClass=checkSelectionConsistency(this.getSelectedRange(),function(row,col){var className=$__2.getCellMeta(row,col).className;if(className&&className.indexOf("htLeft")!==-1)return!0});return hasClass&&(label=markLabelAsSelected(label)),label},callback:function(){var $__2=this,range=this.getSelectedRange(),stateBefore=getAlignmentClasses(range,function(row,col){return $__2.getCellMeta(row,col).className}),type="horizontal",alignment="htLeft";this.runHooks("beforeCellAlignment",stateBefore,range,type,alignment),align(range,type,alignment,function(row,col){return $__2.getCellMeta(row,col)}),this.render()},disabled:!1},{key:KEY+":center",name:function(){var $__2=this,label="Center",hasClass=checkSelectionConsistency(this.getSelectedRange(),function(row,col){var className=$__2.getCellMeta(row,col).className;if(className&&className.indexOf("htCenter")!==-1)return!0});return hasClass&&(label=markLabelAsSelected(label)),label},callback:function(){var $__2=this,range=this.getSelectedRange(),stateBefore=getAlignmentClasses(range,function(row,col){return $__2.getCellMeta(row,col).className}),type="horizontal",alignment="htCenter";this.runHooks("beforeCellAlignment",stateBefore,range,type,alignment),align(range,type,alignment,function(row,col){return $__2.getCellMeta(row,col)}),this.render()},disabled:!1},{key:KEY+":right",name:function(){var $__2=this,label="Right",hasClass=checkSelectionConsistency(this.getSelectedRange(),function(row,col){var className=$__2.getCellMeta(row,col).className;if(className&&className.indexOf("htRight")!==-1)return!0});return hasClass&&(label=markLabelAsSelected(label)),label},callback:function(){var $__2=this,range=this.getSelectedRange(),stateBefore=getAlignmentClasses(range,function(row,col){return $__2.getCellMeta(row,col).className}),type="horizontal",alignment="htRight";this.runHooks("beforeCellAlignment",stateBefore,range,type,alignment),align(range,type,alignment,function(row,col){return $__2.getCellMeta(row,col)}),this.render()},disabled:!1},{key:KEY+":justify",name:function(){var $__2=this,label="Justify",hasClass=checkSelectionConsistency(this.getSelectedRange(),function(row,col){var className=$__2.getCellMeta(row,col).className;if(className&&className.indexOf("htJustify")!==-1)return!0});return hasClass&&(label=markLabelAsSelected(label)),label},callback:function(){var $__2=this,range=this.getSelectedRange(),stateBefore=getAlignmentClasses(range,function(row,col){return $__2.getCellMeta(row,col).className}),type="horizontal",alignment="htJustify";this.runHooks("beforeCellAlignment",stateBefore,range,type,alignment),align(range,type,alignment,function(row,col){return $__2.getCellMeta(row,col)}),this.render()},disabled:!1},{name:SEPARATOR},{key:KEY+":top",name:function(){var $__2=this,label="Top",hasClass=checkSelectionConsistency(this.getSelectedRange(),function(row,col){var className=$__2.getCellMeta(row,col).className;if(className&&className.indexOf("htTop")!==-1)return!0});return hasClass&&(label=markLabelAsSelected(label)),label},callback:function(){var $__2=this,range=this.getSelectedRange(),stateBefore=getAlignmentClasses(range,function(row,col){return $__2.getCellMeta(row,col).className}),type="vertical",alignment="htTop";this.runHooks("beforeCellAlignment",stateBefore,range,type,alignment),align(range,type,alignment,function(row,col){return $__2.getCellMeta(row,col)}),this.render()},disabled:!1},{key:KEY+":middle",name:function(){var $__2=this,label="Middle",hasClass=checkSelectionConsistency(this.getSelectedRange(),function(row,col){var className=$__2.getCellMeta(row,col).className;if(className&&className.indexOf("htMiddle")!==-1)return!0});return hasClass&&(label=markLabelAsSelected(label)),label},callback:function(){var $__2=this,range=this.getSelectedRange(),stateBefore=getAlignmentClasses(range,function(row,col){return $__2.getCellMeta(row,col).className}),type="vertical",alignment="htMiddle";this.runHooks("beforeCellAlignment",stateBefore,range,type,alignment),align(range,type,alignment,function(row,col){return $__2.getCellMeta(row,col)}),this.render()},disabled:!1},{key:KEY+":bottom",name:function(){var $__2=this,label="Bottom",hasClass=checkSelectionConsistency(this.getSelectedRange(),function(row,col){var className=$__2.getCellMeta(row,col).className;if(className&&className.indexOf("htBottom")!==-1)return!0});return hasClass&&(label=markLabelAsSelected(label)),label},callback:function(){var $__2=this,range=this.getSelectedRange(),stateBefore=getAlignmentClasses(range,function(row,col){return $__2.getCellMeta(row,col).className}),type="vertical",alignment="htBottom";this.runHooks("beforeCellAlignment",stateBefore,range,type,alignment),align(range,type,alignment,function(row,col){return $__2.getCellMeta(row,col)}),this.render()},disabled:!1}]}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},alignmentItem:{get:function(){return alignmentItem}},__esModule:{value:!0}});var $___46__46__47_utils__,$__separator__,$__0=($___46__46__47_utils__=_dereq_("utils"),$___46__46__47_utils__&&$___46__46__47_utils__.__esModule&&$___46__46__47_utils__||{"default":$___46__46__47_utils__}),align=$__0.align,getAlignmentClasses=$__0.getAlignmentClasses,checkSelectionConsistency=$__0.checkSelectionConsistency,markLabelAsSelected=$__0.markLabelAsSelected,SEPARATOR=($__separator__=_dereq_("separator"),$__separator__&&$__separator__.__esModule&&$__separator__||{"default":$__separator__}).KEY,KEY="alignment"},{separator:85,utils:87}],76:[function(_dereq_,module,exports){function clearColumnItem(){return{key:KEY,name:"Clear column",callback:function(key,selection){var column=selection.start.col;this.countRows()&&this.populateFromArray(0,column,[[null]],Math.max(selection.start.row,selection.end.row),column)},disabled:function(){var selected=getValidSelection(this);if(!selected)return!0;var entireRowSelection=[selected[0],0,selected[0],this.countCols()-1],rowSelected=entireRowSelection.join(",")==selected.join(",");return selected[1]<0||this.countCols()>=this.getSettings().maxCols||rowSelected}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},clearColumnItem:{get:function(){return clearColumnItem}},__esModule:{value:!0}});var $___46__46__47_utils__,getValidSelection=($___46__46__47_utils__=_dereq_("utils"),$___46__46__47_utils__&&$___46__46__47_utils__.__esModule&&$___46__46__47_utils__||{"default":$___46__46__47_utils__}).getValidSelection,KEY="clear_column"},{utils:87}],77:[function(_dereq_,module,exports){function columnLeftItem(){return{key:KEY,name:"Insert column on the left",callback:function(key,selection){this.alter("insert_col",selection.start.col)},disabled:function(){var selected=getValidSelection(this);if(!selected)return!0;if(!this.isColumnModificationAllowed())return!0;var entireRowSelection=[selected[0],0,selected[0],this.countCols()-1],rowSelected=entireRowSelection.join(",")==selected.join(","),onlyOneColumn=1===this.countCols();return selected[1]<0||this.countCols()>=this.getSettings().maxCols||!onlyOneColumn&&rowSelected},hidden:function(){return!this.getSettings().allowInsertColumn}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},columnLeftItem:{get:function(){return columnLeftItem}},__esModule:{value:!0}});var $___46__46__47_utils__,getValidSelection=($___46__46__47_utils__=_dereq_("utils"),$___46__46__47_utils__&&$___46__46__47_utils__.__esModule&&$___46__46__47_utils__||{"default":$___46__46__47_utils__}).getValidSelection,KEY="col_left"},{utils:87}],78:[function(_dereq_,module,exports){function columnRightItem(){return{key:KEY,name:"Insert column on the right",callback:function(key,selection){this.alter("insert_col",selection.end.col+1)},disabled:function(){var selected=getValidSelection(this);if(!selected)return!0;if(!this.isColumnModificationAllowed())return!0;var entireRowSelection=[selected[0],0,selected[0],this.countCols()-1],rowSelected=entireRowSelection.join(",")==selected.join(","),onlyOneColumn=1===this.countCols();return selected[1]<0||this.countCols()>=this.getSettings().maxCols||!onlyOneColumn&&rowSelected},hidden:function(){return!this.getSettings().allowInsertColumn}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},columnRightItem:{get:function(){return columnRightItem}},__esModule:{value:!0}});var $___46__46__47_utils__,getValidSelection=($___46__46__47_utils__=_dereq_("utils"),$___46__46__47_utils__&&$___46__46__47_utils__.__esModule&&$___46__46__47_utils__||{"default":$___46__46__47_utils__}).getValidSelection,KEY="col_right"},{utils:87}],79:[function(_dereq_,module,exports){function readOnlyItem(){return{key:KEY,name:function(){var $__1=this,label="Read only",atLeastOneReadOnly=checkSelectionConsistency(this.getSelectedRange(),function(row,col){
return $__1.getCellMeta(row,col).readOnly});return atLeastOneReadOnly&&(label=markLabelAsSelected(label)),label},callback:function(){var $__1=this,range=this.getSelectedRange(),atLeastOneReadOnly=checkSelectionConsistency(range,function(row,col){return $__1.getCellMeta(row,col).readOnly});range.forAll(function(row,col){$__1.getCellMeta(row,col).readOnly=!atLeastOneReadOnly}),this.render()},disabled:function(){return!(this.getSelectedRange()&&!this.selection.selectedHeader.corner)}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},readOnlyItem:{get:function(){return readOnlyItem}},__esModule:{value:!0}});var $___46__46__47_utils__,$__0=($___46__46__47_utils__=_dereq_("utils"),$___46__46__47_utils__&&$___46__46__47_utils__.__esModule&&$___46__46__47_utils__||{"default":$___46__46__47_utils__}),checkSelectionConsistency=$__0.checkSelectionConsistency,markLabelAsSelected=$__0.markLabelAsSelected,KEY="make_read_only"},{utils:87}],80:[function(_dereq_,module,exports){function redoItem(){return{key:KEY,name:"Redo",callback:function(){this.redo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable()}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},redoItem:{get:function(){return redoItem}},__esModule:{value:!0}});var KEY="redo"},{}],81:[function(_dereq_,module,exports){function removeColumnItem(){return{key:KEY,name:"Remove column",callback:function(key,selection){var amount=selection.end.col-selection.start.col+1;this.alter("remove_col",selection.start.col,amount)},disabled:function(){var selected=getValidSelection(this),totalColumns=this.countCols();return!selected||this.selection.selectedHeader.rows||this.selection.selectedHeader.corner||!this.isColumnModificationAllowed()||!totalColumns},hidden:function(){return!this.getSettings().allowRemoveColumn}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},removeColumnItem:{get:function(){return removeColumnItem}},__esModule:{value:!0}});var $___46__46__47_utils__,getValidSelection=($___46__46__47_utils__=_dereq_("utils"),$___46__46__47_utils__&&$___46__46__47_utils__.__esModule&&$___46__46__47_utils__||{"default":$___46__46__47_utils__}).getValidSelection,KEY="remove_col"},{utils:87}],82:[function(_dereq_,module,exports){function removeRowItem(){return{key:KEY,name:"Remove row",callback:function(key,selection){var amount=selection.end.row-selection.start.row+1;this.alter("remove_row",selection.start.row,amount)},disabled:function(){var selected=getValidSelection(this),totalRows=this.countRows();return!selected||this.selection.selectedHeader.cols||this.selection.selectedHeader.corner||!totalRows},hidden:function(){return!this.getSettings().allowRemoveRow}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},removeRowItem:{get:function(){return removeRowItem}},__esModule:{value:!0}});var $___46__46__47_utils__,getValidSelection=($___46__46__47_utils__=_dereq_("utils"),$___46__46__47_utils__&&$___46__46__47_utils__.__esModule&&$___46__46__47_utils__||{"default":$___46__46__47_utils__}).getValidSelection,KEY="remove_row"},{utils:87}],83:[function(_dereq_,module,exports){function rowAboveItem(){return{key:KEY,name:"Insert row above",callback:function(key,selection){this.alter("insert_row",selection.start.row)},disabled:function(){var selected=getValidSelection(this);return!selected||this.selection.selectedHeader.cols||this.countRows()>=this.getSettings().maxRows},hidden:function(){return!this.getSettings().allowInsertRow}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},rowAboveItem:{get:function(){return rowAboveItem}},__esModule:{value:!0}});var $___46__46__47_utils__,getValidSelection=($___46__46__47_utils__=_dereq_("utils"),$___46__46__47_utils__&&$___46__46__47_utils__.__esModule&&$___46__46__47_utils__||{"default":$___46__46__47_utils__}).getValidSelection,KEY="row_above"},{utils:87}],84:[function(_dereq_,module,exports){function rowBelowItem(){return{key:KEY,name:"Insert row below",callback:function(key,selection){this.alter("insert_row",selection.end.row+1)},disabled:function(){var selected=getValidSelection(this);return!selected||this.selection.selectedHeader.cols||this.countRows()>=this.getSettings().maxRows},hidden:function(){return!this.getSettings().allowInsertRow}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},rowBelowItem:{get:function(){return rowBelowItem}},__esModule:{value:!0}});var $___46__46__47_utils__,getValidSelection=($___46__46__47_utils__=_dereq_("utils"),$___46__46__47_utils__&&$___46__46__47_utils__.__esModule&&$___46__46__47_utils__||{"default":$___46__46__47_utils__}).getValidSelection,KEY="row_below"},{utils:87}],85:[function(_dereq_,module,exports){function separatorItem(){return{name:KEY}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},separatorItem:{get:function(){return separatorItem}},__esModule:{value:!0}});var KEY="---------"},{}],86:[function(_dereq_,module,exports){function undoItem(){return{key:KEY,name:"Undo",callback:function(){this.undo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable()}}}Object.defineProperties(exports,{KEY:{get:function(){return KEY}},undoItem:{get:function(){return undoItem}},__esModule:{value:!0}});var KEY="undo"},{}],87:[function(_dereq_,module,exports){function normalizeSelection(selRange){return{start:selRange.getTopLeftCorner(),end:selRange.getBottomRightCorner()}}function isSeparator(cell){return hasClass(cell,"htSeparator")}function hasSubMenu(cell){return hasClass(cell,"htSubmenu")}function isDisabled(cell){return hasClass(cell,"htDisabled")}function isSelectionDisabled(cell){return hasClass(cell,"htSelectionDisabled")}function getValidSelection(hot){var selected=hot.getSelected();return selected?selected[0]<0?null:selected:null}function prepareVerticalAlignClass(className,alignment){return className.indexOf(alignment)!=-1?className:(className=className.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ",""),className+=" "+alignment)}function prepareHorizontalAlignClass(className,alignment){return className.indexOf(alignment)!=-1?className:(className=className.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ",""),className+=" "+alignment)}function getAlignmentClasses(range,callback){for(var classes={},row=range.from.row;row<=range.to.row;row++)for(var col=range.from.col;col<=range.to.col;col++)classes[row]||(classes[row]=[]),classes[row][col]=callback(row,col);return classes}function align(range,type,alignment,cellDescriptor){if(range.from.row==range.to.row&&range.from.col==range.to.col)applyAlignClassName(range.from.row,range.from.col,type,alignment,cellDescriptor);else for(var row=range.from.row;row<=range.to.row;row++)for(var col=range.from.col;col<=range.to.col;col++)applyAlignClassName(row,col,type,alignment,cellDescriptor)}function applyAlignClassName(row,col,type,alignment,cellDescriptor){var cellMeta=cellDescriptor(row,col),className=alignment;cellMeta.className&&(className="vertical"===type?prepareVerticalAlignClass(cellMeta.className,alignment):prepareHorizontalAlignClass(cellMeta.className,alignment)),cellMeta.className=className}function checkSelectionConsistency(range,comparator){var result=!1;return range&&range.forAll(function(row,col){if(comparator(row,col))return result=!0,!1}),result}function markLabelAsSelected(label){return'<span class="selected">'+String.fromCharCode(10003)+"</span>"+label}function isItemHidden(item,instance){return!item.hidden||!("function"==typeof item.hidden&&item.hidden.call(instance))}function shiftSeparators(items,separator){for(var result=items.slice(0),i=0;i<result.length&&result[i].name===separator;)result.shift();return result}function popSeparators(items,separator){var result=items.slice(0);return result.reverse(),result=shiftSeparators(result,separator),result.reverse(),result}function removeDuplicatedSeparators(items){var result=[];return arrayEach(items,function(value,index){index>0?result[result.length-1].name!==value.name&&result.push(value):result.push(value)}),result}function filterSeparators(items){var separator=void 0!==arguments[1]?arguments[1]:SEPARATOR,result=items.slice(0);return result=shiftSeparators(result,separator),result=popSeparators(result,separator),result=removeDuplicatedSeparators(result)}Object.defineProperties(exports,{normalizeSelection:{get:function(){return normalizeSelection}},isSeparator:{get:function(){return isSeparator}},hasSubMenu:{get:function(){return hasSubMenu}},isDisabled:{get:function(){return isDisabled}},isSelectionDisabled:{get:function(){return isSelectionDisabled}},getValidSelection:{get:function(){return getValidSelection}},prepareVerticalAlignClass:{get:function(){return prepareVerticalAlignClass}},prepareHorizontalAlignClass:{get:function(){return prepareHorizontalAlignClass}},getAlignmentClasses:{get:function(){return getAlignmentClasses}},align:{get:function(){return align}},checkSelectionConsistency:{get:function(){return checkSelectionConsistency}},markLabelAsSelected:{get:function(){return markLabelAsSelected}},isItemHidden:{get:function(){return isItemHidden}},filterSeparators:{get:function(){return filterSeparators}},__esModule:{value:!0}});var $___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$__predefinedItems_47_separator__,arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,hasClass=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}).hasClass,SEPARATOR=($__predefinedItems_47_separator__=_dereq_("predefinedItems/separator"),$__predefinedItems_47_separator__&&$__predefinedItems_47_separator__.__esModule&&$__predefinedItems_47_separator__||{"default":$__predefinedItems_47_separator__}).KEY},{"helpers/array":43,"helpers/dom/element":47,"predefinedItems/separator":85}],88:[function(_dereq_,module,exports){Object.defineProperties(exports,{ContextMenuCopyPaste:{get:function(){return ContextMenuCopyPaste}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_plugins__,$___46__46__47__95_base__,$__zeroclipboard__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],removeClass=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}).removeClass,arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,EventManager=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).EventManager,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,BasePlugin=($___46__46__47__95_base__=_dereq_("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{"default":$___46__46__47__95_base__})["default"],ZeroClipboard=($__zeroclipboard__=_dereq_("zeroclipboard"),$__zeroclipboard__&&$__zeroclipboard__.__esModule&&$__zeroclipboard__||{"default":$__zeroclipboard__})["default"],ContextMenuCopyPaste=function(hotInstance){$traceurRuntime.superConstructor($ContextMenuCopyPaste).call(this,hotInstance),this.eventManager=new EventManager(this),this.swfPath=null,this.outsideClickDeselectsCache=null},$ContextMenuCopyPaste=ContextMenuCopyPaste;$traceurRuntime.createClass(ContextMenuCopyPaste,{isEnabled:function(){return this.hot.getSettings().contextMenuCopyPaste},enablePlugin:function(){var $__7=this;if(!this.enabled){"object"===_typeof(this.hot.getSettings().contextMenuCopyPaste)&&(this.swfPath=this.hot.getSettings().contextMenuCopyPaste.swfPath),"undefined"==typeof ZeroClipboard&&console.error("To be able to use the Copy/Paste feature from the context menu, you need to manually include ZeroClipboard.js file to your website.");try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(exception){"undefined"==typeof navigator.mimeTypes["application/x-shockwave-flash"]&&console.error("To be able to use the Copy/Paste feature from the context menu, your browser needs to have Flash Plugin installed.")}this.swfPath&&ZeroClipboard.config({swfPath:this.swfPath}),this.hot.addHook("afterContextMenuShow",function(){return $__7.onAfterContextMenuShow()}),this.hot.addHook("afterContextMenuDefaultOptions",function(options){return $__7.onAfterContextMenuDefaultOptions(options)}),this.registerEvents(),$traceurRuntime.superGet(this,$ContextMenuCopyPaste.prototype,"enablePlugin").call(this)}},disablePlugin:function(){$traceurRuntime.superGet(this,$ContextMenuCopyPaste.prototype,"disablePlugin").call(this)},registerEvents:function(){var $__7=this;this.eventManager.addEventListener(document,"mouseenter",function(){return $__7.removeCurrentClass()}),this.eventManager.addEventListener(document,"mouseleave",function(){return $__7.removeZeroClipboardClass()})},getCopyValue:function(){return this.hot.copyPaste.setCopyableText(),this.hot.copyPaste.copyPasteInstance.elTextarea.value},onAfterContextMenuDefaultOptions:function(defaultOptions){defaultOptions.items.unshift({key:"copy",name:"Copy",disabled:function(){return this.selection.selectedHeader.corner}},{key:"paste",name:"Paste",callback:function(){this.copyPaste.triggerPaste()},disabled:function(){return this.selection.selectedHeader.corner}},Handsontable.plugins.ContextMenu.SEPARATOR)},onAfterContextMenuShow:function(){var $__7=this,contextMenu=this.hot.getPlugin("contextMenu"),data=contextMenu.menu.hotMenu.getSourceData();arrayEach(data,function(item,index){if("copy"===item.key){var zeroClipboardInstance=new ZeroClipboard(contextMenu.menu.hotMenu.getCell(index,0));return zeroClipboardInstance.off(),zeroClipboardInstance.on("copy",function(event){var clipboard=event.clipboardData;clipboard.setData("text/plain",$__7.getCopyValue()),$__7.hot.getSettings().outsideClickDeselects=$__7.outsideClickDeselectsCache}),!1}})},removeCurrentClass:function(){var contextMenu=this.hot.getPlugin("contextMenu");if(contextMenu.menu.isOpened()){var element=contextMenu.menu.hotMenu.rootElement.querySelector("td.current");element&&removeClass(element,"current")}this.outsideClickDeselectsCache=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1},removeZeroClipboardClass:function(){var contextMenu=this.hot.getPlugin("contextMenu");if(contextMenu.menu.isOpened()){var element=contextMenu.menu.hotMenu.rootElement.querySelector("td.zeroclipboard-is-hover");element&&removeClass(element,"zeroclipboard-is-hover")}this.hot.getSettings().outsideClickDeselects=this.outsideClickDeselectsCache}},{},BasePlugin),registerPlugin("contextMenuCopyPaste",ContextMenuCopyPaste)},{_base:62,browser:24,eventManager:42,"helpers/array":43,"helpers/dom/element":47,plugins:61,zeroclipboard:"zeroclipboard"}],89:[function(_dereq_,module,exports){function CopyPastePlugin(instance){function onCut(){instance.isListening()&&instance.selection.empty()}function onPaste(str){var input,inputArray,selected,coordsFrom,coordsTo,cellRange,topLeftCorner,bottomRightCorner,areaStart,areaEnd;if(instance.isListening()&&instance.selection.isSelected()){input=str,inputArray=SheetClip.parse(input),selected=instance.getSelected(),coordsFrom=new WalkontableCellCoords(selected[0],selected[1]),coordsTo=new WalkontableCellCoords(selected[2],selected[3]),cellRange=new WalkontableCellRange(coordsFrom,coordsFrom,coordsTo),topLeftCorner=cellRange.getTopLeftCorner(),bottomRightCorner=cellRange.getBottomRightCorner(),areaStart=topLeftCorner,areaEnd=new WalkontableCellCoords(Math.max(bottomRightCorner.row,inputArray.length-1+topLeftCorner.row),Math.max(bottomRightCorner.col,inputArray[0].length-1+topLeftCorner.col));var isSelRowAreaCoverInputValue=coordsTo.row-coordsFrom.row>=inputArray.length-1,isSelColAreaCoverInputValue=coordsTo.col-coordsFrom.col>=inputArray[0].length-1;instance.addHookOnce("afterChange",function(changes,source){var changesLength=changes?changes.length:0;if(changesLength){var offset={row:0,col:0},highestColumnIndex=-1;arrayEach(changes,function(change,index){var nextChange=changesLength>index+1?changes[index+1]:null;nextChange&&(isSelRowAreaCoverInputValue||(offset.row=offset.row+Math.max(nextChange[0]-change[0]-1,0)),!isSelColAreaCoverInputValue&&change[1]>highestColumnIndex&&(highestColumnIndex=change[1],offset.col=offset.col+Math.max(nextChange[1]-change[1]-1,0)))}),instance.selectCell(areaStart.row,areaStart.col,areaEnd.row+offset.row,areaEnd.col+offset.col)}}),instance.populateFromArray(areaStart.row,areaStart.col,inputArray,areaEnd.row,areaEnd.col,"paste",instance.getSettings().pasteMode)}}function onBeforeKeyDown(event){if(instance.getSelected()&&!(instance.getActiveEditor()&&instance.getActiveEditor().isOpened()||isImmediatePropagationStopped(event))){if(isCtrlKey(event.keyCode)){if(instance.getSettings().fragmentSelection&&getSelectionText())return;return _this.setCopyableText(),void stopImmediatePropagation(event)}var ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;event.keyCode==KEY_CODES.A&&ctrlDown&&instance._registerTimeout(setTimeout(proxy(_this.setCopyableText,_this),0))}}var _this=this;this.copyPasteInstance=copyPaste(),this.copyPasteInstance.onCut(onCut),this.copyPasteInstance.onPaste(onPaste),this.onPaste=onPaste,instance.addHook("beforeKeyDown",onBeforeKeyDown),this.destroy=function(){this.copyPasteInstance&&(this.copyPasteInstance.removeCallback(onCut),this.copyPasteInstance.removeCallback(onPaste),this.copyPasteInstance.destroy(),this.copyPasteInstance=null),instance.removeHook("beforeKeyDown",onBeforeKeyDown)},instance.addHook("afterDestroy",proxy(this.destroy,this)),this.triggerPaste=proxy(this.copyPasteInstance.triggerPaste,this.copyPasteInstance),this.triggerCut=proxy(this.copyPasteInstance.triggerCut,this.copyPasteInstance),this.setCopyableText=function(){var settings=instance.getSettings(),copyRowsLimit=settings.copyRowsLimit,copyColsLimit=settings.copyColsLimit,selRange=instance.getSelectedRange(),topLeft=selRange.getTopLeftCorner(),bottomRight=selRange.getBottomRightCorner(),startRow=topLeft.row,startCol=topLeft.col,endRow=bottomRight.row,endCol=bottomRight.col,finalEndRow=Math.min(endRow,startRow+copyRowsLimit-1),finalEndCol=Math.min(endCol,startCol+copyColsLimit-1),copyableRanges=[];copyableRanges.push({startRow:startRow,startCol:startCol,endRow:finalEndRow,endCol:finalEndCol}),copyableRanges=Handsontable.hooks.run(instance,"modifyCopyableRange",copyableRanges);var copyableData=this.getRangedCopyableData(copyableRanges);instance.copyPaste.copyPasteInstance.copyable(copyableData),endRow===finalEndRow&&endCol===finalEndCol||Handsontable.hooks.run(instance,"afterCopyLimit",endRow-startRow+1,endCol-startCol+1,copyRowsLimit,copyColsLimit)},this.getRangedCopyableData=function(ranges){var dataSet=[],copyableRows=[],copyableColumns=[];return arrayEach(ranges,function(range){rangeEach(range.startRow,range.endRow,function(row){copyableRows.indexOf(row)===-1&&copyableRows.push(row)}),rangeEach(range.startCol,range.endCol,function(column){copyableColumns.indexOf(column)===-1&&copyableColumns.push(column)})}),arrayEach(copyableRows,function(row){var rowSet=[];arrayEach(copyableColumns,function(column){rowSet.push(instance.getCopyableData(row,column))}),dataSet.push(rowSet)}),SheetClip.stringify(dataSet)}}function init(){var instance=this,pluginEnabled=instance.getSettings().copyPaste!==!1;pluginEnabled&&!instance.copyPaste?instance.copyPaste=new CopyPastePlugin(instance):!pluginEnabled&&instance.copyPaste&&(instance.copyPaste.destroy(),instance.copyPaste=null)}Object.defineProperties(exports,{CopyPastePlugin:{get:function(){return CopyPastePlugin}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$__copyPaste__,$__SheetClip__,$___46__46__47__46__46__47_helpers_47_unicode__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_function__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],copyPaste=($__copyPaste__=_dereq_("copyPaste"),$__copyPaste__&&$__copyPaste__.__esModule&&$__copyPaste__||{"default":$__copyPaste__})["default"],SheetClip=($__SheetClip__=_dereq_("SheetClip"),$__SheetClip__&&$__SheetClip__.__esModule&&$__SheetClip__||{"default":$__SheetClip__})["default"],$__3=($___46__46__47__46__46__47_helpers_47_unicode__=_dereq_("helpers/unicode"),$___46__46__47__46__46__47_helpers_47_unicode__&&$___46__46__47__46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47__46__46__47_helpers_47_unicode__||{"default":$___46__46__47__46__46__47_helpers_47_unicode__}),KEY_CODES=$__3.KEY_CODES,isCtrlKey=$__3.isCtrlKey,arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,rangeEach=($___46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47_helpers_47_number__}).rangeEach,$__6=($___46__46__47__46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_event__}),stopImmediatePropagation=$__6.stopImmediatePropagation,isImmediatePropagationStopped=$__6.isImmediatePropagationStopped,getSelectionText=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}).getSelectionText,proxy=($___46__46__47__46__46__47_helpers_47_function__=_dereq_("helpers/function"),$___46__46__47__46__46__47_helpers_47_function__&&$___46__46__47__46__46__47_helpers_47_function__.__esModule&&$___46__46__47__46__46__47_helpers_47_function__||{"default":$___46__46__47__46__46__47_helpers_47_function__}).proxy,WalkontableCellCoords=(($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=_dereq_("3rdparty/walkontable/src/cell/coords"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{"default":$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords),WalkontableCellRange=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__=_dereq_("3rdparty/walkontable/src/cell/range"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__||{"default":$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__}).WalkontableCellRange;Handsontable.hooks.add("afterInit",init),Handsontable.hooks.add("afterUpdateSettings",init),Handsontable.hooks.register("afterCopyLimit"),Handsontable.hooks.register("modifyCopyableRange")},{"3rdparty/walkontable/src/cell/coords":6,"3rdparty/walkontable/src/cell/range":7,SheetClip:"SheetClip",browser:24,copyPaste:"copyPaste","helpers/array":43,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/function":50,"helpers/number":52,"helpers/unicode":56,plugins:61}],90:[function(_dereq_,module,exports){function CustomBorders(){}var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__,instance,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],WalkontableCellRange=(($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__=_dereq_("3rdparty/walkontable/src/cell/range"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__||{"default":$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__}).WalkontableCellRange),WalkontableSelection=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__=_dereq_("3rdparty/walkontable/src/selection"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__||{"default":$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_selection__}).WalkontableSelection,checkEnable=function(customBorders){return"boolean"==typeof customBorders&&customBorders===!0||"object"===("undefined"==typeof customBorders?"undefined":_typeof(customBorders))&&customBorders.length>0},init=function(){checkEnable(this.getSettings().customBorders)&&(this.customBorders||(instance=this,this.customBorders=new CustomBorders))},getSettingIndex=function(className){for(var i=0;i<instance.view.wt.selections.length;i++)if(instance.view.wt.selections[i].settings.className==className)return i;return-1},insertBorderIntoSettings=function(border){var coordinates={row:border.row,col:border.col},selection=new WalkontableSelection(border,new WalkontableCellRange(coordinates,coordinates,coordinates)),index=getSettingIndex(border.className);index>=0?instance.view.wt.selections[index]=selection:instance.view.wt.selections.push(selection)},prepareBorderFromCustomAdded=function(row,col,borderObj){var border=createEmptyBorders(row,col);border=extendDefaultBorder(border,borderObj),this.setCellMeta(row,col,"borders",border),insertBorderIntoSettings(border)},prepareBorderFromCustomAddedRange=function(rowObj){for(var range=rowObj.range,row=range.from.row;row<=range.to.row;row++)for(var col=range.from.col;col<=range.to.col;col++){var border=createEmptyBorders(row,col),add=0;row==range.from.row&&(add++,rowObj.hasOwnProperty("top")&&(border.top=rowObj.top)),row==range.to.row&&(add++,rowObj.hasOwnProperty("bottom")&&(border.bottom=rowObj.bottom)),col==range.from.col&&(add++,rowObj.hasOwnProperty("left")&&(border.left=rowObj.left)),col==range.to.col&&(add++,rowObj.hasOwnProperty("right")&&(border.right=rowObj.right)),add>0&&(this.setCellMeta(row,col,"borders",border),insertBorderIntoSettings(border))}},createClassName=function(row,col){return"border_row"+row+"col"+col},createDefaultCustomBorder=function(){return{width:1,color:"#000"}},createSingleEmptyBorder=function(){return{hide:!0}},createDefaultHtBorder=function(){return{width:1,color:"#000",cornerVisible:!1}},createEmptyBorders=function(row,col){return{className:createClassName(row,col),border:createDefaultHtBorder(),row:row,col:col,top:createSingleEmptyBorder(),right:createSingleEmptyBorder(),bottom:createSingleEmptyBorder(),left:createSingleEmptyBorder()}},extendDefaultBorder=function(defaultBorder,customBorder){return customBorder.hasOwnProperty("border")&&(defaultBorder.border=customBorder.border),customBorder.hasOwnProperty("top")&&(defaultBorder.top=customBorder.top),customBorder.hasOwnProperty("right")&&(defaultBorder.right=customBorder.right),customBorder.hasOwnProperty("bottom")&&(defaultBorder.bottom=customBorder.bottom),customBorder.hasOwnProperty("left")&&(defaultBorder.left=customBorder.left),defaultBorder},removeBordersFromDom=function(borderClassName){for(var borders=document.querySelectorAll("."+borderClassName),i=0;i<borders.length;i++)if(borders[i]&&"TD"!=borders[i].nodeName){var parent=borders[i].parentNode;parent.parentNode&&parent.parentNode.removeChild(parent)}},removeAllBorders=function(row,col){var borderClassName=createClassName(row,col);removeBordersFromDom(borderClassName),this.removeCellMeta(row,col,"borders")},setBorder=function(row,col,place,remove){var bordersMeta=this.getCellMeta(row,col).borders;bordersMeta&&void 0!=bordersMeta.border||(bordersMeta=createEmptyBorders(row,col)),remove?bordersMeta[place]=createSingleEmptyBorder():bordersMeta[place]=createDefaultCustomBorder(),this.setCellMeta(row,col,"borders",bordersMeta);var borderClassName=createClassName(row,col);removeBordersFromDom(borderClassName),insertBorderIntoSettings(bordersMeta),this.render()},prepareBorder=function(range,place,remove){if(range.from.row==range.to.row&&range.from.col==range.to.col)"noBorders"==place?removeAllBorders.call(this,range.from.row,range.from.col):setBorder.call(this,range.from.row,range.from.col,place,remove);else switch(place){case"noBorders":for(var column=range.from.col;column<=range.to.col;column++)for(var row=range.from.row;row<=range.to.row;row++)removeAllBorders.call(this,row,column);break;case"top":
for(var topCol=range.from.col;topCol<=range.to.col;topCol++)setBorder.call(this,range.from.row,topCol,place,remove);break;case"right":for(var rowRight=range.from.row;rowRight<=range.to.row;rowRight++)setBorder.call(this,rowRight,range.to.col,place);break;case"bottom":for(var bottomCol=range.from.col;bottomCol<=range.to.col;bottomCol++)setBorder.call(this,range.to.row,bottomCol,place);break;case"left":for(var rowLeft=range.from.row;rowLeft<=range.to.row;rowLeft++)setBorder.call(this,rowLeft,range.from.col,place)}},checkSelectionBorders=function(hot,direction){var atLeastOneHasBorder=!1;return hot.getSelectedRange().forAll(function(r,c){var metaBorders=hot.getCellMeta(r,c).borders;if(metaBorders){if(!direction)return atLeastOneHasBorder=!0,!1;if(!metaBorders[direction].hasOwnProperty("hide"))return atLeastOneHasBorder=!0,!1}}),atLeastOneHasBorder},markSelected=function(label){return'<span class="selected">'+String.fromCharCode(10003)+"</span>"+label},addBordersOptionsToContextMenu=function(defaultOptions){this.getSettings().customBorders&&(defaultOptions.items.push(Handsontable.plugins.ContextMenu.SEPARATOR),defaultOptions.items.push({key:"borders",name:"Borders",disabled:function(){return this.selection.selectedHeader.corner},submenu:{items:[{key:"borders:top",name:function(){var label="Top",hasBorder=checkSelectionBorders(this,"top");return hasBorder&&(label=markSelected(label)),label},callback:function(){var hasBorder=checkSelectionBorders(this,"top");prepareBorder.call(this,this.getSelectedRange(),"top",hasBorder)}},{key:"borders:right",name:function(){var label="Right",hasBorder=checkSelectionBorders(this,"right");return hasBorder&&(label=markSelected(label)),label},callback:function(){var hasBorder=checkSelectionBorders(this,"right");prepareBorder.call(this,this.getSelectedRange(),"right",hasBorder)}},{key:"borders:bottom",name:function(){var label="Bottom",hasBorder=checkSelectionBorders(this,"bottom");return hasBorder&&(label=markSelected(label)),label},callback:function(){var hasBorder=checkSelectionBorders(this,"bottom");prepareBorder.call(this,this.getSelectedRange(),"bottom",hasBorder)}},{key:"borders:left",name:function(){var label="Left",hasBorder=checkSelectionBorders(this,"left");return hasBorder&&(label=markSelected(label)),label},callback:function(){var hasBorder=checkSelectionBorders(this,"left");prepareBorder.call(this,this.getSelectedRange(),"left",hasBorder)}},{key:"borders:no_borders",name:"Remove border(s)",callback:function(){prepareBorder.call(this,this.getSelectedRange(),"noBorders")},disabled:function(){return!checkSelectionBorders(this)}}]}}))};Handsontable.hooks.add("beforeInit",init),Handsontable.hooks.add("afterContextMenuDefaultOptions",addBordersOptionsToContextMenu),Handsontable.hooks.add("afterInit",function(){var customBorders=this.getSettings().customBorders;if(customBorders){for(var i=0;i<customBorders.length;i++)customBorders[i].range?prepareBorderFromCustomAddedRange.call(this,customBorders[i]):prepareBorderFromCustomAdded.call(this,customBorders[i].row,customBorders[i].col,customBorders[i]);this.render(),this.view.wt.draw(!0)}}),Handsontable.CustomBorders=CustomBorders},{"3rdparty/walkontable/src/cell/range":7,"3rdparty/walkontable/src/selection":19,browser:24,plugins:61}],91:[function(_dereq_,module,exports){function DragToScroll(){this.boundaries=null,this.callback=null}Object.defineProperties(exports,{DragToScroll:{get:function(){return DragToScroll}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_plugins__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],eventManagerObject=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).eventManager;($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin;Handsontable.plugins.DragToScroll=DragToScroll,DragToScroll.prototype.setBoundaries=function(boundaries){this.boundaries=boundaries},DragToScroll.prototype.setCallback=function(callback){this.callback=callback},DragToScroll.prototype.check=function(x,y){var diffX=0,diffY=0;y<this.boundaries.top?diffY=y-this.boundaries.top:y>this.boundaries.bottom&&(diffY=y-this.boundaries.bottom),x<this.boundaries.left?diffX=x-this.boundaries.left:x>this.boundaries.right&&(diffX=x-this.boundaries.right),this.callback(diffX,diffY)};var dragToScroll,setupListening=function(instance){instance.dragToScrollListening=!1;var scrollHandler=instance.view.wt.wtTable.holder;dragToScroll=new DragToScroll,scrollHandler!==window&&(dragToScroll.setBoundaries(scrollHandler.getBoundingClientRect()),dragToScroll.setCallback(function(scrollX,scrollY){scrollX<0?scrollHandler.scrollLeft-=50:scrollX>0&&(scrollHandler.scrollLeft+=50),scrollY<0?scrollHandler.scrollTop-=20:scrollY>0&&(scrollHandler.scrollTop+=20)}),instance.dragToScrollListening=!0)};Handsontable.hooks.add("afterInit",function(){var instance=this,eventManager=eventManagerObject(this);eventManager.addEventListener(document,"mouseup",function(){instance.dragToScrollListening=!1}),eventManager.addEventListener(document,"mousemove",function(event){instance.dragToScrollListening&&dragToScroll.check(event.clientX,event.clientY)})}),Handsontable.hooks.add("afterDestroy",function(){eventManagerObject(this).clear()}),Handsontable.hooks.add("afterOnCellMouseDown",function(){setupListening(this)}),Handsontable.hooks.add("afterOnCellCornerMouseDown",function(){setupListening(this)}),Handsontable.plugins.DragToScroll=DragToScroll},{browser:24,eventManager:42,plugins:61}],92:[function(_dereq_,module,exports){function freezeColumnItem(manualColumnFreezePlugin){return{key:"freeze_column",name:"Freeze this column",callback:function(){var selectedColumn=this.getSelectedRange().from.col;manualColumnFreezePlugin.freezeColumn(selectedColumn),this.render(),this.view.wt.wtOverlays.adjustElementsSize(!0)},hidden:function(){var selection=this.getSelectedRange(),hide=!1;return void 0===selection?hide=!0:(selection.from.col!==selection.to.col||selection.from.col<=this.getSettings().fixedColumnsLeft-1)&&(hide=!0),hide}}}Object.defineProperties(exports,{freezeColumnItem:{get:function(){return freezeColumnItem}},__esModule:{value:!0}})},{}],93:[function(_dereq_,module,exports){function unfreezeColumnItem(manualColumnFreezePlugin){return{key:"unfreeze_column",name:"Unfreeze this column",callback:function(){var selectedColumn=this.getSelectedRange().from.col;manualColumnFreezePlugin.unfreezeColumn(selectedColumn),this.render(),this.view.wt.wtOverlays.adjustElementsSize(!0)},hidden:function(){var selection=this.getSelectedRange(),hide=!1;return void 0===selection?hide=!0:(selection.from.col!==selection.to.col||selection.from.col>=this.getSettings().fixedColumnsLeft)&&(hide=!0),hide}}}Object.defineProperties(exports,{unfreezeColumnItem:{get:function(){return unfreezeColumnItem}},__esModule:{value:!0}})},{}],94:[function(_dereq_,module,exports){Object.defineProperties(exports,{ManualColumnFreeze:{get:function(){return ManualColumnFreeze}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__95_base__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_helpers_47_array__,$__contextMenuItem_47_freezeColumn__,$__contextMenuItem_47_unfreezeColumn__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],BasePlugin=($___46__46__47__95_base__=_dereq_("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{"default":$___46__46__47__95_base__})["default"],registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,freezeColumnItem=($__contextMenuItem_47_freezeColumn__=_dereq_("contextMenuItem/freezeColumn"),$__contextMenuItem_47_freezeColumn__&&$__contextMenuItem_47_freezeColumn__.__esModule&&$__contextMenuItem_47_freezeColumn__||{"default":$__contextMenuItem_47_freezeColumn__}).freezeColumnItem,unfreezeColumnItem=($__contextMenuItem_47_unfreezeColumn__=_dereq_("contextMenuItem/unfreezeColumn"),$__contextMenuItem_47_unfreezeColumn__&&$__contextMenuItem_47_unfreezeColumn__.__esModule&&$__contextMenuItem_47_unfreezeColumn__||{"default":$__contextMenuItem_47_unfreezeColumn__}).unfreezeColumnItem,privatePool=new WeakMap,ManualColumnFreeze=function(hotInstance){$traceurRuntime.superConstructor($ManualColumnFreeze).call(this,hotInstance),privatePool.set(this,{moveByFreeze:!1,afterFirstUse:!1}),this.frozenColumnsBasePositions=[],this.manualColumnMovePlugin=void 0},$ManualColumnFreeze=ManualColumnFreeze;$traceurRuntime.createClass(ManualColumnFreeze,{isEnabled:function(){return!!this.hot.getSettings().manualColumnFreeze},enablePlugin:function(){var $__6=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",function(options){return $__6.addContextMenuEntry(options)}),this.addHook("afterInit",function(){return $__6.onAfterInit()}),this.addHook("beforeColumnMove",function(rows,target){return $__6.onBeforeColumnMove(rows,target)}),$traceurRuntime.superGet(this,$ManualColumnFreeze.prototype,"enablePlugin").call(this))},disablePlugin:function(){var priv=privatePool.get(this);priv.afterFirstUse=!1,priv.moveByFreeze=!1,$traceurRuntime.superGet(this,$ManualColumnFreeze.prototype,"disablePlugin").call(this)},updatePlugin:function(){this.disablePlugin(),this.enablePlugin(),$traceurRuntime.superGet(this,$ManualColumnFreeze.prototype,"updatePlugin").call(this)},freezeColumn:function(column){var priv=privatePool.get(this),settings=this.hot.getSettings();priv.afterFirstUse||(priv.afterFirstUse=!0),settings.fixedColumnsLeft===this.hot.countCols()||column<=settings.fixedColumnsLeft-1||(priv.moveByFreeze=!0,column!==this.getMovePlugin().columnsMapper.getValueByIndex(column)&&(this.frozenColumnsBasePositions[settings.fixedColumnsLeft]=column),this.getMovePlugin().moveColumn(column,settings.fixedColumnsLeft++))},unfreezeColumn:function(column){var priv=privatePool.get(this),settings=this.hot.getSettings();if(priv.afterFirstUse||(priv.afterFirstUse=!0),!(settings.fixedColumnsLeft<=0||column>settings.fixedColumnsLeft-1)){var returnCol=this.getBestColumnReturnPosition(column);priv.moveByFreeze=!0,settings.fixedColumnsLeft--,this.getMovePlugin().moveColumn(column,returnCol+1)}},getMovePlugin:function(){return this.manualColumnMovePlugin||(this.manualColumnMovePlugin=this.hot.getPlugin("manualColumnMove")),this.manualColumnMovePlugin},getBestColumnReturnPosition:function(column){var initialCol,movePlugin=this.getMovePlugin(),settings=this.hot.getSettings(),i=settings.fixedColumnsLeft,j=movePlugin.columnsMapper.getValueByIndex(i);if(null==this.frozenColumnsBasePositions[column])for(initialCol=movePlugin.columnsMapper.getValueByIndex(column);j<initialCol;)i++,j=movePlugin.columnsMapper.getValueByIndex(i);else{for(initialCol=this.frozenColumnsBasePositions[column],this.frozenColumnsBasePositions[column]=void 0;j<=initialCol;)i++,j=movePlugin.columnsMapper.getValueByIndex(i);i=j}return i-1},addContextMenuEntry:function(options){options.items.push(Handsontable.plugins.ContextMenu.SEPARATOR,freezeColumnItem(this),unfreezeColumnItem(this))},onAfterInit:function(){this.getMovePlugin().isEnabled()||this.getMovePlugin().enablePlugin()},onBeforeColumnMove:function(rows,target){var priv=privatePool.get(this);if(priv.afterFirstUse&&!priv.moveByFreeze){var frozenLen=this.hot.getSettings().fixedColumnsLeft,disallowMoving=target<frozenLen;if(disallowMoving||arrayEach(rows,function(value,index,array){if(value<frozenLen)return disallowMoving=!0,!1}),disallowMoving)return!1}priv.moveByFreeze&&(priv.moveByFreeze=!1)},destroy:function(){$traceurRuntime.superGet(this,$ManualColumnFreeze.prototype,"destroy").call(this)}},{},BasePlugin),registerPlugin("manualColumnFreeze",ManualColumnFreeze)},{_base:62,browser:24,"contextMenuItem/freezeColumn":92,"contextMenuItem/unfreezeColumn":93,"helpers/array":43,plugins:61}],95:[function(_dereq_,module,exports){Object.defineProperties(exports,{ColumnsMapper:{get:function(){return ColumnsMapper}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_mixins_47_arrayMapper__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_number__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],arrayMapper=($___46__46__47__46__46__47_mixins_47_arrayMapper__=_dereq_("mixins/arrayMapper"),$___46__46__47__46__46__47_mixins_47_arrayMapper__&&$___46__46__47__46__46__47_mixins_47_arrayMapper__.__esModule&&$___46__46__47__46__46__47_mixins_47_arrayMapper__||{"default":$___46__46__47__46__46__47_mixins_47_arrayMapper__}).arrayMapper,arrayFilter=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayFilter,mixin=($___46__46__47__46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{"default":$___46__46__47__46__46__47_helpers_47_object__}).mixin,rangeEach=($___46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47_helpers_47_number__}).rangeEach,ColumnsMapper=function(manualColumnMove){this.manualColumnMove=manualColumnMove};$traceurRuntime.createClass(ColumnsMapper,{createMap:function(length){var $__5=this,originLength=void 0===length?this._arrayMap.length:length;this._arrayMap.length=0,rangeEach(originLength-1,function(itemIndex){$__5._arrayMap[itemIndex]=itemIndex})},destroy:function(){this._arrayMap=null},moveColumn:function(from,to){var indexToMove=this._arrayMap[from];this._arrayMap[from]=null,this._arrayMap.splice(to,0,indexToMove)},clearNull:function(){this._arrayMap=arrayFilter(this._arrayMap,function(i){return null!==i})}},{}),mixin(ColumnsMapper,arrayMapper),Handsontable.utils.ManualColumnMoveColumnsMapper=ColumnsMapper},{browser:24,"helpers/array":43,"helpers/number":52,"helpers/object":53,"mixins/arrayMapper":57}],96:[function(_dereq_,module,exports){Object.defineProperties(exports,{ManualColumnMove:{get:function(){return ManualColumnMove}},__esModule:{value:!0}});var $___46__46__47__95_base_46_js__,$___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_plugins__,$__columnsMapper__,$__ui_47_backlight__,$__ui_47_guideline__,BasePlugin=($___46__46__47__95_base_46_js__=_dereq_("_base.js"),$___46__46__47__95_base_46_js__&&$___46__46__47__95_base_46_js__.__esModule&&$___46__46__47__95_base_46_js__||{"default":$___46__46__47__95_base_46_js__})["default"],Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,$__3=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__3.addClass,removeClass=$__3.removeClass,offset=$__3.offset,rangeEach=($___46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47_helpers_47_number__}).rangeEach,eventManagerObject=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).eventManager,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,ColumnsMapper=($__columnsMapper__=_dereq_("columnsMapper"),$__columnsMapper__&&$__columnsMapper__.__esModule&&$__columnsMapper__||{"default":$__columnsMapper__}).ColumnsMapper,BacklightUI=($__ui_47_backlight__=_dereq_("ui/backlight"),$__ui_47_backlight__&&$__ui_47_backlight__.__esModule&&$__ui_47_backlight__||{"default":$__ui_47_backlight__}).BacklightUI,GuidelineUI=($__ui_47_guideline__=_dereq_("ui/guideline"),$__ui_47_guideline__&&$__ui_47_guideline__.__esModule&&$__ui_47_guideline__||{"default":$__ui_47_guideline__}).GuidelineUI,privatePool=new WeakMap,CSS_PLUGIN="ht__manualColumnMove",CSS_SHOW_UI="show-ui",CSS_ON_MOVING="on-moving--columns",CSS_AFTER_SELECTION="after-selection--columns",ManualColumnMove=function(hotInstance){$traceurRuntime.superConstructor($ManualColumnMove).call(this,hotInstance),privatePool.set(this,{columnsToMove:[],pressed:void 0,disallowMoving:void 0,target:{eventPageX:void 0,coords:void 0,TD:void 0,col:void 0}}),this.removedColumns=[],this.columnsMapper=new ColumnsMapper(this),this.eventManager=eventManagerObject(this),this.backlight=new BacklightUI(hotInstance),this.guideline=new GuidelineUI(hotInstance)},$ManualColumnMove=ManualColumnMove;$traceurRuntime.createClass(ManualColumnMove,{isEnabled:function(){return!!this.hot.getSettings().manualColumnMove},enablePlugin:function(){var $__10=this;if(!this.enabled){var countCols=this.hot.countCols(),columnsMapperLen=this.columnsMapper._arrayMap.length;if(0===columnsMapperLen)this.columnsMapper.createMap(this.hot.countSourceCols()||this.hot.getSettings().startCols);else if(columnsMapperLen<countCols){var diff=countCols-columnsMapperLen;this.columnsMapper.insertItems(columnsMapperLen,diff)}else if(columnsMapperLen>countCols){var maxIndex=countCols-1,columnsToRemove=[];arrayEach(this.columnsMapper._arrayMap,function(value,index,array){value>maxIndex&&columnsToRemove.push(index)}),this.columnsMapper.removeItems(columnsToRemove)}this.addHook("beforeOnCellMouseDown",function(event,coords,TD,blockCalculations){return $__10.onBeforeOnCellMouseDown(event,coords,TD,blockCalculations)}),this.addHook("beforeOnCellMouseOver",function(event,coords,TD,blockCalculations){return $__10.onBeforeOnCellMouseOver(event,coords,TD,blockCalculations)}),this.addHook("afterScrollVertically",function(){return $__10.onAfterScrollVertically()}),this.addHook("modifyCol",function(row,source){return $__10.onModifyCol(row,source)}),this.addHook("beforeRemoveCol",function(index,amount){return $__10.onBeforeRemoveCol(index,amount)}),this.addHook("afterRemoveCol",function(index,amount){return $__10.onAfterRemoveCol(index,amount)}),this.addHook("afterCreateCol",function(index,amount){return $__10.onAfterCreateCol(index,amount)}),this.addHook("unmodifyCol",function(column){return $__10.onUnmodifyCol(column)}),this.initialSettings(),this.backlight.build(),this.guideline.build(),this.registerEvents(),addClass(this.hot.rootElement,CSS_PLUGIN),$traceurRuntime.superGet(this,$ManualColumnMove.prototype,"enablePlugin").call(this)}},updatePlugin:function(){this.disablePlugin(),this.enablePlugin(),$traceurRuntime.superGet(this,$ManualColumnMove.prototype,"updatePlugin").call(this)},disablePlugin:function(){var pluginSettings=this.hot.getSettings().manualColumnMove;Array.isArray(pluginSettings)&&this.columnsMapper.clearMap(),removeClass(this.hot.rootElement,CSS_PLUGIN),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),$traceurRuntime.superGet(this,$ManualColumnMove.prototype,"disablePlugin").call(this)},moveColumn:function(column,target){this.moveColumns([column],target)},moveColumns:function(columns,target){var $__10=this,priv=privatePool.get(this),beforeColumnHook=this.hot.runHooks("beforeColumnMove",columns,target);priv.disallowMoving=!beforeColumnHook,beforeColumnHook!==!1&&(arrayEach(columns,function(column,index,array){array[index]=$__10.columnsMapper.getValueByIndex(column)}),arrayEach(columns,function(column,index){var actualPosition=$__10.columnsMapper.getIndexByValue(column);actualPosition!==target&&$__10.columnsMapper.moveColumn(actualPosition,target+index)}),this.columnsMapper.clearNull()),this.hot.runHooks("afterColumnMove",columns,target)},changeSelection:function(startColumn,endColumn){var selection=this.hot.selection,lastRowIndex=this.hot.countRows()-1;selection.setRangeStartOnly(new WalkontableCellCoords(0,startColumn)),selection.setRangeEnd(new WalkontableCellCoords(lastRowIndex,endColumn),!1)},getColumnsWidth:function(from,to){for(var width=0,i=from;i<to;i++){var columnWidth=this.hot.view.wt.wtTable.getStretchedColumnWidth(i);width+=columnWidth}return width},initialSettings:function(){var pluginSettings=this.hot.getSettings().manualColumnMove;if(Array.isArray(pluginSettings))this.moveColumns(pluginSettings,0);else if(void 0!==pluginSettings){var persistentState=this.persistentStateLoad();persistentState.length&&this.moveColumns(persistentState,0)}},isFixedColumnsLeft:function(column){return column<this.hot.getSettings().fixedColumnsLeft},persistentStateSave:function(){Handsontable.hooks.run(this.hot,"persistentStateSave","manualColumnMove",this.columnsMapper._arrayMap)},persistentStateLoad:function(){var storedState={};return Handsontable.hooks.run(this.hot,"persistentStateLoad","manualColumnsMove",storedState),storedState.value?storedState.value:[]},prepareColumnsToMoving:function(){var selection=this.hot.getSelectedRange(),selectedColumns=[];if(!selection)return selectedColumns;var $__12=selection,from=$__12.from,to=$__12.to,start=Math.min(from.col,to.col),end=Math.max(from.col,to.col);return rangeEach(start,end,function(i){selectedColumns.push(i)}),selectedColumns},refreshPositions:function(){var priv=privatePool.get(this),coords=priv.target.coords,firstVisible=this.hot.view.wt.wtTable.getFirstVisibleColumn(),lastVisible=this.hot.view.wt.wtTable.getLastVisibleColumn(),fixedColumns=this.hot.getSettings().fixedColumnsLeft,countCols=this.hot.countCols();coords.col<fixedColumns&&firstVisible>0&&this.hot.scrollViewportTo(void 0,firstVisible-1),coords.col>=lastVisible&&lastVisible<countCols&&this.hot.scrollViewportTo(void 0,lastVisible+1,void 0,!0);var isRowHeader=!!this.hot.getSettings().rowHeaders,wtTable=this.hot.view.wt.wtTable,TD=priv.target.TD,rootElementOffset=offset(this.hot.rootElement),tdOffsetLeft=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,coords.col),mouseOffsetLeft=priv.target.eventPageX-rootElementOffset.left+wtTable.holder.scrollLeft,hiderWidth=wtTable.hider.offsetWidth,tbodyOffsetLeft=wtTable.TBODY.offsetLeft,backlightElemMarginLeft=this.backlight.getOffset().left,backlightElemWidth=this.backlight.getSize().width,rowHeaderWidth=0;rootElementOffset.left+wtTable.holder.offsetWidth<priv.target.eventPageX&&priv.target.coords.col++,isRowHeader&&(rowHeaderWidth=this.hot.view.wt.wtOverlays.leftOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsLeft(coords.col)&&(tdOffsetLeft+=wtTable.holder.scrollLeft),tdOffsetLeft+=rowHeaderWidth,coords.col<0?priv.target.col=firstVisible>0?firstVisible-1:firstVisible:TD.offsetWidth/2+tdOffsetLeft<=mouseOffsetLeft?(priv.target.col=coords.col+1,tdOffsetLeft+=TD.offsetWidth):priv.target.col=coords.col;var backlightLeft=mouseOffsetLeft,guidelineLeft=tdOffsetLeft;mouseOffsetLeft+backlightElemWidth+backlightElemMarginLeft>=hiderWidth?backlightLeft=hiderWidth-backlightElemWidth-backlightElemMarginLeft:mouseOffsetLeft+backlightElemMarginLeft<tbodyOffsetLeft+rowHeaderWidth&&(backlightLeft=tbodyOffsetLeft+rowHeaderWidth+Math.abs(backlightElemMarginLeft)),tdOffsetLeft>=hiderWidth-1?guidelineLeft=hiderWidth-1:0===guidelineLeft&&(guidelineLeft=1);var leftOverlayWidth=rowHeaderWidth;this.hot.view.wt.wtOverlays.leftOverlay&&(leftOverlayWidth=this.hot.view.wt.wtOverlays.leftOverlay.clone.wtTable.TABLE.offsetWidth),coords.col>=fixedColumns&&guidelineLeft-wtTable.holder.scrollLeft<leftOverlayWidth&&this.hot.scrollViewportTo(null,coords.col),this.backlight.setPosition(null,backlightLeft),this.guideline.setPosition(null,guidelineLeft)},registerEvents:function(){var $__10=this;this.eventManager.addEventListener(document.documentElement,"mousemove",function(event){return $__10.onMouseMove(event)}),this.eventManager.addEventListener(document.documentElement,"mouseup",function(){return $__10.onMouseUp()})},unregisterEvents:function(){this.eventManager.clear()},onBeforeOnCellMouseDown:function(event,coords,TD,blockCalculations){var wtTable=this.hot.view.wt.wtTable,isHeaderSelection=this.hot.selection.selectedHeader.cols,selection=this.hot.getSelectedRange(),priv=privatePool.get(this);if(!selection||!isHeaderSelection||priv.pressed||0!==event.button)return priv.pressed=!1,priv.columnsToMove.length=0,void removeClass(this.hot.rootElement,[CSS_ON_MOVING,CSS_SHOW_UI]);var guidelineIsNotReady=this.guideline.isBuilt()&&!this.guideline.isAppended(),backlightIsNotReady=this.backlight.isBuilt()&&!this.backlight.isAppended();guidelineIsNotReady&&backlightIsNotReady&&(this.guideline.appendTo(wtTable.hider),this.backlight.appendTo(wtTable.hider));var $__12=selection,from=$__12.from,to=$__12.to,start=Math.min(from.col,to.col),end=Math.max(from.col,to.col);if(coords.row<0&&coords.col>=start&&coords.col<=end){blockCalculations.column=!0,priv.pressed=!0,priv.target.eventPageX=event.pageX,priv.target.coords=coords,priv.target.TD=TD,priv.columnsToMove=this.prepareColumnsToMoving();var topPos=wtTable.holder.scrollTop+wtTable.getColumnHeaderHeight(0)+1;this.backlight.setPosition(topPos),this.backlight.setSize(this.getColumnsWidth(start,end+1),wtTable.hider.offsetHeight-topPos),this.backlight.setOffset(null,(this.getColumnsWidth(start,coords.col)+event.layerX)*-1),addClass(this.hot.rootElement,CSS_ON_MOVING),this.refreshPositions()}else removeClass(this.hot.rootElement,CSS_AFTER_SELECTION),priv.pressed=!1,priv.columnsToMove.length=0},onMouseMove:function(event){var priv=privatePool.get(this);if(priv.pressed){if(event.realTarget===this.backlight.element){var width=this.backlight.getSize().width;this.backlight.setSize(0),setTimeout(function(){this.backlight.setPosition(width)})}priv.target.eventPageX=event.pageX,this.refreshPositions()}},onBeforeOnCellMouseOver:function(event,coords,TD,blockCalculations){var selectedRange=this.hot.getSelectedRange(),priv=privatePool.get(this);selectedRange&&priv.pressed&&(priv.columnsToMove.indexOf(coords.col)>-1?removeClass(this.hot.rootElement,CSS_SHOW_UI):addClass(this.hot.rootElement,CSS_SHOW_UI),blockCalculations.row=!0,blockCalculations.column=!0,blockCalculations.cell=!0,priv.target.coords=coords,priv.target.TD=TD)},onMouseUp:function(){var priv=privatePool.get(this);if(priv.pressed=!1,priv.backlightWidth=0,removeClass(this.hot.rootElement,[CSS_ON_MOVING,CSS_SHOW_UI,CSS_AFTER_SELECTION]),this.hot.selection.selectedHeader.cols&&addClass(this.hot.rootElement,CSS_AFTER_SELECTION),!(priv.columnsToMove.length<1)){var target=priv.target.col;if(this.moveColumns(priv.columnsToMove,target),this.persistentStateSave(),this.hot.render(),!priv.disallowMoving){var selectionStart=this.columnsMapper.getIndexByValue(priv.columnsToMove[0]),selectionEnd=this.columnsMapper.getIndexByValue(priv.columnsToMove[priv.columnsToMove.length-1]);this.changeSelection(selectionStart,selectionEnd)}priv.columnsToMove.length=0}},onAfterScrollVertically:function(){var wtTable=this.hot.view.wt.wtTable,headerHeight=wtTable.getColumnHeaderHeight(0)+1,scrollTop=wtTable.holder.scrollTop,posTop=headerHeight+scrollTop;this.backlight.setPosition(posTop),this.backlight.setSize(null,wtTable.hider.offsetHeight-posTop)},onAfterCreateCol:function(index,amount){this.columnsMapper.shiftItems(index,amount)},onBeforeRemoveCol:function(index,amount){var $__10=this;this.removedColumns.length=0,index!==!1&&rangeEach(index,index+amount-1,function(removedIndex){$__10.removedColumns.push($__10.hot.runHooks("modifyCol",removedIndex,$__10.pluginName))})},onAfterRemoveCol:function(index,amount){this.columnsMapper.unshiftItems(this.removedColumns)},onModifyCol:function(column,source){if(source!==this.pluginName){var columnInMapper=this.columnsMapper.getValueByIndex(column);column=null===columnInMapper?column:columnInMapper}return column},onUnmodifyCol:function(column){var indexInMapper=this.columnsMapper.getIndexByValue(column);return column=null===indexInMapper?column:indexInMapper},destroy:function(){this.backlight.destroy(),this.guideline.destroy(),$traceurRuntime.superGet(this,$ManualColumnMove.prototype,"destroy").call(this)}},{},BasePlugin),registerPlugin("ManualColumnMove",ManualColumnMove),Handsontable.hooks.register("beforeColumnMove"),Handsontable.hooks.register("afterColumnMove"),Handsontable.hooks.register("unmodifyCol")},{"_base.js":62,browser:24,columnsMapper:95,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/number":52,plugins:61,"ui/backlight":98,"ui/guideline":99}],97:[function(_dereq_,module,exports){Object.defineProperties(exports,{BaseUI:{get:function(){return BaseUI}},__esModule:{value:!0}});var $___46__46__47__46__46__47__46__46__47_helpers_47_number__,isNumeric=($___46__46__47__46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_number__}).isNumeric,STATE_INITIALIZED=0,STATE_BUILT=1,STATE_APPENDED=2,UNIT="px",BaseUI=function(hotInstance){this.hot=hotInstance,this._element=null,this.state=STATE_INITIALIZED};$traceurRuntime.createClass(BaseUI,{appendTo:function(wrapper){wrapper.appendChild(this._element),
this.state=STATE_APPENDED},build:function(){this._element=document.createElement("div"),this.state=STATE_BUILT},destroy:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=STATE_INITIALIZED},isAppended:function(){return this.state===STATE_APPENDED},isBuilt:function(){return this.state>=STATE_BUILT},setPosition:function(top,left){isNumeric(top)&&(this._element.style.top=top+UNIT),isNumeric(left)&&(this._element.style.left=left+UNIT)},getPosition:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}},setSize:function(width,height){isNumeric(width)&&(this._element.style.width=width+UNIT),isNumeric(height)&&(this._element.style.height=height+UNIT)},getSize:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}},setOffset:function(top,left){isNumeric(top)&&(this._element.style.marginTop=top+UNIT),isNumeric(left)&&(this._element.style.marginLeft=left+UNIT)},getOffset:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}},{})},{"helpers/number":52}],98:[function(_dereq_,module,exports){Object.defineProperties(exports,{BacklightUI:{get:function(){return BacklightUI}},__esModule:{value:!0}});var $___95_base__,$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,BaseUI=($___95_base__=_dereq_("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{"default":$___95_base__}).BaseUI,addClass=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}).addClass,CSS_CLASSNAME="ht__manualColumnMove--backlight",BacklightUI=function(hotInstance){$traceurRuntime.superConstructor($BacklightUI).call(this,hotInstance)},$BacklightUI=BacklightUI;$traceurRuntime.createClass(BacklightUI,{build:function(){$traceurRuntime.superGet(this,$BacklightUI.prototype,"build").call(this),addClass(this._element,CSS_CLASSNAME)}},{},BaseUI)},{_base:97,"helpers/dom/element":47}],99:[function(_dereq_,module,exports){Object.defineProperties(exports,{GuidelineUI:{get:function(){return GuidelineUI}},__esModule:{value:!0}});var $___95_base__,$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,BaseUI=($___95_base__=_dereq_("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{"default":$___95_base__}).BaseUI,addClass=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}).addClass,CSS_CLASSNAME="ht__manualColumnMove--guideline",GuidelineUI=function(hotInstance){$traceurRuntime.superConstructor($GuidelineUI).call(this,hotInstance)},$GuidelineUI=GuidelineUI;$traceurRuntime.createClass(GuidelineUI,{build:function(){$traceurRuntime.superGet(this,$GuidelineUI.prototype,"build").call(this),addClass(this._element,CSS_CLASSNAME)}},{},BaseUI)},{_base:97,"helpers/dom/element":47}],100:[function(_dereq_,module,exports){Object.defineProperties(exports,{ManualColumnResize:{get:function(){return ManualColumnResize}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__95_base_46_js__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_plugins__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],BasePlugin=($___46__46__47__95_base_46_js__=_dereq_("_base.js"),$___46__46__47__95_base_46_js__&&$___46__46__47__95_base_46_js__.__esModule&&$___46__46__47__95_base_46_js__||{"default":$___46__46__47__95_base_46_js__})["default"],$__2=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__2.addClass,hasClass=$__2.hasClass,removeClass=$__2.removeClass,outerHeight=$__2.outerHeight,eventManagerObject=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).eventManager,$__4=($___46__46__47__46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_event__}),pageX=$__4.pageX,arrayEach=($__4.pageY,($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach),rangeEach=($___46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47_helpers_47_number__}).rangeEach,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,ManualColumnResize=function(hotInstance){$traceurRuntime.superConstructor($ManualColumnResize).call(this,hotInstance),this.currentTH=null,this.currentCol=null,this.selectedCols=[],this.currentWidth=null,this.newSize=null,this.startY=null,this.startWidth=null,this.startOffset=null,this.handle=document.createElement("DIV"),this.guide=document.createElement("DIV"),this.eventManager=eventManagerObject(this),this.pressed=null,this.dblclick=0,this.autoresizeTimeout=null,this.manualColumnWidths=[],addClass(this.handle,"manualColumnResizer"),addClass(this.guide,"manualColumnResizerGuide")},$ManualColumnResize=ManualColumnResize;$traceurRuntime.createClass(ManualColumnResize,{isEnabled:function(){return this.hot.getSettings().manualColumnResize},enablePlugin:function(){var $__8=this;if(!this.enabled){this.manualColumnWidths=[];var initialColumnWidth=this.hot.getSettings().manualColumnResize,loadedManualColumnWidths=this.loadManualColumnWidths();this.addHook("modifyColWidth",function(width,col){return $__8.onModifyColWidth(width,col)}),this.addHook("beforeStretchingColumnWidth",function(stretchedWidth,column){return $__8.onBeforeStretchingColumnWidth(stretchedWidth,column)}),this.addHook("beforeColumnResize",function(currentColumn,newSize,isDoubleClick){return $__8.onBeforeColumnResize(currentColumn,newSize,isDoubleClick)}),"undefined"!=typeof loadedManualColumnWidths?this.manualColumnWidths=loadedManualColumnWidths:Array.isArray(initialColumnWidth)?this.manualColumnWidths=initialColumnWidth:this.manualColumnWidths=[],Handsontable.hooks.register("beforeColumnResize"),Handsontable.hooks.register("afterColumnResize"),this.bindEvents(),$traceurRuntime.superGet(this,$ManualColumnResize.prototype,"enablePlugin").call(this)}},updatePlugin:function(){var initialColumnWidth=this.hot.getSettings().manualColumnResize;Array.isArray(initialColumnWidth)?this.manualColumnWidths=initialColumnWidth:initialColumnWidth||(this.manualColumnWidths=[])},disablePlugin:function(){$traceurRuntime.superGet(this,$ManualColumnResize.prototype,"disablePlugin").call(this)},saveManualColumnWidths:function(){this.hot.runHooks("persistentStateSave","manualColumnWidths",this.manualColumnWidths)},loadManualColumnWidths:function(){var storedState={};return this.hot.runHooks("persistentStateLoad","manualColumnWidths",storedState),storedState.value},setupHandlePosition:function(TH){var $__8=this;if(!TH.parentNode)return!1;this.currentTH=TH;var col=this.hot.view.wt.wtTable.getCoords(TH).col,headerHeight=outerHeight(this.currentTH);if(col>=0){var box=this.currentTH.getBoundingClientRect();if(this.currentCol=col,this.selectedCols=[],this.hot.selection.isSelected()&&this.hot.selection.selectedHeader.cols){var $__10=this.hot.getSelectedRange(),from=$__10.from,to=$__10.to,start=from.col,end=to.col;start>=end&&(start=to.col,end=from.col),this.currentCol>=start&&this.currentCol<=end?rangeEach(start,end,function(i){return $__8.selectedCols.push(i)}):this.selectedCols.push(this.currentCol)}else this.selectedCols.push(this.currentCol);this.startOffset=box.left-6,this.startWidth=parseInt(box.width,10),this.handle.style.top=box.top+"px",this.handle.style.left=this.startOffset+this.startWidth+"px",this.handle.style.height=headerHeight+"px",this.hot.rootElement.appendChild(this.handle)}},refreshHandlePosition:function(){this.handle.style.left=this.startOffset+this.currentWidth+"px"},setupGuidePosition:function(){var handleHeight=parseInt(outerHeight(this.handle),10),handleBottomPosition=parseInt(this.handle.style.top,10)+handleHeight,maximumVisibleElementHeight=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);addClass(this.handle,"active"),addClass(this.guide,"active"),this.guide.style.top=handleBottomPosition+"px",this.guide.style.left=this.handle.style.left,this.guide.style.height=maximumVisibleElementHeight-handleHeight+"px",this.hot.rootElement.appendChild(this.guide)},refreshGuidePosition:function(){this.guide.style.left=this.handle.style.left},hideHandleAndGuide:function(){removeClass(this.handle,"active"),removeClass(this.guide,"active")},checkIfColumnHeader:function(element){if(element!=this.hot.rootElement){var parent=element.parentNode;return"THEAD"===parent.tagName||this.checkIfColumnHeader(parent)}return!1},getTHFromTargetElement:function(element){return"TABLE"!=element.tagName?"TH"==element.tagName?element:this.getTHFromTargetElement(element.parentNode):null},onMouseOver:function(event){if(this.checkIfColumnHeader(event.target)){var th=this.getTHFromTargetElement(event.target);if(!th)return;var colspan=th.getAttribute("colspan");!th||null!==colspan&&1!==colspan||this.pressed||this.setupHandlePosition(th)}},afterMouseDownTimeout:function(){var $__8=this,render=function(){$__8.hot.forceFullRender=!0,$__8.hot.view.render(),$__8.hot.view.wt.wtOverlays.adjustElementsSize(!0)},resize=function(selectedCol,forceRender){var hookNewSize=$__8.hot.runHooks("beforeColumnResize",selectedCol,$__8.newSize,!0);void 0!==hookNewSize&&($__8.newSize=hookNewSize),"all"===$__8.hot.getSettings().stretchH?$__8.clearManualSize(selectedCol):$__8.setManualSize(selectedCol,$__8.newSize),forceRender&&render(),$__8.saveManualColumnWidths(),$__8.hot.runHooks("afterColumnResize",selectedCol,$__8.newSize,!0)};if(this.dblclick>=2){var selectedColsLength=this.selectedCols.length;selectedColsLength>1?(arrayEach(this.selectedCols,function(selectedCol){resize(selectedCol)}),render()):arrayEach(this.selectedCols,function(selectedCol){resize(selectedCol,!0)})}this.dblclick=0,this.autoresizeTimeout=null},onMouseDown:function(event){var $__8=this;hasClass(event.target,"manualColumnResizer")&&(this.setupGuidePosition(),this.pressed=this.hot,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout(function(){return $__8.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick++,this.startX=pageX(event),this.newSize=this.startWidth)},onMouseMove:function(event){var $__8=this;this.pressed&&(this.currentWidth=this.startWidth+(pageX(event)-this.startX),arrayEach(this.selectedCols,function(selectedCol){$__8.newSize=$__8.setManualSize(selectedCol,$__8.currentWidth)}),this.refreshHandlePosition(),this.refreshGuidePosition())},onMouseUp:function(event){var $__8=this,render=function(){$__8.hot.forceFullRender=!0,$__8.hot.view.render(),$__8.hot.view.wt.wtOverlays.adjustElementsSize(!0)},resize=function(selectedCol,forceRender){$__8.hot.runHooks("beforeColumnResize",selectedCol,$__8.newSize),forceRender&&render(),$__8.saveManualColumnWidths(),$__8.hot.runHooks("afterColumnResize",selectedCol,$__8.newSize)};if(this.pressed){if(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!=this.startWidth){var selectedColsLength=this.selectedCols.length;selectedColsLength>1?(arrayEach(this.selectedCols,function(selectedCol){resize(selectedCol)}),render()):arrayEach(this.selectedCols,function(selectedCol){resize(selectedCol,!0)})}this.setupHandlePosition(this.currentTH)}},bindEvents:function(){var $__8=this;this.eventManager.addEventListener(this.hot.rootElement,"mouseover",function(e){return $__8.onMouseOver(e)}),this.eventManager.addEventListener(this.hot.rootElement,"mousedown",function(e){return $__8.onMouseDown(e)}),this.eventManager.addEventListener(window,"mousemove",function(e){return $__8.onMouseMove(e)}),this.eventManager.addEventListener(window,"mouseup",function(e){return $__8.onMouseUp(e)})},setManualSize:function(column,width){return width=Math.max(width,20),column=this.hot.runHooks("modifyCol",column),this.manualColumnWidths[column]=width,width},clearManualSize:function(column){column=this.hot.runHooks("modifyCol",column),this.manualColumnWidths[column]=void 0},onModifyColWidth:function(width,column){return this.enabled&&(column=this.hot.runHooks("modifyCol",column),this.hot.getSettings().manualColumnResize&&this.manualColumnWidths[column])?this.manualColumnWidths[column]:width},onBeforeStretchingColumnWidth:function(stretchedWidth,column){var width=this.manualColumnWidths[column];return void 0===width&&(width=stretchedWidth),width},onBeforeColumnResize:function(){this.hot.view.wt.wtViewport.hasOversizedColumnHeadersMarked={}}},{},BasePlugin),registerPlugin("manualColumnResize",ManualColumnResize)},{"_base.js":62,browser:24,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/number":52,plugins:61}],101:[function(_dereq_,module,exports){Object.defineProperties(exports,{ManualRowMove:{get:function(){return ManualRowMove}},__esModule:{value:!0}});var $___46__46__47__95_base_46_js__,$___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_plugins__,$__rowsMapper__,$__ui_47_backlight__,$__ui_47_guideline__,BasePlugin=($___46__46__47__95_base_46_js__=_dereq_("_base.js"),$___46__46__47__95_base_46_js__&&$___46__46__47__95_base_46_js__.__esModule&&$___46__46__47__95_base_46_js__||{"default":$___46__46__47__95_base_46_js__})["default"],Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,$__3=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__3.addClass,removeClass=$__3.removeClass,offset=$__3.offset,rangeEach=($___46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47_helpers_47_number__}).rangeEach,eventManagerObject=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).eventManager,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,RowsMapper=($__rowsMapper__=_dereq_("rowsMapper"),$__rowsMapper__&&$__rowsMapper__.__esModule&&$__rowsMapper__||{"default":$__rowsMapper__}).RowsMapper,BacklightUI=($__ui_47_backlight__=_dereq_("ui/backlight"),$__ui_47_backlight__&&$__ui_47_backlight__.__esModule&&$__ui_47_backlight__||{"default":$__ui_47_backlight__}).BacklightUI,GuidelineUI=($__ui_47_guideline__=_dereq_("ui/guideline"),$__ui_47_guideline__&&$__ui_47_guideline__.__esModule&&$__ui_47_guideline__||{"default":$__ui_47_guideline__}).GuidelineUI,privatePool=new WeakMap,CSS_PLUGIN="ht__manualRowMove",CSS_SHOW_UI="show-ui",CSS_ON_MOVING="on-moving--rows",CSS_AFTER_SELECTION="after-selection--rows",ManualRowMove=function(hotInstance){$traceurRuntime.superConstructor($ManualRowMove).call(this,hotInstance),privatePool.set(this,{rowsToMove:[],pressed:void 0,disallowMoving:void 0,target:{eventPageY:void 0,coords:void 0,TD:void 0,row:void 0}}),this.removedRows=[],this.rowsMapper=new RowsMapper(this),this.eventManager=eventManagerObject(this),this.backlight=new BacklightUI(hotInstance),this.guideline=new GuidelineUI(hotInstance)},$ManualRowMove=ManualRowMove;$traceurRuntime.createClass(ManualRowMove,{isEnabled:function(){return!!this.hot.getSettings().manualRowMove},enablePlugin:function(){var $__10=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(event,coords,TD,blockCalculations){return $__10.onBeforeOnCellMouseDown(event,coords,TD,blockCalculations)}),this.addHook("beforeOnCellMouseOver",function(event,coords,TD,blockCalculations){return $__10.onBeforeOnCellMouseOver(event,coords,TD,blockCalculations)}),this.addHook("afterScrollHorizontally",function(){return $__10.onAfterScrollHorizontally()}),this.addHook("modifyRow",function(row,source){return $__10.onModifyRow(row,source)}),this.addHook("beforeRemoveRow",function(index,amount){return $__10.onBeforeRemoveRow(index,amount)}),this.addHook("afterRemoveRow",function(index,amount){return $__10.onAfterRemoveRow(index,amount)}),this.addHook("afterCreateRow",function(index,amount){return $__10.onAfterCreateRow(index,amount)}),this.addHook("beforeColumnSort",function(column,order){return $__10.onBeforeColumnSort(column,order)}),this.addHook("unmodifyRow",function(row){return $__10.onUnmodifyRow(row)}),this.registerEvents(),addClass(this.hot.rootElement,CSS_PLUGIN),$traceurRuntime.superGet(this,$ManualRowMove.prototype,"enablePlugin").call(this))},updatePlugin:function(){this.disablePlugin(),this.enablePlugin(),this.onAfterPluginsInitialized(),$traceurRuntime.superGet(this,$ManualRowMove.prototype,"updatePlugin").call(this)},disablePlugin:function(){var pluginSettings=this.hot.getSettings().manualRowMove;Array.isArray(pluginSettings)&&this.rowsMapper.clearMap(),removeClass(this.hot.rootElement,CSS_PLUGIN),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),$traceurRuntime.superGet(this,$ManualRowMove.prototype,"disablePlugin").call(this)},moveRow:function(row,target){this.moveRows([row],target)},moveRows:function(rows,target){var $__10=this,priv=privatePool.get(this),beforeMoveHook=this.hot.runHooks("beforeRowMove",rows,target);priv.disallowMoving=beforeMoveHook===!1,priv.disallowMoving||(arrayEach(rows,function(row,index,array){array[index]=$__10.rowsMapper.getValueByIndex(row)}),arrayEach(rows,function(row,index){var actualPosition=$__10.rowsMapper.getIndexByValue(row);actualPosition!==target&&$__10.rowsMapper.moveRow(actualPosition,target+index)}),this.rowsMapper.clearNull()),this.hot.runHooks("afterRowMove",rows,target)},changeSelection:function(startRow,endRow){var selection=this.hot.selection,lastColIndex=this.hot.countCols()-1;selection.setRangeStartOnly(new WalkontableCellCoords(startRow,0)),selection.setRangeEnd(new WalkontableCellCoords(endRow,lastColIndex),!1)},getRowsHeight:function(from,to){for(var height=0,i=from;i<to;i++){var rowHeight=this.hot.view.wt.wtTable.getRowHeight(i)||23;height+=rowHeight}return height},initialSettings:function(){var pluginSettings=this.hot.getSettings().manualRowMove;if(Array.isArray(pluginSettings))this.moveRows(pluginSettings,0);else if(void 0!==pluginSettings){var persistentState=this.persistentStateLoad();persistentState.length&&this.moveRows(persistentState,0)}},isFixedRowTop:function(row){return row<this.hot.getSettings().fixedRowsTop},isFixedRowBottom:function(row){return row>this.hot.getSettings().fixedRowsBottom},persistentStateSave:function(){Handsontable.hooks.run(this.hot,"persistentStateSave","manualRowMove",this.rowsMapper._arrayMap)},persistentStateLoad:function(){var storedState={};return Handsontable.hooks.run(this.hot,"persistentStateLoad","manualRowMove",storedState),storedState.value?storedState.value:[]},prepareRowsToMoving:function(){var selection=this.hot.getSelectedRange(),selectedRows=[];if(!selection)return selectedRows;var $__12=selection,from=$__12.from,to=$__12.to,start=Math.min(from.row,to.row),end=Math.max(from.row,to.row);return rangeEach(start,end,function(i){selectedRows.push(i)}),selectedRows},refreshPositions:function(){var priv=privatePool.get(this),coords=priv.target.coords,firstVisible=this.hot.view.wt.wtTable.getFirstVisibleRow(),lastVisible=this.hot.view.wt.wtTable.getLastVisibleRow(),fixedRows=this.hot.getSettings().fixedRowsTop,countRows=this.hot.countRows();coords.row<fixedRows&&firstVisible>0&&this.hot.scrollViewportTo(firstVisible-1),coords.row>=lastVisible&&lastVisible<countRows&&this.hot.scrollViewportTo(lastVisible+1,void 0,!0);var wtTable=this.hot.view.wt.wtTable,TD=priv.target.TD,rootElementOffset=offset(this.hot.rootElement),tdOffsetTop=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,coords.row),mouseOffsetTop=priv.target.eventPageY-rootElementOffset.top+wtTable.holder.scrollTop,hiderHeight=wtTable.hider.offsetHeight,tbodyOffsetTop=wtTable.TBODY.offsetTop,backlightElemMarginTop=this.backlight.getOffset().top,backlightElemHeight=this.backlight.getSize().height;rootElementOffset.top+wtTable.holder.offsetHeight<priv.target.eventPageY&&priv.target.coords.row++,this.isFixedRowTop(coords.row)&&(tdOffsetTop+=wtTable.holder.scrollTop),coords.row<0?priv.target.row=firstVisible>0?firstVisible-1:firstVisible:TD.offsetHeight/2+tdOffsetTop<=mouseOffsetTop?(priv.target.row=coords.row+1,tdOffsetTop+=0===coords.row?TD.offsetHeight-1:TD.offsetHeight):priv.target.row=coords.row;var backlightTop=mouseOffsetTop,guidelineTop=tdOffsetTop;mouseOffsetTop+backlightElemHeight+backlightElemMarginTop>=hiderHeight?backlightTop=hiderHeight-backlightElemHeight-backlightElemMarginTop:mouseOffsetTop+backlightElemMarginTop<tbodyOffsetTop&&(backlightTop=tbodyOffsetTop+Math.abs(backlightElemMarginTop)),tdOffsetTop>=hiderHeight-1&&(guidelineTop=hiderHeight-1);var topOverlayHeight=0;this.hot.view.wt.wtOverlays.topOverlay&&(topOverlayHeight=this.hot.view.wt.wtOverlays.topOverlay.clone.wtTable.TABLE.offsetHeight),coords.row>=fixedRows&&guidelineTop-wtTable.holder.scrollTop<topOverlayHeight&&this.hot.scrollViewportTo(coords.row),this.backlight.setPosition(backlightTop),this.guideline.setPosition(guidelineTop)},registerEvents:function(){var $__10=this;this.eventManager.addEventListener(document.documentElement,"mousemove",function(event){return $__10.onMouseMove(event)}),this.eventManager.addEventListener(document.documentElement,"mouseup",function(){return $__10.onMouseUp()})},unregisterEvents:function(){this.eventManager.clear()},onBeforeColumnSort:function(column,order){var priv=privatePool.get(this);priv.disallowMoving=void 0!==order},onBeforeOnCellMouseDown:function(event,coords,TD,blockCalculations){var wtTable=this.hot.view.wt.wtTable,isHeaderSelection=this.hot.selection.selectedHeader.rows,selection=this.hot.getSelectedRange(),priv=privatePool.get(this);if(!selection||!isHeaderSelection||priv.pressed||0!==event.button)return priv.pressed=!1,priv.rowsToMove.length=0,void removeClass(this.hot.rootElement,[CSS_ON_MOVING,CSS_SHOW_UI]);var guidelineIsNotReady=this.guideline.isBuilt()&&!this.guideline.isAppended(),backlightIsNotReady=this.backlight.isBuilt()&&!this.backlight.isAppended();guidelineIsNotReady&&backlightIsNotReady&&(this.guideline.appendTo(wtTable.hider),this.backlight.appendTo(wtTable.hider));var $__12=selection,from=$__12.from,to=$__12.to,start=Math.min(from.row,to.row),end=Math.max(from.row,to.row);if(coords.col<0&&coords.row>=start&&coords.row<=end){blockCalculations.row=!0,priv.pressed=!0,priv.target.eventPageY=event.pageY,priv.target.coords=coords,priv.target.TD=TD,priv.rowsToMove=this.prepareRowsToMoving();var leftPos=wtTable.holder.scrollLeft+wtTable.getColumnWidth(-1);this.backlight.setPosition(null,leftPos),this.backlight.setSize(wtTable.hider.offsetWidth-leftPos,this.getRowsHeight(start,end+1)),this.backlight.setOffset((this.getRowsHeight(start,coords.row)+event.layerY)*-1,null),addClass(this.hot.rootElement,CSS_ON_MOVING),this.refreshPositions()}else removeClass(this.hot.rootElement,CSS_AFTER_SELECTION),priv.pressed=!1,priv.rowsToMove.length=0},onMouseMove:function(event){var priv=privatePool.get(this);if(priv.pressed){if(event.realTarget===this.backlight.element){var height=this.backlight.getSize().height;this.backlight.setSize(null,0),setTimeout(function(){this.backlight.setPosition(null,height)})}priv.target.eventPageY=event.pageY,this.refreshPositions()}},onBeforeOnCellMouseOver:function(event,coords,TD,blockCalculations){var selectedRange=this.hot.getSelectedRange(),priv=privatePool.get(this);selectedRange&&priv.pressed&&(priv.rowsToMove.indexOf(coords.row)>-1?removeClass(this.hot.rootElement,CSS_SHOW_UI):addClass(this.hot.rootElement,CSS_SHOW_UI),blockCalculations.row=!0,blockCalculations.column=!0,blockCalculations.cell=!0,priv.target.coords=coords,priv.target.TD=TD)},onMouseUp:function(){var priv=privatePool.get(this);if(priv.pressed=!1,priv.backlightHeight=0,removeClass(this.hot.rootElement,[CSS_ON_MOVING,CSS_SHOW_UI,CSS_AFTER_SELECTION]),this.hot.selection.selectedHeader.rows&&addClass(this.hot.rootElement,CSS_AFTER_SELECTION),!(priv.rowsToMove.length<1)){var target=priv.target.row;if(this.moveRows(priv.rowsToMove,target),this.persistentStateSave(),this.hot.render(),!priv.disallowMoving){var selectionStart=this.rowsMapper.getIndexByValue(priv.rowsToMove[0]),selectionEnd=this.rowsMapper.getIndexByValue(priv.rowsToMove[priv.rowsToMove.length-1]);this.changeSelection(selectionStart,selectionEnd)}priv.rowsToMove.length=0}},onAfterScrollHorizontally:function(){var wtTable=this.hot.view.wt.wtTable,headerWidth=wtTable.getColumnWidth(-1),scrollLeft=wtTable.holder.scrollLeft,posLeft=headerWidth+scrollLeft;this.backlight.setPosition(null,posLeft),this.backlight.setSize(wtTable.hider.offsetWidth-posLeft)},onAfterCreateRow:function(index,amount){this.rowsMapper.shiftItems(index,amount)},onBeforeRemoveRow:function(index,amount){var $__10=this;this.removedRows.length=0,index!==!1&&rangeEach(index,index+amount-1,function(removedIndex){$__10.removedRows.push($__10.hot.runHooks("modifyRow",removedIndex,$__10.pluginName))})},onAfterRemoveRow:function(index,amount){this.rowsMapper.unshiftItems(this.removedRows)},onModifyRow:function(row,source){return source!==this.pluginName&&(row=this.rowsMapper.getValueByIndex(row)),row},onUnmodifyRow:function(row){return this.rowsMapper.getIndexByValue(row)},onAfterPluginsInitialized:function(){0===this.rowsMapper._arrayMap.length&&this.rowsMapper.createMap(this.hot.countSourceRows()||this.hot.getSettings().startRows),this.initialSettings(),this.backlight.build(),this.guideline.build()},destroy:function(){this.backlight.destroy(),this.guideline.destroy(),$traceurRuntime.superGet(this,$ManualRowMove.prototype,"destroy").call(this)}},{},BasePlugin),registerPlugin("ManualRowMove",ManualRowMove),Handsontable.hooks.register("beforeRowMove"),Handsontable.hooks.register("afterRowMove"),Handsontable.hooks.register("unmodifyRow")},{"_base.js":62,browser:24,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/number":52,plugins:61,rowsMapper:102,"ui/backlight":104,"ui/guideline":105}],102:[function(_dereq_,module,exports){Object.defineProperties(exports,{RowsMapper:{get:function(){return RowsMapper}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_mixins_47_arrayMapper__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_number__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],arrayMapper=($___46__46__47__46__46__47_mixins_47_arrayMapper__=_dereq_("mixins/arrayMapper"),$___46__46__47__46__46__47_mixins_47_arrayMapper__&&$___46__46__47__46__46__47_mixins_47_arrayMapper__.__esModule&&$___46__46__47__46__46__47_mixins_47_arrayMapper__||{"default":$___46__46__47__46__46__47_mixins_47_arrayMapper__}).arrayMapper,arrayFilter=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayFilter,mixin=($___46__46__47__46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{"default":$___46__46__47__46__46__47_helpers_47_object__}).mixin,rangeEach=($___46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47_helpers_47_number__}).rangeEach,RowsMapper=function(manualRowMove){this.manualRowMove=manualRowMove};$traceurRuntime.createClass(RowsMapper,{createMap:function(length){var $__5=this,originLength=void 0===length?this._arrayMap.length:length;this._arrayMap.length=0,rangeEach(originLength-1,function(itemIndex){$__5._arrayMap[itemIndex]=itemIndex})},destroy:function(){this._arrayMap=null},moveRow:function(from,to){var indexToMove=this._arrayMap[from];this._arrayMap[from]=null,this._arrayMap.splice(to,0,indexToMove)},clearNull:function(){this._arrayMap=arrayFilter(this._arrayMap,function(i){
return null!==i})}},{}),mixin(RowsMapper,arrayMapper),Handsontable.utils.ManualRowMoveRowsMapper=RowsMapper},{browser:24,"helpers/array":43,"helpers/number":52,"helpers/object":53,"mixins/arrayMapper":57}],103:[function(_dereq_,module,exports){Object.defineProperties(exports,{BaseUI:{get:function(){return BaseUI}},__esModule:{value:!0}});var STATE_INITIALIZED=0,STATE_BUILT=1,STATE_APPENDED=2,UNIT="px",BaseUI=function(hotInstance){this.hot=hotInstance,this._element=null,this.state=STATE_INITIALIZED};$traceurRuntime.createClass(BaseUI,{appendTo:function(wrapper){wrapper.appendChild(this._element),this.state=STATE_APPENDED},build:function(){this._element=document.createElement("div"),this.state=STATE_BUILT},destroy:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=STATE_INITIALIZED},isAppended:function(){return this.state===STATE_APPENDED},isBuilt:function(){return this.state>=STATE_BUILT},setPosition:function(top,left){top&&(this._element.style.top=top+UNIT),left&&(this._element.style.left=left+UNIT)},getPosition:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}},setSize:function(width,height){width&&(this._element.style.width=width+UNIT),height&&(this._element.style.height=height+UNIT)},getSize:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}},setOffset:function(top,left){top&&(this._element.style.marginTop=top+UNIT),left&&(this._element.style.marginLeft=left+UNIT)},getOffset:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}},{})},{}],104:[function(_dereq_,module,exports){Object.defineProperties(exports,{BacklightUI:{get:function(){return BacklightUI}},__esModule:{value:!0}});var $___95_base__,$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,BaseUI=($___95_base__=_dereq_("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{"default":$___95_base__}).BaseUI,addClass=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}).addClass,CSS_CLASSNAME="ht__manualRowMove--backlight",BacklightUI=function(hotInstance){$traceurRuntime.superConstructor($BacklightUI).call(this,hotInstance)},$BacklightUI=BacklightUI;$traceurRuntime.createClass(BacklightUI,{build:function(){$traceurRuntime.superGet(this,$BacklightUI.prototype,"build").call(this),addClass(this._element,CSS_CLASSNAME)}},{},BaseUI)},{_base:103,"helpers/dom/element":47}],105:[function(_dereq_,module,exports){Object.defineProperties(exports,{GuidelineUI:{get:function(){return GuidelineUI}},__esModule:{value:!0}});var $___95_base__,$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__,BaseUI=($___95_base__=_dereq_("_base"),$___95_base__&&$___95_base__.__esModule&&$___95_base__||{"default":$___95_base__}).BaseUI,addClass=($___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47__46__46__47_helpers_47_dom_47_element__}).addClass,CSS_CLASSNAME="ht__manualRowMove--guideline",GuidelineUI=function(hotInstance){$traceurRuntime.superConstructor($GuidelineUI).call(this,hotInstance)},$GuidelineUI=GuidelineUI;$traceurRuntime.createClass(GuidelineUI,{build:function(){$traceurRuntime.superGet(this,$GuidelineUI.prototype,"build").call(this),addClass(this._element,CSS_CLASSNAME)}},{},BaseUI)},{_base:103,"helpers/dom/element":47}],106:[function(_dereq_,module,exports){Object.defineProperties(exports,{ManualRowResize:{get:function(){return ManualRowResize}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__95_base_46_js__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_plugins__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],BasePlugin=($___46__46__47__95_base_46_js__=_dereq_("_base.js"),$___46__46__47__95_base_46_js__&&$___46__46__47__95_base_46_js__.__esModule&&$___46__46__47__95_base_46_js__||{"default":$___46__46__47__95_base_46_js__})["default"],$__2=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__2.addClass,hasClass=$__2.hasClass,removeClass=$__2.removeClass,outerWidth=$__2.outerWidth,eventManagerObject=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).eventManager,$__4=($___46__46__47__46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_event__}),pageY=($__4.pageX,$__4.pageY),arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,rangeEach=($___46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47_helpers_47_number__}).rangeEach,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,ManualRowResize=function(hotInstance){$traceurRuntime.superConstructor($ManualRowResize).call(this,hotInstance),this.currentTH=null,this.currentRow=null,this.selectedRows=[],this.currentHeight=null,this.newSize=null,this.startY=null,this.startHeight=null,this.startOffset=null,this.handle=document.createElement("DIV"),this.guide=document.createElement("DIV"),this.eventManager=eventManagerObject(this),this.pressed=null,this.dblclick=0,this.autoresizeTimeout=null,this.manualRowHeights=[],addClass(this.handle,"manualRowResizer"),addClass(this.guide,"manualRowResizerGuide")},$ManualRowResize=ManualRowResize;$traceurRuntime.createClass(ManualRowResize,{isEnabled:function(){return this.hot.getSettings().manualRowResize},enablePlugin:function(){var $__8=this;if(!this.enabled){this.manualRowHeights=[];var initialRowHeights=this.hot.getSettings().manualRowResize,loadedManualRowHeights=this.loadManualRowHeights();"undefined"!=typeof loadedManualRowHeights?this.manualRowHeights=loadedManualRowHeights:Array.isArray(initialRowHeights)?this.manualRowHeights=initialRowHeights:this.manualRowHeights=[],this.addHook("modifyRowHeight",function(height,row){return $__8.onModifyRowHeight(height,row)}),Handsontable.hooks.register("beforeRowResize"),Handsontable.hooks.register("afterRowResize"),this.bindEvents(),$traceurRuntime.superGet(this,$ManualRowResize.prototype,"enablePlugin").call(this)}},updatePlugin:function(){var initialRowHeights=this.hot.getSettings().manualRowResize;Array.isArray(initialRowHeights)?this.manualRowHeights=initialRowHeights:initialRowHeights||(this.manualRowHeights=[])},disablePlugin:function(){$traceurRuntime.superGet(this,$ManualRowResize.prototype,"disablePlugin").call(this)},saveManualRowHeights:function(){this.hot.runHooks("persistentStateSave","manualRowHeights",this.manualRowHeights)},loadManualRowHeights:function(){var storedState={};return this.hot.runHooks("persistentStateLoad","manualRowHeights",storedState),storedState.value},setupHandlePosition:function(TH){var $__8=this;this.currentTH=TH;var row=this.hot.view.wt.wtTable.getCoords(TH).row,headerWidth=outerWidth(this.currentTH);if(row>=0){var box=this.currentTH.getBoundingClientRect();if(this.currentRow=row,this.selectedRows=[],this.hot.selection.isSelected()&&this.hot.selection.selectedHeader.rows){var $__10=this.hot.getSelectedRange(),from=$__10.from,to=$__10.to,start=from.row,end=to.row;start>=end&&(start=to.row,end=from.row),this.currentRow>=start&&this.currentRow<=end?rangeEach(start,end,function(i){return $__8.selectedRows.push(i)}):this.selectedRows.push(this.currentRow)}else this.selectedRows.push(this.currentRow);this.startOffset=box.top-6,this.startHeight=parseInt(box.height,10),this.handle.style.left=box.left+"px",this.handle.style.top=this.startOffset+this.startHeight+"px",this.handle.style.width=headerWidth+"px",this.hot.rootElement.appendChild(this.handle)}},refreshHandlePosition:function(){this.handle.style.top=this.startOffset+this.currentHeight+"px"},setupGuidePosition:function(){var handleWidth=parseInt(outerWidth(this.handle),10),handleRightPosition=parseInt(this.handle.style.left,10)+handleWidth,maximumVisibleElementWidth=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);addClass(this.handle,"active"),addClass(this.guide,"active"),this.guide.style.top=this.handle.style.top,this.guide.style.left=handleRightPosition+"px",this.guide.style.width=maximumVisibleElementWidth-handleWidth+"px",this.hot.rootElement.appendChild(this.guide)},refreshGuidePosition:function(){this.guide.style.top=this.handle.style.top},hideHandleAndGuide:function(){removeClass(this.handle,"active"),removeClass(this.guide,"active")},checkIfRowHeader:function(element){if(element!=this.hot.rootElement){var parent=element.parentNode;return"TBODY"===parent.tagName||this.checkIfRowHeader(parent)}return!1},getTHFromTargetElement:function(element){return"TABLE"!=element.tagName?"TH"==element.tagName?element:this.getTHFromTargetElement(element.parentNode):null},onMouseOver:function(event){if(this.checkIfRowHeader(event.target)){var th=this.getTHFromTargetElement(event.target);th&&(this.pressed||this.setupHandlePosition(th))}},afterMouseDownTimeout:function(){var $__8=this,render=function(){$__8.hot.forceFullRender=!0,$__8.hot.view.render(),$__8.hot.view.wt.wtOverlays.adjustElementsSize(!0)},resize=function(selectedRow,forceRender){var hookNewSize=$__8.hot.runHooks("beforeRowResize",selectedRow,$__8.newSize,!0);void 0!==hookNewSize&&($__8.newSize=hookNewSize),$__8.setManualSize(selectedRow,$__8.newSize),forceRender&&render(),$__8.hot.runHooks("afterRowResize",selectedRow,$__8.newSize,!0)};if(this.dblclick>=2){var selectedRowsLength=this.selectedRows.length;selectedRowsLength>1?(arrayEach(this.selectedRows,function(selectedRow){resize(selectedRow)}),render()):arrayEach(this.selectedRows,function(selectedRow){resize(selectedRow,!0)})}this.dblclick=0,this.autoresizeTimeout=null},onMouseDown:function(event){var $__8=this;hasClass(event.target,"manualRowResizer")&&(this.setupGuidePosition(),this.pressed=this.hot,null==this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout(function(){return $__8.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick++,this.startY=pageY(event),this.newSize=this.startHeight)},onMouseMove:function(event){var $__8=this;this.pressed&&(this.currentHeight=this.startHeight+(pageY(event)-this.startY),arrayEach(this.selectedRows,function(selectedRow){$__8.newSize=$__8.setManualSize(selectedRow,$__8.currentHeight)}),this.refreshHandlePosition(),this.refreshGuidePosition())},onMouseUp:function(event){var $__8=this,render=function(){$__8.hot.forceFullRender=!0,$__8.hot.view.render(),$__8.hot.view.wt.wtOverlays.adjustElementsSize(!0)},runHooks=function(selectedRow,forceRender){$__8.hot.runHooks("beforeRowResize",selectedRow,$__8.newSize),forceRender&&render(),$__8.saveManualRowHeights(),$__8.hot.runHooks("afterRowResize",selectedRow,$__8.newSize)};if(this.pressed){if(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!=this.startHeight){var selectedRowsLength=this.selectedRows.length;selectedRowsLength>1?(arrayEach(this.selectedRows,function(selectedRow){runHooks(selectedRow)}),render()):arrayEach(this.selectedRows,function(selectedRow){runHooks(selectedRow,!0)})}this.setupHandlePosition(this.currentTH)}},bindEvents:function(){var $__8=this;this.eventManager.addEventListener(this.hot.rootElement,"mouseover",function(e){return $__8.onMouseOver(e)}),this.eventManager.addEventListener(this.hot.rootElement,"mousedown",function(e){return $__8.onMouseDown(e)}),this.eventManager.addEventListener(window,"mousemove",function(e){return $__8.onMouseMove(e)}),this.eventManager.addEventListener(window,"mouseup",function(e){return $__8.onMouseUp(e)})},setManualSize:function(row,height){return row=this.hot.runHooks("modifyRow",row),this.manualRowHeights[row]=height,height},onModifyRowHeight:function(height,row){if(this.enabled){var autoRowSizePlugin=this.hot.getPlugin("autoRowSize"),autoRowHeightResult=autoRowSizePlugin?autoRowSizePlugin.heights[row]:null;row=this.hot.runHooks("modifyRow",row);var manualRowHeight=this.manualRowHeights[row];if(void 0!==manualRowHeight&&(manualRowHeight===autoRowHeightResult||manualRowHeight>(height||0)))return manualRowHeight}return height}},{},BasePlugin),registerPlugin("manualRowResize",ManualRowResize)},{"_base.js":62,browser:24,eventManager:42,"helpers/array":43,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/number":52,plugins:61}],107:[function(_dereq_,module,exports){function CellInfoCollection(){var collection=[];return collection.getInfo=function(row,col){for(var i=0,ilen=this.length;i<ilen;i++)if(this[i].row<=row&&this[i].row+this[i].rowspan-1>=row&&this[i].col<=col&&this[i].col+this[i].colspan-1>=col)return this[i]},collection.setInfo=function(info){for(var i=0,ilen=this.length;i<ilen;i++)if(this[i].row===info.row&&this[i].col===info.col)return void(this[i]=info);this.push(info)},collection.removeInfo=function(row,col){for(var i=0,ilen=this.length;i<ilen;i++)if(this[i].row===row&&this[i].col===col){this.splice(i,1);break}},collection}function MergeCells(mergeCellsSetting){if(this.mergedCellInfoCollection=new CellInfoCollection,Array.isArray(mergeCellsSetting))for(var i=0,ilen=mergeCellsSetting.length;i<ilen;i++)this.mergedCellInfoCollection.setInfo(mergeCellsSetting[i])}function afterAutofillApplyValues(select,drag){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting&&!this.selection.isMultiple()){var info=this.mergeCells.mergedCellInfoCollection.getInfo(select[0],select[1]);info&&(select[0]=info.row,select[1]=info.col,select[2]=info.row+info.rowspan-1,select[3]=info.col+info.colspan-1)}}function onAfterCreateCol(col,count){this.mergeCells&&this.mergeCells.shiftCollection("right",col,count)}function onAfterRemoveCol(col,count){this.mergeCells&&this.mergeCells.shiftCollection("left",col,count)}function onAfterCreateRow(row,count){this.mergeCells&&this.mergeCells.shiftCollection("down",row,count)}function onAfterRemoveRow(row,count){this.mergeCells&&this.mergeCells.shiftCollection("up",row,count)}Object.defineProperties(exports,{MergeCells:{get:function(){return MergeCells}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_plugins__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__,$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],stopImmediatePropagation=(($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,($___46__46__47__46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_event__}).stopImmediatePropagation),WalkontableCellCoords=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=_dereq_("3rdparty/walkontable/src/cell/coords"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{"default":$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords,WalkontableCellRange=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__=_dereq_("3rdparty/walkontable/src/cell/range"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__||{"default":$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_range__}).WalkontableCellRange,WalkontableTable=($___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__=_dereq_("3rdparty/walkontable/src/table"),$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__.__esModule&&$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__||{"default":$___46__46__47__46__46__47_3rdparty_47_walkontable_47_src_47_table__}).WalkontableTable;MergeCells.prototype.canMergeRange=function(cellRange){return!cellRange.isSingle()},MergeCells.prototype.mergeRange=function(cellRange){if(this.canMergeRange(cellRange)){var topLeft=cellRange.getTopLeftCorner(),bottomRight=cellRange.getBottomRightCorner(),mergeParent={};mergeParent.row=topLeft.row,mergeParent.col=topLeft.col,mergeParent.rowspan=bottomRight.row-topLeft.row+1,mergeParent.colspan=bottomRight.col-topLeft.col+1,this.mergedCellInfoCollection.setInfo(mergeParent)}},MergeCells.prototype.mergeOrUnmergeSelection=function(cellRange){var info=this.mergedCellInfoCollection.getInfo(cellRange.from.row,cellRange.from.col);info?this.unmergeSelection(cellRange.from):this.mergeSelection(cellRange)},MergeCells.prototype.mergeSelection=function(cellRange){this.mergeRange(cellRange)},MergeCells.prototype.unmergeSelection=function(cellRange){var info=this.mergedCellInfoCollection.getInfo(cellRange.row,cellRange.col);this.mergedCellInfoCollection.removeInfo(info.row,info.col)},MergeCells.prototype.applySpanProperties=function(TD,row,col){var info=this.mergedCellInfoCollection.getInfo(row,col);info?info.row===row&&info.col===col?(TD.setAttribute("rowspan",info.rowspan),TD.setAttribute("colspan",info.colspan)):(TD.removeAttribute("rowspan"),TD.removeAttribute("colspan"),TD.style.display="none"):(TD.removeAttribute("rowspan"),TD.removeAttribute("colspan"))},MergeCells.prototype.modifyTransform=function(hook,currentSelectedRange,delta){var sameRowspan=function(merged,coords){return coords.row>=merged.row&&coords.row<=merged.row+merged.rowspan-1},sameColspan=function(merged,coords){return coords.col>=merged.col&&coords.col<=merged.col+merged.colspan-1},getNextPosition=function(newDelta){return new WalkontableCellCoords(currentSelectedRange.to.row+newDelta.row,currentSelectedRange.to.col+newDelta.col)},newDelta={row:delta.row,col:delta.col};if("modifyTransformStart"==hook){this.lastDesiredCoords||(this.lastDesiredCoords=new WalkontableCellCoords(null,null));for(var currentRangeContainsMerge,currentPosition=new WalkontableCellCoords(currentSelectedRange.highlight.row,currentSelectedRange.highlight.col),mergedParent=this.mergedCellInfoCollection.getInfo(currentPosition.row,currentPosition.col),i=0,mergesLength=this.mergedCellInfoCollection.length;i<mergesLength;i++){var range=this.mergedCellInfoCollection[i];if(range=new WalkontableCellCoords(range.row+range.rowspan-1,range.col+range.colspan-1),currentSelectedRange.includes(range)){currentRangeContainsMerge=!0;break}}if(mergedParent){var mergeTopLeft=new WalkontableCellCoords(mergedParent.row,mergedParent.col),mergeBottomRight=new WalkontableCellCoords(mergedParent.row+mergedParent.rowspan-1,mergedParent.col+mergedParent.colspan-1),mergeRange=new WalkontableCellRange(mergeTopLeft,mergeTopLeft,mergeBottomRight);mergeRange.includes(this.lastDesiredCoords)||(this.lastDesiredCoords=new WalkontableCellCoords(null,null)),newDelta.row=this.lastDesiredCoords.row?this.lastDesiredCoords.row-currentPosition.row:newDelta.row,newDelta.col=this.lastDesiredCoords.col?this.lastDesiredCoords.col-currentPosition.col:newDelta.col,delta.row>0?newDelta.row=mergedParent.row+mergedParent.rowspan-1-currentPosition.row+delta.row:delta.row<0&&(newDelta.row=currentPosition.row-mergedParent.row+delta.row),delta.col>0?newDelta.col=mergedParent.col+mergedParent.colspan-1-currentPosition.col+delta.col:delta.col<0&&(newDelta.col=currentPosition.col-mergedParent.col+delta.col)}var nextPosition=new WalkontableCellCoords(currentSelectedRange.highlight.row+newDelta.row,currentSelectedRange.highlight.col+newDelta.col),nextParentIsMerged=this.mergedCellInfoCollection.getInfo(nextPosition.row,nextPosition.col);nextParentIsMerged&&(this.lastDesiredCoords=nextPosition,newDelta={row:nextParentIsMerged.row-currentPosition.row,col:nextParentIsMerged.col-currentPosition.col})}else if("modifyTransformEnd"==hook)for(var i=0,mergesLength=this.mergedCellInfoCollection.length;i<mergesLength;i++){var currentMerge=this.mergedCellInfoCollection[i],mergeTopLeft=new WalkontableCellCoords(currentMerge.row,currentMerge.col),mergeBottomRight=new WalkontableCellCoords(currentMerge.row+currentMerge.rowspan-1,currentMerge.col+currentMerge.colspan-1),mergedRange=new WalkontableCellRange(mergeTopLeft,mergeTopLeft,mergeBottomRight),sharedBorders=currentSelectedRange.getBordersSharedWith(mergedRange);if(mergedRange.isEqual(currentSelectedRange))currentSelectedRange.setDirection("NW-SE");else if(sharedBorders.length>0){var mergeHighlighted=currentSelectedRange.highlight.isEqual(mergedRange.from);sharedBorders.indexOf("top")>-1?currentSelectedRange.to.isSouthEastOf(mergedRange.from)&&mergeHighlighted?currentSelectedRange.setDirection("NW-SE"):currentSelectedRange.to.isSouthWestOf(mergedRange.from)&&mergeHighlighted&&currentSelectedRange.setDirection("NE-SW"):sharedBorders.indexOf("bottom")>-1&&(currentSelectedRange.to.isNorthEastOf(mergedRange.from)&&mergeHighlighted?currentSelectedRange.setDirection("SW-NE"):currentSelectedRange.to.isNorthWestOf(mergedRange.from)&&mergeHighlighted&&currentSelectedRange.setDirection("SE-NW"))}var nextPosition=getNextPosition(newDelta),withinRowspan=sameRowspan(currentMerge,nextPosition),withinColspan=sameColspan(currentMerge,nextPosition);currentSelectedRange.includesRange(mergedRange)&&(mergedRange.includes(nextPosition)||withinRowspan||withinColspan)&&(withinRowspan&&(newDelta.row<0?newDelta.row-=currentMerge.rowspan-1:newDelta.row>0&&(newDelta.row+=currentMerge.rowspan-1)),withinColspan&&(newDelta.col<0?newDelta.col-=currentMerge.colspan-1:newDelta.col>0&&(newDelta.col+=currentMerge.colspan-1)))}0!==newDelta.row&&(delta.row=newDelta.row),0!==newDelta.col&&(delta.col=newDelta.col)},MergeCells.prototype.shiftCollection=function(direction,index,count){var shiftVector=[0,0];switch(direction){case"right":shiftVector[0]+=1;break;case"left":shiftVector[0]-=1;break;case"down":shiftVector[1]+=1;break;case"up":shiftVector[1]-=1}for(var i=0;i<this.mergedCellInfoCollection.length;i++){var currentMerge=this.mergedCellInfoCollection[i];"right"===direction||"left"===direction?index<=currentMerge.col&&(currentMerge.col+=shiftVector[0]):index<=currentMerge.row&&(currentMerge.row+=shiftVector[1])}};var beforeInit=function(){var instance=this,mergeCellsSetting=instance.getSettings().mergeCells;mergeCellsSetting&&(instance.mergeCells||(instance.mergeCells=new MergeCells(mergeCellsSetting)))},afterInit=function(){var instance=this;instance.mergeCells&&(instance.view.wt.wtTable.getCell=function(coords){if(instance.getSettings().mergeCells){var mergeParent=instance.mergeCells.mergedCellInfoCollection.getInfo(coords.row,coords.col);mergeParent&&(coords=mergeParent)}return WalkontableTable.prototype.getCell.call(this,coords)})},afterUpdateSettings=function(){var instance=this,mergeCellsSetting=instance.getSettings().mergeCells;if(mergeCellsSetting)if(instance.mergeCells){if(instance.mergeCells.mergedCellInfoCollection=new CellInfoCollection,Array.isArray(mergeCellsSetting))for(var i=0,ilen=mergeCellsSetting.length;i<ilen;i++)instance.mergeCells.mergedCellInfoCollection.setInfo(mergeCellsSetting[i])}else instance.mergeCells=new MergeCells(mergeCellsSetting);else instance.mergeCells&&(instance.mergeCells.mergedCellInfoCollection=new CellInfoCollection)},onBeforeKeyDown=function(event){if(this.mergeCells){var ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;ctrlDown&&77===event.keyCode&&(this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render(),stopImmediatePropagation(event))}},addMergeActionsToContextMenu=function(defaultOptions){this.getSettings().mergeCells&&(defaultOptions.items.push(Handsontable.plugins.ContextMenu.SEPARATOR),defaultOptions.items.push({key:"mergeCells",name:function(){var sel=this.getSelected(),info=this.mergeCells.mergedCellInfoCollection.getInfo(sel[0],sel[1]);return info?"Unmerge cells":"Merge cells"},callback:function(){this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render()},disabled:function(){return this.selection.selectedHeader.corner}}))},afterRenderer=function(TD,row,col,prop,value,cellProperties){this.mergeCells&&this.mergeCells.applySpanProperties(TD,row,col)},modifyTransformFactory=function(hook){return function(delta){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting){var currentSelectedRange=this.getSelectedRange();if(this.mergeCells.modifyTransform(hook,currentSelectedRange,delta),"modifyTransformEnd"===hook){var totalRows=this.countRows(),totalCols=this.countCols();currentSelectedRange.from.row<0?currentSelectedRange.from.row=0:currentSelectedRange.from.row>0&&currentSelectedRange.from.row>=totalRows&&(currentSelectedRange.from.row=currentSelectedRange.from-1),currentSelectedRange.from.col<0?currentSelectedRange.from.col=0:currentSelectedRange.from.col>0&&currentSelectedRange.from.col>=totalCols&&(currentSelectedRange.from.col=totalCols-1)}}}},beforeSetRangeEnd=function(coords){this.lastDesiredCoords=null;var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting){var selRange=this.getSelectedRange();selRange.highlight=new WalkontableCellCoords(selRange.highlight.row,selRange.highlight.col),selRange.to=coords;var rangeExpanded=!1;do{rangeExpanded=!1;for(var i=0,ilen=this.mergeCells.mergedCellInfoCollection.length;i<ilen;i++){var cellInfo=this.mergeCells.mergedCellInfoCollection[i],mergedCellTopLeft=new WalkontableCellCoords(cellInfo.row,cellInfo.col),mergedCellBottomRight=new WalkontableCellCoords(cellInfo.row+cellInfo.rowspan-1,cellInfo.col+cellInfo.colspan-1),mergedCellRange=new WalkontableCellRange(mergedCellTopLeft,mergedCellTopLeft,mergedCellBottomRight);selRange.expandByRange(mergedCellRange)&&(coords.row=selRange.to.row,coords.col=selRange.to.col,rangeExpanded=!0)}}while(rangeExpanded)}},beforeDrawAreaBorders=function(corners,className){if(className&&"area"==className){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting)for(var selRange=this.getSelectedRange(),startRange=new WalkontableCellRange(selRange.from,selRange.from,selRange.from),stopRange=new WalkontableCellRange(selRange.to,selRange.to,selRange.to),i=0,ilen=this.mergeCells.mergedCellInfoCollection.length;i<ilen;i++){var cellInfo=this.mergeCells.mergedCellInfoCollection[i],mergedCellTopLeft=new WalkontableCellCoords(cellInfo.row,cellInfo.col),mergedCellBottomRight=new WalkontableCellCoords(cellInfo.row+cellInfo.rowspan-1,cellInfo.col+cellInfo.colspan-1),mergedCellRange=new WalkontableCellRange(mergedCellTopLeft,mergedCellTopLeft,mergedCellBottomRight);startRange.expandByRange(mergedCellRange)&&(corners[0]=startRange.from.row,corners[1]=startRange.from.col),stopRange.expandByRange(mergedCellRange)&&(corners[2]=stopRange.from.row,corners[3]=stopRange.from.col)}}},afterGetCellMeta=function(row,col,cellProperties){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting){var mergeParent=this.mergeCells.mergedCellInfoCollection.getInfo(row,col);!mergeParent||mergeParent.row==row&&mergeParent.col==col||(cellProperties.copyable=!1)}},afterViewportRowCalculatorOverride=function afterViewportRowCalculatorOverride(calc){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting)for(var mergeParent,colCount=this.countCols(),c=0;c<colCount;c++){if(mergeParent=this.mergeCells.mergedCellInfoCollection.getInfo(calc.startRow,c),mergeParent&&mergeParent.row<calc.startRow)return calc.startRow=mergeParent.row,afterViewportRowCalculatorOverride.call(this,calc);if(mergeParent=this.mergeCells.mergedCellInfoCollection.getInfo(calc.endRow,c)){var mergeEnd=mergeParent.row+mergeParent.rowspan-1;if(mergeEnd>calc.endRow)return calc.endRow=mergeEnd,afterViewportRowCalculatorOverride.call(this,calc)}}},afterViewportColumnCalculatorOverride=function afterViewportColumnCalculatorOverride(calc){var mergeCellsSetting=this.getSettings().mergeCells;if(mergeCellsSetting)for(var mergeParent,rowCount=this.countRows(),r=0;r<rowCount;r++){if(mergeParent=this.mergeCells.mergedCellInfoCollection.getInfo(r,calc.startColumn),mergeParent&&mergeParent.col<calc.startColumn)return calc.startColumn=mergeParent.col,afterViewportColumnCalculatorOverride.call(this,calc);if(mergeParent=this.mergeCells.mergedCellInfoCollection.getInfo(r,calc.endColumn)){var mergeEnd=mergeParent.col+mergeParent.colspan-1;if(mergeEnd>calc.endColumn)return calc.endColumn=mergeEnd,afterViewportColumnCalculatorOverride.call(this,calc)}}},isMultipleSelection=function(isMultiple){if(isMultiple&&this.mergeCells){var mergedCells=this.mergeCells.mergedCellInfoCollection,selectionRange=this.getSelectedRange();for(var group in mergedCells)if(selectionRange.highlight.row==mergedCells[group].row&&selectionRange.highlight.col==mergedCells[group].col&&selectionRange.to.row==mergedCells[group].row+mergedCells[group].rowspan-1&&selectionRange.to.col==mergedCells[group].col+mergedCells[group].colspan-1)return!1}return isMultiple;
};Handsontable.hooks.add("beforeInit",beforeInit),Handsontable.hooks.add("afterInit",afterInit),Handsontable.hooks.add("afterUpdateSettings",afterUpdateSettings),Handsontable.hooks.add("beforeKeyDown",onBeforeKeyDown),Handsontable.hooks.add("modifyTransformStart",modifyTransformFactory("modifyTransformStart")),Handsontable.hooks.add("modifyTransformEnd",modifyTransformFactory("modifyTransformEnd")),Handsontable.hooks.add("beforeSetRangeEnd",beforeSetRangeEnd),Handsontable.hooks.add("beforeDrawBorders",beforeDrawAreaBorders),Handsontable.hooks.add("afterIsMultipleSelection",isMultipleSelection),Handsontable.hooks.add("afterRenderer",afterRenderer),Handsontable.hooks.add("afterContextMenuDefaultOptions",addMergeActionsToContextMenu),Handsontable.hooks.add("afterGetCellMeta",afterGetCellMeta),Handsontable.hooks.add("afterViewportRowCalculatorOverride",afterViewportRowCalculatorOverride),Handsontable.hooks.add("afterViewportColumnCalculatorOverride",afterViewportColumnCalculatorOverride),Handsontable.hooks.add("afterAutofillApplyValues",afterAutofillApplyValues),Handsontable.hooks.add("afterCreateCol",onAfterCreateCol),Handsontable.hooks.add("afterRemoveCol",onAfterRemoveCol),Handsontable.hooks.add("afterCreateRow",onAfterCreateRow),Handsontable.hooks.add("afterRemoveRow",onAfterRemoveRow),Handsontable.MergeCells=MergeCells},{"3rdparty/walkontable/src/cell/coords":6,"3rdparty/walkontable/src/cell/range":7,"3rdparty/walkontable/src/table":21,browser:24,"helpers/dom/event":48,plugins:61}],108:[function(_dereq_,module,exports){Object.defineProperties(exports,{MultipleSelectionHandles:{get:function(){return MultipleSelectionHandles}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_helpers_47_browser__,$___46__46__47__95_base__,$___46__46__47__46__46__47_eventManager__,$___46__46__47__46__46__47_plugins__,$__1=(($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],$___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),getWindowScrollTop=$__1.getWindowScrollTop,hasClass=$__1.hasClass,getWindowScrollLeft=$__1.getWindowScrollLeft,isMobileBrowser=($___46__46__47__46__46__47_helpers_47_browser__=_dereq_("helpers/browser"),$___46__46__47__46__46__47_helpers_47_browser__&&$___46__46__47__46__46__47_helpers_47_browser__.__esModule&&$___46__46__47__46__46__47_helpers_47_browser__||{"default":$___46__46__47__46__46__47_helpers_47_browser__}).isMobileBrowser,BasePlugin=($___46__46__47__95_base__=_dereq_("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{"default":$___46__46__47__95_base__})["default"],EventManager=($___46__46__47__46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47__46__46__47_eventManager__&&$___46__46__47__46__46__47_eventManager__.__esModule&&$___46__46__47__46__46__47_eventManager__||{"default":$___46__46__47__46__46__47_eventManager__}).EventManager,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,MultipleSelectionHandles=function(hotInstance){$traceurRuntime.superConstructor($MultipleSelectionHandles).call(this,hotInstance),this.dragged=[],this.eventManager=null,this.lastSetCell=null},$MultipleSelectionHandles=MultipleSelectionHandles;$traceurRuntime.createClass(MultipleSelectionHandles,{isEnabled:function(){return isMobileBrowser()},enablePlugin:function(){this.enabled||(this.eventManager||(this.eventManager=new EventManager(this)),this.registerListeners(),$traceurRuntime.superGet(this,$MultipleSelectionHandles.prototype,"enablePlugin").call(this))},registerListeners:function(){function removeFromDragged(query){if(1===_this.dragged.length)return _this.dragged.splice(0,_this.dragged.length),!0;var entryPosition=_this.dragged.indexOf(query);return entryPosition!=-1&&void(0===entryPosition?_this.dragged=_this.dragged.slice(0,1):1==entryPosition&&(_this.dragged=_this.dragged.slice(-1)))}var _this=this;this.eventManager.addEventListener(this.hot.rootElement,"touchstart",function(event){var selectedRange;return hasClass(event.target,"topLeftSelectionHandle-HitArea")?(selectedRange=_this.hot.getSelectedRange(),_this.dragged.push("topLeft"),_this.touchStartRange={width:selectedRange.getWidth(),height:selectedRange.getHeight(),direction:selectedRange.getDirection()},event.preventDefault(),!1):hasClass(event.target,"bottomRightSelectionHandle-HitArea")?(selectedRange=_this.hot.getSelectedRange(),_this.dragged.push("bottomRight"),_this.touchStartRange={width:selectedRange.getWidth(),height:selectedRange.getHeight(),direction:selectedRange.getDirection()},event.preventDefault(),!1):void 0}),this.eventManager.addEventListener(this.hot.rootElement,"touchend",function(event){return hasClass(event.target,"topLeftSelectionHandle-HitArea")?(removeFromDragged.call(_this,"topLeft"),_this.touchStartRange=void 0,event.preventDefault(),!1):hasClass(event.target,"bottomRightSelectionHandle-HitArea")?(removeFromDragged.call(_this,"bottomRight"),_this.touchStartRange=void 0,event.preventDefault(),!1):void 0}),this.eventManager.addEventListener(this.hot.rootElement,"touchmove",function(event){var endTarget,targetCoords,selectedRange,rangeWidth,rangeHeight,rangeDirection,newRangeCoords,scrollTop=getWindowScrollTop(),scrollLeft=getWindowScrollLeft();0!==_this.dragged.length&&(endTarget=document.elementFromPoint(event.touches[0].screenX-scrollLeft,event.touches[0].screenY-scrollTop),endTarget&&endTarget!==_this.lastSetCell&&("TD"!=endTarget.nodeName&&"TH"!=endTarget.nodeName||(targetCoords=_this.hot.getCoords(endTarget),targetCoords.col==-1&&(targetCoords.col=0),selectedRange=_this.hot.getSelectedRange(),rangeWidth=selectedRange.getWidth(),rangeHeight=selectedRange.getHeight(),rangeDirection=selectedRange.getDirection(),1==rangeWidth&&1==rangeHeight&&_this.hot.selection.setRangeEnd(targetCoords),newRangeCoords=_this.getCurrentRangeCoords(selectedRange,targetCoords,_this.touchStartRange.direction,rangeDirection,_this.dragged[0]),null!==newRangeCoords.start&&_this.hot.selection.setRangeStart(newRangeCoords.start),_this.hot.selection.setRangeEnd(newRangeCoords.end),_this.lastSetCell=endTarget),event.preventDefault()))})},getCurrentRangeCoords:function(selectedRange,currentTouch,touchStartDirection,currentDirection,draggedHandle){var topLeftCorner=selectedRange.getTopLeftCorner(),bottomRightCorner=selectedRange.getBottomRightCorner(),bottomLeftCorner=selectedRange.getBottomLeftCorner(),topRightCorner=selectedRange.getTopRightCorner(),newCoords={start:null,end:null};switch(touchStartDirection){case"NE-SW":switch(currentDirection){case"NE-SW":case"NW-SE":newCoords="topLeft"==draggedHandle?{start:new WalkontableCellCoords(currentTouch.row,selectedRange.highlight.col),end:new WalkontableCellCoords(bottomLeftCorner.row,currentTouch.col)}:{start:new WalkontableCellCoords(selectedRange.highlight.row,currentTouch.col),end:new WalkontableCellCoords(currentTouch.row,topLeftCorner.col)};break;case"SE-NW":"bottomRight"==draggedHandle&&(newCoords={start:new WalkontableCellCoords(bottomRightCorner.row,currentTouch.col),end:new WalkontableCellCoords(currentTouch.row,topLeftCorner.col)})}break;case"NW-SE":switch(currentDirection){case"NE-SW":"topLeft"==draggedHandle?newCoords={start:currentTouch,end:bottomLeftCorner}:newCoords.end=currentTouch;break;case"NW-SE":"topLeft"==draggedHandle?newCoords={start:currentTouch,end:bottomRightCorner}:newCoords.end=currentTouch;break;case"SE-NW":"topLeft"==draggedHandle?newCoords={start:currentTouch,end:topLeftCorner}:newCoords.end=currentTouch;break;case"SW-NE":"topLeft"==draggedHandle?newCoords={start:currentTouch,end:topRightCorner}:newCoords.end=currentTouch}break;case"SW-NE":switch(currentDirection){case"NW-SE":newCoords="bottomRight"==draggedHandle?{start:new WalkontableCellCoords(currentTouch.row,topLeftCorner.col),end:new WalkontableCellCoords(bottomLeftCorner.row,currentTouch.col)}:{start:new WalkontableCellCoords(topLeftCorner.row,currentTouch.col),end:new WalkontableCellCoords(currentTouch.row,bottomRightCorner.col)};break;case"SW-NE":newCoords="topLeft"==draggedHandle?{start:new WalkontableCellCoords(selectedRange.highlight.row,currentTouch.col),end:new WalkontableCellCoords(currentTouch.row,bottomRightCorner.col)}:{start:new WalkontableCellCoords(currentTouch.row,topLeftCorner.col),end:new WalkontableCellCoords(topLeftCorner.row,currentTouch.col)};break;case"SE-NW":"bottomRight"==draggedHandle?newCoords={start:new WalkontableCellCoords(currentTouch.row,topRightCorner.col),end:new WalkontableCellCoords(topLeftCorner.row,currentTouch.col)}:"topLeft"==draggedHandle&&(newCoords={start:bottomLeftCorner,end:currentTouch})}break;case"SE-NW":switch(currentDirection){case"NW-SE":case"NE-SW":case"SW-NE":"topLeft"==draggedHandle&&(newCoords.end=currentTouch);break;case"SE-NW":"topLeft"==draggedHandle?newCoords.end=currentTouch:newCoords={start:currentTouch,end:topLeftCorner}}}return newCoords},isDragged:function(){return this.dragged.length>0}},{},BasePlugin),registerPlugin("multipleSelectionHandles",MultipleSelectionHandles)},{_base:62,browser:24,eventManager:42,"helpers/browser":44,"helpers/dom/element":47,plugins:61}],109:[function(_dereq_,module,exports){Object.defineProperties(exports,{DataObserver:{get:function(){return DataObserver}},__esModule:{value:!0}});var $__jsonpatch__,$___46__46__47__46__46__47_mixins_47_localHooks__,$___46__46__47__46__46__47_helpers_47_object__,$__utils__,jsonpatch=($__jsonpatch__=_dereq_("jsonpatch"),$__jsonpatch__&&$__jsonpatch__.__esModule&&$__jsonpatch__||{"default":$__jsonpatch__})["default"],localHooks=($___46__46__47__46__46__47_mixins_47_localHooks__=_dereq_("../../mixins/localHooks"),$___46__46__47__46__46__47_mixins_47_localHooks__&&$___46__46__47__46__46__47_mixins_47_localHooks__.__esModule&&$___46__46__47__46__46__47_mixins_47_localHooks__||{"default":$___46__46__47__46__46__47_mixins_47_localHooks__}).localHooks,mixin=($___46__46__47__46__46__47_helpers_47_object__=_dereq_("../../helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{"default":$___46__46__47__46__46__47_helpers_47_object__}).mixin,cleanPatches=($__utils__=_dereq_("utils"),$__utils__&&$__utils__.__esModule&&$__utils__||{"default":$__utils__}).cleanPatches,DataObserver=function(observedData){this.observedData=null,this.observer=null,this.paused=!1,this.setObservedData(observedData)};$traceurRuntime.createClass(DataObserver,{setObservedData:function(observedData){var $__4=this;this.observer&&jsonpatch.unobserve(this.observedData,this.observer),this.observedData=observedData,this.observer=jsonpatch.observe(this.observedData,function(patches){return $__4.onChange(patches)})},isPaused:function(){return this.paused},pause:function(){this.paused=!0},resume:function(){this.paused=!1},onChange:function(patches){this.runLocalHooks("change",cleanPatches(patches))},destroy:function(){jsonpatch.unobserve(this.observedData,this.observer),this.observedData=null,this.observer=null}},{}),mixin(DataObserver,localHooks)},{"../../helpers/object":53,"../../mixins/localHooks":58,jsonpatch:"jsonpatch",utils:111}],110:[function(_dereq_,module,exports){Object.defineProperties(exports,{ObserveChanges:{get:function(){return ObserveChanges}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__95_base__,$__jsonpatch__,$__dataObserver__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_plugins__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],BasePlugin=($___46__46__47__95_base__=_dereq_("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{"default":$___46__46__47__95_base__})["default"],DataObserver=(($__jsonpatch__=_dereq_("jsonpatch"),$__jsonpatch__&&$__jsonpatch__.__esModule&&$__jsonpatch__||{"default":$__jsonpatch__})["default"],($__dataObserver__=_dereq_("dataObserver"),$__dataObserver__&&$__dataObserver__.__esModule&&$__dataObserver__||{"default":$__dataObserver__}).DataObserver),arrayEach=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayEach,registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin;Handsontable.hooks.register("afterChangesObserved");var ObserveChanges=function(hotInstance){$traceurRuntime.superConstructor($ObserveChanges).call(this,hotInstance),this.observer=null},$ObserveChanges=ObserveChanges;$traceurRuntime.createClass(ObserveChanges,{isEnabled:function(){return this.hot.getSettings().observeChanges},enablePlugin:function(){var $__6=this;this.enabled||(this.observer||(this.observer=new DataObserver(this.hot.getSourceData()),this._exposePublicApi()),this.observer.addLocalHook("change",function(patches){return $__6.onDataChange(patches)}),this.addHook("afterCreateRow",function(){return $__6.onAfterTableAlter()}),this.addHook("afterRemoveRow",function(){return $__6.onAfterTableAlter()}),this.addHook("afterCreateCol",function(){return $__6.onAfterTableAlter()}),this.addHook("afterRemoveCol",function(){return $__6.onAfterTableAlter()}),this.addHook("afterChange",function(changes,source){return $__6.onAfterTableAlter(source)}),this.addHook("afterLoadData",function(firstRun){return $__6.onAfterLoadData(firstRun)}),$traceurRuntime.superGet(this,$ObserveChanges.prototype,"enablePlugin").call(this))},disablePlugin:function(){this.observer&&(this.observer.destroy(),this.observer=null,this._deletePublicApi()),$traceurRuntime.superGet(this,$ObserveChanges.prototype,"disablePlugin").call(this)},onDataChange:function(patches){var $__6=this;if(!this.observer.isPaused()){var actions={add:function(patch){isNaN(patch.col)?$__6.hot.runHooks("afterCreateRow",patch.row):$__6.hot.runHooks("afterCreateCol",patch.col)},remove:function(patch){isNaN(patch.col)?$__6.hot.runHooks("afterRemoveRow",patch.row,1):$__6.hot.runHooks("afterRemoveCol",patch.col,1)},replace:function(patch){$__6.hot.runHooks("afterChange",[patch.row,patch.col,null,patch.value],"external")}};arrayEach(patches,function(patch){actions[patch.op]&&actions[patch.op](patch)}),this.hot.render()}this.hot.runHooks("afterChangesObserved")},onAfterTableAlter:function(source){var $__6=this;"loadData"!==source&&(this.observer.pause(),this.hot.addHookOnce("afterChangesObserved",function(){return $__6.observer.resume()}))},onAfterLoadData:function(firstRun){firstRun||this.observer.setObservedData(this.hot.getSourceData())},destroy:function(){this.observer&&(this.observer.destroy(),this._deletePublicApi()),$traceurRuntime.superGet(this,$ObserveChanges.prototype,"destroy").call(this)},_exposePublicApi:function(){var $__6=this,hot=this.hot;hot.pauseObservingChanges=function(){return $__6.observer.pause()},hot.resumeObservingChanges=function(){return $__6.observer.resume()},hot.isPausedObservingChanges=function(){return $__6.observer.isPaused()}},_deletePublicApi:function(){var hot=this.hot;delete hot.pauseObservingChanges,delete hot.resumeObservingChanges,delete hot.isPausedObservingChanges}},{},BasePlugin),registerPlugin("observeChanges",ObserveChanges)},{_base:62,browser:24,dataObserver:109,"helpers/array":43,jsonpatch:"jsonpatch",plugins:61}],111:[function(_dereq_,module,exports){function cleanPatches(patches){var newOrRemovedColumns=[];return patches=arrayFilter(patches,function(patch){return!/[\/]length/gi.test(patch.path)&&!!parsePath(patch.path)}),patches=arrayMap(patches,function(patch){var coords=parsePath(patch.path);return patch.row=coords.row,patch.col=coords.col,patch}),patches=arrayFilter(patches,function(patch){if(["add","remove"].indexOf(patch.op)!==-1&&!isNaN(patch.col)){if(newOrRemovedColumns.indexOf(patch.col)!==-1)return!1;newOrRemovedColumns.push(patch.col)}return!0}),newOrRemovedColumns.length=0,patches}function parsePath(path){var match=path.match(/^\/(\d+)\/?(.*)?$/);if(!match)return null;var $__1=match,row=$__1[1],column=$__1[2];return{row:parseInt(row,10),col:/^\d*$/.test(column)?parseInt(column,10):column}}Object.defineProperties(exports,{cleanPatches:{get:function(){return cleanPatches}},parsePath:{get:function(){return parsePath}},__esModule:{value:!0}});var $___46__46__47__46__46__47_helpers_47_array__,$__0=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("../../helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}),arrayFilter=$__0.arrayFilter,arrayMap=$__0.arrayMap},{"../../helpers/array":43}],112:[function(_dereq_,module,exports){function Storage(prefix){var savedKeys,saveSavedKeys=function(){window.localStorage[prefix+"__persistentStateKeys"]=JSON.stringify(savedKeys)},loadSavedKeys=function(){var keysJSON=window.localStorage[prefix+"__persistentStateKeys"],keys="string"==typeof keysJSON?JSON.parse(keysJSON):void 0;savedKeys=keys?keys:[]},clearSavedKeys=function(){savedKeys=[],saveSavedKeys()};loadSavedKeys(),this.saveValue=function(key,value){window.localStorage[prefix+"_"+key]=JSON.stringify(value),savedKeys.indexOf(key)==-1&&(savedKeys.push(key),saveSavedKeys())},this.loadValue=function(key,defaultValue){key="undefined"==typeof key?defaultValue:key;var value=window.localStorage[prefix+"_"+key];return"undefined"==typeof value?void 0:JSON.parse(value)},this.reset=function(key){window.localStorage.removeItem(prefix+"_"+key)},this.resetAll=function(){for(var index=0;index<savedKeys.length;index++)window.localStorage.removeItem(prefix+"_"+savedKeys[index]);clearSavedKeys()}}function HandsontablePersistentState(){function addHooks(){var instance=this;for(var hookName in hooks)hooks.hasOwnProperty(hookName)&&instance.addHook(hookName,hooks[hookName])}function removeHooks(){var instance=this;for(var hookName in hooks)hooks.hasOwnProperty(hookName)&&instance.removeHook(hookName,hooks[hookName])}var plugin=this;this.init=function(){var instance=this,pluginSettings=instance.getSettings().persistentState;return plugin.enabled=!!pluginSettings,plugin.enabled?(instance.storage||(instance.storage=new Storage(instance.rootElement.id)),instance.resetState=plugin.resetValue,void addHooks.call(instance)):void removeHooks.call(instance)},this.saveValue=function(key,value){var instance=this;instance.storage.saveValue(key,value)},this.loadValue=function(key,saveTo){var instance=this;saveTo.value=instance.storage.loadValue(key)},this.resetValue=function(key){var instance=this;"undefined"==typeof key?instance.storage.resetAll():instance.storage.reset(key)};var hooks={persistentStateSave:plugin.saveValue,persistentStateLoad:plugin.loadValue,persistentStateReset:plugin.resetValue};for(var hookName in hooks)hooks.hasOwnProperty(hookName)&&Handsontable.hooks.register(hookName)}Object.defineProperties(exports,{HandsontablePersistentState:{get:function(){return HandsontablePersistentState}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_plugins__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],htPersistentState=(($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,new HandsontablePersistentState);Handsontable.hooks.add("beforeInit",htPersistentState.init),Handsontable.hooks.add("afterUpdateSettings",htPersistentState.init)},{browser:24,plugins:61}],113:[function(_dereq_,module,exports){function init(){var instance=this,pluginEnabled=!!instance.getSettings().search;pluginEnabled?instance.search=new Handsontable.Search(instance):delete instance.search}var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__46__46__47_renderers__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],$__1=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,removeClass=$__1.removeClass,$__2=($___46__46__47__46__46__47_renderers__=_dereq_("renderers"),$___46__46__47__46__46__47_renderers__&&$___46__46__47__46__46__47_renderers__.__esModule&&$___46__46__47__46__46__47_renderers__||{"default":$___46__46__47__46__46__47_renderers__}),registerRenderer=$__2.registerRenderer,getRenderer=$__2.getRenderer;Handsontable.Search=function(instance){this.query=function(queryStr,callback,queryMethod){var rowCount=instance.countRows(),colCount=instance.countCols(),queryResult=[];callback||(callback=Handsontable.Search.global.getDefaultCallback()),queryMethod||(queryMethod=Handsontable.Search.global.getDefaultQueryMethod());for(var rowIndex=0;rowIndex<rowCount;rowIndex++)for(var colIndex=0;colIndex<colCount;colIndex++){var cellData=instance.getDataAtCell(rowIndex,colIndex),cellProperties=instance.getCellMeta(rowIndex,colIndex),cellCallback=cellProperties.search.callback||callback,cellQueryMethod=cellProperties.search.queryMethod||queryMethod,testResult=cellQueryMethod(queryStr,cellData);if(testResult){var singleResult={row:rowIndex,col:colIndex,data:cellData};queryResult.push(singleResult)}cellCallback&&cellCallback(instance,rowIndex,colIndex,cellData,testResult)}return queryResult}},Handsontable.Search.DEFAULT_CALLBACK=function(instance,row,col,data,testResult){instance.getCellMeta(row,col).isSearchResult=testResult},Handsontable.Search.DEFAULT_QUERY_METHOD=function(query,value){return!("undefined"==typeof query||null==query||!query.toLowerCase||0===query.length)&&("undefined"!=typeof value&&null!=value&&value.toString().toLowerCase().indexOf(query.toLowerCase())!=-1)},Handsontable.Search.DEFAULT_SEARCH_RESULT_CLASS="htSearchResult",Handsontable.Search.global=function(){var defaultCallback=Handsontable.Search.DEFAULT_CALLBACK,defaultQueryMethod=Handsontable.Search.DEFAULT_QUERY_METHOD,defaultSearchResultClass=Handsontable.Search.DEFAULT_SEARCH_RESULT_CLASS;return{getDefaultCallback:function(){return defaultCallback},setDefaultCallback:function(newDefaultCallback){defaultCallback=newDefaultCallback},getDefaultQueryMethod:function(){return defaultQueryMethod},setDefaultQueryMethod:function(newDefaultQueryMethod){defaultQueryMethod=newDefaultQueryMethod},getDefaultSearchResultClass:function(){return defaultSearchResultClass},setDefaultSearchResultClass:function(newSearchResultClass){defaultSearchResultClass=newSearchResultClass}}}(),Handsontable.SearchCellDecorator=function(instance,TD,row,col,prop,value,cellProperties){var searchResultClass=null!==cellProperties.search&&"object"==_typeof(cellProperties.search)&&cellProperties.search.searchResultClass||Handsontable.Search.global.getDefaultSearchResultClass();cellProperties.isSearchResult?addClass(TD,searchResultClass):removeClass(TD,searchResultClass)};var originalBaseRenderer=getRenderer("base");registerRenderer("base",function(instance,TD,row,col,prop,value,cellProperties){originalBaseRenderer.apply(this,arguments),Handsontable.SearchCellDecorator.apply(this,arguments)}),Handsontable.hooks.add("afterInit",init),Handsontable.hooks.add("afterUpdateSettings",init)},{browser:24,"helpers/dom/element":47,renderers:116}],114:[function(_dereq_,module,exports){Object.defineProperties(exports,{TouchScroll:{get:function(){return TouchScroll}},__esModule:{value:!0}});var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_dom_47_element__,$___46__46__47__95_base__,$___46__46__47__46__46__47_plugins__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],$__1=($___46__46__47__46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47__46__46__47_helpers_47_dom_47_element__&&$___46__46__47__46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,removeClass=$__1.removeClass,BasePlugin=($___46__46__47__95_base__=_dereq_("_base"),$___46__46__47__95_base__&&$___46__46__47__95_base__.__esModule&&$___46__46__47__95_base__||{"default":$___46__46__47__95_base__})["default"],registerPlugin=($___46__46__47__46__46__47_plugins__=_dereq_("plugins"),$___46__46__47__46__46__47_plugins__&&$___46__46__47__46__46__47_plugins__.__esModule&&$___46__46__47__46__46__47_plugins__||{"default":$___46__46__47__46__46__47_plugins__}).registerPlugin,TouchScroll=function(hotInstance){var $__4=this;$traceurRuntime.superConstructor($TouchScroll).call(this,hotInstance),this.hot.addHook("afterInit",function(){return $__4.afterInit()}),this.hot.addHook("afterUpdateSettings",function(){return $__4.onAfterUpdateSettings()}),this.scrollbars=[],this.clones=[]},$TouchScroll=TouchScroll;$traceurRuntime.createClass(TouchScroll,{afterInit:function(){this.registerEvents(),this.onAfterUpdateSettings()},onAfterUpdateSettings:function(){var _this=this;this.hot.addHookOnce("afterRender",function(){var wtOverlays=_this.hot.view.wt.wtOverlays;_this.scrollbars=[],_this.scrollbars.push(wtOverlays.topOverlay),wtOverlays.bottomOverlay.clone&&_this.scrollbars.push(wtOverlays.bottomOverlay),_this.scrollbars.push(wtOverlays.leftOverlay),wtOverlays.topLeftCornerOverlay&&_this.scrollbars.push(wtOverlays.topLeftCornerOverlay),wtOverlays.bottomLeftCornerOverlay&&wtOverlays.bottomLeftCornerOverlay.clone&&_this.scrollbars.push(wtOverlays.bottomLeftCornerOverlay),_this.clones=[],wtOverlays.topOverlay.needFullRender&&_this.clones.push(wtOverlays.topOverlay.clone.wtTable.holder.parentNode),wtOverlays.bottomOverlay.needFullRender&&_this.clones.push(wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode),wtOverlays.leftOverlay.needFullRender&&_this.clones.push(wtOverlays.leftOverlay.clone.wtTable.holder.parentNode),wtOverlays.topLeftCornerOverlay&&_this.clones.push(wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode),wtOverlays.bottomLeftCornerOverlay&&wtOverlays.bottomLeftCornerOverlay.clone&&_this.clones.push(wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode)})},registerEvents:function(){var $__4=this;this.hot.addHook("beforeTouchScroll",function(){return $__4.onBeforeTouchScroll()}),this.hot.addHook("afterMomentumScroll",function(){return $__4.onAfterMomentumScroll()})},onBeforeTouchScroll:function(){Handsontable.freezeOverlays=!0;for(var i=0,cloneCount=this.clones.length;i<cloneCount;i++)addClass(this.clones[i],"hide-tween")},onAfterMomentumScroll:function(){Handsontable.freezeOverlays=!1;for(var _that=this,i=0,cloneCount=this.clones.length;i<cloneCount;i++)removeClass(this.clones[i],"hide-tween");for(var i$__6=0,cloneCount$__7=this.clones.length;i$__6<cloneCount$__7;i$__6++)addClass(this.clones[i$__6],"show-tween");setTimeout(function(){for(var i=0,cloneCount=_that.clones.length;i<cloneCount;i++)removeClass(_that.clones[i],"show-tween")},400);for(var i$__8=0,cloneCount$__9=this.scrollbars.length;i$__8<cloneCount$__9;i$__8++)this.scrollbars[i$__8].refresh(),this.scrollbars[i$__8].resetFixedPosition();this.hot.view.wt.wtOverlays.syncScrollWithMaster()}},{},BasePlugin),registerPlugin("touchScroll",TouchScroll)},{_base:62,browser:24,"helpers/dom/element":47,plugins:61}],115:[function(_dereq_,module,exports){function init(){var instance=this,pluginEnabled="undefined"==typeof instance.getSettings().undo||instance.getSettings().undo;pluginEnabled?instance.undoRedo||(instance.undoRedo=new Handsontable.UndoRedo(instance),exposeUndoRedoMethods(instance),instance.addHook("beforeKeyDown",onBeforeKeyDown),instance.addHook("afterChange",onAfterChange)):instance.undoRedo&&(delete instance.undoRedo,removeExposedUndoRedoMethods(instance),instance.removeHook("beforeKeyDown",onBeforeKeyDown),instance.removeHook("afterChange",onAfterChange))}function onBeforeKeyDown(event){var instance=this,ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;ctrlDown&&(89===event.keyCode||event.shiftKey&&90===event.keyCode?(instance.undoRedo.redo(),stopImmediatePropagation(event)):90===event.keyCode&&(instance.undoRedo.undo(),stopImmediatePropagation(event)))}function onAfterChange(changes,source){var instance=this;if("loadData"==source)return instance.undoRedo.clear()}function exposeUndoRedoMethods(instance){instance.undo=function(){return instance.undoRedo.undo()},instance.redo=function(){return instance.undoRedo.redo()},instance.isUndoAvailable=function(){return instance.undoRedo.isUndoAvailable()},instance.isRedoAvailable=function(){return instance.undoRedo.isRedoAvailable()},instance.clearUndo=function(){return instance.undoRedo.clear()}}function removeExposedUndoRedoMethods(instance){delete instance.undo,delete instance.redo,delete instance.isUndoAvailable,delete instance.isRedoAvailable,delete instance.clearUndo}var $___46__46__47__46__46__47_browser__,$___46__46__47__46__46__47_helpers_47_array__,$___46__46__47__46__46__47_helpers_47_number__,$___46__46__47__46__46__47_helpers_47_object__,$___46__46__47__46__46__47_helpers_47_dom_47_event__,Handsontable=($___46__46__47__46__46__47_browser__=_dereq_("browser"),$___46__46__47__46__46__47_browser__&&$___46__46__47__46__46__47_browser__.__esModule&&$___46__46__47__46__46__47_browser__||{"default":$___46__46__47__46__46__47_browser__})["default"],arrayMap=($___46__46__47__46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47__46__46__47_helpers_47_array__&&$___46__46__47__46__46__47_helpers_47_array__.__esModule&&$___46__46__47__46__46__47_helpers_47_array__||{"default":$___46__46__47__46__46__47_helpers_47_array__}).arrayMap,rangeEach=($___46__46__47__46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47__46__46__47_helpers_47_number__&&$___46__46__47__46__46__47_helpers_47_number__.__esModule&&$___46__46__47__46__46__47_helpers_47_number__||{"default":$___46__46__47__46__46__47_helpers_47_number__}).rangeEach,$__3=($___46__46__47__46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47__46__46__47_helpers_47_object__&&$___46__46__47__46__46__47_helpers_47_object__.__esModule&&$___46__46__47__46__46__47_helpers_47_object__||{
"default":$___46__46__47__46__46__47_helpers_47_object__}),inherit=$__3.inherit,deepClone=$__3.deepClone,stopImmediatePropagation=($___46__46__47__46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47__46__46__47_helpers_47_dom_47_event__&&$___46__46__47__46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47__46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47__46__46__47_helpers_47_dom_47_event__}).stopImmediatePropagation;Handsontable.UndoRedo=function(instance){var plugin=this;this.instance=instance,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,instance.addHook("afterChange",function(changes,source){changes&&"undo"!==source&&"redo"!==source&&plugin.done(new Handsontable.UndoRedo.ChangeAction(changes))}),instance.addHook("afterCreateRow",function(index,amount,source){if("undo"!==source&&"redo"!==source&&"auto"!==source){var action=new Handsontable.UndoRedo.CreateRowAction(index,amount);plugin.done(action)}}),instance.addHook("beforeRemoveRow",function(index,amount,logicRows,source){if("undo"!==source&&"redo"!==source&&"auto"!==source){var originalData=plugin.instance.getSourceDataArray();index=(originalData.length+index)%originalData.length;var removedData=deepClone(originalData.slice(index,index+amount));plugin.done(new Handsontable.UndoRedo.RemoveRowAction(index,removedData))}}),instance.addHook("afterCreateCol",function(index,amount,source){"undo"!==source&&"redo"!==source&&"auto"!==source&&plugin.done(new Handsontable.UndoRedo.CreateColumnAction(index,amount))}),instance.addHook("beforeRemoveCol",function(index,amount,logicColumns,source){if("undo"!==source&&"redo"!==source&&"auto"!==source){var originalData=plugin.instance.getSourceDataArray();index=(plugin.instance.countCols()+index)%plugin.instance.countCols();var removedData=[],headers=[],indexes=[];rangeEach(originalData.length-1,function(i){var column=[],origRow=originalData[i];rangeEach(index,index+(amount-1),function(j){column.push(origRow[instance.runHooks("modifyCol",j)])}),removedData.push(column)}),rangeEach(amount-1,function(i){indexes.push(instance.runHooks("modifyCol",index+i))}),Array.isArray(instance.getSettings().colHeaders)&&rangeEach(amount-1,function(i){headers.push(instance.getSettings().colHeaders[instance.runHooks("modifyCol",index+i)]||null)});var manualColumnMovePlugin=plugin.instance.getPlugin("manualColumnMove"),columnsMap=manualColumnMovePlugin.isEnabled()?manualColumnMovePlugin.columnsMapper.__arrayMap:[],action=new Handsontable.UndoRedo.RemoveColumnAction(index,indexes,removedData,headers,columnsMap);plugin.done(action)}}),instance.addHook("beforeCellAlignment",function(stateBefore,range,type,alignment){var action=new Handsontable.UndoRedo.CellAlignmentAction(stateBefore,range,type,alignment);plugin.done(action)}),instance.addHook("beforeFilter",function(formulaStacks){plugin.done(new Handsontable.UndoRedo.FiltersAction(formulaStacks))}),instance.addHook("beforeRowMove",function(movedRows,target){movedRows!==!1&&plugin.done(new Handsontable.UndoRedo.RowMoveAction(movedRows,target))})},Handsontable.UndoRedo.prototype.done=function(action){this.ignoreNewActions||(this.doneActions.push(action),this.undoneActions.length=0)},Handsontable.UndoRedo.prototype.undo=function(){if(this.isUndoAvailable()){var action=this.doneActions.pop(),actionClone=deepClone(action),instance=this.instance,continueAction=instance.runHooks("beforeUndo",actionClone);if(continueAction===!1)return;this.ignoreNewActions=!0;var that=this;action.undo(this.instance,function(){that.ignoreNewActions=!1,that.undoneActions.push(action)}),instance.runHooks("afterUndo",actionClone)}},Handsontable.UndoRedo.prototype.redo=function(){if(this.isRedoAvailable()){var action=this.undoneActions.pop(),actionClone=deepClone(action),instance=this.instance,continueAction=instance.runHooks("beforeRedo",actionClone);if(continueAction===!1)return;this.ignoreNewActions=!0;var that=this;action.redo(this.instance,function(){that.ignoreNewActions=!1,that.doneActions.push(action)}),instance.runHooks("afterRedo",actionClone)}},Handsontable.UndoRedo.prototype.isUndoAvailable=function(){return this.doneActions.length>0},Handsontable.UndoRedo.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},Handsontable.UndoRedo.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},Handsontable.UndoRedo.Action=function(){},Handsontable.UndoRedo.Action.prototype.undo=function(){},Handsontable.UndoRedo.Action.prototype.redo=function(){},Handsontable.UndoRedo.ChangeAction=function(changes){this.changes=changes,this.actionType="change"},inherit(Handsontable.UndoRedo.ChangeAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.ChangeAction.prototype.undo=function(instance,undoneCallback){for(var data=deepClone(this.changes),emptyRowsAtTheEnd=instance.countEmptyRows(!0),emptyColsAtTheEnd=instance.countEmptyCols(!0),i=0,len=data.length;i<len;i++)data[i].splice(3,1);instance.addHookOnce("afterChange",undoneCallback),instance.setDataAtRowProp(data,null,null,"undo");for(var i$__6=0,len$__7=data.length;i$__6<len$__7;i$__6++)instance.getSettings().minSpareRows&&data[i$__6][0]+1+instance.getSettings().minSpareRows===instance.countRows()&&emptyRowsAtTheEnd==instance.getSettings().minSpareRows&&(instance.alter("remove_row",parseInt(data[i$__6][0]+1,10),instance.getSettings().minSpareRows),instance.undoRedo.doneActions.pop()),instance.getSettings().minSpareCols&&data[i$__6][1]+1+instance.getSettings().minSpareCols===instance.countCols()&&emptyColsAtTheEnd==instance.getSettings().minSpareCols&&(instance.alter("remove_col",parseInt(data[i$__6][1]+1,10),instance.getSettings().minSpareCols),instance.undoRedo.doneActions.pop())},Handsontable.UndoRedo.ChangeAction.prototype.redo=function(instance,onFinishCallback){for(var data=deepClone(this.changes),i=0,len=data.length;i<len;i++)data[i].splice(2,1);instance.addHookOnce("afterChange",onFinishCallback),instance.setDataAtRowProp(data,null,null,"redo")},Handsontable.UndoRedo.CreateRowAction=function(index,amount){this.index=index,this.amount=amount,this.actionType="insert_row"},inherit(Handsontable.UndoRedo.CreateRowAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.CreateRowAction.prototype.undo=function(instance,undoneCallback){var rowCount=instance.countRows(),minSpareRows=instance.getSettings().minSpareRows;this.index>=rowCount&&this.index-minSpareRows<rowCount&&(this.index-=minSpareRows),instance.addHookOnce("afterRemoveRow",undoneCallback),instance.alter("remove_row",this.index,this.amount,"undo")},Handsontable.UndoRedo.CreateRowAction.prototype.redo=function(instance,redoneCallback){instance.addHookOnce("afterCreateRow",redoneCallback),instance.alter("insert_row",this.index,this.amount,"redo")},Handsontable.UndoRedo.RemoveRowAction=function(index,data){this.index=index,this.data=data,this.actionType="remove_row"},inherit(Handsontable.UndoRedo.RemoveRowAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.RemoveRowAction.prototype.undo=function(instance,undoneCallback){instance.alter("insert_row",this.index,this.data.length,"undo"),instance.addHookOnce("afterRender",undoneCallback),instance.populateFromArray(this.index,0,this.data,void 0,void 0,"undo")},Handsontable.UndoRedo.RemoveRowAction.prototype.redo=function(instance,redoneCallback){instance.addHookOnce("afterRemoveRow",redoneCallback),instance.alter("remove_row",this.index,this.data.length,"redo")},Handsontable.UndoRedo.CreateColumnAction=function(index,amount){this.index=index,this.amount=amount,this.actionType="insert_col"},inherit(Handsontable.UndoRedo.CreateColumnAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.CreateColumnAction.prototype.undo=function(instance,undoneCallback){instance.addHookOnce("afterRemoveCol",undoneCallback),instance.alter("remove_col",this.index,this.amount,"undo")},Handsontable.UndoRedo.CreateColumnAction.prototype.redo=function(instance,redoneCallback){instance.addHookOnce("afterCreateCol",redoneCallback),instance.alter("insert_col",this.index,this.amount,"redo")},Handsontable.UndoRedo.RemoveColumnAction=function(index,indexes,data,headers,columnPositions){this.index=index,this.indexes=indexes,this.data=data,this.amount=this.data[0].length,this.headers=headers,this.columnPositions=columnPositions.slice(0),this.actionType="remove_col"},inherit(Handsontable.UndoRedo.RemoveColumnAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.RemoveColumnAction.prototype.undo=function(instance,undoneCallback){var row,$__5=this,ascendingIndexes=this.indexes.slice(0).sort(),sortByIndexes=function(elem,j,arr){return arr[$__5.indexes.indexOf(ascendingIndexes[j])]},sortedData=[];rangeEach(this.data.length-1,function(i){sortedData[i]=arrayMap($__5.data[i],sortByIndexes)});var sortedHeaders=[];sortedHeaders=arrayMap(this.headers,sortByIndexes);var changes=[];Handsontable.hooks.run(instance,"beforeCreateCol",this.indexes[0],this.indexes[this.indexes.length-1],"undo"),rangeEach(this.data.length-1,function(i){row=instance.getSourceDataAtRow(i),rangeEach(ascendingIndexes.length-1,function(j){row.splice(ascendingIndexes[j],0,sortedData[i][j]),changes.push([i,ascendingIndexes[j],null,sortedData[i][j]])})}),instance.getPlugin("formulas")&&instance.getPlugin("formulas").onAfterSetDataAtCell(changes),"undefined"!=typeof this.headers&&rangeEach(sortedHeaders.length-1,function(j){instance.getSettings().colHeaders.splice(ascendingIndexes[j],0,sortedHeaders[j])}),instance.getPlugin("manualColumnMove")&&(instance.getPlugin("manualColumnMove").columnsMapper.__arrayMap=this.columnPositions),instance.addHookOnce("afterRender",undoneCallback),Handsontable.hooks.run(instance,"afterCreateCol",this.indexes[0],this.indexes[this.indexes.length-1],"undo"),instance.getPlugin("formulas")&&instance.getPlugin("formulas").recalculateFull(),instance.render()},Handsontable.UndoRedo.RemoveColumnAction.prototype.redo=function(instance,redoneCallback){instance.addHookOnce("afterRemoveCol",redoneCallback),instance.alter("remove_col",this.index,this.amount,"redo")},Handsontable.UndoRedo.CellAlignmentAction=function(stateBefore,range,type,alignment){this.stateBefore=stateBefore,this.range=range,this.type=type,this.alignment=alignment},Handsontable.UndoRedo.CellAlignmentAction.prototype.undo=function(instance,undoneCallback){if(instance.getPlugin("contextMenu").isEnabled()){for(var row=this.range.from.row;row<=this.range.to.row;row++)for(var col=this.range.from.col;col<=this.range.to.col;col++)instance.setCellMeta(row,col,"className",this.stateBefore[row][col]||" htLeft");instance.addHookOnce("afterRender",undoneCallback),instance.render()}},Handsontable.UndoRedo.CellAlignmentAction.prototype.redo=function(instance,undoneCallback){instance.getPlugin("contextMenu").isEnabled()&&(instance.selectCell(this.range.from.row,this.range.from.col,this.range.to.row,this.range.to.col),instance.getPlugin("contextMenu").executeCommand("alignment:"+this.alignment.replace("ht","").toLowerCase()),instance.addHookOnce("afterRender",undoneCallback),instance.render())},Handsontable.UndoRedo.FiltersAction=function(formulaStacks){this.formulaStacks=formulaStacks,this.actionType="filter"},inherit(Handsontable.UndoRedo.FiltersAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.FiltersAction.prototype.undo=function(instance,undoneCallback){var filters=instance.getPlugin("filters");instance.addHookOnce("afterRender",undoneCallback),filters.formulaCollection.importAllFormulas(this.formulaStacks.slice(0,this.formulaStacks.length-1)),filters.filter()},Handsontable.UndoRedo.FiltersAction.prototype.redo=function(instance,redoneCallback){var filters=instance.getPlugin("filters");instance.addHookOnce("afterRender",redoneCallback),filters.formulaCollection.importAllFormulas(this.formulaStacks),filters.filter()},Handsontable.UndoRedo.RowMoveAction=function(movedRows,target){this.rows=movedRows.slice(),this.target=target},inherit(Handsontable.UndoRedo.RowMoveAction,Handsontable.UndoRedo.Action),Handsontable.UndoRedo.RowMoveAction.prototype.undo=function(instance,undoneCallback){var manualRowMove=instance.getPlugin("manualRowMove");instance.addHookOnce("afterRender",undoneCallback);for(var mod=this.rows[0]<this.target?-1*this.rows.length:0,newTarget=this.rows[0]>this.target?this.rows[0]+this.rows.length:this.rows[0],newRows=[],rowsLen=this.rows.length+mod,i=mod;i<rowsLen;i++)newRows.push(this.target+i);manualRowMove.moveRows(newRows.slice(),newTarget),instance.render(),instance.selection.setRangeStartOnly(new WalkontableCellCoords(this.rows[0],0)),instance.selection.setRangeEnd(new WalkontableCellCoords(this.rows[this.rows.length-1],instance.countCols()-1))},Handsontable.UndoRedo.RowMoveAction.prototype.redo=function(instance,redoneCallback){var manualRowMove=instance.getPlugin("manualRowMove");instance.addHookOnce("afterRender",redoneCallback),manualRowMove.moveRows(this.rows.slice(),this.target),instance.render();var startSelection=this.rows[0]<this.target?this.target-this.rows.length:this.target;instance.selection.setRangeStartOnly(new WalkontableCellCoords(startSelection,0)),instance.selection.setRangeEnd(new WalkontableCellCoords(startSelection+this.rows.length-1,instance.countCols()-1))},Handsontable.hooks.add("afterInit",init),Handsontable.hooks.add("afterUpdateSettings",init),Handsontable.hooks.register("beforeUndo"),Handsontable.hooks.register("afterUndo"),Handsontable.hooks.register("beforeRedo"),Handsontable.hooks.register("afterRedo")},{browser:24,"helpers/array":43,"helpers/dom/event":48,"helpers/number":52,"helpers/object":53}],116:[function(_dereq_,module,exports){function registerRenderer(rendererName,rendererFunction){var registerName;registeredRenderers[rendererName]=rendererFunction,registerName=toUpperCaseFirst(rendererName)+"Renderer",Handsontable.renderers[registerName]=rendererFunction,Handsontable[registerName]=rendererFunction,"base"===rendererName&&(Handsontable.renderers.cellDecorator=rendererFunction)}function getRenderer(rendererName){if("function"==typeof rendererName)return rendererName;if("string"!=typeof rendererName)throw Error('Only strings and functions can be passed as "renderer" parameter');if(!(rendererName in registeredRenderers))throw Error('No editor registered under name "'+rendererName+'"');return registeredRenderers[rendererName]}function hasRenderer(rendererName){return rendererName in registeredRenderers}Object.defineProperties(exports,{registerRenderer:{get:function(){return registerRenderer}},getRenderer:{get:function(){return getRenderer}},hasRenderer:{get:function(){return hasRenderer}},__esModule:{value:!0}});var $__browser__,$__helpers_47_string__,Handsontable=($__browser__=_dereq_("browser"),$__browser__&&$__browser__.__esModule&&$__browser__||{"default":$__browser__})["default"],toUpperCaseFirst=($__helpers_47_string__=_dereq_("helpers/string"),$__helpers_47_string__&&$__helpers_47_string__.__esModule&&$__helpers_47_string__||{"default":$__helpers_47_string__}).toUpperCaseFirst,registeredRenderers={};Handsontable.renderers=Handsontable.renderers||{},Handsontable.renderers.registerRenderer=registerRenderer,Handsontable.renderers.getRenderer=getRenderer},{browser:24,"helpers/string":55}],117:[function(_dereq_,module,exports){function cellDecorator(instance,TD,row,col,prop,value,cellProperties){cellProperties.className&&(TD.className?TD.className=TD.className+" "+cellProperties.className:TD.className=cellProperties.className),cellProperties.readOnly&&addClass(TD,cellProperties.readOnlyCellClassName),cellProperties.valid===!1&&cellProperties.invalidCellClassName?addClass(TD,cellProperties.invalidCellClassName):removeClass(TD,cellProperties.invalidCellClassName),cellProperties.wordWrap===!1&&cellProperties.noWordWrapClassName&&addClass(TD,cellProperties.noWordWrapClassName),!value&&cellProperties.placeholder&&addClass(TD,cellProperties.placeholderCellClassName)}Object.defineProperties(exports,{cellDecorator:{get:function(){return cellDecorator}},__esModule:{value:!0}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_renderers__,$__0=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,removeClass=$__0.removeClass,registerRenderer=($___46__46__47_renderers__=_dereq_("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{"default":$___46__46__47_renderers__}).registerRenderer;registerRenderer("base",cellDecorator)},{"helpers/dom/element":47,renderers:116}],118:[function(_dereq_,module,exports){function autocompleteRenderer(instance,TD,row,col,prop,value,cellProperties){var ARROW=(clonableWRAPPER.cloneNode(!0),clonableARROW.cloneNode(!0));if(getRenderer("text")(instance,TD,row,col,prop,value,cellProperties),TD.appendChild(ARROW),addClass(TD,"htAutocomplete"),TD.firstChild||TD.appendChild(document.createTextNode(String.fromCharCode(160))),!instance.acArrowListener){var eventManager=eventManagerObject(instance);instance.acArrowListener=function(event){hasClass(event.target,"htAutocompleteArrow")&&instance.view.wt.getSetting("onCellDblClick",null,new WalkontableCellCoords(row,col),TD)},eventManager.addEventListener(instance.rootElement,"mousedown",instance.acArrowListener),instance.addHookOnce("afterDestroy",function(){eventManager.destroy()})}}Object.defineProperties(exports,{autocompleteRenderer:{get:function(){return autocompleteRenderer}},__esModule:{value:!0}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_eventManager__,$___46__46__47_renderers__,$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__,$__0=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),addClass=$__0.addClass,hasClass=$__0.hasClass,eventManagerObject=($__0.empty,($___46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47_eventManager__&&$___46__46__47_eventManager__.__esModule&&$___46__46__47_eventManager__||{"default":$___46__46__47_eventManager__}).eventManager),$__2=($___46__46__47_renderers__=_dereq_("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{"default":$___46__46__47_renderers__}),getRenderer=$__2.getRenderer,registerRenderer=$__2.registerRenderer,WalkontableCellCoords=($___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__=_dereq_("3rdparty/walkontable/src/cell/coords"),$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__||{"default":$___46__46__47_3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords,clonableWRAPPER=document.createElement("DIV");clonableWRAPPER.className="htAutocompleteWrapper";var clonableARROW=document.createElement("DIV");clonableARROW.className="htAutocompleteArrow",clonableARROW.appendChild(document.createTextNode(String.fromCharCode(9660)));registerRenderer("autocomplete",autocompleteRenderer)},{"3rdparty/walkontable/src/cell/coords":6,eventManager:42,"helpers/dom/element":47,renderers:116}],119:[function(_dereq_,module,exports){function checkboxRenderer(instance,TD,row,col,prop,value,cellProperties){function onBeforeKeyDown(event){var toggleKeys="SPACE|ENTER",switchOffKeys="DELETE|BACKSPACE",isKeyCode=partial(isKey,event.keyCode);isKeyCode(toggleKeys+"|"+switchOffKeys)&&!isImmediatePropagationStopped(event)&&eachSelectedCheckboxCell(function(){stopImmediatePropagation(event),event.preventDefault()}),isKeyCode(toggleKeys)&&toggleSelected(),isKeyCode(switchOffKeys)&&toggleSelected(!1)}function toggleSelected(){var checked=void 0!==arguments[0]?arguments[0]:null;eachSelectedCheckboxCell(function(){if(arguments.length>1){var row$__7=arguments[0],col$__8=arguments[1],cellProperties$__9=arguments[2];if(cellProperties$__9.checkedTemplate){var dataAtCell=instance.getDataAtCell(row$__7,col$__8);null===checked?dataAtCell===cellProperties$__9.checkedTemplate?instance.setDataAtCell(row$__7,col$__8,cellProperties$__9.uncheckedTemplate):dataAtCell===cellProperties$__9.uncheckedTemplate&&instance.setDataAtCell(row$__7,col$__8,cellProperties$__9.checkedTemplate):instance.setDataAtCell(row$__7,col$__8,cellProperties$__9.uncheckedTemplate)}}else for(var checkboxes=arguments[0],i=0,len=checkboxes.length;i<len;i++){if(hasClass(checkboxes[i],BAD_VALUE_CLASS)&&null===checked)return;toggleCheckbox(checkboxes[i],checked)}})}function toggleCheckbox(checkbox){var checked=void 0!==arguments[1]?arguments[1]:null;null===checked?checkbox.checked=!checkbox.checked:checkbox.checked=checked,eventManager.fireEvent(checkbox,"change")}function eachSelectedCheckboxCell(callback){var selRange=instance.getSelectedRange();if(selRange)for(var topLeft=selRange.getTopLeftCorner(),bottomRight=selRange.getBottomRightCorner(),row=topLeft.row;row<=bottomRight.row;row++)for(var col=topLeft.col;col<=bottomRight.col;col++){var cellProperties$__10=instance.getCellMeta(row,col);if("checkbox"!==cellProperties$__10.type)return;var cell=instance.getCell(row,col);if(null==cell)callback(row,col,cellProperties$__10);else{var checkboxes=cell.querySelectorAll("input[type=checkbox]");checkboxes.length>0&&!cellProperties$__10.readOnly&&callback(checkboxes)}}}getRenderer("base").apply(this,arguments);var eventManager=registerEvents(instance),input=createInput(),labelOptions=cellProperties.label,badValue=!1;if("undefined"==typeof cellProperties.checkedTemplate&&(cellProperties.checkedTemplate=!0),"undefined"==typeof cellProperties.uncheckedTemplate&&(cellProperties.uncheckedTemplate=!1),empty(TD),value===cellProperties.checkedTemplate||equalsIgnoreCase(value,cellProperties.checkedTemplate)?input.checked=!0:value===cellProperties.uncheckedTemplate||equalsIgnoreCase(value,cellProperties.uncheckedTemplate)?input.checked=!1:null===value?addClass(input,"noValue"):(input.style.display="none",addClass(input,BAD_VALUE_CLASS),badValue=!0),input.setAttribute("data-row",row),input.setAttribute("data-col",col),!badValue&&labelOptions){var labelText="";labelOptions.value?labelText="function"==typeof labelOptions.value?labelOptions.value.call(this,row,col,prop,value):labelOptions.value:labelOptions.property&&(labelText=instance.getDataAtRowProp(row,labelOptions.property));var label=createLabel(labelText);"before"===labelOptions.position?label.appendChild(input):label.insertBefore(input,label.firstChild),input=label}TD.appendChild(input),badValue&&TD.appendChild(document.createTextNode("#bad-value#")),isListeningKeyDownEvent.has(instance)||(isListeningKeyDownEvent.set(instance,!0),instance.addHook("beforeKeyDown",onBeforeKeyDown))}function registerEvents(instance){var eventManager=isCheckboxListenerAdded.get(instance);return eventManager||(eventManager=new EventManager(instance),eventManager.addEventListener(instance.rootElement,"click",function(event){return onClick(event,instance)}),eventManager.addEventListener(instance.rootElement,"mouseup",function(event){return onMouseUp(event,instance)}),eventManager.addEventListener(instance.rootElement,"change",function(event){return onChange(event,instance)}),isCheckboxListenerAdded.set(instance,eventManager)),eventManager}function createInput(){var input=document.createElement("input");return input.className="htCheckboxRendererInput",input.type="checkbox",input.setAttribute("autocomplete","off"),input.setAttribute("tabindex","-1"),input.cloneNode(!1)}function createLabel(text){var label=document.createElement("label");return label.className="htCheckboxRendererLabel",label.appendChild(document.createTextNode(text)),label.cloneNode(!0)}function onMouseUp(event,instance){isCheckboxInput(event.target)&&setTimeout(instance.listen,10)}function onClick(event,instance){if(!isCheckboxInput(event.target))return!1;var row=parseInt(event.target.getAttribute("data-row"),10),col=parseInt(event.target.getAttribute("data-col"),10),cellProperties=instance.getCellMeta(row,col);cellProperties.readOnly&&event.preventDefault()}function onChange(event,instance){if(!isCheckboxInput(event.target))return!1;var row=parseInt(event.target.getAttribute("data-row"),10),col=parseInt(event.target.getAttribute("data-col"),10),cellProperties=instance.getCellMeta(row,col);if(!cellProperties.readOnly){var newCheckboxValue=null;newCheckboxValue=event.target.checked?void 0===cellProperties.checkedTemplate||cellProperties.checkedTemplate:void 0!==cellProperties.uncheckedTemplate&&cellProperties.uncheckedTemplate,instance.setDataAtCell(row,col,newCheckboxValue)}}function isCheckboxInput(element){return"INPUT"===element.tagName&&"checkbox"===element.getAttribute("type")}Object.defineProperties(exports,{checkboxRenderer:{get:function(){return checkboxRenderer}},__esModule:{value:!0}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_string__,$___46__46__47_eventManager__,$___46__46__47_renderers__,$___46__46__47_helpers_47_unicode__,$___46__46__47_helpers_47_function__,$___46__46__47_helpers_47_dom_47_event__,$__0=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),empty=$__0.empty,addClass=$__0.addClass,hasClass=$__0.hasClass,equalsIgnoreCase=($___46__46__47_helpers_47_string__=_dereq_("helpers/string"),$___46__46__47_helpers_47_string__&&$___46__46__47_helpers_47_string__.__esModule&&$___46__46__47_helpers_47_string__||{"default":$___46__46__47_helpers_47_string__}).equalsIgnoreCase,EventManager=($___46__46__47_eventManager__=_dereq_("eventManager"),$___46__46__47_eventManager__&&$___46__46__47_eventManager__.__esModule&&$___46__46__47_eventManager__||{"default":$___46__46__47_eventManager__}).EventManager,$__3=($___46__46__47_renderers__=_dereq_("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{"default":$___46__46__47_renderers__}),getRenderer=$__3.getRenderer,registerRenderer=$__3.registerRenderer,isKey=($___46__46__47_helpers_47_unicode__=_dereq_("helpers/unicode"),$___46__46__47_helpers_47_unicode__&&$___46__46__47_helpers_47_unicode__.__esModule&&$___46__46__47_helpers_47_unicode__||{"default":$___46__46__47_helpers_47_unicode__}).isKey,partial=($___46__46__47_helpers_47_function__=_dereq_("helpers/function"),$___46__46__47_helpers_47_function__&&$___46__46__47_helpers_47_function__.__esModule&&$___46__46__47_helpers_47_function__||{"default":$___46__46__47_helpers_47_function__}).partial,$__6=($___46__46__47_helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$___46__46__47_helpers_47_dom_47_event__&&$___46__46__47_helpers_47_dom_47_event__.__esModule&&$___46__46__47_helpers_47_dom_47_event__||{"default":$___46__46__47_helpers_47_dom_47_event__}),stopImmediatePropagation=$__6.stopImmediatePropagation,isImmediatePropagationStopped=$__6.isImmediatePropagationStopped,isListeningKeyDownEvent=new WeakMap,isCheckboxListenerAdded=new WeakMap,BAD_VALUE_CLASS="htBadValue";registerRenderer("checkbox",checkboxRenderer)},{eventManager:42,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/function":50,"helpers/string":55,"helpers/unicode":56,renderers:116}],120:[function(_dereq_,module,exports){function htmlRenderer(instance,TD,row,col,prop,value,cellProperties){getRenderer("base").apply(this,arguments),null!==value&&void 0!==value||(value=""),fastInnerHTML(TD,value)}Object.defineProperties(exports,{htmlRenderer:{get:function(){return htmlRenderer}},__esModule:{value:!0}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_renderers__,fastInnerHTML=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}).fastInnerHTML,$__1=($___46__46__47_renderers__=_dereq_("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{"default":$___46__46__47_renderers__}),getRenderer=$__1.getRenderer,registerRenderer=$__1.registerRenderer;registerRenderer("html",htmlRenderer)},{"helpers/dom/element":47,renderers:116}],121:[function(_dereq_,module,exports){function numericRenderer(instance,TD,row,col,prop,value,cellProperties){if(isNumeric(value)){"undefined"!=typeof cellProperties.language&&numbro.culture(cellProperties.language),value=numbro(value).format(cellProperties.format||"0");var className=cellProperties.className||"",classArr=className.length?className.split(" "):[];classArr.indexOf("htLeft")<0&&classArr.indexOf("htCenter")<0&&classArr.indexOf("htRight")<0&&classArr.indexOf("htJustify")<0&&classArr.push("htRight"),classArr.indexOf("htNumeric")<0&&classArr.push("htNumeric"),cellProperties.className=classArr.join(" ")}getRenderer("text")(instance,TD,row,col,prop,value,cellProperties)}Object.defineProperties(exports,{numericRenderer:{get:function(){return numericRenderer}},__esModule:{value:!0}});var $__numbro__,$___46__46__47_renderers__,$___46__46__47_helpers_47_number__,numbro=($__numbro__=_dereq_("numbro"),$__numbro__&&$__numbro__.__esModule&&$__numbro__||{"default":$__numbro__})["default"],$__1=($___46__46__47_renderers__=_dereq_("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{"default":$___46__46__47_renderers__}),getRenderer=$__1.getRenderer,registerRenderer=$__1.registerRenderer,isNumeric=($___46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47_helpers_47_number__&&$___46__46__47_helpers_47_number__.__esModule&&$___46__46__47_helpers_47_number__||{"default":$___46__46__47_helpers_47_number__}).isNumeric;registerRenderer("numeric",numericRenderer)},{"helpers/number":52,numbro:"numbro",renderers:116}],122:[function(_dereq_,module,exports){function passwordRenderer(instance,TD,row,col,prop,value,cellProperties){getRenderer("text").apply(this,arguments),value=TD.innerHTML;var hash,hashLength=cellProperties.hashLength||value.length,hashSymbol=cellProperties.hashSymbol||"*";for(hash="";hash.split(hashSymbol).length-1<hashLength;hash+=hashSymbol);fastInnerHTML(TD,hash)}Object.defineProperties(exports,{passwordRenderer:{get:function(){return passwordRenderer}},__esModule:{value:!0}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_renderers__,fastInnerHTML=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}).fastInnerHTML,$__1=($___46__46__47_renderers__=_dereq_("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{"default":$___46__46__47_renderers__}),getRenderer=$__1.getRenderer,registerRenderer=$__1.registerRenderer;registerRenderer("password",passwordRenderer)},{"helpers/dom/element":47,renderers:116}],123:[function(_dereq_,module,exports){function textRenderer(instance,TD,row,col,prop,value,cellProperties){getRenderer("base").apply(this,arguments),!value&&cellProperties.placeholder&&(value=cellProperties.placeholder);var escaped=stringify(value);if(instance.getSettings().trimWhitespace||(escaped=escaped.replace(/ /g,String.fromCharCode(160))),cellProperties.rendererTemplate){empty(TD);var TEMPLATE=document.createElement("TEMPLATE");TEMPLATE.setAttribute("bind","{{}}"),TEMPLATE.innerHTML=cellProperties.rendererTemplate,
HTMLTemplateElement.decorate(TEMPLATE),TEMPLATE.model=instance.getSourceDataAtRow(row),TD.appendChild(TEMPLATE)}else fastInnerText(TD,escaped)}Object.defineProperties(exports,{textRenderer:{get:function(){return textRenderer}},__esModule:{value:!0}});var $___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_mixed__,$___46__46__47_renderers__,$__0=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),empty=$__0.empty,fastInnerText=$__0.fastInnerText,stringify=($___46__46__47_helpers_47_mixed__=_dereq_("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{"default":$___46__46__47_helpers_47_mixed__}).stringify,$__2=($___46__46__47_renderers__=_dereq_("renderers"),$___46__46__47_renderers__&&$___46__46__47_renderers__.__esModule&&$___46__46__47_renderers__||{"default":$___46__46__47_renderers__}),getRenderer=$__2.getRenderer,registerRenderer=$__2.registerRenderer;registerRenderer("text",textRenderer)},{"helpers/dom/element":47,"helpers/mixed":51,renderers:116}],124:[function(_dereq_,module,exports){!function(global){function nonEnum(value){return{configurable:!0,enumerable:!1,value:value,writable:!0}}function newUniqueString(){return"__$"+Math.floor(1e9*Math.random())+"$"+ ++counter+"$__"}function isPrivateName(s){return privateNames[s]}function createPrivateName(){var s=newUniqueString();return privateNames[s]=!0,s}function isShimSymbol(symbol){return"object"===("undefined"==typeof symbol?"undefined":_typeof(symbol))&&symbol instanceof SymbolValue}function typeOf(v){return isShimSymbol(v)?"symbol":"undefined"==typeof v?"undefined":_typeof(v)}function _Symbol(description){var value=new SymbolValue(description);if(!(this instanceof _Symbol))return value;throw new TypeError("Symbol cannot be new'ed")}function SymbolValue(description){var key=newUniqueString();$defineProperty(this,symbolDataProperty,{value:this}),$defineProperty(this,symbolInternalProperty,{value:key}),$defineProperty(this,symbolDescriptionProperty,{value:description}),freeze(this),symbolValues[key]=this}function getOwnHashObject(object){var hashObject=object[hashProperty];return hashObject&&hashObject.self===object?hashObject:$isExtensible(object)?(hashObjectProperties.hash.value=hashCounter++,hashObjectProperties.self.value=object,hashPropertyDescriptor.value=$create(null,hashObjectProperties),$defineProperty(object,hashProperty,hashPropertyDescriptor),hashPropertyDescriptor.value):void 0}function freeze(object){return getOwnHashObject(object),$freeze.apply(this,arguments)}function isSymbolString(s){return symbolValues[s]||privateNames[s]}function toProperty(name){return isShimSymbol(name)?name[symbolInternalProperty]:name}function getOwnPropertySymbols(object){for(var rv=[],names=$getOwnPropertyNames(object),i=0;i<names.length;i++){var symbol=symbolValues[names[i]];symbol&&rv.push(symbol)}return rv}function getOption(name){return global.traceur&&global.traceur.options[name]}function exportStar(object){for(var i=1;i<arguments.length;i++)for(var names=$getOwnPropertyNames(arguments[i]),j=0;j<names.length;j++){var name=names[j];isSymbolString(name)||!function(mod,name){$defineProperty(object,name,{get:function(){return mod[name]},enumerable:!0})}(arguments[i],names[j])}return object}function isObject(x){return null!=x&&("object"===("undefined"==typeof x?"undefined":_typeof(x))||"function"==typeof x)}function toObject(x){if(null==x)throw $TypeError();return $Object(x)}function checkObjectCoercible(argument){if(null==argument)throw new TypeError("Value cannot be converted to an Object");return argument}function polyfillSymbol(global,_Symbol2){global.Symbol||(global.Symbol=_Symbol2,Object.getOwnPropertySymbols=getOwnPropertySymbols),global.Symbol.iterator||(global.Symbol.iterator=_Symbol2("Symbol.iterator"))}function setupGlobals(global){polyfillSymbol(global,_Symbol),global.Reflect=global.Reflect||{},global.Reflect.global=global.Reflect.global||global}if(!global.$traceurRuntime){var $Object=Object,$TypeError=TypeError,$create=$Object.create,$defineProperties=$Object.defineProperties,$defineProperty=$Object.defineProperty,$freeze=$Object.freeze,$getOwnPropertyDescriptor=$Object.getOwnPropertyDescriptor,$getOwnPropertyNames=$Object.getOwnPropertyNames,$keys=$Object.keys,$isExtensible=Object.isExtensible,method=nonEnum,counter=0,symbolInternalProperty=newUniqueString(),symbolDescriptionProperty=newUniqueString(),symbolDataProperty=newUniqueString(),symbolValues=$create(null),privateNames=$create(null);$defineProperty(_Symbol.prototype,"constructor",nonEnum(_Symbol)),$defineProperty(_Symbol.prototype,"toString",method(function(){var symbolValue=this[symbolDataProperty];if(!getOption("symbols"))return symbolValue[symbolInternalProperty];if(!symbolValue)throw TypeError("Conversion from symbol to string");var desc=symbolValue[symbolDescriptionProperty];return void 0===desc&&(desc=""),"Symbol("+desc+")"})),$defineProperty(_Symbol.prototype,"valueOf",method(function(){var symbolValue=this[symbolDataProperty];if(!symbolValue)throw TypeError("Conversion from symbol to string");return getOption("symbols")?symbolValue:symbolValue[symbolInternalProperty]})),$defineProperty(SymbolValue.prototype,"constructor",nonEnum(_Symbol)),$defineProperty(SymbolValue.prototype,"toString",{value:_Symbol.prototype.toString,enumerable:!1}),$defineProperty(SymbolValue.prototype,"valueOf",{value:_Symbol.prototype.valueOf,enumerable:!1});var hashProperty=createPrivateName(),hashPropertyDescriptor={value:void 0},hashObjectProperties={hash:{value:void 0},self:{value:void 0}},hashCounter=0;freeze(SymbolValue.prototype),setupGlobals(global),global.$traceurRuntime={checkObjectCoercible:checkObjectCoercible,createPrivateName:createPrivateName,defineProperties:$defineProperties,defineProperty:$defineProperty,exportStar:exportStar,getOwnHashObject:getOwnHashObject,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,isObject:isObject,isPrivateName:isPrivateName,isSymbolString:isSymbolString,keys:$keys,setupGlobals:setupGlobals,toObject:toObject,toProperty:toProperty,"typeof":typeOf}}}(window),function(){function spread(){for(var iterResult,rv=[],j=0,i=0;i<arguments.length;i++){var valueToSpread=$traceurRuntime.checkObjectCoercible(arguments[i]);"function"!=typeof valueToSpread[$toProperty(Symbol.iterator)]&&(valueToSpread[$toProperty(Symbol.iterator)]=function(){var value=this,length=value.length,index=0;return{next:function(){var result={done:!0};return index<length&&(result.done=!1,result.value=value[index],++index),result}}});for(var iter=valueToSpread[$toProperty(Symbol.iterator)]();!(iterResult=iter.next()).done;)rv[j++]=iterResult.value}return rv}var $toProperty=$traceurRuntime.toProperty;$traceurRuntime.spread=spread}(),function(){function superDescriptor(homeObject,name){var proto=$getPrototypeOf(homeObject);do{var result=$getOwnPropertyDescriptor(proto,name);if(result)return result;proto=$getPrototypeOf(proto)}while(proto)}function superConstructor(ctor){return ctor.__proto__}function superCall(self,homeObject,name,args){return superGet(self,homeObject,name).apply(self,args)}function superGet(self,homeObject,name){var descriptor=superDescriptor(homeObject,name);if(descriptor)return descriptor.get?descriptor.get.call(self):descriptor.value}function superSet(self,homeObject,name,value){var descriptor=superDescriptor(homeObject,name);if(descriptor&&descriptor.set)return descriptor.set.call(self,value),value;throw $TypeError("super has no setter '"+name+"'.")}function getDescriptors(object){for(var descriptors={},names=getOwnPropertyNames(object),i=0;i<names.length;i++){var name=names[i];descriptors[name]=$getOwnPropertyDescriptor(object,name)}for(var symbols=getOwnPropertySymbols(object),i=0;i<symbols.length;i++){var symbol=symbols[i];descriptors[$toProperty(symbol)]=$getOwnPropertyDescriptor(object,$toProperty(symbol))}return descriptors}function createClass(ctor,object,staticObject,superClass){return $defineProperty(object,"constructor",{value:ctor,configurable:!0,enumerable:!1,writable:!0}),arguments.length>3?("function"==typeof superClass&&(ctor.__proto__=superClass),ctor.prototype=$create(getProtoParent(superClass),getDescriptors(object))):ctor.prototype=object,$defineProperty(ctor,"prototype",{configurable:!1,writable:!1}),$defineProperties(ctor,getDescriptors(staticObject))}function getProtoParent(superClass){if("function"==typeof superClass){var prototype=superClass.prototype;if($Object(prototype)===prototype||null===prototype)return superClass.prototype;throw new $TypeError("super prototype must be an Object or null")}if(null===superClass)return null;throw new $TypeError("Super expression must either be null or a function, not "+("undefined"==typeof superClass?"undefined":_typeof(superClass))+".")}function defaultSuperCall(self,homeObject,args){null!==$getPrototypeOf(homeObject)&&superCall(self,homeObject,"constructor",args)}var $Object=Object,$TypeError=TypeError,$create=$Object.create,$defineProperties=$traceurRuntime.defineProperties,$defineProperty=$traceurRuntime.defineProperty,$getOwnPropertyDescriptor=$traceurRuntime.getOwnPropertyDescriptor,$getPrototypeOf=Object.getPrototypeOf,$toProperty=$traceurRuntime.toProperty,$__0=Object,getOwnPropertyNames=$__0.getOwnPropertyNames,getOwnPropertySymbols=$__0.getOwnPropertySymbols;$traceurRuntime.createClass=createClass,$traceurRuntime.defaultSuperCall=defaultSuperCall,$traceurRuntime.superCall=superCall,$traceurRuntime.superConstructor=superConstructor,$traceurRuntime.superGet=superGet,$traceurRuntime.superSet=superSet}()},{}],125:[function(_dereq_,module,exports){function TableView(instance){var $__8=this,that=this;this.eventManager=eventManagerObject(instance),this.instance=instance,this.settings=instance.getSettings(),this.selectionMouseDown=!1;var originalStyle=instance.rootElement.getAttribute("style");originalStyle&&instance.rootElement.setAttribute("data-originalstyle",originalStyle),addClass(instance.rootElement,"handsontable");var table=document.createElement("TABLE");addClass(table,"htCore"),instance.getSettings().tableClassName&&addClass(table,instance.getSettings().tableClassName),this.THEAD=document.createElement("THEAD"),table.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),table.appendChild(this.TBODY),instance.table=table,instance.container.insertBefore(table,instance.container.firstChild),this.eventManager.addEventListener(instance.rootElement,"mousedown",function(event){this.selectionMouseDown=!0,that.isTextSelectionAllowed(event.target)||(clearTextSelection(),event.preventDefault(),window.focus())}),this.eventManager.addEventListener(instance.rootElement,"mouseup",function(event){this.selectionMouseDown=!1}),this.eventManager.addEventListener(instance.rootElement,"mousemove",function(event){this.selectionMouseDown&&!that.isTextSelectionAllowed(event.target)&&(clearTextSelection(),event.preventDefault())}),this.eventManager.addEventListener(document.documentElement,"keyup",function(event){instance.selection.isInProgress()&&!event.shiftKey&&instance.selection.finish()});var isMouseDown;this.isMouseDown=function(){return isMouseDown},this.eventManager.addEventListener(document.documentElement,"mouseup",function(event){instance.selection.isInProgress()&&1===event.which&&instance.selection.finish(),isMouseDown=!1,isOutsideInput(document.activeElement)&&instance.unlisten()}),this.eventManager.addEventListener(document.documentElement,"mousedown",function(event){var originalTarget=event.target,next=event.target,eventX=event.x||event.clientX,eventY=event.y||event.clientY;if(!isMouseDown&&instance.rootElement){if(next===instance.view.wt.wtTable.holder){var scrollbarWidth=getScrollbarWidth();if(document.elementFromPoint(eventX+scrollbarWidth,eventY)!==instance.view.wt.wtTable.holder||document.elementFromPoint(eventX,eventY+scrollbarWidth)!==instance.view.wt.wtTable.holder)return}else for(;next!==document.documentElement;){if(null===next){if(event.isTargetWebComponent)break;return}if(next===instance.rootElement)return;next=next.parentNode}var outsideClickDeselects="function"==typeof that.settings.outsideClickDeselects?that.settings.outsideClickDeselects(originalTarget):that.settings.outsideClickDeselects;outsideClickDeselects?instance.deselectCell():instance.destroyEditor()}}),this.eventManager.addEventListener(table,"selectstart",function(event){that.settings.fragmentSelection||isInput(event.target)||event.preventDefault()});var clearTextSelection=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},selections=[new WalkontableSelection({className:"current",border:{width:2,color:"#5292F7",cornerVisible:function(){return that.settings.fillHandle&&!that.isCellEdited()&&!instance.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!that.isCellEdited()&&!instance.selection.isMultiple()}}}),new WalkontableSelection({className:"area",border:{width:1,color:"#89AFF9",cornerVisible:function(){return that.settings.fillHandle&&!that.isCellEdited()&&instance.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!that.isCellEdited()&&instance.selection.isMultiple()}}}),new WalkontableSelection({className:"highlight",highlightHeaderClassName:that.settings.currentHeaderClassName,highlightRowClassName:that.settings.currentRowClassName,highlightColumnClassName:that.settings.currentColClassName}),new WalkontableSelection({className:"fill",border:{width:1,color:"red"}})];selections.current=selections[0],selections.area=selections[1],selections.highlight=selections[2],selections.fill=selections[3];var walkontableConfig={debug:function(){return that.settings.debug},externalRowCalculator:this.instance.getPlugin("autoRowSize")&&this.instance.getPlugin("autoRowSize").isEnabled(),table:table,preventOverflow:function(){return $__8.settings.preventOverflow},stretchH:function(){return that.settings.stretchH},data:instance.getDataAtCell,totalRows:function(){return instance.countRows()},totalColumns:function(){return instance.countCols()},fixedColumnsLeft:function(){return that.settings.fixedColumnsLeft},fixedRowsTop:function(){return that.settings.fixedRowsTop},fixedRowsBottom:function(){return that.settings.fixedRowsBottom},minSpareRows:function(){return that.settings.minSpareRows},renderAllRows:that.settings.renderAllRows,rowHeaders:function(){var headerRenderers=[];return instance.hasRowHeaders()&&headerRenderers.push(function(row,TH){that.appendRowHeader(row,TH)}),Handsontable.hooks.run(instance,"afterGetRowHeaderRenderers",headerRenderers),headerRenderers},columnHeaders:function(){var headerRenderers=[];return instance.hasColHeaders()&&headerRenderers.push(function(column,TH){that.appendColHeader(column,TH)}),Handsontable.hooks.run(instance,"afterGetColumnHeaderRenderers",headerRenderers),headerRenderers},columnWidth:instance.getColWidth,rowHeight:instance.getRowHeight,cellRenderer:function(row,col,TD){var cellProperties=that.instance.getCellMeta(row,col),prop=that.instance.colToProp(col),value=that.instance.getDataAtRowProp(row,prop);that.instance.hasHook("beforeValueRender")&&(value=that.instance.runHooks("beforeValueRender",value)),that.instance.runHooks("beforeRenderer",TD,row,col,prop,value,cellProperties),that.instance.getCellRenderer(cellProperties)(that.instance,TD,row,col,prop,value,cellProperties),that.instance.runHooks("afterRenderer",TD,row,col,prop,value,cellProperties)},selections:selections,hideBorderOnMouseDownOver:function(){return that.settings.fragmentSelection},onCellMouseDown:function(event,coords,TD,wt){var blockCalculations={row:!1,column:!1,cells:!1};if(instance.listen(),that.activeWt=wt,isMouseDown=!0,Handsontable.hooks.run(instance,"beforeOnCellMouseDown",event,coords,TD,blockCalculations),!isImmediatePropagationStopped(event)){var actualSelection=instance.getSelectedRange(),selection=instance.selection,selectedHeader=selection.selectedHeader;if(event.shiftKey&&actualSelection)coords.row>=0&&coords.col>=0&&!blockCalculations.cells?(selection.setSelectedHeaders(!1,!1),selection.setRangeEnd(coords)):(selectedHeader.cols||selectedHeader.rows)&&coords.row>=0&&coords.col>=0&&!blockCalculations.cells?(selection.setSelectedHeaders(!1,!1),selection.setRangeEnd(new WalkontableCellCoords(coords.row,coords.col))):selectedHeader.cols&&coords.row<0&&!blockCalculations.column?selection.setRangeEnd(new WalkontableCellCoords(actualSelection.to.row,coords.col)):selectedHeader.rows&&coords.col<0&&!blockCalculations.row?selection.setRangeEnd(new WalkontableCellCoords(coords.row,actualSelection.to.col)):(!selectedHeader.cols&&!selectedHeader.rows&&coords.col<0||selectedHeader.cols&&coords.col<0)&&!blockCalculations.row?(selection.setSelectedHeaders(!0,!1),selection.setRangeStartOnly(new WalkontableCellCoords(actualSelection.from.row,0)),selection.setRangeEnd(new WalkontableCellCoords(coords.row,instance.countCols()-1))):(!selectedHeader.cols&&!selectedHeader.rows&&coords.row<0||selectedHeader.rows&&coords.row<0)&&!blockCalculations.column&&(selection.setSelectedHeaders(!1,!0),selection.setRangeStartOnly(new WalkontableCellCoords(0,actualSelection.from.col)),selection.setRangeEnd(new WalkontableCellCoords(instance.countRows()-1,coords.col)));else{var doNewSelection=!0;if(actualSelection){var $__9=actualSelection,from=$__9.from,to=$__9.to,coordsNotInSelection=!selection.inInSelection(coords);if(coords.row<0&&selectedHeader.cols){var start=Math.min(from.col,to.col),end=Math.max(from.col,to.col);doNewSelection=coords.col<start||coords.col>end}else if(coords.col<0&&selectedHeader.rows){var start$__10=Math.min(from.row,to.row),end$__11=Math.max(from.row,to.row);doNewSelection=coords.row<start$__10||coords.row>end$__11}else doNewSelection=coordsNotInSelection}var rightClick=isRightClick(event),leftClick=isLeftClick(event)||"touchstart"===event.type;coords.row<0&&coords.col>=0&&!blockCalculations.column?(selection.setSelectedHeaders(!1,!0),(leftClick||rightClick&&doNewSelection)&&(selection.setRangeStartOnly(new WalkontableCellCoords(0,coords.col)),selection.setRangeEnd(new WalkontableCellCoords(Math.max(instance.countRows()-1,0),coords.col),!1))):coords.col<0&&coords.row>=0&&!blockCalculations.row?(selection.setSelectedHeaders(!0,!1),(leftClick||rightClick&&doNewSelection)&&(selection.setRangeStartOnly(new WalkontableCellCoords(coords.row,0)),selection.setRangeEnd(new WalkontableCellCoords(coords.row,Math.max(instance.countCols()-1,0)),!1))):coords.col>=0&&coords.row>=0&&!blockCalculations.cells?(leftClick||rightClick&&doNewSelection)&&(selection.setSelectedHeaders(!1,!1),selection.setRangeStart(coords)):coords.col<0&&coords.row<0&&(coords.row=0,coords.col=0,selection.setSelectedHeaders(!1,!1,!0),selection.setRangeStart(coords))}selection.selectedHeader.rows?(removeClass(instance.rootElement,"ht__selection--columns"),addClass(instance.rootElement,"ht__selection--rows")):selection.selectedHeader.cols?(removeClass(instance.rootElement,"ht__selection--rows"),addClass(instance.rootElement,"ht__selection--columns")):removeClass(instance.rootElement,["ht__selection--rows","ht__selection--columns"]),Handsontable.hooks.run(instance,"afterOnCellMouseDown",event,coords,TD),that.activeWt=that.wt}},onCellMouseOver:function(event,coords,TD,wt){var blockCalculations={row:!1,column:!1,cell:!1};that.activeWt=wt,Handsontable.hooks.run(instance,"beforeOnCellMouseOver",event,coords,TD,blockCalculations),isImmediatePropagationStopped(event)||(0===event.button&&isMouseDown&&(coords.row>=0&&coords.col>=0?instance.selection.selectedHeader.cols&&!blockCalculations.column?instance.selection.setRangeEnd(new WalkontableCellCoords(instance.countRows()-1,coords.col),!1):instance.selection.selectedHeader.rows&&!blockCalculations.row?instance.selection.setRangeEnd(new WalkontableCellCoords(coords.row,instance.countCols()-1),!1):blockCalculations.cell||instance.selection.setRangeEnd(coords):instance.selection.selectedHeader.cols&&!blockCalculations.column?instance.selection.setRangeEnd(new WalkontableCellCoords(instance.countRows()-1,coords.col),!1):instance.selection.selectedHeader.rows&&!blockCalculations.row?instance.selection.setRangeEnd(new WalkontableCellCoords(coords.row,instance.countCols()-1),!1):blockCalculations.cell||instance.selection.setRangeEnd(coords)),Handsontable.hooks.run(instance,"afterOnCellMouseOver",event,coords,TD),that.activeWt=that.wt)},onCellMouseUp:function(event,coords,TD,wt){that.activeWt=wt,Handsontable.hooks.run(instance,"beforeOnCellMouseUp",event,coords,TD),Handsontable.hooks.run(instance,"afterOnCellMouseUp",event,coords,TD),that.activeWt=that.wt},onCellCornerMouseDown:function(event){event.preventDefault(),Handsontable.hooks.run(instance,"afterOnCellCornerMouseDown",event)},beforeDraw:function(force,skipRender){that.beforeRender(force,skipRender)},onDraw:function(force){that.onDraw(force)},onScrollVertically:function(){instance.runHooks("afterScrollVertically")},onScrollHorizontally:function(){instance.runHooks("afterScrollHorizontally")},onBeforeDrawBorders:function(corners,borderClassName){instance.runHooks("beforeDrawBorders",corners,borderClassName)},onBeforeTouchScroll:function(){instance.runHooks("beforeTouchScroll")},onAfterMomentumScroll:function(){instance.runHooks("afterMomentumScroll")},onBeforeStretchingColumnWidth:function(stretchedWidth,column){return instance.runHooks("beforeStretchingColumnWidth",stretchedWidth,column)},onModifyRowHeaderWidth:function(rowHeaderWidth){return instance.runHooks("modifyRowHeaderWidth",rowHeaderWidth)},viewportRowCalculatorOverride:function(calc){var rows=instance.countRows(),viewportOffset=that.settings.viewportRowRenderingOffset;if("auto"===viewportOffset&&that.settings.fixedRowsTop&&(viewportOffset=10),"number"==typeof viewportOffset&&(calc.startRow=Math.max(calc.startRow-viewportOffset,0),calc.endRow=Math.min(calc.endRow+viewportOffset,rows-1)),"auto"===viewportOffset){var center=calc.startRow+calc.endRow-calc.startRow,offset=Math.ceil(center/rows*12);calc.startRow=Math.max(calc.startRow-offset,0),calc.endRow=Math.min(calc.endRow+offset,rows-1)}instance.runHooks("afterViewportRowCalculatorOverride",calc)},viewportColumnCalculatorOverride:function(calc){var cols=instance.countCols(),viewportOffset=that.settings.viewportColumnRenderingOffset;if("auto"===viewportOffset&&that.settings.fixedColumnsLeft&&(viewportOffset=10),"number"==typeof viewportOffset&&(calc.startColumn=Math.max(calc.startColumn-viewportOffset,0),calc.endColumn=Math.min(calc.endColumn+viewportOffset,cols-1)),"auto"===viewportOffset){var center=calc.startColumn+calc.endColumn-calc.startColumn,offset=Math.ceil(center/cols*12);calc.startRow=Math.max(calc.startColumn-offset,0),calc.endColumn=Math.min(calc.endColumn+offset,cols-1)}instance.runHooks("afterViewportColumnCalculatorOverride",calc)},rowHeaderWidth:function(){return that.settings.rowHeaderWidth},columnHeaderHeight:function columnHeaderHeight(){var columnHeaderHeight=instance.runHooks("modifyColumnHeaderHeight");return that.settings.columnHeaderHeight||columnHeaderHeight}};Handsontable.hooks.run(instance,"beforeInitWalkontable",walkontableConfig),this.wt=new Walkontable(walkontableConfig),this.activeWt=this.wt,this.eventManager.addEventListener(that.wt.wtTable.spreader,"mousedown",function(event){event.target===that.wt.wtTable.spreader&&3===event.which&&stopPropagation(event)}),this.eventManager.addEventListener(that.wt.wtTable.spreader,"contextmenu",function(event){event.target===that.wt.wtTable.spreader&&3===event.which&&stopPropagation(event)}),this.eventManager.addEventListener(document.documentElement,"click",function(){that.settings.observeDOMVisibility&&that.wt.drawInterrupted&&(that.instance.forceFullRender=!0,that.render())})}Object.defineProperties(exports,{TableView:{get:function(){return TableView}},__esModule:{value:!0}});var $__browser__,$__helpers_47_dom_47_element__,$__helpers_47_object__,$__eventManager__,$__helpers_47_dom_47_event__,$__3rdparty_47_walkontable_47_src_47_cell_47_coords__,$__3rdparty_47_walkontable_47_src_47_selection__,$__3rdparty_47_walkontable_47_src_47_core__,Handsontable=($__browser__=_dereq_("browser"),$__browser__&&$__browser__.__esModule&&$__browser__||{"default":$__browser__})["default"],$__1=($__helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$__helpers_47_dom_47_element__&&$__helpers_47_dom_47_element__.__esModule&&$__helpers_47_dom_47_element__||{"default":$__helpers_47_dom_47_element__}),addClass=$__1.addClass,empty=$__1.empty,fastInnerHTML=$__1.fastInnerHTML,fastInnerText=$__1.fastInnerText,getScrollbarWidth=$__1.getScrollbarWidth,hasClass=$__1.hasClass,isChildOf=$__1.isChildOf,isInput=$__1.isInput,isOutsideInput=$__1.isOutsideInput,removeClass=$__1.removeClass,eventManagerObject=(($__helpers_47_object__=_dereq_("helpers/object"),$__helpers_47_object__&&$__helpers_47_object__.__esModule&&$__helpers_47_object__||{"default":$__helpers_47_object__}).createObjectPropListener,($__eventManager__=_dereq_("eventManager"),$__eventManager__&&$__eventManager__.__esModule&&$__eventManager__||{"default":$__eventManager__}).eventManager),$__4=($__helpers_47_dom_47_event__=_dereq_("helpers/dom/event"),$__helpers_47_dom_47_event__&&$__helpers_47_dom_47_event__.__esModule&&$__helpers_47_dom_47_event__||{"default":$__helpers_47_dom_47_event__}),stopPropagation=$__4.stopPropagation,isImmediatePropagationStopped=$__4.isImmediatePropagationStopped,isRightClick=$__4.isRightClick,isLeftClick=$__4.isLeftClick,WalkontableCellCoords=($__3rdparty_47_walkontable_47_src_47_cell_47_coords__=_dereq_("3rdparty/walkontable/src/cell/coords"),$__3rdparty_47_walkontable_47_src_47_cell_47_coords__&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__.__esModule&&$__3rdparty_47_walkontable_47_src_47_cell_47_coords__||{"default":$__3rdparty_47_walkontable_47_src_47_cell_47_coords__}).WalkontableCellCoords,WalkontableSelection=($__3rdparty_47_walkontable_47_src_47_selection__=_dereq_("3rdparty/walkontable/src/selection"),$__3rdparty_47_walkontable_47_src_47_selection__&&$__3rdparty_47_walkontable_47_src_47_selection__.__esModule&&$__3rdparty_47_walkontable_47_src_47_selection__||{"default":$__3rdparty_47_walkontable_47_src_47_selection__}).WalkontableSelection,Walkontable=($__3rdparty_47_walkontable_47_src_47_core__=_dereq_("3rdparty/walkontable/src/core"),$__3rdparty_47_walkontable_47_src_47_core__&&$__3rdparty_47_walkontable_47_src_47_core__.__esModule&&$__3rdparty_47_walkontable_47_src_47_core__||{"default":$__3rdparty_47_walkontable_47_src_47_core__}).Walkontable;Handsontable.TableView=TableView,TableView.prototype.isTextSelectionAllowed=function(el){if(isInput(el))return!0;var isChildOfTableBody=isChildOf(el,this.instance.view.wt.wtTable.spreader);return!(this.settings.fragmentSelection!==!0||!isChildOfTableBody)||(!("cell"!==this.settings.fragmentSelection||!this.isSelectedOnlyCell()||!isChildOfTableBody)||!(this.settings.fragmentSelection||!this.isCellEdited()||!this.isSelectedOnlyCell()))},TableView.prototype.isSelectedOnlyCell=function(){var $__9=this.instance.getSelected()||[],row=$__9[0],col=$__9[1],rowEnd=$__9[2],colEnd=$__9[3];return void 0!==row&&row===rowEnd&&col===colEnd},TableView.prototype.isCellEdited=function(){var activeEditor=this.instance.getActiveEditor();return activeEditor&&activeEditor.isOpened()},TableView.prototype.beforeRender=function(force,skipRender){force&&Handsontable.hooks.run(this.instance,"beforeRender",this.instance.forceFullRender,skipRender)},TableView.prototype.onDraw=function(force){force&&Handsontable.hooks.run(this.instance,"afterRender",this.instance.forceFullRender)},TableView.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1,this.instance.renderCall=!1},TableView.prototype.getCellAtCoords=function(coords,topmost){var td=this.wt.getCell(coords,topmost);return td<0?null:td},TableView.prototype.scrollViewport=function(coords){this.wt.scrollViewport(coords)},TableView.prototype.appendRowHeader=function(row,TH){if(TH.firstChild){var container=TH.firstChild;if(!hasClass(container,"relative"))return empty(TH),void this.appendRowHeader(row,TH);this.updateCellHeader(container.querySelector(".rowHeader"),row,this.instance.getRowHeader)}else{var div=document.createElement("div"),span=document.createElement("span");div.className="relative",span.className="rowHeader",this.updateCellHeader(span,row,this.instance.getRowHeader),div.appendChild(span),TH.appendChild(div)}Handsontable.hooks.run(this.instance,"afterGetRowHeader",row,TH)},TableView.prototype.appendColHeader=function(col,TH){if(TH.firstChild){var container=TH.firstChild;hasClass(container,"relative")?this.updateCellHeader(container.querySelector(".colHeader"),col,this.instance.getColHeader):(empty(TH),this.appendColHeader(col,TH))}else{var div=document.createElement("div"),span=document.createElement("span");div.className="relative",span.className="colHeader",this.updateCellHeader(span,col,this.instance.getColHeader),div.appendChild(span),TH.appendChild(div)}Handsontable.hooks.run(this.instance,"afterGetColHeader",col,TH)},TableView.prototype.updateCellHeader=function(element,index,content){var renderedIndex=index,parentOverlay=this.wt.wtOverlays.getParentOverlay(element)||this.wt;element.parentNode&&(hasClass(element,"colHeader")?renderedIndex=parentOverlay.wtTable.columnFilter.sourceToRendered(index):hasClass(element,"rowHeader")&&(renderedIndex=parentOverlay.wtTable.rowFilter.sourceToRendered(index))),renderedIndex>-1?fastInnerHTML(element,content(index)):(fastInnerText(element,String.fromCharCode(160)),addClass(element,"cornerHeader"))},TableView.prototype.maximumVisibleElementWidth=function(leftOffset){var workspaceWidth=this.wt.wtViewport.getWorkspaceWidth(),maxWidth=workspaceWidth-leftOffset;return maxWidth>0?maxWidth:0},TableView.prototype.maximumVisibleElementHeight=function(topOffset){var workspaceHeight=this.wt.wtViewport.getWorkspaceHeight(),maxHeight=workspaceHeight-topOffset;return maxHeight>0?maxHeight:0},TableView.prototype.mainViewIsActive=function(){return this.wt===this.activeWt},TableView.prototype.destroy=function(){this.wt.destroy(),this.eventManager.destroy()}},{"3rdparty/walkontable/src/cell/coords":6,"3rdparty/walkontable/src/core":8,"3rdparty/walkontable/src/selection":19,browser:24,eventManager:42,"helpers/dom/element":47,"helpers/dom/event":48,"helpers/object":53}],126:[function(_dereq_,module,exports){Object.defineProperties(exports,{GhostTable:{get:function(){return GhostTable}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_array__,$___46__46__47_helpers_47_object__,$___46__46__47_helpers_47_number__,$___46__46__47_helpers_47_mixed__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],$__1=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),addClass=$__1.addClass,outerHeight=$__1.outerHeight,outerWidth=$__1.outerWidth,arrayEach=($___46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47_helpers_47_array__&&$___46__46__47_helpers_47_array__.__esModule&&$___46__46__47_helpers_47_array__||{"default":$___46__46__47_helpers_47_array__}).arrayEach,GhostTable=(($___46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{
"default":$___46__46__47_helpers_47_object__}).objectEach,($___46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47_helpers_47_number__&&$___46__46__47_helpers_47_number__.__esModule&&$___46__46__47_helpers_47_number__||{"default":$___46__46__47_helpers_47_number__}).rangeEach,($___46__46__47_helpers_47_mixed__=_dereq_("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{"default":$___46__46__47_helpers_47_mixed__}).stringify,function(hotInstance){this.hot=hotInstance,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}});$traceurRuntime.createClass(GhostTable,{addRow:function(row,samples){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var rowObject={row:row};this.rows.push(rowObject),this.samples=samples,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(row)),this.container.container.appendChild(this.table.fragment),rowObject.table=this.table.table},addColumnHeadersRow:function(samples){if(null!=this.hot.getColHeader(0)){var rowObject={row:-1};this.rows.push(rowObject),this.container=this.createContainer(this.hot.rootElement.className),this.samples=samples,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tHead.appendChild(this.createColumnHeadersRow()),this.container.container.appendChild(this.table.fragment),rowObject.table=this.table.table}},addColumn:function(column,samples){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var columnObject={col:column};this.columns.push(columnObject),this.samples=samples,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&null!==this.hot.getColHeader(column)&&this.hot.view.appendColHeader(column,this.table.th),this.table.tBody.appendChild(this.createCol(column)),this.container.container.appendChild(this.table.fragment),columnObject.table=this.table.table},getHeights:function(callback){this.injected||this.injectTable(),arrayEach(this.rows,function(row){callback(row.row,outerHeight(row.table)-1)})},getWidths:function(callback){this.injected||this.injectTable(),arrayEach(this.columns,function(column){callback(column.col,outerWidth(column.table))})},setSettings:function(settings){this.settings=settings},setSetting:function(name,value){this.settings||(this.settings={}),this.settings[name]=value},getSettings:function(){return this.settings},getSetting:function(name){return this.settings?this.settings[name]:null},createColGroupsCol:function(){var $__6=this,d=document,fragment=d.createDocumentFragment();return this.hot.hasRowHeaders()&&fragment.appendChild(this.createColElement(-1)),this.samples.forEach(function(sample){arrayEach(sample.strings,function(string){fragment.appendChild($__6.createColElement(string.col))})}),fragment},createRow:function(row){var $__6=this,d=document,fragment=d.createDocumentFragment(),th=d.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(row,th),fragment.appendChild(th)),this.samples.forEach(function(sample){arrayEach(sample.strings,function(string){var column=string.col,cellProperties=$__6.hot.getCellMeta(row,column);cellProperties.col=column,cellProperties.row=row;var renderer=$__6.hot.getCellRenderer(cellProperties),td=d.createElement("td");renderer($__6.hot,td,row,column,$__6.hot.colToProp(column),string.value,cellProperties),fragment.appendChild(td)})}),fragment},createColumnHeadersRow:function(){var $__6=this,d=document,fragment=d.createDocumentFragment();if(this.hot.hasRowHeaders()){var th=d.createElement("th");this.hot.view.appendColHeader(-1,th),fragment.appendChild(th)}return this.samples.forEach(function(sample){arrayEach(sample.strings,function(string){var column=string.col,th=d.createElement("th");$__6.hot.view.appendColHeader(column,th),fragment.appendChild(th)})}),fragment},createCol:function(column){var $__6=this,d=document,fragment=d.createDocumentFragment();return this.samples.forEach(function(sample){arrayEach(sample.strings,function(string){var row=string.row,cellProperties=$__6.hot.getCellMeta(row,column);cellProperties.col=column,cellProperties.row=row;var renderer=$__6.hot.getCellRenderer(cellProperties),td=d.createElement("td"),tr=d.createElement("tr");renderer($__6.hot,td,row,column,$__6.hot.colToProp(column),string.value,cellProperties),tr.appendChild(td),fragment.appendChild(tr)})}),fragment},clean:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()},injectTable:function(){var parent=void 0!==arguments[0]?arguments[0]:null;this.injected||((parent||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)},removeTable:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)},createColElement:function(column){var d=document,col=d.createElement("col");return col.style.width=this.hot.view.wt.wtTable.getStretchedColumnWidth(column)+"px",col},createTable:function(){var className=void 0!==arguments[0]?arguments[0]:"",d=document,fragment=d.createDocumentFragment(),table=d.createElement("table"),tHead=d.createElement("thead"),tBody=d.createElement("tbody"),colGroup=d.createElement("colgroup"),tr=d.createElement("tr"),th=d.createElement("th");return this.isVertical()&&table.appendChild(colGroup),this.isHorizontal()&&(tr.appendChild(th),tHead.appendChild(tr),table.style.tableLayout="auto",table.style.width="auto"),table.appendChild(tHead),this.isVertical()&&tBody.appendChild(tr),table.appendChild(tBody),addClass(table,className),fragment.appendChild(table),{fragment:fragment,table:table,tHead:tHead,tBody:tBody,colGroup:colGroup,tr:tr,th:th}},createContainer:function(){var className=void 0!==arguments[0]?arguments[0]:"",d=document,fragment=d.createDocumentFragment(),container=d.createElement("div");return className="htGhostTable htAutoSize "+className.trim(),addClass(container,className),fragment.appendChild(container),{fragment:fragment,container:container}},isVertical:function(){return!(!this.rows.length||this.columns.length)},isHorizontal:function(){return!(!this.columns.length||this.rows.length)}},{}),Handsontable.utils.GhostTable=GhostTable},{browser:24,"helpers/array":43,"helpers/dom/element":47,"helpers/mixed":51,"helpers/number":52,"helpers/object":53}],127:[function(_dereq_,module,exports){function parseDelay(delay){return"string"==typeof delay&&/fps$/.test(delay)&&(delay=1e3/parseInt(delay.replace("fps","")||0,10)),delay}Object.defineProperties(exports,{Interval:{get:function(){return Interval}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_feature__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],$__1=($___46__46__47_helpers_47_feature__=_dereq_("helpers/feature"),$___46__46__47_helpers_47_feature__&&$___46__46__47_helpers_47_feature__.__esModule&&$___46__46__47_helpers_47_feature__||{"default":$___46__46__47_helpers_47_feature__}),requestAnimationFrame=$__1.requestAnimationFrame,cancelAnimationFrame=$__1.cancelAnimationFrame,Interval=function(func,delay){var $__2=this;this.timer=null,this.func=func,this.delay=parseDelay(delay),this.stopped=!0,this._then=null,this._callback=function(){return $__2.__callback()}},$Interval=Interval;$traceurRuntime.createClass(Interval,{start:function(){return this.stopped&&(this._then=Date.now(),this.stopped=!1,this.timer=requestAnimationFrame(this._callback)),this},stop:function(){return this.stopped||(this.stopped=!0,cancelAnimationFrame(this.timer),this.timer=null),this},__callback:function(){if(this.timer=requestAnimationFrame(this._callback),this.delay){var now=Date.now(),elapsed=now-this._then;elapsed>this.delay&&(this._then=now-elapsed%this.delay,this.func())}else this.func()}},{create:function(func,delay){return new $Interval(func,delay)}}),Handsontable.utils.Interval=Interval},{browser:24,"helpers/feature":49}],128:[function(_dereq_,module,exports){function registerIdentity(identity,hot){identities.set(identity,hot)}function getTranslator(identity){var singleton;if(!(identity instanceof Handsontable.Core)){if(!identities.has(identity))throw Error("Record translator was not registered for this object identity");identity=identities.get(identity)}return translatorSingletons.has(identity)?singleton=translatorSingletons.get(identity):(singleton=new RecordTranslator(identity),translatorSingletons.set(identity,singleton)),singleton}Object.defineProperties(exports,{registerIdentity:{get:function(){return registerIdentity}},getTranslator:{get:function(){return getTranslator}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_object__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],isObject=($___46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{"default":$___46__46__47_helpers_47_object__}).isObject,RecordTranslator=function(hot){this.hot=hot};$traceurRuntime.createClass(RecordTranslator,{toVisualRow:function(row){return this.hot.runHooks("unmodifyRow",row)},toVisualColumn:function(column){return this.hot.runHooks("unmodifyCol",column)},toVisual:function(row,column){var result;return result=isObject(row)?{row:this.toVisualRow(row.row),column:this.toVisualColumn(row.column)}:[this.toVisualRow(row),this.toVisualColumn(column)]},toPhysicalRow:function(row){return this.hot.runHooks("modifyRow",row)},toPhysicalColumn:function(column){return this.hot.runHooks("modifyCol",column)},toPhysical:function(row,column){var result;return result=isObject(row)?{row:this.toPhysicalRow(row.row),column:this.toPhysicalColumn(row.column)}:[this.toPhysicalRow(row),this.toPhysicalColumn(column)]}},{});var identities=new WeakMap,translatorSingletons=new WeakMap;Handsontable.utils.RecordTranslator=RecordTranslator,Handsontable.utils.RecordTranslatorUtils={registerIdentity:registerIdentity,getTranslator:getTranslator}},{browser:24,"helpers/object":53}],129:[function(_dereq_,module,exports){var $__8;Object.defineProperties(exports,{SamplesGenerator:{get:function(){return SamplesGenerator}},__esModule:{value:!0}});var $___46__46__47_browser__,$___46__46__47_helpers_47_dom_47_element__,$___46__46__47_helpers_47_array__,$___46__46__47_helpers_47_object__,$___46__46__47_helpers_47_number__,$___46__46__47_helpers_47_mixed__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],$__1=($___46__46__47_helpers_47_dom_47_element__=_dereq_("helpers/dom/element"),$___46__46__47_helpers_47_dom_47_element__&&$___46__46__47_helpers_47_dom_47_element__.__esModule&&$___46__46__47_helpers_47_dom_47_element__||{"default":$___46__46__47_helpers_47_dom_47_element__}),$__3=($__1.addClass,$__1.outerHeight,$__1.outerWidth,($___46__46__47_helpers_47_array__=_dereq_("helpers/array"),$___46__46__47_helpers_47_array__&&$___46__46__47_helpers_47_array__.__esModule&&$___46__46__47_helpers_47_array__||{"default":$___46__46__47_helpers_47_array__}).arrayEach,$___46__46__47_helpers_47_object__=_dereq_("helpers/object"),$___46__46__47_helpers_47_object__&&$___46__46__47_helpers_47_object__.__esModule&&$___46__46__47_helpers_47_object__||{"default":$___46__46__47_helpers_47_object__}),isObject=($__3.objectEach,$__3.isObject),rangeEach=($___46__46__47_helpers_47_number__=_dereq_("helpers/number"),$___46__46__47_helpers_47_number__&&$___46__46__47_helpers_47_number__.__esModule&&$___46__46__47_helpers_47_number__||{"default":$___46__46__47_helpers_47_number__}).rangeEach,stringify=($___46__46__47_helpers_47_mixed__=_dereq_("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{"default":$___46__46__47_helpers_47_mixed__}).stringify,SamplesGenerator=function(dataFactory){this.samples=null,this.dataFactory=dataFactory,this.customSampleCount=null,this.allowDuplicates=!1},$SamplesGenerator=SamplesGenerator;$traceurRuntime.createClass(SamplesGenerator,($__8={},Object.defineProperty($__8,"getSampleCount",{value:function(){return this.customSampleCount?this.customSampleCount:$SamplesGenerator.SAMPLE_COUNT},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__8,"setSampleCount",{value:function(sampleCount){this.customSampleCount=sampleCount},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__8,"setAllowDuplicates",{value:function(allowDuplicates){this.allowDuplicates=allowDuplicates},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__8,"generateRowSamples",{value:function(rowRange,colRange){return this.generateSamples("row",colRange,rowRange)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__8,"generateColumnSamples",{value:function(colRange,rowRange){return this.generateSamples("col",rowRange,colRange)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__8,"generateSamples",{value:function(type,range,specifierRange){var $__6=this,samples=new Map;return"number"==typeof specifierRange&&(specifierRange={from:specifierRange,to:specifierRange}),rangeEach(specifierRange.from,specifierRange.to,function(index){var sample=$__6.generateSample(type,range,index);samples.set(index,sample)}),samples},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__8,"generateSample",{value:function(type,range,specifierValue){var length,$__6=this,samples=new Map,sampledValues=[];return rangeEach(range.from,range.to,function(index){var $__8,value;if("row"===type)value=$__6.dataFactory(specifierValue,index);else{if("col"!==type)throw new Error("Unsupported sample type");value=$__6.dataFactory(index,specifierValue)}length=isObject(value)?Object.keys(value).length:Array.isArray(value)?value.length:stringify(value).length,samples.has(length)||samples.set(length,{needed:$__6.getSampleCount(),strings:[]});var sample=samples.get(length);if(sample.needed){var duplicate=sampledValues.indexOf(value)>-1;if(!duplicate||$__6.allowDuplicates){var computedKey="row"===type?"col":"row";sample.strings.push(($__8={},Object.defineProperty($__8,"value",{value:value,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty($__8,computedKey,{value:index,configurable:!0,enumerable:!0,writable:!0}),$__8)),sampledValues.push(value),sample.needed--}}}),samples},configurable:!0,enumerable:!0,writable:!0}),$__8),{get SAMPLE_COUNT(){return 3}}),Handsontable.utils.SamplesGenerator=SamplesGenerator},{browser:24,"helpers/array":43,"helpers/dom/element":47,"helpers/mixed":51,"helpers/number":52,"helpers/object":53}],130:[function(_dereq_,module,exports){function process(value,callback){var originalVal=value,lowercaseVal="string"==typeof originalVal?originalVal.toLowerCase():null;return function(source){for(var found=!1,s=0,slen=source.length;s<slen;s++){if(originalVal===source[s]){found=!0;break}if(lowercaseVal===stringify(source[s]).toLowerCase()){found=!0;break}}callback(found)}}var $___46__46__47_browser__,$___46__46__47_helpers_47_mixed__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],stringify=($___46__46__47_helpers_47_mixed__=_dereq_("helpers/mixed"),$___46__46__47_helpers_47_mixed__&&$___46__46__47_helpers_47_mixed__.__esModule&&$___46__46__47_helpers_47_mixed__||{"default":$___46__46__47_helpers_47_mixed__}).stringify;Handsontable.AutocompleteValidator=function(value,callback){return null==value&&(value=""),this.allowEmpty&&""===value?void callback(!0):void(this.strict&&this.source?"function"==typeof this.source?this.source(value,process(value,callback)):process(value,callback)(this.source):callback(!0))}},{browser:24,"helpers/mixed":51}],131:[function(_dereq_,module,exports){var $___46__46__47_browser__,$__moment__,$___46__46__47_helpers_47_date__,$___46__46__47_editors__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],moment=($__moment__=_dereq_("moment"),$__moment__&&$__moment__.__esModule&&$__moment__||{"default":$__moment__})["default"],getNormalizedDate=($___46__46__47_helpers_47_date__=_dereq_("../helpers/date"),$___46__46__47_helpers_47_date__&&$___46__46__47_helpers_47_date__.__esModule&&$___46__46__47_helpers_47_date__||{"default":$___46__46__47_helpers_47_date__}).getNormalizedDate,getEditor=($___46__46__47_editors__=_dereq_("editors"),$___46__46__47_editors__&&$___46__46__47_editors__.__esModule&&$___46__46__47_editors__||{"default":$___46__46__47_editors__}).getEditor;Handsontable.DateValidator=function(value,callback){var valid=!0,dateEditor=getEditor("date",this.instance);null==value&&(value="");var isValidDate=moment(new Date(value)).isValid(),isValidFormat=moment(value,this.dateFormat||dateEditor.defaultDateFormat,!0).isValid();if(this.allowEmpty&&""===value&&(isValidDate=!0,isValidFormat=!0),isValidDate||(valid=!1),!isValidDate&&isValidFormat&&(valid=!0),isValidDate&&!isValidFormat)if(this.correctFormat===!0){var correctedValue=correctFormat(value,this.dateFormat);this.instance.setDataAtCell(this.row,this.col,correctedValue,"dateValidator"),valid=!0}else valid=!1;callback(valid)};var correctFormat=function(value,dateFormat){var date=moment(getNormalizedDate(value)),year=date.format("YYYY"),yearNow=moment().format("YYYY");return year.substr(0,2)!==yearNow.substr(0,2)?value.match(new RegExp(year))||date.year(year.replace(year.substr(0,2),yearNow.substr(0,2))):year.length>4&&date.year((date.year()+"").substr(0,4)),date.format(dateFormat)}},{"../helpers/date":46,browser:24,editors:30,moment:"moment"}],132:[function(_dereq_,module,exports){var $___46__46__47_browser__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"];Handsontable.NumericValidator=function(value,callback){null==value&&(value=""),callback(this.allowEmpty&&""===value?!0:""===value?!1:/^-?\d*(\.|\,)?\d*$/.test(value))}},{browser:24}],133:[function(_dereq_,module,exports){var $___46__46__47_browser__,$__moment__,Handsontable=($___46__46__47_browser__=_dereq_("browser"),$___46__46__47_browser__&&$___46__46__47_browser__.__esModule&&$___46__46__47_browser__||{"default":$___46__46__47_browser__})["default"],moment=($__moment__=_dereq_("moment"),$__moment__&&$__moment__.__esModule&&$__moment__||{"default":$__moment__})["default"],STRICT_FORMATS=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"];Handsontable.TimeValidator=function(value,callback){var valid=!0,timeFormat=this.timeFormat||"h:mm:ss a";null===value&&(value=""),value=/^\d{3,}$/.test(value)?parseInt(value,10):value;var twoDigitValue=/^\d{1,2}$/.test(value);twoDigitValue&&(value+=":00");var date=moment(value,STRICT_FORMATS,!0).isValid()?moment(value):moment(value,timeFormat),isValidTime=date.isValid(),isValidFormat=moment(value,timeFormat,!0).isValid()&&!twoDigitValue;if(this.allowEmpty&&""===value&&(isValidTime=!0,isValidFormat=!0),isValidTime||(valid=!1),!isValidTime&&isValidFormat&&(valid=!0),isValidTime&&!isValidFormat)if(this.correctFormat===!0){var correctedValue=date.format(timeFormat);this.instance.setDataAtCell(this.row,this.col,correctedValue,"timeValidator"),valid=!0}else valid=!1;callback(valid)}},{browser:24,moment:"moment"}],SheetClip:[function(_dereq_,module,exports){!function(global){function countQuotes(str){return str.split('"').length-1}var SheetClip={parse:function(str){var r,rLen,rows,c,cLen,multiline,last,arr=[],a=0;for(rows=str.split("\n"),rows.length>1&&""===rows[rows.length-1]&&rows.pop(),r=0,rLen=rows.length;r<rLen;r+=1){for(rows[r]=rows[r].split("\t"),c=0,cLen=rows[r].length;c<cLen;c+=1)arr[a]||(arr[a]=[]),multiline&&0===c?(last=arr[a].length-1,arr[a][last]=arr[a][last]+"\n"+rows[r][0],multiline&&1&countQuotes(rows[r][0])&&(multiline=!1,arr[a][last]=arr[a][last].substring(0,arr[a][last].length-1).replace(/""/g,'"'))):c===cLen-1&&0===rows[r][c].indexOf('"')&&1&countQuotes(rows[r][c])?(arr[a].push(rows[r][c].substring(1).replace(/""/g,'"')),multiline=!0):(arr[a].push(rows[r][c].replace(/""/g,'"')),multiline=!1);multiline||(a+=1)}return arr},stringify:function(arr){var r,rLen,c,cLen,val,str="";for(r=0,rLen=arr.length;r<rLen;r+=1){for(cLen=arr[r].length,c=0;c<cLen;c+=1)c>0&&(str+="\t"),val=arr[r][c],str+="string"==typeof val?val.indexOf("\n")>-1?'"'+val.replace(/"/g,'""')+'"':val:null===val||void 0===val?"":val;str+="\n"}return str}};"undefined"!=typeof exports?(exports.parse=SheetClip.parse,exports.stringify=SheetClip.stringify):global.SheetClip=SheetClip}(window)},{}],autoResize:[function(_dereq_,module,exports){function autoResize(){function getComputedStyle(element){return element.currentStyle||document.defaultView.getComputedStyle(element)}var el,defaults={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},body=document.body,text=document.createTextNode(""),span=document.createElement("SPAN"),observe=function(element,event,handler){window.attachEvent?element.attachEvent("on"+event,handler):element.addEventListener(event,handler,!1)},_unObserve=function(element,event,handler){window.removeEventListener?element.removeEventListener(event,handler,!1):element.detachEvent("on"+event,handler)},resize=function(newChar){var width,scrollHeight;newChar?/^[a-zA-Z \.,\\\/\|0-9]$/.test(newChar)||(newChar="."):newChar="",void 0!==text.textContent?text.textContent=el.value+newChar:text.data=el.value+newChar,span.style.fontSize=getComputedStyle(el).fontSize,span.style.fontFamily=getComputedStyle(el).fontFamily,span.style.whiteSpace="pre",body.appendChild(span),width=span.clientWidth+2,body.removeChild(span),el.style.height=defaults.minHeight+"px",defaults.minWidth>width?el.style.width=defaults.minWidth+"px":width>defaults.maxWidth?el.style.width=defaults.maxWidth+"px":el.style.width=width+"px",scrollHeight=el.scrollHeight?el.scrollHeight-1:0,defaults.minHeight>scrollHeight?el.style.height=defaults.minHeight+"px":defaults.maxHeight<scrollHeight?(el.style.height=defaults.maxHeight+"px",el.style.overflowY="visible"):el.style.height=scrollHeight+"px"},delayedResize=function(){window.setTimeout(resize,0)},extendDefaults=function(config){if(config&&config.minHeight)if("inherit"==config.minHeight)defaults.minHeight=el.clientHeight;else{var minHeight=parseInt(config.minHeight);isNaN(minHeight)||(defaults.minHeight=minHeight)}if(config&&config.maxHeight)if("inherit"==config.maxHeight)defaults.maxHeight=el.clientHeight;else{var maxHeight=parseInt(config.maxHeight);isNaN(maxHeight)||(defaults.maxHeight=maxHeight)}if(config&&config.minWidth)if("inherit"==config.minWidth)defaults.minWidth=el.clientWidth;else{var minWidth=parseInt(config.minWidth);isNaN(minWidth)||(defaults.minWidth=minWidth)}if(config&&config.maxWidth)if("inherit"==config.maxWidth)defaults.maxWidth=el.clientWidth;else{var maxWidth=parseInt(config.maxWidth);isNaN(maxWidth)||(defaults.maxWidth=maxWidth)}span.firstChild||(span.className="autoResize",span.style.display="inline-block",span.appendChild(text))},_init=function(el_,config,doObserve){el=el_,extendDefaults(config),"TEXTAREA"==el.nodeName&&(el.style.resize="none",el.style.overflowY="",el.style.height=defaults.minHeight+"px",el.style.minWidth=defaults.minWidth+"px",el.style.maxWidth=defaults.maxWidth+"px",el.style.overflowY="hidden"),doObserve&&(observe(el,"change",resize),observe(el,"cut",delayedResize),observe(el,"paste",delayedResize),observe(el,"drop",delayedResize),observe(el,"keydown",delayedResize),observe(el,"focus",resize)),resize()};return{init:function(el_,config,doObserve){_init(el_,config,doObserve)},unObserve:function(){_unObserve(el,"change",resize),_unObserve(el,"cut",delayedResize),_unObserve(el,"paste",delayedResize),_unObserve(el,"drop",delayedResize),_unObserve(el,"keydown",delayedResize),_unObserve(el,"focus",resize)},resize:resize}}"undefined"!=typeof exports&&(module.exports=autoResize)},{}],copyPaste:[function(_dereq_,module,exports){function copyPaste(){return instance?instance.hasBeenDestroyed()&&instance.init():instance=new CopyPasteClass,instance.refCounter++,instance}function CopyPasteClass(){this.refCounter=0,this.init()}var instance;"undefined"!=typeof exports&&(module.exports=copyPaste),CopyPasteClass.prototype.init=function(){var style,parent;this.copyCallbacks=[],this.cutCallbacks=[],this.pasteCallbacks=[],parent=document.body,document.getElementById("CopyPasteDiv")?(this.elDiv=document.getElementById("CopyPasteDiv"),this.elTextarea=this.elDiv.firstChild):(this.elDiv=document.createElement("div"),this.elDiv.id="CopyPasteDiv",style=this.elDiv.style,style.position="fixed",style.top="-10000px",style.left="-10000px",parent.appendChild(this.elDiv),this.elTextarea=document.createElement("textarea"),this.elTextarea.className="copyPaste",this.elTextarea.onpaste=function(event){var clipboardContents,temp;"WebkitAppearance"in document.documentElement.style&&(clipboardContents=event.clipboardData.getData("Text"),navigator.userAgent.indexOf("Safari")!==-1&&navigator.userAgent.indexOf("Chrome")===-1&&(temp=clipboardContents.split("\n"),""===temp[temp.length-1]&&temp.pop(),clipboardContents=temp.join("\n")),this.value=clipboardContents,event.preventDefault())},style=this.elTextarea.style,style.width="10000px",style.height="10000px",style.overflow="hidden",this.elDiv.appendChild(this.elTextarea),"undefined"!=typeof style.opacity&&(style.opacity=0)),this.onKeyDownRef=this.onKeyDown.bind(this),document.documentElement.addEventListener("keydown",this.onKeyDownRef,!1)},CopyPasteClass.prototype.onKeyDown=function(event){function isActiveElementEditable(){var element=document.activeElement;return element.shadowRoot&&element.shadowRoot.activeElement&&(element=element.shadowRoot.activeElement),["INPUT","SELECT","TEXTAREA"].indexOf(element.nodeName)>-1||"true"===element.contentEditable}var _this=this,isCtrlDown=!1;if(event.metaKey?isCtrlDown=!0:event.ctrlKey&&navigator.userAgent.indexOf("Mac")===-1&&(isCtrlDown=!0),isCtrlDown){if(document.activeElement!==this.elTextarea&&(""!==this.getSelectionText()||isActiveElementEditable()))return;this.selectNodeText(this.elTextarea),setTimeout(function(){document.activeElement!==_this.elTextarea&&_this.selectNodeText(_this.elTextarea)},0)}event.isImmediatePropagationEnabled===!1||!isCtrlDown||67!==event.keyCode&&86!==event.keyCode&&88!==event.keyCode||(88===event.keyCode?setTimeout(function(){_this.triggerCut(event)},0):86===event.keyCode&&setTimeout(function(){_this.triggerPaste(event)},0))},CopyPasteClass.prototype.selectNodeText=function(element){element&&element.select()},CopyPasteClass.prototype.getSelectionText=function(){var text="";return window.getSelection?text=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(text=document.selection.createRange().text),text},CopyPasteClass.prototype.copyable=function(string){if("string"!=typeof string&&void 0===string.toString)throw new Error("copyable requires string parameter");this.elTextarea.value=string,this.selectNodeText(this.elTextarea)},CopyPasteClass.prototype.onCut=function(callback){this.cutCallbacks.push(callback)},CopyPasteClass.prototype.onPaste=function(callback){this.pasteCallbacks.push(callback)},CopyPasteClass.prototype.removeCallback=function(callback){var i,len;for(i=0,len=this.copyCallbacks.length;i<len;i++)if(this.copyCallbacks[i]===callback)return this.copyCallbacks.splice(i,1),!0;for(i=0,len=this.cutCallbacks.length;i<len;i++)if(this.cutCallbacks[i]===callback)return this.cutCallbacks.splice(i,1),!0;for(i=0,len=this.pasteCallbacks.length;i<len;i++)if(this.pasteCallbacks[i]===callback)return this.pasteCallbacks.splice(i,1),!0;return!1},CopyPasteClass.prototype.triggerCut=function(event){var _this=this;_this.cutCallbacks&&setTimeout(function(){for(var i=0,len=_this.cutCallbacks.length;i<len;i++)_this.cutCallbacks[i](event)},50)},CopyPasteClass.prototype.triggerPaste=function(event,string){var _this=this;_this.pasteCallbacks&&setTimeout(function(){for(var val=string||_this.elTextarea.value,i=0,len=_this.pasteCallbacks.length;i<len;i++)_this.pasteCallbacks[i](val,event)},50)},CopyPasteClass.prototype.destroy=function(){this.hasBeenDestroyed()||0!==--this.refCounter||(this.elDiv&&this.elDiv.parentNode&&(this.elDiv.parentNode.removeChild(this.elDiv),this.elDiv=null,this.elTextarea=null),document.documentElement.removeEventListener("keydown",this.onKeyDownRef),this.onKeyDownRef=null)},CopyPasteClass.prototype.hasBeenDestroyed=function(){return!this.refCounter}},{}],es6collections:[function(_dereq_,module,exports){!function(exports){function createCollection(proto,objectOnly){function Collection(a){return this&&this.constructor===Collection?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=objectOnly,void(a&&init.call(this,a))):new Collection(a)}return objectOnly||defineProperty(proto,"size",{get:sharedSize}),proto.constructor=Collection,Collection.prototype=proto,Collection}function init(a){this.add?a.forEach(this.add,this):a.forEach(function(a){this.set(a[0],a[1])},this)}function sharedDelete(key){return this.has(key)&&(this._keys.splice(i,1),this._values.splice(i,1),this._itp.forEach(function(p){i<p[0]&&p[0]--})),-1<i}function sharedGet(key){return this.has(key)?this._values[i]:void 0}function has(list,key){if(this.objectOnly&&key!==Object(key))throw new TypeError("Invalid value used as weak collection key");if(key!=key||0===key)for(i=list.length;i--&&!is(list[i],key););else i=list.indexOf(key);return-1<i}function setHas(value){return has.call(this,this._values,value)}function mapHas(value){return has.call(this,this._keys,value)}function sharedSet(key,value){return this.has(key)?this._values[i]=value:this._values[this._keys.push(key)-1]=value,this}function sharedAdd(value){return this.has(value)||this._values.push(value),this}function sharedClear(){this._values.length=0}function sharedKeys(){return sharedIterator(this._itp,this._keys)}function sharedValues(){return sharedIterator(this._itp,this._values)}function mapEntries(){return sharedIterator(this._itp,this._keys,this._values)}function setEntries(){return sharedIterator(this._itp,this._values,this._values)}function sharedIterator(itp,array,array2){var p=[0],done=!1;return itp.push(p),{next:function(){var v,k=p[0];return!done&&k<array.length?(v=array2?[array[k],array2[k]]:array[k],p[0]++):(done=!0,itp.splice(itp.indexOf(p),1)),{done:done,value:v}}}}function sharedSize(){return this._values.length}function sharedForEach(callback,context){for(var it=this.entries();;){var r=it.next();if(r.done)break;callback.call(context,r.value[1],r.value[0],this)}}var i,defineProperty=Object.defineProperty,is=function(a,b){return isNaN(a)?isNaN(b):a===b};"undefined"==typeof WeakMap&&(exports.WeakMap=createCollection({"delete":sharedDelete,clear:sharedClear,get:sharedGet,has:mapHas,set:sharedSet},!0)),"undefined"==typeof Map&&(exports.Map=createCollection({"delete":sharedDelete,has:mapHas,get:sharedGet,set:sharedSet,keys:sharedKeys,values:sharedValues,
entries:mapEntries,forEach:sharedForEach,clear:sharedClear})),"undefined"==typeof Set&&(exports.Set=createCollection({has:setHas,add:sharedAdd,"delete":sharedDelete,clear:sharedClear,keys:sharedValues,values:sharedValues,entries:setEntries,forEach:sharedForEach})),"undefined"==typeof WeakSet&&(exports.WeakSet=createCollection({"delete":sharedDelete,add:sharedAdd,clear:sharedClear,has:setHas},!0))}("undefined"!=typeof exports&&"undefined"!=typeof global?global:window)},{}],jsonpatch:[function(_dereq_,module,exports){var jsonpatch,__extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},OriginalError=Error;!function(jsonpatch){function _equals(a,b){switch("undefined"==typeof a?"undefined":_typeof(a)){case"undefined":case"boolean":case"string":case"number":return a===b;case"object":if(null===a)return null===b;if(_isArray(a)){if(!_isArray(b)||a.length!==b.length)return!1;for(var i=0,l=a.length;i<l;i++)if(!_equals(a[i],b[i]))return!1;return!0}var bKeys=_objectKeys(b),bLength=bKeys.length;if(_objectKeys(a).length!==bLength)return!1;for(var i=0;i<bLength;i++)if(!_equals(a[i],b[i]))return!1;return!0;default:return!1}}function escapePathComponent(str){return str.indexOf("/")===-1&&str.indexOf("~")===-1?str:str.replace(/~/g,"~0").replace(/\//g,"~1")}function getMirror(obj){for(var i=0,ilen=beforeDict.length;i<ilen;i++)if(beforeDict[i].obj===obj)return beforeDict[i]}function getObserverFromMirror(mirror,callback){for(var j=0,jlen=mirror.observers.length;j<jlen;j++)if(mirror.observers[j].callback===callback)return mirror.observers[j].observer}function removeObserverFromMirror(mirror,observer){for(var j=0,jlen=mirror.observers.length;j<jlen;j++)if(mirror.observers[j].observer===observer)return void mirror.observers.splice(j,1)}function unobserve(root,observer){observer.unobserve()}function deepClone(obj){return"object"===("undefined"==typeof obj?"undefined":_typeof(obj))?JSON.parse(JSON.stringify(obj)):obj}function observe(obj,callback){var observer,patches=[],mirror=getMirror(obj);if(mirror?observer=getObserverFromMirror(mirror,callback):(mirror=new Mirror(obj),beforeDict.push(mirror)),observer)return observer;if(observer={},mirror.value=deepClone(obj),callback){observer.callback=callback,observer.next=null;var intervals=this.intervals||[100,1e3,1e4,6e4];if(void 0===intervals.push)throw new OriginalError("jsonpatch.intervals must be an array");var currentInterval=0,dirtyCheck=function(){generate(observer)},fastCheck=function(){clearTimeout(observer.next),observer.next=setTimeout(function(){dirtyCheck(),currentInterval=0,observer.next=setTimeout(slowCheck,intervals[currentInterval++])},0)},slowCheck=function slowCheck(){dirtyCheck(),currentInterval==intervals.length&&(currentInterval=intervals.length-1),observer.next=setTimeout(slowCheck,intervals[currentInterval++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",fastCheck),window.addEventListener("mouseup",fastCheck),window.addEventListener("keydown",fastCheck)):(document.documentElement.attachEvent("onmousedown",fastCheck),document.documentElement.attachEvent("onmouseup",fastCheck),document.documentElement.attachEvent("onkeydown",fastCheck))),observer.next=setTimeout(slowCheck,intervals[currentInterval++])}return observer.patches=patches,observer.object=obj,observer.unobserve=function(){generate(observer),clearTimeout(observer.next),removeObserverFromMirror(mirror,observer),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mousedown",fastCheck),window.removeEventListener("mouseup",fastCheck),window.removeEventListener("keydown",fastCheck)):(document.documentElement.detachEvent("onmousedown",fastCheck),document.documentElement.detachEvent("onmouseup",fastCheck),document.documentElement.detachEvent("onkeydown",fastCheck)))},mirror.observers.push(new ObserverInfo(callback,observer)),observer}function generate(observer){for(var mirror,i=0,ilen=beforeDict.length;i<ilen;i++)if(beforeDict[i].obj===observer.object){mirror=beforeDict[i];break}_generate(mirror.value,observer.object,observer.patches,""),observer.patches.length&&apply(mirror.value,observer.patches);var temp=observer.patches;return temp.length>0&&(observer.patches=[],observer.callback&&observer.callback(temp)),temp}function _generate(mirror,obj,patches,path){for(var newKeys=_objectKeys(obj),oldKeys=_objectKeys(mirror),changed=!1,deleted=!1,t=oldKeys.length-1;t>=0;t--){var key=oldKeys[t],oldVal=mirror[key];if(obj.hasOwnProperty(key)){var newVal=obj[key];"object"==("undefined"==typeof oldVal?"undefined":_typeof(oldVal))&&null!=oldVal&&"object"==("undefined"==typeof newVal?"undefined":_typeof(newVal))&&null!=newVal?_generate(oldVal,newVal,patches,path+"/"+escapePathComponent(key)):oldVal!=newVal&&(changed=!0,patches.push({op:"replace",path:path+"/"+escapePathComponent(key),value:deepClone(newVal)}))}else patches.push({op:"remove",path:path+"/"+escapePathComponent(key)}),deleted=!0}if(deleted||newKeys.length!=oldKeys.length)for(var t=0;t<newKeys.length;t++){var key=newKeys[t];mirror.hasOwnProperty(key)||patches.push({op:"add",path:path+"/"+escapePathComponent(key),value:deepClone(obj[key])})}}function isInteger(str){for(var charCode,i=0,len=str.length;i<len;){charCode=str.charCodeAt(i);{if(!(charCode>=48&&charCode<=57))return!1;i++}}return!0}function apply(tree,patches,validate){for(var patch,key,result=!1,p=0,plen=patches.length;p<plen;){patch=patches[p],p++;for(var path=patch.path||"",keys=path.split("/"),obj=tree,t=1,len=keys.length,existingPathFragment=void 0;;){if(key=keys[t],validate&&void 0===existingPathFragment&&(void 0===obj[key]?existingPathFragment=keys.slice(0,t).join("/"):t==len-1&&(existingPathFragment=patch.path),void 0!==existingPathFragment&&this.validator(patch,p-1,tree,existingPathFragment)),t++,void 0===key&&t>=len){result=rootOps[patch.op].call(patch,obj,key,tree);break}if(_isArray(obj)){if("-"===key)key=obj.length;else{if(validate&&!isInteger(key))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",p-1,patch.path,patch);key=parseInt(key,10)}if(t>=len){if(validate&&"add"===patch.op&&key>obj.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",p-1,patch.path,patch);result=arrOps[patch.op].call(patch,obj,key,tree);break}}else if(key&&key.indexOf("~")!=-1&&(key=key.replace(/~1/g,"/").replace(/~0/g,"~")),t>=len){result=objOps[patch.op].call(patch,obj,key,tree);break}obj=obj[key]}}return result}function compare(tree1,tree2){var patches=[];return _generate(tree1,tree2,patches,""),patches}function hasUndefined(obj){if(void 0===obj)return!0;if("array"==typeof obj||"object"==("undefined"==typeof obj?"undefined":_typeof(obj)))for(var i in obj)if(hasUndefined(obj[i]))return!0;return!1}function validator(operation,index,tree,existingPathFragment){if("object"!==("undefined"==typeof operation?"undefined":_typeof(operation))||null===operation||_isArray(operation))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",index,operation,tree);if(!objOps[operation.op])throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",index,operation,tree);if("string"!=typeof operation.path)throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",index,operation,tree);if(("move"===operation.op||"copy"===operation.op)&&"string"!=typeof operation.from)throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",index,operation,tree);if(("add"===operation.op||"replace"===operation.op||"test"===operation.op)&&void 0===operation.value)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",index,operation,tree);if(("add"===operation.op||"replace"===operation.op||"test"===operation.op)&&hasUndefined(operation.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",index,operation,tree);if(tree)if("add"==operation.op){var pathLen=operation.path.split("/").length,existingPathLen=existingPathFragment.split("/").length;if(pathLen!==existingPathLen+1&&pathLen!==existingPathLen)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",index,operation,tree)}else if("replace"===operation.op||"remove"===operation.op||"_get"===operation.op){if(operation.path!==existingPathFragment)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",index,operation,tree)}else if("move"===operation.op||"copy"===operation.op){var existingValue={op:"_get",path:operation.from,value:void 0},error=jsonpatch.validate([existingValue],tree);if(error&&"OPERATION_PATH_UNRESOLVABLE"===error.name)throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",index,operation,tree)}}function validate(sequence,tree){try{if(!_isArray(sequence))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(tree)tree=JSON.parse(JSON.stringify(tree)),apply.call(this,tree,sequence,!0);else for(var i=0;i<sequence.length;i++)this.validator(sequence[i],i)}catch(e){if(e instanceof JsonPatchError)return e;throw e}}var _objectKeys=function(obj){if(_isArray(obj)){for(var keys=new Array(obj.length),k=0;k<keys.length;k++)keys[k]=""+k;return keys}if(Object.keys)return Object.keys(obj);var keys=[];for(var i in obj)obj.hasOwnProperty(i)&&keys.push(i);return keys},objOps={add:function(obj,key){return obj[key]=this.value,!0},remove:function(obj,key){return delete obj[key],!0},replace:function(obj,key){return obj[key]=this.value,!0},move:function(obj,key,tree){var temp={op:"_get",path:this.from};return apply(tree,[temp]),apply(tree,[{op:"remove",path:this.from}]),apply(tree,[{op:"add",path:this.path,value:temp.value}]),!0},copy:function(obj,key,tree){var temp={op:"_get",path:this.from};return apply(tree,[temp]),apply(tree,[{op:"add",path:this.path,value:temp.value}]),!0},test:function(obj,key){return _equals(obj[key],this.value)},_get:function(obj,key){this.value=obj[key]}},arrOps={add:function(arr,i){return arr.splice(i,0,this.value),!0},remove:function(arr,i){return arr.splice(i,1),!0},replace:function(arr,i){return arr[i]=this.value,!0},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get},rootOps={add:function(obj){rootOps.remove.call(this,obj);for(var key in this.value)this.value.hasOwnProperty(key)&&(obj[key]=this.value[key]);return!0},remove:function(obj){for(var key in obj)obj.hasOwnProperty(key)&&objOps.remove.call(this,obj,key);return!0},replace:function(obj){return apply(obj,[{op:"remove",path:this.path}]),apply(obj,[{op:"add",path:this.path,value:this.value}]),!0},move:objOps.move,copy:objOps.copy,test:function(obj){return JSON.stringify(obj)===JSON.stringify(this.value)},_get:function(obj){this.value=obj}},beforeDict=[],Mirror=function(){function Mirror(obj){this.observers=[],this.obj=obj}return Mirror}(),ObserverInfo=function(){function ObserverInfo(callback,observer){this.callback=callback,this.observer=observer}return ObserverInfo}();jsonpatch.unobserve=unobserve,jsonpatch.observe=observe,jsonpatch.generate=generate;var _isArray;_isArray=Array.isArray?Array.isArray:function(obj){return obj.push&&"number"==typeof obj.length},jsonpatch.apply=apply,jsonpatch.compare=compare;var JsonPatchError=function(_super){function JsonPatchError(message,name,index,operation,tree){_super.call(this,message),this.message=message,this.name=name,this.index=index,this.operation=operation,this.tree=tree}return __extends(JsonPatchError,_super),JsonPatchError}(OriginalError);jsonpatch.JsonPatchError=JsonPatchError,jsonpatch.Error=JsonPatchError,jsonpatch.validator=validator,jsonpatch.validate=validate}(jsonpatch||(jsonpatch={})),"undefined"!=typeof exports&&(exports.apply=jsonpatch.apply,exports.observe=jsonpatch.observe,exports.unobserve=jsonpatch.unobserve,exports.generate=jsonpatch.generate,exports.compare=jsonpatch.compare,exports.validate=jsonpatch.validate,exports.validator=jsonpatch.validator,exports.JsonPatchError=jsonpatch.JsonPatchError,exports.Error=jsonpatch.Error)},{}],moment:[function(_dereq_,module,exports){!function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.moment=factory()}(this,function(){function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||"[object Array]"===Object.prototype.toString.call(input)}function isObject(input){return null!=input&&"[object Object]"===Object.prototype.toString.call(input)}function isObjectEmpty(obj){var k;for(k in obj)return!1;return!0}function isDate(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)}function map(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function getParsingFlags(m){return null==m._pf&&(m._pf=defaultParsingFlags()),m._pf}function valid__isValid(m){if(null==m._isValid){var flags=getParsingFlags(m),parsedParts=some.call(flags.parsedDateParts,function(i){return null!=i}),isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict&&(isNowValid=isNowValid&&0===flags.charsLeftOver&&0===flags.unusedTokens.length&&void 0===flags.bigHour),null!=Object.isFrozen&&Object.isFrozen(m))return isNowValid;m._isValid=isNowValid}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);return null!=flags?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}function isUndefined(input){return void 0===input}function copyConfig(to,from){var i,prop,val;if(isUndefined(from._isAMomentObject)||(to._isAMomentObject=from._isAMomentObject),isUndefined(from._i)||(to._i=from._i),isUndefined(from._f)||(to._f=from._f),isUndefined(from._l)||(to._l=from._l),isUndefined(from._strict)||(to._strict=from._strict),isUndefined(from._tzm)||(to._tzm=from._tzm),isUndefined(from._isUTC)||(to._isUTC=from._isUTC),isUndefined(from._offset)||(to._offset=from._offset),isUndefined(from._pf)||(to._pf=getParsingFlags(from)),isUndefined(from._locale)||(to._locale=from._locale),momentProperties.length>0)for(i in momentProperties)prop=momentProperties[i],val=from[prop],isUndefined(val)||(to[prop]=val);return to}function Moment(config){copyConfig(this,config),this._d=new Date(null!=config._d?config._d.getTime():NaN),updateInProgress===!1&&(updateInProgress=!0,utils_hooks__hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||null!=obj&&null!=obj._isAMomentObject}function absFloor(number){return number<0?Math.ceil(number)||0:Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;i<len;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function warn(msg){utils_hooks__hooks.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){if(null!=utils_hooks__hooks.deprecationHandler&&utils_hooks__hooks.deprecationHandler(null,msg),firstTime){for(var arg,args=[],i=0;i<arguments.length;i++){if(arg="","object"===_typeof(arguments[i])){arg+="\n["+i+"] ";for(var key in arguments[0])arg+=key+": "+arguments[0][key]+", ";arg=arg.slice(0,-2)}else arg=arguments[i];args.push(arg)}warn(msg+"\nArguments: "+Array.prototype.slice.call(args).join("")+"\n"+(new Error).stack),firstTime=!1}return fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){null!=utils_hooks__hooks.deprecationHandler&&utils_hooks__hooks.deprecationHandler(name,msg),deprecations[name]||(warn(msg),deprecations[name]=!0)}function isFunction(input){return input instanceof Function||"[object Function]"===Object.prototype.toString.call(input)}function locale_set__set(config){var prop,i;for(i in config)prop=config[i],isFunction(prop)?this[i]=prop:this["_"+i]=prop;this._config=config,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var prop,res=extend({},parentConfig);for(prop in childConfig)hasOwnProp(childConfig,prop)&&(isObject(parentConfig[prop])&&isObject(childConfig[prop])?(res[prop]={},extend(res[prop],parentConfig[prop]),extend(res[prop],childConfig[prop])):null!=childConfig[prop]?res[prop]=childConfig[prop]:delete res[prop]);for(prop in parentConfig)hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])&&(res[prop]=extend({},res[prop]));return res}function Locale(config){null!=config&&this.set(config)}function locale_calendar__calendar(key,mom,now){var output=this._calendar[key]||this._calendar.sameElse;return isFunction(output)?output.call(mom,now):output}function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format||!formatUpper?format:(this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key])}function invalidDate(){return this._invalidDate}function ordinal(number){return this._ordinal.replace("%d",number)}function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return isFunction(format)?format(output):format.replace(/%s/i,output)}function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return"string"==typeof units?aliases[units]||aliases[units.toLowerCase()]:void 0}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}function addUnitPriority(unit,priority){priorities[unit]=priority}function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj)units.push({unit:u,priority:priorities[u]});return units.sort(function(a,b){return a.priority-b.priority}),units}function makeGetSet(unit,keepTime){return function(value){return null!=value?(get_set__set(this,unit,value),utils_hooks__hooks.updateOffset(this,keepTime),this):get_set__get(this,unit)}}function get_set__get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function get_set__set(mom,unit,value){mom.isValid()&&mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function stringGet(units){return units=normalizeUnits(units),isFunction(this[units])?this[units]():this}function stringSet(units,value){if("object"===("undefined"==typeof units?"undefined":_typeof(units))){units=normalizeObjectUnits(units);for(var prioritized=getPrioritizedUnits(units),i=0;i<prioritized.length;i++)this[prioritized[i].unit](units[prioritized[i].unit])}else if(units=normalizeUnits(units),isFunction(this[units]))return this[units](value);return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}function addFormatToken(token,padded,ordinal,callback){var func=callback;"string"==typeof callback&&(func=function(){return this[callback]()}),token&&(formatTokenFunctions[token]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal&&(formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)})}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;i<length;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=removeFormattingTokens(array[i]);return function(mom){var i,output="";for(i=0;i<length;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){return hasOwnProp(regexes,token)?regexes[token](config._strict,config._locale):new RegExp(unescapeFormat(token))}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function addParseToken(token,callback){var i,func=callback;for("string"==typeof token&&(token=[token]),"number"==typeof callback&&(func=function(input,array){array[callback]=toInt(input)}),i=0;i<token.length;i++)tokens[token[i]]=func}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{},callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){null!=input&&hasOwnProp(tokens,token)&&tokens[token](input,config._a,config,token)}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function localeMonths(m,format){return m?isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?"format":"standalone"][m.month()]:this._months}function localeMonthsShort(m,format){return m?isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]:this._monthsShort}function units_month__handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)mom=create_utc__createUTC([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase();return strict?"MMM"===format?(ii=indexOf.call(this._shortMonthsParse,llc),ii!==-1?ii:null):(ii=indexOf.call(this._longMonthsParse,llc),ii!==-1?ii:null):"MMM"===format?(ii=indexOf.call(this._shortMonthsParse,llc),ii!==-1?ii:(ii=indexOf.call(this._longMonthsParse,llc),ii!==-1?ii:null)):(ii=indexOf.call(this._longMonthsParse,llc),ii!==-1?ii:(ii=indexOf.call(this._shortMonthsParse,llc),ii!==-1?ii:null))}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact)return units_month__handleStrictParse.call(this,monthName,format,strict);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(mom=create_utc__createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid())return mom;if("string"==typeof value)if(/^\d+$/.test(value))value=toInt(value);else if(value=mom.localeData().monthsParse(value),"number"!=typeof value)return mom;return dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom}function getSetMonth(value){return null!=value?(setMonth(this,value),utils_hooks__hooks.updateOffset(this,!0),this):get_set__get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var i,mom,shortPieces=[],longPieces=[],mixedPieces=[];for(i=0;i<12;i++)mom=create_utc__createUTC([2e3,i]),shortPieces.push(this.monthsShort(mom,"")),longPieces.push(this.months(mom,"")),mixedPieces.push(this.months(mom,"")),mixedPieces.push(this.monthsShort(mom,""));for(shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;i<12;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]);for(i=0;i<24;i++)mixedPieces[i]=regexEscape(mixedPieces[i]);this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function getIsLeapYear(){return isLeapYear(this.year())}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return y<100&&y>=0&&isFinite(date.getFullYear())&&date.setFullYear(y),date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return y<100&&y>=0&&isFinite(date.getUTCFullYear())&&date.setUTCFullYear(y),date}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var resYear,resDayOfYear,localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset;return dayOfYear<=0?(resYear=year-1,resDayOfYear=daysInYear(resYear)+dayOfYear):dayOfYear>daysInYear(year)?(resYear=year+1,resDayOfYear=dayOfYear-daysInYear(year)):(resYear=year,resDayOfYear=dayOfYear),{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var resWeek,resYear,weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1;return week<1?(resYear=mom.year()-1,resWeek=week+weeksInYear(resYear,dow,doy)):week>weeksInYear(mom.year(),dow,doy)?(resWeek=week-weeksInYear(mom.year(),dow,doy),resYear=mom.year()+1):(resYear=mom.year(),resWeek=week),{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")}function parseWeekday(input,locale){return"string"!=typeof input?input:isNaN(input)?(input=locale.weekdaysParse(input),"number"==typeof input?input:null):parseInt(input,10)}function parseIsoWeekday(input,locale){return"string"==typeof input?locale.weekdaysParse(input)%7||7:isNaN(input)?null:input}function localeWeekdays(m,format){return m?isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?"format":"standalone"][m.day()]:this._weekdays}function localeWeekdaysShort(m){return m?this._weekdaysShort[m.day()]:this._weekdaysShort}function localeWeekdaysMin(m){return m?this._weekdaysMin[m.day()]:this._weekdaysMin}function day_of_week__handleStrictParse(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)mom=create_utc__createUTC([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase();return strict?"dddd"===format?(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1?ii:null):"ddd"===format?(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1?ii:null):(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:null):"dddd"===format?(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:null))):"ddd"===format?(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:null))):(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._shortWeekdaysParse,llc),
ii!==-1?ii:null)))}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact)return day_of_week__handleStrictParse.call(this,weekdayName,format,strict);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(mom=create_utc__createUTC([2e3,1]).day(i),strict&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"dddd"===format&&this._fullWeekdaysParse[i].test(weekdayName))return i;if(strict&&"ddd"===format&&this._shortWeekdaysParse[i].test(weekdayName))return i;if(strict&&"dd"===format&&this._minWeekdaysParse[i].test(weekdayName))return i;if(!strict&&this._weekdaysParse[i].test(weekdayName))return i}}function getSetDayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day}function getSetLocaleDayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;if(null!=input){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7)}return this.day()||7}function weekdaysRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var i,mom,minp,shortp,longp,minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[];for(i=0;i<7;i++)mom=create_utc__createUTC([2e3,1]).day(i),minp=this.weekdaysMin(mom,""),shortp=this.weekdaysShort(mom,""),longp=this.weekdays(mom,""),minPieces.push(minp),shortPieces.push(shortp),longPieces.push(longp),mixedPieces.push(minp),mixedPieces.push(shortp),mixedPieces.push(longp);for(minPieces.sort(cmpLenRev),shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;i<7;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]),mixedPieces[i]=regexEscape(mixedPieces[i]);this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}function matchMeridiem(isStrict,locale){return locale._meridiemParse}function localeIsPM(input){return"p"===(input+"").toLowerCase().charAt(0)}function localeMeridiem(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var j,next,locale,split,i=0;i<names.length;){for(split=normalizeLocale(names[i]).split("-"),j=split.length,next=normalizeLocale(names[i+1]),next=next?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&"undefined"!=typeof module&&module&&module.exports)try{oldLocale=globalLocale._abbr,_dereq_("./locale/"+name),locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;return key&&(data=isUndefined(values)?locale_locales__getLocale(key):defineLocale(key,values),data&&(globalLocale=data)),globalLocale._abbr}function defineLocale(name,config){if(null!==config){var parentConfig=baseConfig;return config.abbr=name,null!=locales[name]?(deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),parentConfig=locales[name]._config):null!=config.parentLocale&&(null!=locales[config.parentLocale]?parentConfig=locales[config.parentLocale]._config:deprecateSimple("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),locales[name]=new Locale(mergeConfigs(parentConfig,config)),locale_locales__getSetGlobalLocale(name),locales[name]}return delete locales[name],null}function updateLocale(name,config){if(null!=config){var locale,parentConfig=baseConfig;null!=locales[name]&&(parentConfig=locales[name]._config),config=mergeConfigs(parentConfig,config),locale=new Locale(config),locale.parentLocale=locales[name],locales[name]=locale,locale_locales__getSetGlobalLocale(name)}else null!=locales[name]&&(null!=locales[name].parentLocale?locales[name]=locales[name].parentLocale:null!=locales[name]&&delete locales[name]);return locales[name]}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)}function locale_locales__listLocales(){return keys(locales)}function checkOverflow(m){var overflow,a=m._a;return a&&getParsingFlags(m).overflow===-2&&(overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||24===a[HOUR]&&(0!==a[MINUTE]||0!==a[SECOND]||0!==a[MILLISECOND])?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)&&(overflow=DATE),getParsingFlags(m)._overflowWeeks&&overflow===-1&&(overflow=WEEK),getParsingFlags(m)._overflowWeekday&&overflow===-1&&(overflow=WEEKDAY),getParsingFlags(m).overflow=overflow),m}function configFromISO(config){var i,l,allowTime,dateFormat,timeFormat,tzFormat,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string);if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDates.length;i<l;i++)if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0],allowTime=isoDates[i][2]!==!1;break}if(null==dateFormat)return void(config._isValid=!1);if(match[3]){for(i=0,l=isoTimes.length;i<l;i++)if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}if(null==timeFormat)return void(config._isValid=!1)}if(!allowTime&&null!=timeFormat)return void(config._isValid=!1);if(match[4]){if(!tzRegex.exec(match[4]))return void(config._isValid=!1);tzFormat="Z"}config._f=dateFormat+(timeFormat||"")+(tzFormat||""),configFromStringAndFormat(config)}else config._isValid=!1}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);return null!==matched?void(config._d=new Date((+matched[1]))):(configFromISO(config),void(config._isValid===!1&&(delete config._isValid,utils_hooks__hooks.createFromInputFallback(config))))}function defaults(a,b,c){return null!=a?a:null!=b?b:c}function currentDateArray(config){var nowValue=new Date(utils_hooks__hooks.now());return config._useUTC?[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]:[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),config._dayOfYear&&(yearToUse=defaults(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;i<3&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?createUTCDate:createDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w,null!=w.GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year),week=defaults(w.W,1),weekday=defaults(w.E,1),(weekday<1||weekday>7)&&(weekdayOverflow=!0)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year),week=defaults(w.w,1),null!=w.d?(weekday=w.d,(weekday<0||weekday>6)&&(weekdayOverflow=!0)):null!=w.e?(weekday=w.e+dow,(w.e<0||w.e>6)&&(weekdayOverflow=!0)):weekday=dow),week<1||week>weeksInYear(weekYear,dow,doy)?getParsingFlags(config)._overflowWeeks=!0:null!=weekdayOverflow?getParsingFlags(config)._overflowWeekday=!0:(temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear)}function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601)return void configFromISO(config);config._a=[],getParsingFlags(config).empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&getParsingFlags(config).unusedInput.push(string),config._a[HOUR]<=12&&getParsingFlags(config).bigHour===!0&&config._a[HOUR]>0&&(getParsingFlags(config).bigHour=void 0),getParsingFlags(config).parsedDateParts=config._a.slice(0),getParsingFlags(config).meridiem=config._meridiem,config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem),configFromArray(config),checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;return null==meridiem?hour:null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):null!=locale.isPM?(isPm=locale.isPM(meridiem),isPm&&hour<12&&(hour+=12),isPm||12!==hour||(hour=0),hour):hour}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return getParsingFlags(config).invalidFormat=!0,void(config._d=new Date(NaN));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),valid__isValid(tempConfig)&&(currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=10*getParsingFlags(tempConfig).unusedTokens.length,getParsingFlags(tempConfig).score=currentScore,(null==scoreToBeat||currentScore<scoreToBeat)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function configFromObject(config){if(!config._d){var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10)}),configFromArray(config)}}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));return res._nextDay&&(res.add(1,"d"),res._nextDay=void 0),res}function prepareConfig(config){var input=config._i,format=config._f;return config._locale=config._locale||locale_locales__getLocale(config._l),null===input||void 0===format&&""===input?valid__createInvalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isArray(format)?configFromStringAndArray(config):isDate(input)?config._d=input:format?configFromStringAndFormat(config):configFromInput(config),valid__isValid(config)||(config._d=null),config))}function configFromInput(config){var input=config._i;void 0===input?config._d=new Date(utils_hooks__hooks.now()):isDate(input)?config._d=new Date(input.valueOf()):"string"==typeof input?configFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){return parseInt(obj,10)}),configFromArray(config)):"object"===("undefined"==typeof input?"undefined":_typeof(input))?configFromObject(config):"number"==typeof input?config._d=new Date(input):utils_hooks__hooks.createFromInputFallback(config)}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};return"boolean"==typeof locale&&(strict=locale,locale=void 0),(isObject(input)&&isObjectEmpty(input)||isArray(input)&&0===input.length)&&(input=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale,c._i=input,c._f=format,c._strict=strict,createFromConfig(c)}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!1)}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return local__createLocal();for(res=moments[0],i=1;i<moments.length;++i)moments[i].isValid()&&!moments[i][fn](res)||(res=moments[i]);return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+1e3*hours*60*60,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=locale_locales__getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function absRound(number){return number<0?Math.round(-1*number)*-1:Math.round(number)}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";return offset<0&&(offset=-offset,sign="-"),sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}function offsetFromString(matcher,string){var matches=(string||"").match(matcher)||[],chunk=matches[matches.length-1]||[],parts=(chunk+"").match(chunkOffset)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(isMoment(input)||isDate(input)?input.valueOf():local__createLocal(input).valueOf())-res.valueOf(),res._d.setTime(res._d.valueOf()+diff),utils_hooks__hooks.updateOffset(res,!1),res):local__createLocal(input).local()}function getDateOffset(m){return 15*-Math.round(m._d.getTimezoneOffset()/15)}function getSetOffset(input,keepLocalTime){var localAdjust,offset=this._offset||0;return this.isValid()?null!=input?("string"==typeof input?input=offsetFromString(matchShortOffset,input):Math.abs(input)<16&&(input=60*input),!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,utils_hooks__hooks.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?offset:getDateOffset(this):null!=input?this:NaN}function getSetZone(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var tZone=offsetFromString(matchOffset,this._i);0===tZone?this.utcOffset(0,!0):this.utcOffset(offsetFromString(matchOffset,this._i))}return this}function hasAlignedHourOffset(input){return!!this.isValid()&&(input=input?local__createLocal(input).utcOffset():0,(this.utcOffset()-input)%60===0)}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var c={};if(copyConfig(c,this),c=prepareConfig(c),c._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function isLocal(){return!!this.isValid()&&!this._isUTC}function isUtcOffset(){return!!this.isValid()&&this._isUTC}function isUtc(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function create__createDuration(input,key){var sign,ret,diffRes,duration=input,match=null;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(1e3*match[MILLISECOND]))*sign}):(match=isoRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)}):null==duration?duration={}:"object"===("undefined"==typeof duration?"undefined":_typeof(duration))&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to)),duration={},duration.ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret}function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return base.isValid()&&other.isValid()?(other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):(res=positiveMomentsDifference(other,base),res.milliseconds=-res.milliseconds,res.months=-res.months),res):{milliseconds:0,months:0}}function createAdder(direction,name){return function(val,period){var dur,tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),tmp=val,val=period,period=tmp),val="string"==typeof val?+val:val,dur=create__createDuration(val,period),add_subtract__addSubtract(this,dur,direction),this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);mom.isValid()&&(updateOffset=null==updateOffset||updateOffset,milliseconds&&mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding),days&&get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding),months&&setMonth(mom,get_set__get(mom,"Month")+months*isAdding),updateOffset&&utils_hooks__hooks.updateOffset(mom,days||months))}function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,"days",!0);return diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse"}function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),format=utils_hooks__hooks.calendarFormat(this,sod)||"sameElse",output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,local__createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:local__createLocal(input);return!(!this.isValid()||!localInput.isValid())&&(units=normalizeUnits(isUndefined(units)?"millisecond":units),"millisecond"===units?this.valueOf()>localInput.valueOf():localInput.valueOf()<this.clone().startOf(units).valueOf())}function isBefore(input,units){var localInput=isMoment(input)?input:local__createLocal(input);return!(!this.isValid()||!localInput.isValid())&&(units=normalizeUnits(isUndefined(units)?"millisecond":units),"millisecond"===units?this.valueOf()<localInput.valueOf():this.clone().endOf(units).valueOf()<localInput.valueOf())}function isBetween(from,to,units,inclusivity){return inclusivity=inclusivity||"()",("("===inclusivity[0]?this.isAfter(from,units):!this.isBefore(from,units))&&(")"===inclusivity[1]?this.isBefore(to,units):!this.isAfter(to,units))}function isSame(input,units){var inputMs,localInput=isMoment(input)?input:local__createLocal(input);return!(!this.isValid()||!localInput.isValid())&&(units=normalizeUnits(units||"millisecond"),"millisecond"===units?this.valueOf()===localInput.valueOf():(inputMs=localInput.valueOf(),this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf()))}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,delta,output;return this.isValid()?(that=cloneWithOffset(input,this),that.isValid()?(zoneDelta=6e4*(that.utcOffset()-this.utcOffset()),units=normalizeUnits(units),"year"===units||"month"===units||"quarter"===units?(output=monthDiff(this,that),"quarter"===units?output/=3:"year"===units&&(output/=12)):(delta=this-that,output="second"===units?delta/1e3:"minute"===units?delta/6e4:"hour"===units?delta/36e5:"day"===units?(delta-zoneDelta)/864e5:"week"===units?(delta-zoneDelta)/6048e5:delta),asFloat?output:absFloor(output)):NaN):NaN}function monthDiff(a,b){var anchor2,adjust,wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months");return b-anchor<0?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),adjust=(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),adjust=(b-anchor)/(anchor2-anchor)),-(wholeMonthDiff+adjust)||0}function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function moment_format__toISOString(){var m=this.clone().utc();return 0<m.year()&&m.year()<=9999?isFunction(Date.prototype.toISOString)?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function format(inputString){inputString||(inputString=this.isUtc()?utils_hooks__hooks.defaultFormatUtc:utils_hooks__hooks.defaultFormat);var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||local__createLocal(time).isValid())?create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)}function to(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||local__createLocal(time).isValid())?create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)}function locale(key){var newLocaleData;return void 0===key?this._locale._abbr:(newLocaleData=locale_locales__getLocale(key),null!=newLocaleData&&(this._locale=newLocaleData),this)}function localeData(){return this._locale}function startOf(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units&&this.weekday(0),"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this}function endOf(units){return units=normalizeUnits(units),void 0===units||"millisecond"===units?this:("date"===units&&(units="day"),this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms"))}function to_type__valueOf(){return this._d.valueOf()-6e4*(this._offset||0)}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function moment_valid__isValid(){return valid__isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;return null==input?weekOfYear(this,dow,doy).year:(weeksTarget=weeksInYear(input,dow,doy),week>weeksTarget&&(week=weeksTarget),setWeekAll.call(this,input,week,weekday,dow,doy))}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);return this.year(date.getUTCFullYear()),this.month(date.getUTCMonth()),this.date(date.getUTCDate()),this}function getSetQuarter(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")}function parseMs(input,array){array[MILLISECOND]=toInt(1e3*("0."+input))}function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}function moment__createUnix(input){return local__createLocal(1e3*input)}function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(string){return string}function lists__get(format,index,field,setter){var locale=locale_locales__getLocale(),utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function listMonthsImpl(format,index,field){if("number"==typeof format&&(index=format,format=void 0),format=format||"",null!=index)return lists__get(format,index,field,"month");var i,out=[];for(i=0;i<12;i++)out[i]=lists__get(format,i,field,"month");return out}function listWeekdaysImpl(localeSorted,format,index,field){"boolean"==typeof localeSorted?("number"==typeof format&&(index=format,format=void 0),format=format||""):(format=localeSorted,index=format,localeSorted=!1,"number"==typeof format&&(index=format,format=void 0),format=format||"");var locale=locale_locales__getLocale(),shift=localeSorted?locale._week.dow:0;if(null!=index)return lists__get(format,(index+shift)%7,field,"day");var i,out=[];for(i=0;i<7;i++)out[i]=lists__get(format,(i+shift)%7,field,"day");return out}function lists__listMonths(format,index){return listMonthsImpl(format,index,"months")}function lists__listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort")}function lists__listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays")}function lists__listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort")}function lists__listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin")}function duration_abs__abs(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this}function duration_add_subtract__addSubtract(duration,input,value,direction){
var other=create__createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1)}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)}function absCeil(number){return number<0?Math.floor(number):Math.ceil(number)}function bubble(){var seconds,minutes,hours,years,monthsFromDays,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;return milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0||(milliseconds+=864e5*absCeil(monthsToDays(months)+days),days=0,months=0),data.milliseconds=milliseconds%1e3,seconds=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes=absFloor(seconds/60),data.minutes=minutes%60,hours=absFloor(minutes/60),data.hours=hours%24,days+=absFloor(hours/24),monthsFromDays=absFloor(daysToMonths(days)),months+=monthsFromDays,days-=absCeil(monthsToDays(monthsFromDays)),years=absFloor(months/12),months%=12,data.days=days,data.months=months,data.years=years,this}function daysToMonths(days){return 4800*days/146097}function monthsToDays(months){return 146097*months/4800}function as(units){var days,months,milliseconds=this._milliseconds;if(units=normalizeUnits(units),"month"===units||"year"===units)return days=this._days+milliseconds/864e5,months=this._months+daysToMonths(days),"month"===units?months:months/12;switch(days=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return 24*days+milliseconds/36e5;case"minute":return 1440*days+milliseconds/6e4;case"second":return 86400*days+milliseconds/1e3;case"millisecond":return Math.floor(864e5*days)+milliseconds;default:throw new Error("Unknown unit "+units)}}function duration_as__valueOf(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)}function makeAs(alias){return function(){return this.as(alias)}}function duration_get__get(units){return units=normalizeUnits(units),this[units+"s"]()}function makeGetter(name){return function(){return this._data[name]}}function weeks(){return absFloor(this.days()/7)}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),a=seconds<thresholds.s&&["s",seconds]||minutes<=1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours<=1&&["h"]||hours<thresholds.h&&["hh",hours]||days<=1&&["d"]||days<thresholds.d&&["dd",days]||months<=1&&["M"]||months<thresholds.M&&["MM",months]||years<=1&&["y"]||["yy",years];return a[2]=withoutSuffix,a[3]=+posNegDuration>0,a[4]=locale,substituteTimeAgo.apply(null,a)}function duration_humanize__getSetRelativeTimeRounding(roundingFunction){return void 0===roundingFunction?round:"function"==typeof roundingFunction&&(round=roundingFunction,!0)}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){return void 0!==thresholds[threshold]&&(void 0===limit?thresholds[threshold]:(thresholds[threshold]=limit,!0))}function humanize(withSuffix){var locale=this.localeData(),output=duration_humanize__relativeTime(this,!withSuffix,locale);return withSuffix&&(output=locale.pastFuture(+this,output)),locale.postformat(output)}function iso_string__toISOString(){var minutes,hours,years,seconds=iso_string__abs(this._milliseconds)/1e3,days=iso_string__abs(this._days),months=iso_string__abs(this._months);minutes=absFloor(seconds/60),hours=absFloor(minutes/60),seconds%=60,minutes%=60,years=absFloor(months/12),months%=12;var Y=years,M=months,D=days,h=hours,m=minutes,s=seconds,total=this.asSeconds();return total?(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":""):"P0D"}var hookCallback,some;some=Array.prototype.some?Array.prototype.some:function(fun){for(var t=Object(this),len=t.length>>>0,i=0;i<len;i++)if(i in t&&fun.call(this,t[i],i,t))return!0;return!1};var momentProperties=utils_hooks__hooks.momentProperties=[],updateInProgress=!1,deprecations={};utils_hooks__hooks.suppressDeprecationWarnings=!1,utils_hooks__hooks.deprecationHandler=null;var keys;keys=Object.keys?Object.keys:function(obj){var i,res=[];for(i in obj)hasOwnProp(obj,i)&&res.push(i);return res};var indexOf,defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},defaultInvalidDate="Invalid date",defaultOrdinal="%d",defaultOrdinalParse=/\d{1,2}/,defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},aliases={},priorities={},formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={},match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,regexes={},tokens={},YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;indexOf=Array.prototype.indexOf?Array.prototype.indexOf:function(o){var i;for(i=0;i<this.length;++i)if(this[i]===o)return i;return-1},addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)}),addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)}),addUnitAlias("month","M"),addUnitPriority("month",8),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",function(isStrict,locale){return locale.monthsShortRegex(isStrict)}),addRegexToken("MMMM",function(isStrict,locale){return locale.monthsRegex(isStrict)}),addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1}),addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);null!=month?array[MONTH]=month:getParsingFlags(config).invalidMonth=input});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;addFormatToken("Y",0,0,function(){var y=this.year();return y<=9999?""+y:"+"+y}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addUnitPriority("year",1),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",function(input,array){array[YEAR]=2===input.length?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input)}),addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)}),addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10)}),utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addUnitPriority("week",5),addUnitPriority("isoWeek",5),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});var defaultLocaleWeek={dow:0,doy:6};addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)}),addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)}),addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addUnitPriority("day",11),addUnitPriority("weekday",11),addUnitPriority("isoWeekday",11),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",function(isStrict,locale){return locale.weekdaysMinRegex(isStrict)}),addRegexToken("ddd",function(isStrict,locale){return locale.weekdaysShortRegex(isStrict)}),addRegexToken("dddd",function(isStrict,locale){return locale.weekdaysRegex(isStrict)}),addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);null!=weekday?week.d=weekday:getParsingFlags(config).invalidWeekday=input}),addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,kFormat),addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)}),addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)}),addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addUnitPriority("hour",13),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addRegexToken("hmm",match3to4),addRegexToken("hmmss",match5to6),addRegexToken("Hmm",match3to4),addRegexToken("Hmmss",match5to6),addParseToken(["H","HH"],HOUR),addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input}),addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input),getParsingFlags(config).bigHour=!0}),addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos)),array[MINUTE]=toInt(input.substr(pos)),getParsingFlags(config).bigHour=!0}),addParseToken("hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1)),array[MINUTE]=toInt(input.substr(pos1,2)),array[SECOND]=toInt(input.substr(pos2)),getParsingFlags(config).bigHour=!0}),addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos)),array[MINUTE]=toInt(input.substr(pos))}),addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1)),array[MINUTE]=toInt(input.substr(pos1,2)),array[SECOND]=toInt(input.substr(pos2))});var globalLocale,defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0),baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,ordinalParse:defaultOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;utils_hooks__hooks.createFromInputFallback=deprecate("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),utils_hooks__hooks.ISO_8601=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=local__createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?other<this?this:other:valid__createInvalid()}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=local__createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?other>this?this:other:valid__createInvalid()}),now=function(){return Date.now?Date.now():+new Date};offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchShortOffset),addRegexToken("ZZ",matchShortOffset),addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(matchShortOffset,input)});var chunkOffset=/([\+\-]|\d\d)/gi;utils_hooks__hooks.updateOffset=function(){};var aspNetRegex=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,isoRegex=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;create__createDuration.fn=Duration.prototype;var add_subtract__add=createAdder(1,"add"),add_subtract__subtract=createAdder(-1,"subtract");utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",utils_hooks__hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return void 0===key?this.localeData():this.locale(key)});addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addUnitPriority("weekYear",1),addUnitPriority("isoWeekYear",1),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)}),addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)}),addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addUnitPriority("quarter",7),addRegexToken("Q",match1),addParseToken("Q",function(input,array){array[MONTH]=3*(toInt(input)-1)}),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addUnitPriority("date",9),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient}),addParseToken(["D","DD"],DATE),addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addUnitPriority("dayOfYear",4),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)}),addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addUnitPriority("minute",14),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addUnitPriority("second",15),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addUnitPriority("millisecond",16),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);var getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add,momentPrototype__proto.calendar=moment_calendar__calendar,momentPrototype__proto.clone=clone,momentPrototype__proto.diff=diff,momentPrototype__proto.endOf=endOf,momentPrototype__proto.format=format,momentPrototype__proto.from=from,momentPrototype__proto.fromNow=fromNow,momentPrototype__proto.to=to,momentPrototype__proto.toNow=toNow,momentPrototype__proto.get=stringGet,momentPrototype__proto.invalidAt=invalidAt,momentPrototype__proto.isAfter=isAfter,momentPrototype__proto.isBefore=isBefore,momentPrototype__proto.isBetween=isBetween,momentPrototype__proto.isSame=isSame,momentPrototype__proto.isSameOrAfter=isSameOrAfter,momentPrototype__proto.isSameOrBefore=isSameOrBefore,momentPrototype__proto.isValid=moment_valid__isValid,momentPrototype__proto.lang=lang,momentPrototype__proto.locale=locale,momentPrototype__proto.localeData=localeData,momentPrototype__proto.max=prototypeMax,momentPrototype__proto.min=prototypeMin,momentPrototype__proto.parsingFlags=parsingFlags,momentPrototype__proto.set=stringSet,momentPrototype__proto.startOf=startOf,momentPrototype__proto.subtract=add_subtract__subtract,momentPrototype__proto.toArray=toArray,momentPrototype__proto.toObject=toObject,momentPrototype__proto.toDate=toDate,momentPrototype__proto.toISOString=moment_format__toISOString,momentPrototype__proto.toJSON=toJSON,momentPrototype__proto.toString=toString,momentPrototype__proto.unix=unix,momentPrototype__proto.valueOf=to_type__valueOf,momentPrototype__proto.creationData=creationData,momentPrototype__proto.year=getSetYear,momentPrototype__proto.isLeapYear=getIsLeapYear,momentPrototype__proto.weekYear=getSetWeekYear,momentPrototype__proto.isoWeekYear=getSetISOWeekYear,momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter,momentPrototype__proto.month=getSetMonth,momentPrototype__proto.daysInMonth=getDaysInMonth,momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek,momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek,momentPrototype__proto.weeksInYear=getWeeksInYear,momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear,momentPrototype__proto.date=getSetDayOfMonth,momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek,momentPrototype__proto.weekday=getSetLocaleDayOfWeek,momentPrototype__proto.isoWeekday=getSetISODayOfWeek,momentPrototype__proto.dayOfYear=getSetDayOfYear,momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour,momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute,momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond,momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond,momentPrototype__proto.utcOffset=getSetOffset,momentPrototype__proto.utc=setOffsetToUTC,momentPrototype__proto.local=setOffsetToLocal,momentPrototype__proto.parseZone=setOffsetToParsedOffset,momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset,momentPrototype__proto.isDST=isDaylightSavingTime,momentPrototype__proto.isLocal=isLocal,momentPrototype__proto.isUtcOffset=isUtcOffset,momentPrototype__proto.isUtc=isUtc,momentPrototype__proto.isUTC=isUtc,momentPrototype__proto.zoneAbbr=getZoneAbbr,momentPrototype__proto.zoneName=getZoneName,momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone),momentPrototype__proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);var momentPrototype=momentPrototype__proto,prototype__proto=Locale.prototype;prototype__proto.calendar=locale_calendar__calendar,prototype__proto.longDateFormat=longDateFormat,prototype__proto.invalidDate=invalidDate,prototype__proto.ordinal=ordinal,prototype__proto.preparse=preParsePostFormat,prototype__proto.postformat=preParsePostFormat,prototype__proto.relativeTime=relative__relativeTime,prototype__proto.pastFuture=pastFuture,prototype__proto.set=locale_set__set,prototype__proto.months=localeMonths,prototype__proto.monthsShort=localeMonthsShort,prototype__proto.monthsParse=localeMonthsParse,prototype__proto.monthsRegex=monthsRegex,prototype__proto.monthsShortRegex=monthsShortRegex,prototype__proto.week=localeWeek,prototype__proto.firstDayOfYear=localeFirstDayOfYear,prototype__proto.firstDayOfWeek=localeFirstDayOfWeek,prototype__proto.weekdays=localeWeekdays,prototype__proto.weekdaysMin=localeWeekdaysMin,prototype__proto.weekdaysShort=localeWeekdaysShort,prototype__proto.weekdaysParse=localeWeekdaysParse,prototype__proto.weekdaysRegex=weekdaysRegex,prototype__proto.weekdaysShortRegex=weekdaysShortRegex,prototype__proto.weekdaysMinRegex=weekdaysMinRegex,prototype__proto.isPM=localeIsPM,prototype__proto.meridiem=localeMeridiem,locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale),utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs,asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asYears=makeAs("y"),milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years"),round=Math.round,thresholds={s:45,m:45,h:22,d:26,M:11},iso_string__abs=Math.abs,duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs,duration_prototype__proto.add=duration_add_subtract__add,duration_prototype__proto.subtract=duration_add_subtract__subtract,duration_prototype__proto.as=as,duration_prototype__proto.asMilliseconds=asMilliseconds,duration_prototype__proto.asSeconds=asSeconds,duration_prototype__proto.asMinutes=asMinutes,duration_prototype__proto.asHours=asHours,duration_prototype__proto.asDays=asDays,duration_prototype__proto.asWeeks=asWeeks,duration_prototype__proto.asMonths=asMonths,duration_prototype__proto.asYears=asYears,duration_prototype__proto.valueOf=duration_as__valueOf,duration_prototype__proto._bubble=bubble,duration_prototype__proto.get=duration_get__get,duration_prototype__proto.milliseconds=milliseconds,duration_prototype__proto.seconds=seconds,duration_prototype__proto.minutes=minutes,duration_prototype__proto.hours=hours,duration_prototype__proto.days=days,duration_prototype__proto.weeks=weeks,duration_prototype__proto.months=months,duration_prototype__proto.years=years,duration_prototype__proto.humanize=humanize,duration_prototype__proto.toISOString=iso_string__toISOString,duration_prototype__proto.toString=iso_string__toISOString,duration_prototype__proto.toJSON=iso_string__toISOString,duration_prototype__proto.locale=locale,duration_prototype__proto.localeData=localeData,duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString),duration_prototype__proto.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",matchTimestamp),addParseToken("X",function(input,array,config){config._d=new Date(1e3*parseFloat(input,10))}),addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))}),utils_hooks__hooks.version="2.15.1",setHookCallback(local__createLocal),utils_hooks__hooks.fn=momentPrototype,utils_hooks__hooks.min=min,utils_hooks__hooks.max=max,utils_hooks__hooks.now=now,utils_hooks__hooks.utc=create_utc__createUTC,utils_hooks__hooks.unix=moment__createUnix,utils_hooks__hooks.months=lists__listMonths,utils_hooks__hooks.isDate=isDate,utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale,utils_hooks__hooks.invalid=valid__createInvalid,utils_hooks__hooks.duration=create__createDuration,utils_hooks__hooks.isMoment=isMoment,utils_hooks__hooks.weekdays=lists__listWeekdays,utils_hooks__hooks.parseZone=moment__createInZone,utils_hooks__hooks.localeData=locale_locales__getLocale,utils_hooks__hooks.isDuration=isDuration,utils_hooks__hooks.monthsShort=lists__listMonthsShort,utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin,utils_hooks__hooks.defineLocale=defineLocale,utils_hooks__hooks.updateLocale=updateLocale,utils_hooks__hooks.locales=locale_locales__listLocales,utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort,utils_hooks__hooks.normalizeUnits=normalizeUnits,utils_hooks__hooks.relativeTimeRounding=duration_humanize__getSetRelativeTimeRounding,utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold,utils_hooks__hooks.calendarFormat=getCalendarFormat,utils_hooks__hooks.prototype=momentPrototype;var _moment=utils_hooks__hooks;return _moment})},{}],numbro:[function(_dereq_,module,exports){(function(){function Numbro(number){this._value=number}function zeroes(count){var i,ret="";for(i=0;i<count;i++)ret+="0";return ret}function toFixedLargeSmall(value,precision){var mantissa,beforeDec,afterDec,exponent,prefix,endStr,zerosStr,str;return str=value.toString(),mantissa=str.split("e")[0],exponent=str.split("e")[1],beforeDec=mantissa.split(".")[0],afterDec=mantissa.split(".")[1]||"",+exponent>0?str=beforeDec+afterDec+zeroes(exponent-afterDec.length):(prefix=+beforeDec<0?"-0":"0",precision>0&&(prefix+="."),zerosStr=zeroes(-1*exponent-1),endStr=(zerosStr+Math.abs(beforeDec)+afterDec).substr(0,precision),str=prefix+endStr),+exponent>0&&precision>0&&(str+="."+zeroes(precision)),str}function toFixed(value,precision,roundingFunction,optionals){var optionalsRegExp,output,power=Math.pow(10,precision);return value.toString().indexOf("e")>-1?(output=toFixedLargeSmall(value,precision),"-"===output.charAt(0)&&+output>=0&&(output=output.substr(1))):output=(roundingFunction(value+"e+"+precision)/power).toFixed(precision),optionals&&(optionalsRegExp=new RegExp("0{1,"+optionals+"}$"),output=output.replace(optionalsRegExp,"")),output}function formatNumbro(n,format,roundingFunction){var output,escapedFormat=format.replace(/\{[^\{\}]*\}/g,"");return output=escapedFormat.indexOf("$")>-1?_formatCurrency(n,cultures[currentCulture].currency.symbol,format,roundingFunction):escapedFormat.indexOf("%")>-1?formatPercentage(n,format,roundingFunction):escapedFormat.indexOf(":")>-1?formatTime(n,format):formatNumber(n._value,format,roundingFunction)}function unformatNumbro(n,string){var thousandRegExp,millionRegExp,billionRegExp,trillionRegExp,power,stringOriginal=string,bytesMultiplier=!1;if(string.indexOf(":")>-1)n._value=unformatTime(string);else if(string===zeroFormat)n._value=0;else{for("."!==cultures[currentCulture].delimiters.decimal&&(string=string.replace(/\./g,"").replace(cultures[currentCulture].delimiters.decimal,".")),thousandRegExp=new RegExp("[^a-zA-Z]"+cultures[currentCulture].abbreviations.thousand+"(?:\\)|(\\"+cultures[currentCulture].currency.symbol+")?(?:\\))?)?$"),millionRegExp=new RegExp("[^a-zA-Z]"+cultures[currentCulture].abbreviations.million+"(?:\\)|(\\"+cultures[currentCulture].currency.symbol+")?(?:\\))?)?$"),billionRegExp=new RegExp("[^a-zA-Z]"+cultures[currentCulture].abbreviations.billion+"(?:\\)|(\\"+cultures[currentCulture].currency.symbol+")?(?:\\))?)?$"),trillionRegExp=new RegExp("[^a-zA-Z]"+cultures[currentCulture].abbreviations.trillion+"(?:\\)|(\\"+cultures[currentCulture].currency.symbol+")?(?:\\))?)?$"),power=1;power<binarySuffixes.length&&!bytesMultiplier;++power)string.indexOf(binarySuffixes[power])>-1?bytesMultiplier=Math.pow(1024,power):string.indexOf(decimalSuffixes[power])>-1&&(bytesMultiplier=Math.pow(1e3,power));
var str=string.replace(/[^0-9\.]+/g,"");""===str?n._value=NaN:(n._value=(bytesMultiplier?bytesMultiplier:1)*(stringOriginal.match(thousandRegExp)?Math.pow(10,3):1)*(stringOriginal.match(millionRegExp)?Math.pow(10,6):1)*(stringOriginal.match(billionRegExp)?Math.pow(10,9):1)*(stringOriginal.match(trillionRegExp)?Math.pow(10,12):1)*(string.indexOf("%")>-1?.01:1)*((string.split("-").length+Math.min(string.split("(").length-1,string.split(")").length-1))%2?1:-1)*Number(str),n._value=bytesMultiplier?Math.ceil(n._value):n._value)}return n._value}function _formatCurrency(n,currencySymbol,originalFormat,roundingFunction){var spliceIndex,output,format=originalFormat,symbolIndex=format.indexOf("$"),openParenIndex=format.indexOf("("),plusSignIndex=format.indexOf("+"),minusSignIndex=format.indexOf("-"),space="",decimalSeparator="";if(format.indexOf("$")===-1?"infix"===cultures[currentCulture].currency.position?(decimalSeparator=currencySymbol,cultures[currentCulture].currency.spaceSeparated&&(decimalSeparator=" "+decimalSeparator+" ")):cultures[currentCulture].currency.spaceSeparated&&(space=" "):format.indexOf(" $")>-1?(space=" ",format=format.replace(" $","")):format.indexOf("$ ")>-1?(space=" ",format=format.replace("$ ","")):format=format.replace("$",""),output=formatNumber(n._value,format,roundingFunction,decimalSeparator),originalFormat.indexOf("$")===-1)switch(cultures[currentCulture].currency.position){case"postfix":output.indexOf(")")>-1?(output=output.split(""),output.splice(-1,0,space+currencySymbol),output=output.join("")):output=output+space+currencySymbol;break;case"infix":break;case"prefix":output.indexOf("(")>-1||output.indexOf("-")>-1?(output=output.split(""),spliceIndex=Math.max(openParenIndex,minusSignIndex)+1,output.splice(spliceIndex,0,currencySymbol+space),output=output.join("")):output=currencySymbol+space+output;break;default:throw Error('Currency position should be among ["prefix", "infix", "postfix"]')}else symbolIndex<=1?output.indexOf("(")>-1||output.indexOf("+")>-1||output.indexOf("-")>-1?(output=output.split(""),spliceIndex=1,(symbolIndex<openParenIndex||symbolIndex<plusSignIndex||symbolIndex<minusSignIndex)&&(spliceIndex=0),output.splice(spliceIndex,0,currencySymbol+space),output=output.join("")):output=currencySymbol+space+output:output.indexOf(")")>-1?(output=output.split(""),output.splice(-1,0,space+currencySymbol),output=output.join("")):output=output+space+currencySymbol;return output}function _formatForeignCurrency(n,foreignCurrencySymbol,originalFormat,roundingFunction){return _formatCurrency(n,foreignCurrencySymbol,originalFormat,roundingFunction)}function formatPercentage(n,format,roundingFunction){var output,space="",value=100*n._value;return format.indexOf(" %")>-1?(space=" ",format=format.replace(" %","")):format=format.replace("%",""),output=formatNumber(value,format,roundingFunction),output.indexOf(")")>-1?(output=output.split(""),output.splice(-1,0,space+"%"),output=output.join("")):output=output+space+"%",output}function formatTime(n){var hours=Math.floor(n._value/60/60),minutes=Math.floor((n._value-60*hours*60)/60),seconds=Math.round(n._value-60*hours*60-60*minutes);return hours+":"+(minutes<10?"0"+minutes:minutes)+":"+(seconds<10?"0"+seconds:seconds)}function unformatTime(string){var timeArray=string.split(":"),seconds=0;return 3===timeArray.length?(seconds+=60*Number(timeArray[0])*60,seconds+=60*Number(timeArray[1]),seconds+=Number(timeArray[2])):2===timeArray.length&&(seconds+=60*Number(timeArray[0]),seconds+=Number(timeArray[1])),Number(seconds)}function formatByteUnits(value,suffixes,scale){var power,min,max,suffix=suffixes[0],abs=Math.abs(value);if(abs>=scale){for(power=1;power<suffixes.length;++power)if(min=Math.pow(scale,power),max=Math.pow(scale,power+1),abs>=min&&abs<max){suffix=suffixes[power],value/=min;break}suffix===suffixes[0]&&(value/=Math.pow(scale,suffixes.length-1),suffix=suffixes[suffixes.length-1])}return{value:value,suffix:suffix}}function formatNumber(value,format,roundingFunction,sep){var byteFormat,units,totalLength,length,minimumPrecision,pow,w,intPrecision,precision,prefix,postfix,thousands,indexOpenP,size,indexMinus,minlen,i,negP=!1,signed=!1,optDec=!1,abbr="",abbrK=!1,abbrM=!1,abbrB=!1,abbrT=!1,abbrForce=!1,bytes="",ord="",abs=Math.abs(value),d="",forcedNeg=!1,neg=!1,paren="";if(0===value&&null!==zeroFormat)return zeroFormat;if(!isFinite(value))return""+value;if(0===format.indexOf("{")){var end=format.indexOf("}");if(end===-1)throw Error('Format should also contain a "}"');prefix=format.slice(1,end),format=format.slice(end+1)}else prefix="";if(format.indexOf("}")===format.length-1){var start=format.indexOf("{");if(start===-1)throw Error('Format should also contain a "{"');postfix=format.slice(start+1,-1),format=format.slice(0,start+1)}else postfix="";var info;for(info=format.indexOf(".")===-1?format.match(/([0-9]+).*/):format.match(/([0-9]+)\..*/),minlen=null===info?-1:info[1].length,format.indexOf("-")!==-1&&(forcedNeg=!0),format.indexOf("(")>-1?(negP=!0,format=format.slice(1,-1)):format.indexOf("+")>-1&&(signed=!0,format=format.replace(/\+/g,"")),format.indexOf("a")>-1&&(intPrecision=format.split(".")[0].match(/[0-9]+/g)||["0"],intPrecision=parseInt(intPrecision[0],10),abbrK=format.indexOf("aK")>=0,abbrM=format.indexOf("aM")>=0,abbrB=format.indexOf("aB")>=0,abbrT=format.indexOf("aT")>=0,abbrForce=abbrK||abbrM||abbrB||abbrT,format.indexOf(" a")>-1?(abbr=" ",format=format.replace(" a","")):format=format.replace("a",""),totalLength=Math.floor(Math.log(abs)/Math.LN10)+1,minimumPrecision=totalLength%3,minimumPrecision=0===minimumPrecision?3:minimumPrecision,intPrecision&&0!==abs&&(length=Math.floor(Math.log(abs)/Math.LN10)+1-intPrecision,pow=3*~~((Math.min(intPrecision,totalLength)-minimumPrecision)/3),abs/=Math.pow(10,pow),format.indexOf(".")===-1&&intPrecision>3&&(format+="[.]",size=0===length?0:3*~~(length/3)-length,size=size<0?size+3:size,format+=zeroes(size))),Math.floor(Math.log(Math.abs(value))/Math.LN10)+1!==intPrecision&&(abs>=Math.pow(10,12)&&!abbrForce||abbrT?(abbr+=cultures[currentCulture].abbreviations.trillion,value/=Math.pow(10,12)):abs<Math.pow(10,12)&&abs>=Math.pow(10,9)&&!abbrForce||abbrB?(abbr+=cultures[currentCulture].abbreviations.billion,value/=Math.pow(10,9)):abs<Math.pow(10,9)&&abs>=Math.pow(10,6)&&!abbrForce||abbrM?(abbr+=cultures[currentCulture].abbreviations.million,value/=Math.pow(10,6)):(abs<Math.pow(10,6)&&abs>=Math.pow(10,3)&&!abbrForce||abbrK)&&(abbr+=cultures[currentCulture].abbreviations.thousand,value/=Math.pow(10,3)))),i=0;i<byteFormatOrder.length;++i)if(byteFormat=byteFormatOrder[i],format.indexOf(byteFormat.marker)>-1){format.indexOf(" "+byteFormat.marker)>-1&&(bytes=" "),format=format.replace(bytes+byteFormat.marker,""),units=formatByteUnits(value,byteFormat.suffixes,byteFormat.scale),value=units.value,bytes+=units.suffix;break}if(format.indexOf("o")>-1&&(format.indexOf(" o")>-1?(ord=" ",format=format.replace(" o","")):format=format.replace("o",""),cultures[currentCulture].ordinal&&(ord+=cultures[currentCulture].ordinal(value))),format.indexOf("[.]")>-1&&(optDec=!0,format=format.replace("[.]",".")),w=value.toString().split(".")[0],precision=format.split(".")[1],thousands=format.indexOf(","),precision){if(precision.indexOf("*")!==-1?d=toFixed(value,value.toString().split(".")[1].length,roundingFunction):precision.indexOf("[")>-1?(precision=precision.replace("]",""),precision=precision.split("["),d=toFixed(value,precision[0].length+precision[1].length,roundingFunction,precision[1].length)):d=toFixed(value,precision.length,roundingFunction),w=d.split(".")[0],d.split(".")[1].length){var p=sep?abbr+sep:cultures[currentCulture].delimiters.decimal;d=p+d.split(".")[1]}else d="";optDec&&0===Number(d.slice(1))&&(d="")}else w=toFixed(value,0,roundingFunction);return w.indexOf("-")>-1&&(w=w.slice(1),neg=!0),w.length<minlen&&(w=zeroes(minlen-w.length)+w),thousands>-1&&(w=w.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+cultures[currentCulture].delimiters.thousands)),0===format.indexOf(".")&&(w=""),indexOpenP=format.indexOf("("),indexMinus=format.indexOf("-"),paren=indexOpenP<indexMinus?(negP&&neg?"(":"")+(forcedNeg&&neg||!negP&&neg?"-":""):(forcedNeg&&neg||!negP&&neg?"-":"")+(negP&&neg?"(":""),prefix+paren+(!neg&&signed&&0!==value?"+":"")+w+d+(ord?ord:"")+(abbr&&!sep?abbr:"")+(bytes?bytes:"")+(negP&&neg?")":"")+postfix}function setCulture(code,values){cultures[code]=values}function chooseCulture(code){currentCulture=code;var defaults=cultures[code].defaults;defaults&&defaults.format&&_numbro.defaultFormat(defaults.format),defaults&&defaults.currencyFormat&&_numbro.defaultCurrencyFormat(defaults.currencyFormat)}function inNodejsRuntime(){return"undefined"!=typeof process&&void 0===process.browser&&process.title&&(0===process.title.indexOf("node")||process.title.indexOf("meteor-tool")>0||"grunt"===process.title||"gulp"===process.title)&&"undefined"!=typeof _dereq_}function multiplier(x){var parts=x.toString().split(".");return parts.length<2?1:Math.pow(10,parts[1].length)}function correctionFactor(){var args=Array.prototype.slice.call(arguments);return args.reduce(function(prev,next){var mp=multiplier(prev),mn=multiplier(next);return mp>mn?mp:mn},-(1/0))}var _numbro,VERSION="1.9.3",binarySuffixes=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],decimalSuffixes=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],bytes={general:{scale:1024,suffixes:decimalSuffixes,marker:"bd"},binary:{scale:1024,suffixes:binarySuffixes,marker:"b"},decimal:{scale:1e3,suffixes:decimalSuffixes,marker:"d"}},byteFormatOrder=[bytes.general,bytes.binary,bytes.decimal],cultures={},languages=cultures,currentCulture="en-US",zeroFormat=null,defaultFormat="0,0",defaultCurrencyFormat="0$",hasModule="undefined"!=typeof module&&module.exports,enUS={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(number){var b=number%10;return 1===~~(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",0000 a"},formats:{fourDigits:"0000 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00"}};_numbro=function(input){return _numbro.isNumbro(input)?input=input.value():0===input||"undefined"==typeof input?input=0:Number(input)||(input=_numbro.fn.unformat(input)),new Numbro(Number(input))},_numbro.version=VERSION,_numbro.isNumbro=function(obj){return obj instanceof Numbro},_numbro.setLanguage=function(newLanguage,fallbackLanguage){console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead");var key=newLanguage,prefix=newLanguage.split("-")[0],matchingLanguage=null;languages[key]||(Object.keys(languages).forEach(function(language){matchingLanguage||language.split("-")[0]!==prefix||(matchingLanguage=language)}),key=matchingLanguage||fallbackLanguage||"en-US"),chooseCulture(key)},_numbro.setCulture=function(newCulture,fallbackCulture){var key=newCulture,suffix=newCulture.split("-")[1],matchingCulture=null;cultures[key]||(suffix&&Object.keys(cultures).forEach(function(language){matchingCulture||language.split("-")[1]!==suffix||(matchingCulture=language)}),key=matchingCulture||fallbackCulture||"en-US"),chooseCulture(key)},_numbro.language=function(key,values){if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!key)return currentCulture;if(key&&!values){if(!languages[key])throw new Error("Unknown language : "+key);chooseCulture(key)}return!values&&languages[key]||setCulture(key,values),_numbro},_numbro.culture=function(code,values){if(!code)return currentCulture;if(code&&!values){if(!cultures[code])throw new Error("Unknown culture : "+code);chooseCulture(code)}return!values&&cultures[code]||setCulture(code,values),_numbro},_numbro.languageData=function(key){if(console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"),!key)return languages[currentCulture];if(!languages[key])throw new Error("Unknown language : "+key);return languages[key]},_numbro.cultureData=function(code){if(!code)return cultures[currentCulture];if(!cultures[code])throw new Error("Unknown culture : "+code);return cultures[code]},_numbro.culture("en-US",enUS),_numbro.languages=function(){return console.warn("`languages` is deprecated since version 1.6.0. Use `cultures` instead"),languages},_numbro.cultures=function(){return cultures},_numbro.zeroFormat=function(format){zeroFormat="string"==typeof format?format:null},_numbro.defaultFormat=function(format){defaultFormat="string"==typeof format?format:"0.0"},_numbro.defaultCurrencyFormat=function(format){defaultCurrencyFormat="string"==typeof format?format:"0$"},_numbro.validate=function(val,culture){var _decimalSep,_thousandSep,_currSymbol,_valArray,_abbrObj,_thousandRegEx,cultureData,temp;if("string"!=typeof val&&(val+="",console.warn&&console.warn("Numbro.js: Value is not string. It has been co-erced to: ",val)),val=val.trim(),val=val.replace(/^[+-]?/,""),val.match(/^\d+$/))return!0;if(""===val)return!1;try{cultureData=_numbro.cultureData(culture)}catch(e){cultureData=_numbro.cultureData(_numbro.culture())}return _currSymbol=cultureData.currency.symbol,_abbrObj=cultureData.abbreviations,_decimalSep=cultureData.delimiters.decimal,_thousandSep="."===cultureData.delimiters.thousands?"\\.":cultureData.delimiters.thousands,temp=val.match(/^[^\d\.\,]+/),(null===temp||(val=val.substr(1),temp[0]===_currSymbol))&&(temp=val.match(/[^\d]+$/),(null===temp||(val=val.slice(0,-1),temp[0]===_abbrObj.thousand||temp[0]===_abbrObj.million||temp[0]===_abbrObj.billion||temp[0]===_abbrObj.trillion))&&(_thousandRegEx=new RegExp(_thousandSep+"{2}"),!val.match(/[^\d.,]/g)&&(_valArray=val.split(_decimalSep),!(_valArray.length>2)&&(_valArray.length<2?!!_valArray[0].match(/^\d+.*\d$/)&&!_valArray[0].match(_thousandRegEx):""===_valArray[0]?!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/):1===_valArray[0].length?!!_valArray[0].match(/^\d+$/)&&!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/):!!_valArray[0].match(/^\d+.*\d$/)&&!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/)))))},_numbro.loadLanguagesInNode=function(){console.warn("`loadLanguagesInNode` is deprecated since version 1.6.0. Use `loadCulturesInNode` instead"),_numbro.loadCulturesInNode()},_numbro.loadCulturesInNode=function(){var cultures=_dereq_("./languages");for(var langLocaleCode in cultures)langLocaleCode&&_numbro.culture(langLocaleCode,cultures[langLocaleCode])},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(callback,optInitialValue){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof callback)throw new TypeError(callback+" is not a function");var index,value,length=this.length>>>0,isValueSet=!1;for(1<arguments.length&&(value=optInitialValue,isValueSet=!0),index=0;length>index;++index)this.hasOwnProperty(index)&&(isValueSet?value=callback(value,this[index],index,this):(value=this[index],isValueSet=!0));if(!isValueSet)throw new TypeError("Reduce of empty array with no initial value");return value}),_numbro.fn=Numbro.prototype={clone:function(){return _numbro(this)},format:function(inputString,roundingFunction){return formatNumbro(this,inputString?inputString:defaultFormat,void 0!==roundingFunction?roundingFunction:Math.round)},formatCurrency:function(inputString,roundingFunction){return _formatCurrency(this,cultures[currentCulture].currency.symbol,inputString?inputString:defaultCurrencyFormat,void 0!==roundingFunction?roundingFunction:Math.round)},formatForeignCurrency:function(currencySymbol,inputString,roundingFunction){return _formatForeignCurrency(this,currencySymbol,inputString?inputString:defaultCurrencyFormat,void 0!==roundingFunction?roundingFunction:Math.round)},unformat:function(inputString){if("number"==typeof inputString)return inputString;if("string"==typeof inputString){var result=unformatNumbro(this,inputString);return isNaN(result)?void 0:result}},binaryByteUnits:function(){return formatByteUnits(this._value,bytes.binary.suffixes,bytes.binary.scale).suffix},byteUnits:function(){return formatByteUnits(this._value,bytes.general.suffixes,bytes.general.scale).suffix},decimalByteUnits:function(){return formatByteUnits(this._value,bytes.decimal.suffixes,bytes.decimal.scale).suffix},value:function(){return this._value},valueOf:function(){return this._value},set:function(value){return this._value=Number(value),this},add:function(value){function cback(accum,curr){return accum+corrFactor*curr}var corrFactor=correctionFactor.call(null,this._value,value);return this._value=[this._value,value].reduce(cback,0)/corrFactor,this},subtract:function(value){function cback(accum,curr){return accum-corrFactor*curr}var corrFactor=correctionFactor.call(null,this._value,value);return this._value=[value].reduce(cback,this._value*corrFactor)/corrFactor,this},multiply:function(value){function cback(accum,curr){var corrFactor=correctionFactor(accum,curr),result=accum*corrFactor;return result*=curr*corrFactor,result/=corrFactor*corrFactor}return this._value=[this._value,value].reduce(cback,1),this},divide:function(value){function cback(accum,curr){var corrFactor=correctionFactor(accum,curr);return accum*corrFactor/(curr*corrFactor)}return this._value=[this._value,value].reduce(cback),this},difference:function(value){return Math.abs(_numbro(this._value).subtract(value).value())}},inNodejsRuntime()&&_numbro.loadCulturesInNode(),hasModule?module.exports=_numbro:("undefined"==typeof ender&&(this.numbro=_numbro),"function"==typeof define&&define.amd&&define([],function(){return _numbro}))}).call("undefined"==typeof window?this:window)},{languages:1}],pikaday:[function(_dereq_,module,exports){!function(root,factory){var moment;if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))){try{moment=_dereq_("moment")}catch(e){}module.exports=factory(moment)}else"function"==typeof define&&define.amd?define(function(req){var id="moment";try{moment=req(id)}catch(e){}return factory(moment)}):root.Pikaday=factory(root.moment)}(this,function(moment){var hasMoment="function"==typeof moment,hasEventListeners=!!window.addEventListener,document=window.document,sto=window.setTimeout,addEvent=function(el,e,callback,capture){hasEventListeners?el.addEventListener(e,callback,!!capture):el.attachEvent("on"+e,callback)},removeEvent=function(el,e,callback,capture){hasEventListeners?el.removeEventListener(e,callback,!!capture):el.detachEvent("on"+e,callback)},fireEvent=function(el,eventName,data){var ev;document.createEvent?(ev=document.createEvent("HTMLEvents"),ev.initEvent(eventName,!0,!1),ev=extend(ev,data),el.dispatchEvent(ev)):document.createEventObject&&(ev=document.createEventObject(),ev=extend(ev,data),el.fireEvent("on"+eventName,ev))},trim=function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")},hasClass=function(el,cn){return(" "+el.className+" ").indexOf(" "+cn+" ")!==-1},addClass=function(el,cn){hasClass(el,cn)||(el.className=""===el.className?cn:el.className+" "+cn)},removeClass=function(el,cn){el.className=trim((" "+el.className+" ").replace(" "+cn+" "," "))},isArray=function(obj){return/Array/.test(Object.prototype.toString.call(obj))},isDate=function(obj){return/Date/.test(Object.prototype.toString.call(obj))&&!isNaN(obj.getTime())},isWeekend=function(date){var day=date.getDay();return 0===day||6===day},isLeapYear=function(year){return year%4===0&&year%100!==0||year%400===0},getDaysInMonth=function(year,month){return[31,isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]},setToStartOfDay=function(date){isDate(date)&&date.setHours(0,0,0,0)},compareDates=function(a,b){return a.getTime()===b.getTime()},extend=function extend(to,from,overwrite){var prop,hasProp;for(prop in from)hasProp=void 0!==to[prop],hasProp&&"object"===_typeof(from[prop])&&null!==from[prop]&&void 0===from[prop].nodeName?isDate(from[prop])?overwrite&&(to[prop]=new Date(from[prop].getTime())):isArray(from[prop])?overwrite&&(to[prop]=from[prop].slice(0)):to[prop]=extend({},from[prop],overwrite):!overwrite&&hasProp||(to[prop]=from[prop]);return to},adjustCalendar=function(calendar){return calendar.month<0&&(calendar.year-=Math.ceil(Math.abs(calendar.month)/12),calendar.month+=12),calendar.month>11&&(calendar.year+=Math.floor(Math.abs(calendar.month)/12),calendar.month-=12),calendar},defaults={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},renderDayName=function(opts,day,abbr){for(day+=opts.firstDay;day>=7;)day-=7;return abbr?opts.i18n.weekdaysShort[day]:opts.i18n.weekdays[day]},renderDay=function(opts){if(opts.isEmpty)return'<td class="is-empty"></td>';var arr=[];return opts.isDisabled&&arr.push("is-disabled"),opts.isToday&&arr.push("is-today"),opts.isSelected&&arr.push("is-selected"),opts.isInRange&&arr.push("is-inrange"),opts.isStartRange&&arr.push("is-startrange"),opts.isEndRange&&arr.push("is-endrange"),'<td data-day="'+opts.day+'" class="'+arr.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+opts.year+'" data-pika-month="'+opts.month+'" data-pika-day="'+opts.day+'">'+opts.day+"</button></td>"},renderWeek=function(d,m,y){var onejan=new Date(y,0,1),weekNum=Math.ceil(((new Date(y,m,d)-onejan)/864e5+onejan.getDay()+1)/7);return'<td class="pika-week">'+weekNum+"</td>"},renderRow=function(days,isRTL){return"<tr>"+(isRTL?days.reverse():days).join("")+"</tr>"},renderBody=function(rows){return"<tbody>"+rows.join("")+"</tbody>"},renderHead=function(opts){var i,arr=[];for(opts.showWeekNumber&&arr.push("<th></th>"),i=0;i<7;i++)arr.push('<th scope="col"><abbr title="'+renderDayName(opts,i)+'">'+renderDayName(opts,i,!0)+"</abbr></th>");return"<thead>"+(opts.isRTL?arr.reverse():arr).join("")+"</thead>"},renderTitle=function(instance,c,year,month,refYear){var i,j,arr,monthHtml,yearHtml,opts=instance._o,isMinYear=year===opts.minYear,isMaxYear=year===opts.maxYear,html='<div class="pika-title">',prev=!0,next=!0;for(arr=[],i=0;i<12;i++)arr.push('<option value="'+(year===refYear?i-c:12+i-c)+'"'+(i===month?" selected":"")+(isMinYear&&i<opts.minMonth||isMaxYear&&i>opts.maxMonth?"disabled":"")+">"+opts.i18n.months[i]+"</option>");for(monthHtml='<div class="pika-label">'+opts.i18n.months[month]+'<select class="pika-select pika-select-month" tabindex="-1">'+arr.join("")+"</select></div>",isArray(opts.yearRange)?(i=opts.yearRange[0],j=opts.yearRange[1]+1):(i=year-opts.yearRange,j=1+year+opts.yearRange),arr=[];i<j&&i<=opts.maxYear;i++)i>=opts.minYear&&arr.push('<option value="'+i+'"'+(i===year?" selected":"")+">"+i+"</option>");return yearHtml='<div class="pika-label">'+year+opts.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+arr.join("")+"</select></div>",html+=opts.showMonthAfterYear?yearHtml+monthHtml:monthHtml+yearHtml,isMinYear&&(0===month||opts.minMonth>=month)&&(prev=!1),isMaxYear&&(11===month||opts.maxMonth<=month)&&(next=!1),0===c&&(html+='<button class="pika-prev'+(prev?"":" is-disabled")+'" type="button">'+opts.i18n.previousMonth+"</button>"),c===instance._o.numberOfMonths-1&&(html+='<button class="pika-next'+(next?"":" is-disabled")+'" type="button">'+opts.i18n.nextMonth+"</button>"),html+="</div>"},renderTable=function(opts,data){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+renderHead(opts)+renderBody(data)+"</table>"},Pikaday=function(options){var self=this,opts=self.config(options);self._onMouseDown=function(e){if(self._v){e=e||window.event;var target=e.target||e.srcElement;if(target)if(hasClass(target,"is-disabled")||(hasClass(target,"pika-button")&&!hasClass(target,"is-empty")?(self.setDate(new Date(target.getAttribute("data-pika-year"),target.getAttribute("data-pika-month"),target.getAttribute("data-pika-day"))),opts.bound&&sto(function(){self.hide(),opts.field&&opts.field.blur()},100)):hasClass(target,"pika-prev")?self.prevMonth():hasClass(target,"pika-next")&&self.nextMonth()),hasClass(target,"pika-select"))self._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},self._onChange=function(e){e=e||window.event;var target=e.target||e.srcElement;target&&(hasClass(target,"pika-select-month")?self.gotoMonth(target.value):hasClass(target,"pika-select-year")&&self.gotoYear(target.value))},self._onInputChange=function(e){var date;e.firedBy!==self&&(hasMoment?(date=moment(opts.field.value,opts.format),date=date&&date.isValid()?date.toDate():null):date=new Date(Date.parse(opts.field.value)),isDate(date)&&self.setDate(date),self._v||self.show())},self._onInputFocus=function(){self.show()},self._onInputClick=function(){self.show()},self._onInputBlur=function(){var pEl=document.activeElement;do if(hasClass(pEl,"pika-single"))return;while(pEl=pEl.parentNode);self._c||(self._b=sto(function(){self.hide()},50)),self._c=!1},self._onClick=function(e){e=e||window.event;var target=e.target||e.srcElement,pEl=target;if(target){!hasEventListeners&&hasClass(target,"pika-select")&&(target.onchange||(target.setAttribute("onchange","return;"),addEvent(target,"change",self._onChange)));do if(hasClass(pEl,"pika-single")||pEl===opts.trigger)return;while(pEl=pEl.parentNode);self._v&&target!==opts.trigger&&pEl!==opts.trigger&&self.hide()}},self.el=document.createElement("div"),self.el.className="pika-single"+(opts.isRTL?" is-rtl":"")+(opts.theme?" "+opts.theme:""),addEvent(self.el,"mousedown",self._onMouseDown,!0),addEvent(self.el,"touchend",self._onMouseDown,!0),addEvent(self.el,"change",self._onChange),opts.field&&(opts.container?opts.container.appendChild(self.el):opts.bound?document.body.appendChild(self.el):opts.field.parentNode.insertBefore(self.el,opts.field.nextSibling),addEvent(opts.field,"change",self._onInputChange),opts.defaultDate||(hasMoment&&opts.field.value?opts.defaultDate=moment(opts.field.value,opts.format).toDate():opts.defaultDate=new Date(Date.parse(opts.field.value)),opts.setDefaultDate=!0));var defDate=opts.defaultDate;isDate(defDate)?opts.setDefaultDate?self.setDate(defDate,!0):self.gotoDate(defDate):self.gotoDate(new Date),opts.bound?(this.hide(),self.el.className+=" is-bound",addEvent(opts.trigger,"click",self._onInputClick),addEvent(opts.trigger,"focus",self._onInputFocus),addEvent(opts.trigger,"blur",self._onInputBlur)):this.show()};return Pikaday.prototype={config:function(options){this._o||(this._o=extend({},defaults,!0));var opts=extend(this._o,options,!0);opts.isRTL=!!opts.isRTL,opts.field=opts.field&&opts.field.nodeName?opts.field:null,opts.theme="string"==typeof opts.theme&&opts.theme?opts.theme:null,opts.bound=!!(void 0!==opts.bound?opts.field&&opts.bound:opts.field),opts.trigger=opts.trigger&&opts.trigger.nodeName?opts.trigger:opts.field,opts.disableWeekends=!!opts.disableWeekends,opts.disableDayFn="function"==typeof opts.disableDayFn?opts.disableDayFn:null;var nom=parseInt(opts.numberOfMonths,10)||1;if(opts.numberOfMonths=nom>4?4:nom,isDate(opts.minDate)||(opts.minDate=!1),isDate(opts.maxDate)||(opts.maxDate=!1),opts.minDate&&opts.maxDate&&opts.maxDate<opts.minDate&&(opts.maxDate=opts.minDate=!1),opts.minDate&&this.setMinDate(opts.minDate),opts.maxDate&&this.setMaxDate(opts.maxDate),isArray(opts.yearRange)){var fallback=(new Date).getFullYear()-10;opts.yearRange[0]=parseInt(opts.yearRange[0],10)||fallback,opts.yearRange[1]=parseInt(opts.yearRange[1],10)||fallback}else opts.yearRange=Math.abs(parseInt(opts.yearRange,10))||defaults.yearRange,opts.yearRange>100&&(opts.yearRange=100);return opts},toString:function(format){return isDate(this._d)?hasMoment?moment(this._d).format(format||this._o.format):this._d.toDateString():""},getMoment:function(){return hasMoment?moment(this._d):null},setMoment:function(date,preventOnSelect){hasMoment&&moment.isMoment(date)&&this.setDate(date.toDate(),preventOnSelect)},getDate:function(){return isDate(this._d)?new Date(this._d.getTime()):null},setDate:function(date,preventOnSelect){if(!date)return this._d=null,this._o.field&&(this._o.field.value="",fireEvent(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof date&&(date=new Date(Date.parse(date))),isDate(date)){var min=this._o.minDate,max=this._o.maxDate;isDate(min)&&date<min?date=min:isDate(max)&&date>max&&(date=max),this._d=new Date(date.getTime()),setToStartOfDay(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),fireEvent(this._o.field,"change",{firedBy:this})),preventOnSelect||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(date){var newCalendar=!0;if(isDate(date)){if(this.calendars){var firstVisibleDate=new Date(this.calendars[0].year,this.calendars[0].month,1),lastVisibleDate=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),visibleDate=date.getTime();lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1),lastVisibleDate.setDate(lastVisibleDate.getDate()-1),newCalendar=visibleDate<firstVisibleDate.getTime()||lastVisibleDate.getTime()<visibleDate}newCalendar&&(this.calendars=[{month:date.getMonth(),year:date.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=adjustCalendar(this.calendars[0]);for(var c=1;c<this._o.numberOfMonths;c++)this.calendars[c]=adjustCalendar({month:this.calendars[0].month+c,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(month){isNaN(month)||(this.calendars[0].month=parseInt(month,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(year){isNaN(year)||(this.calendars[0].year=parseInt(year,10),this.adjustCalendars())},setMinDate:function(value){setToStartOfDay(value),this._o.minDate=value,this._o.minYear=value.getFullYear(),this._o.minMonth=value.getMonth(),this.draw()},setMaxDate:function(value){setToStartOfDay(value),this._o.maxDate=value,this._o.maxYear=value.getFullYear(),this._o.maxMonth=value.getMonth(),this.draw()},setStartRange:function(value){this._o.startRange=value},setEndRange:function(value){this._o.endRange=value},draw:function(force){if(this._v||force){var opts=this._o,minYear=opts.minYear,maxYear=opts.maxYear,minMonth=opts.minMonth,maxMonth=opts.maxMonth,html="";this._y<=minYear&&(this._y=minYear,!isNaN(minMonth)&&this._m<minMonth&&(this._m=minMonth)),this._y>=maxYear&&(this._y=maxYear,!isNaN(maxMonth)&&this._m>maxMonth&&(this._m=maxMonth));for(var c=0;c<opts.numberOfMonths;c++)html+='<div class="pika-lendar">'+renderTitle(this,c,this.calendars[c].year,this.calendars[c].month,this.calendars[0].year)+this.render(this.calendars[c].year,this.calendars[c].month)+"</div>";if(this.el.innerHTML=html,opts.bound&&"hidden"!==opts.field.type&&sto(function(){opts.trigger.focus()},1),"function"==typeof this._o.onDraw){var self=this;sto(function(){self._o.onDraw.call(self)},0)}}},adjustPosition:function(){var field,pEl,width,height,viewportWidth,viewportHeight,scrollTop,left,top,clientRect;if(!this._o.container){if(this.el.style.position="absolute",field=this._o.trigger,pEl=field,width=this.el.offsetWidth,height=this.el.offsetHeight,viewportWidth=window.innerWidth||document.documentElement.clientWidth,
viewportHeight=window.innerHeight||document.documentElement.clientHeight,scrollTop=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,"function"==typeof field.getBoundingClientRect)clientRect=field.getBoundingClientRect(),left=clientRect.left+window.pageXOffset,top=clientRect.bottom+window.pageYOffset;else for(left=pEl.offsetLeft,top=pEl.offsetTop+pEl.offsetHeight;pEl=pEl.offsetParent;)left+=pEl.offsetLeft,top+=pEl.offsetTop;(this._o.reposition&&left+width>viewportWidth||this._o.position.indexOf("right")>-1&&left-width+field.offsetWidth>0)&&(left=left-width+field.offsetWidth),(this._o.reposition&&top+height>viewportHeight+scrollTop||this._o.position.indexOf("top")>-1&&top-height-field.offsetHeight>0)&&(top=top-height-field.offsetHeight),this.el.style.left=left+"px",this.el.style.top=top+"px"}},render:function(year,month){var opts=this._o,now=new Date,days=getDaysInMonth(year,month),before=new Date(year,month,1).getDay(),data=[],row=[];setToStartOfDay(now),opts.firstDay>0&&(before-=opts.firstDay,before<0&&(before+=7));for(var cells=days+before,after=cells;after>7;)after-=7;cells+=7-after;for(var i=0,r=0;i<cells;i++){var day=new Date(year,month,1+(i-before)),isSelected=!!isDate(this._d)&&compareDates(day,this._d),isToday=compareDates(day,now),isEmpty=i<before||i>=days+before,isStartRange=opts.startRange&&compareDates(opts.startRange,day),isEndRange=opts.endRange&&compareDates(opts.endRange,day),isInRange=opts.startRange&&opts.endRange&&opts.startRange<day&&day<opts.endRange,isDisabled=opts.minDate&&day<opts.minDate||opts.maxDate&&day>opts.maxDate||opts.disableWeekends&&isWeekend(day)||opts.disableDayFn&&opts.disableDayFn(day),dayConfig={day:1+(i-before),month:month,year:year,isSelected:isSelected,isToday:isToday,isDisabled:isDisabled,isEmpty:isEmpty,isStartRange:isStartRange,isEndRange:isEndRange,isInRange:isInRange};row.push(renderDay(dayConfig)),7===++r&&(opts.showWeekNumber&&row.unshift(renderWeek(i-before,month,year)),data.push(renderRow(row,opts.isRTL)),row=[],r=0)}return renderTable(opts,data)},isVisible:function(){return this._v},show:function(){this._v||(removeClass(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(addEvent(document,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var v=this._v;v!==!1&&(this._o.bound&&removeEvent(document,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",addClass(this.el,"is-hidden"),this._v=!1,void 0!==v&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),removeEvent(this.el,"mousedown",this._onMouseDown,!0),removeEvent(this.el,"touchend",this._onMouseDown,!0),removeEvent(this.el,"change",this._onChange),this._o.field&&(removeEvent(this._o.field,"change",this._onInputChange),this._o.bound&&(removeEvent(this._o.trigger,"click",this._onInputClick),removeEvent(this._o.trigger,"focus",this._onInputFocus),removeEvent(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},Pikaday})},{moment:"moment"}],zeroclipboard:[function(_dereq_,module,exports){!function(window,undefined){var _zcSwfVersion,_currentElement,_copyTarget,_window=window,_document=_window.document,_navigator=_window.navigator,_setTimeout=_window.setTimeout,_clearTimeout=_window.clearTimeout,_setInterval=_window.setInterval,_clearInterval=_window.clearInterval,_getComputedStyle=_window.getComputedStyle,_encodeURIComponent=_window.encodeURIComponent,_ActiveXObject=_window.ActiveXObject,_Error=_window.Error,_parseInt=_window.Number.parseInt||_window.parseInt,_parseFloat=_window.Number.parseFloat||_window.parseFloat,_isNaN=_window.Number.isNaN||_window.isNaN,_now=_window.Date.now,_keys=_window.Object.keys,_defineProperty=_window.Object.defineProperty,_hasOwn=_window.Object.prototype.hasOwnProperty,_slice=_window.Array.prototype.slice,_unwrap=function(){var unwrapper=function(el){return el};if("function"==typeof _window.wrap&&"function"==typeof _window.unwrap)try{var div=_document.createElement("div"),unwrappedDiv=_window.unwrap(div);1===div.nodeType&&unwrappedDiv&&1===unwrappedDiv.nodeType&&(unwrapper=_window.unwrap)}catch(e){}return unwrapper}(),_args=function(argumentsObj){return _slice.call(argumentsObj,0)},_extend=function(){var i,len,arg,prop,src,copy,args=_args(arguments),target=args[0]||{};for(i=1,len=args.length;i<len;i++)if(null!=(arg=args[i]))for(prop in arg)_hasOwn.call(arg,prop)&&(src=target[prop],copy=arg[prop],target!==copy&&copy!==undefined&&(target[prop]=copy));return target},_deepCopy=function _deepCopy(source){var copy,i,len,prop;if("object"!==("undefined"==typeof source?"undefined":_typeof(source))||null==source||"number"==typeof source.nodeType)copy=source;else if("number"==typeof source.length)for(copy=[],i=0,len=source.length;i<len;i++)_hasOwn.call(source,i)&&(copy[i]=_deepCopy(source[i]));else{copy={};for(prop in source)_hasOwn.call(source,prop)&&(copy[prop]=_deepCopy(source[prop]))}return copy},_pick=function(obj,keys){for(var newObj={},i=0,len=keys.length;i<len;i++)keys[i]in obj&&(newObj[keys[i]]=obj[keys[i]]);return newObj},_omit=function(obj,keys){var newObj={};for(var prop in obj)keys.indexOf(prop)===-1&&(newObj[prop]=obj[prop]);return newObj},_deleteOwnProperties=function(obj){if(obj)for(var prop in obj)_hasOwn.call(obj,prop)&&delete obj[prop];return obj},_containedBy=function(el,ancestorEl){if(el&&1===el.nodeType&&el.ownerDocument&&ancestorEl&&(1===ancestorEl.nodeType&&ancestorEl.ownerDocument&&ancestorEl.ownerDocument===el.ownerDocument||9===ancestorEl.nodeType&&!ancestorEl.ownerDocument&&ancestorEl===el.ownerDocument))do{if(el===ancestorEl)return!0;el=el.parentNode}while(el);return!1},_getDirPathOfUrl=function(url){var dir;return"string"==typeof url&&url&&(dir=url.split("#")[0].split("?")[0],dir=url.slice(0,url.lastIndexOf("/")+1)),dir},_getCurrentScriptUrlFromErrorStack=function(stack){var url,matches;return"string"==typeof stack&&stack&&(matches=stack.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),matches&&matches[1]?url=matches[1]:(matches=stack.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),matches&&matches[1]&&(url=matches[1]))),url},_getCurrentScriptUrlFromError=function(){var url,err;try{throw new _Error}catch(e){err=e}return err&&(url=err.sourceURL||err.fileName||_getCurrentScriptUrlFromErrorStack(err.stack)),url},_getCurrentScriptUrl=function(){var jsPath,scripts,i;if(_document.currentScript&&(jsPath=_document.currentScript.src))return jsPath;if(scripts=_document.getElementsByTagName("script"),1===scripts.length)return scripts[0].src||undefined;if("readyState"in scripts[0])for(i=scripts.length;i--;)if("interactive"===scripts[i].readyState&&(jsPath=scripts[i].src))return jsPath;return"loading"===_document.readyState&&(jsPath=scripts[scripts.length-1].src)?jsPath:(jsPath=_getCurrentScriptUrlFromError())?jsPath:undefined},_getUnanimousScriptParentDir=function(){var i,jsDir,jsPath,scripts=_document.getElementsByTagName("script");for(i=scripts.length;i--;){if(!(jsPath=scripts[i].src)){jsDir=null;break}if(jsPath=_getDirPathOfUrl(jsPath),null==jsDir)jsDir=jsPath;else if(jsDir!==jsPath){jsDir=null;break}}return jsDir||undefined},_getDefaultSwfPath=function(){var jsDir=_getDirPathOfUrl(_getCurrentScriptUrl())||_getUnanimousScriptParentDir()||"";return jsDir+"ZeroClipboard.swf"},_pageIsFramed=function(){return null==window.opener&&(!!window.top&&window!=window.top||!!window.parent&&window!=window.parent)}(),_flashState={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},_minimumFlashVersion="11.0.0",_handlers={},_clipData={},_clipDataFormatMap=null,_flashCheckTimeout=0,_swfFallbackCheckInterval=0,_eventMessages={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},_errorsThatOnlyOccurAfterFlashLoads=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],_flashStateErrorNames=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],_flashStateErrorNameMatchingRegex=new RegExp("^flash-("+_flashStateErrorNames.map(function(errorName){return errorName.replace(/^flash-/,"")}).join("|")+")$"),_flashStateEnabledErrorNameMatchingRegex=new RegExp("^flash-("+_flashStateErrorNames.slice(1).map(function(errorName){return errorName.replace(/^flash-/,"")}).join("|")+")$"),_globalConfig={swfPath:_getDefaultSwfPath(),trustedDomains:window.location.host?[window.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},_config=function(options){if("object"===("undefined"==typeof options?"undefined":_typeof(options))&&null!==options)for(var prop in options)if(_hasOwn.call(options,prop))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(prop))_globalConfig[prop]=options[prop];else if(null==_flashState.bridge)if("containerId"===prop||"swfObjectId"===prop){if(!_isValidHtml4Id(options[prop]))throw new Error("The specified `"+prop+"` value is not valid as an HTML4 Element ID");_globalConfig[prop]=options[prop]}else _globalConfig[prop]=options[prop];{if("string"!=typeof options||!options)return _deepCopy(_globalConfig);if(_hasOwn.call(_globalConfig,options))return _globalConfig[options]}},_state=function(){return _detectSandbox(),{browser:_pick(_navigator,["userAgent","platform","appName"]),flash:_omit(_flashState,["bridge"]),zeroclipboard:{version:ZeroClipboard.version,config:ZeroClipboard.config()}}},_isFlashUnusable=function(){return!!(_flashState.disabled||_flashState.outdated||_flashState.sandboxed||_flashState.unavailable||_flashState.degraded||_flashState.deactivated)},_on=function(eventType,listener){var i,len,events,added={};if("string"==typeof eventType&&eventType)events=eventType.toLowerCase().split(/\s+/);else if("object"===("undefined"==typeof eventType?"undefined":_typeof(eventType))&&eventType&&"undefined"==typeof listener)for(i in eventType)_hasOwn.call(eventType,i)&&"string"==typeof i&&i&&"function"==typeof eventType[i]&&ZeroClipboard.on(i,eventType[i]);if(events&&events.length){for(i=0,len=events.length;i<len;i++)eventType=events[i].replace(/^on/,""),added[eventType]=!0,_handlers[eventType]||(_handlers[eventType]=[]),_handlers[eventType].push(listener);if(added.ready&&_flashState.ready&&ZeroClipboard.emit({type:"ready"}),added.error){for(i=0,len=_flashStateErrorNames.length;i<len;i++)if(_flashState[_flashStateErrorNames[i].replace(/^flash-/,"")]===!0){ZeroClipboard.emit({type:"error",name:_flashStateErrorNames[i]});break}_zcSwfVersion!==undefined&&ZeroClipboard.version!==_zcSwfVersion&&ZeroClipboard.emit({type:"error",name:"version-mismatch",jsVersion:ZeroClipboard.version,swfVersion:_zcSwfVersion})}}return ZeroClipboard},_off=function(eventType,listener){var i,len,foundIndex,events,perEventHandlers;if(0===arguments.length)events=_keys(_handlers);else if("string"==typeof eventType&&eventType)events=eventType.split(/\s+/);else if("object"===("undefined"==typeof eventType?"undefined":_typeof(eventType))&&eventType&&"undefined"==typeof listener)for(i in eventType)_hasOwn.call(eventType,i)&&"string"==typeof i&&i&&"function"==typeof eventType[i]&&ZeroClipboard.off(i,eventType[i]);if(events&&events.length)for(i=0,len=events.length;i<len;i++)if(eventType=events[i].toLowerCase().replace(/^on/,""),perEventHandlers=_handlers[eventType],perEventHandlers&&perEventHandlers.length)if(listener)for(foundIndex=perEventHandlers.indexOf(listener);foundIndex!==-1;)perEventHandlers.splice(foundIndex,1),foundIndex=perEventHandlers.indexOf(listener,foundIndex);else perEventHandlers.length=0;return ZeroClipboard},_listeners=function(eventType){var copy;return copy="string"==typeof eventType&&eventType?_deepCopy(_handlers[eventType])||null:_deepCopy(_handlers)},_emit=function(event){var eventCopy,returnVal,tmp;if(event=_createEvent(event),event&&!_preprocessEvent(event))return"ready"===event.type&&_flashState.overdue===!0?ZeroClipboard.emit({type:"error",name:"flash-overdue"}):(eventCopy=_extend({},event),_dispatchCallbacks.call(this,eventCopy),"copy"===event.type&&(tmp=_mapClipDataToFlash(_clipData),returnVal=tmp.data,_clipDataFormatMap=tmp.formatMap),returnVal)},_create=function(){var previousState=_flashState.sandboxed;if(_detectSandbox(),"boolean"!=typeof _flashState.ready&&(_flashState.ready=!1),_flashState.sandboxed!==previousState&&_flashState.sandboxed===!0)_flashState.ready=!1,ZeroClipboard.emit({type:"error",name:"flash-sandboxed"});else if(!ZeroClipboard.isFlashUnusable()&&null===_flashState.bridge){var maxWait=_globalConfig.flashLoadTimeout;"number"==typeof maxWait&&maxWait>=0&&(_flashCheckTimeout=_setTimeout(function(){"boolean"!=typeof _flashState.deactivated&&(_flashState.deactivated=!0),_flashState.deactivated===!0&&ZeroClipboard.emit({type:"error",name:"flash-deactivated"})},maxWait)),_flashState.overdue=!1,_embedSwf()}},_destroy=function(){ZeroClipboard.clearData(),ZeroClipboard.blur(),ZeroClipboard.emit("destroy"),_unembedSwf(),ZeroClipboard.off()},_setData=function(format,data){var dataObj;if("object"===("undefined"==typeof format?"undefined":_typeof(format))&&format&&"undefined"==typeof data)dataObj=format,ZeroClipboard.clearData();else{if("string"!=typeof format||!format)return;dataObj={},dataObj[format]=data}for(var dataFormat in dataObj)"string"==typeof dataFormat&&dataFormat&&_hasOwn.call(dataObj,dataFormat)&&"string"==typeof dataObj[dataFormat]&&dataObj[dataFormat]&&(_clipData[dataFormat]=dataObj[dataFormat])},_clearData=function(format){"undefined"==typeof format?(_deleteOwnProperties(_clipData),_clipDataFormatMap=null):"string"==typeof format&&_hasOwn.call(_clipData,format)&&delete _clipData[format]},_getData=function(format){return"undefined"==typeof format?_deepCopy(_clipData):"string"==typeof format&&_hasOwn.call(_clipData,format)?_clipData[format]:void 0},_focus=function(element){if(element&&1===element.nodeType){_currentElement&&(_removeClass(_currentElement,_globalConfig.activeClass),_currentElement!==element&&_removeClass(_currentElement,_globalConfig.hoverClass)),_currentElement=element,_addClass(element,_globalConfig.hoverClass);var newTitle=element.getAttribute("title")||_globalConfig.title;if("string"==typeof newTitle&&newTitle){var htmlBridge=_getHtmlBridge(_flashState.bridge);htmlBridge&&htmlBridge.setAttribute("title",newTitle)}var useHandCursor=_globalConfig.forceHandCursor===!0||"pointer"===_getStyle(element,"cursor");_setHandCursor(useHandCursor),_reposition()}},_blur=function(){var htmlBridge=_getHtmlBridge(_flashState.bridge);htmlBridge&&(htmlBridge.removeAttribute("title"),htmlBridge.style.left="0px",htmlBridge.style.top="-9999px",htmlBridge.style.width="1px",htmlBridge.style.height="1px"),_currentElement&&(_removeClass(_currentElement,_globalConfig.hoverClass),_removeClass(_currentElement,_globalConfig.activeClass),_currentElement=null)},_activeElement=function(){return _currentElement||null},_isValidHtml4Id=function(id){return"string"==typeof id&&id&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(id)},_createEvent=function(event){var eventType;if("string"==typeof event&&event?(eventType=event,event={}):"object"===("undefined"==typeof event?"undefined":_typeof(event))&&event&&"string"==typeof event.type&&event.type&&(eventType=event.type),eventType){eventType=eventType.toLowerCase(),!event.target&&(/^(copy|aftercopy|_click)$/.test(eventType)||"error"===eventType&&"clipboard-error"===event.name)&&(event.target=_copyTarget),_extend(event,{type:eventType,target:event.target||_currentElement||null,relatedTarget:event.relatedTarget||null,currentTarget:_flashState&&_flashState.bridge||null,timeStamp:event.timeStamp||_now()||null});var msg=_eventMessages[event.type];return"error"===event.type&&event.name&&msg&&(msg=msg[event.name]),msg&&(event.message=msg),"ready"===event.type&&_extend(event,{target:null,version:_flashState.version}),"error"===event.type&&(_flashStateErrorNameMatchingRegex.test(event.name)&&_extend(event,{target:null,minimumVersion:_minimumFlashVersion}),_flashStateEnabledErrorNameMatchingRegex.test(event.name)&&_extend(event,{version:_flashState.version})),"copy"===event.type&&(event.clipboardData={setData:ZeroClipboard.setData,clearData:ZeroClipboard.clearData}),"aftercopy"===event.type&&(event=_mapClipResultsFromFlash(event,_clipDataFormatMap)),event.target&&!event.relatedTarget&&(event.relatedTarget=_getRelatedTarget(event.target)),_addMouseData(event)}},_getRelatedTarget=function(targetEl){var relatedTargetId=targetEl&&targetEl.getAttribute&&targetEl.getAttribute("data-clipboard-target");return relatedTargetId?_document.getElementById(relatedTargetId):null},_addMouseData=function(event){if(event&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(event.type)){var srcElement=event.target,fromElement="_mouseover"===event.type&&event.relatedTarget?event.relatedTarget:undefined,toElement="_mouseout"===event.type&&event.relatedTarget?event.relatedTarget:undefined,pos=_getElementPosition(srcElement),screenLeft=_window.screenLeft||_window.screenX||0,screenTop=_window.screenTop||_window.screenY||0,scrollLeft=_document.body.scrollLeft+_document.documentElement.scrollLeft,scrollTop=_document.body.scrollTop+_document.documentElement.scrollTop,pageX=pos.left+("number"==typeof event._stageX?event._stageX:0),pageY=pos.top+("number"==typeof event._stageY?event._stageY:0),clientX=pageX-scrollLeft,clientY=pageY-scrollTop,screenX=screenLeft+clientX,screenY=screenTop+clientY,moveX="number"==typeof event.movementX?event.movementX:0,moveY="number"==typeof event.movementY?event.movementY:0;delete event._stageX,delete event._stageY,_extend(event,{srcElement:srcElement,fromElement:fromElement,toElement:toElement,screenX:screenX,screenY:screenY,pageX:pageX,pageY:pageY,clientX:clientX,clientY:clientY,x:clientX,y:clientY,movementX:moveX,movementY:moveY,offsetX:0,offsetY:0,layerX:0,layerY:0})}return event},_shouldPerformAsync=function(event){var eventType=event&&"string"==typeof event.type&&event.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(eventType)},_dispatchCallback=function(func,context,args,async){async?_setTimeout(function(){func.apply(context,args)},0):func.apply(context,args)},_dispatchCallbacks=function(event){if("object"===("undefined"==typeof event?"undefined":_typeof(event))&&event&&event.type){var async=_shouldPerformAsync(event),wildcardTypeHandlers=_handlers["*"]||[],specificTypeHandlers=_handlers[event.type]||[],handlers=wildcardTypeHandlers.concat(specificTypeHandlers);if(handlers&&handlers.length){var i,len,func,context,eventCopy,originalContext=this;for(i=0,len=handlers.length;i<len;i++)func=handlers[i],context=originalContext,"string"==typeof func&&"function"==typeof _window[func]&&(func=_window[func]),"object"===("undefined"==typeof func?"undefined":_typeof(func))&&func&&"function"==typeof func.handleEvent&&(context=func,func=func.handleEvent),"function"==typeof func&&(eventCopy=_extend({},event),_dispatchCallback(func,context,[eventCopy],async))}return this}},_getSandboxStatusFromErrorEvent=function(event){var isSandboxed=null;return(_pageIsFramed===!1||event&&"error"===event.type&&event.name&&_errorsThatOnlyOccurAfterFlashLoads.indexOf(event.name)!==-1)&&(isSandboxed=!1),isSandboxed},_preprocessEvent=function(event){var element=event.target||_currentElement||null,sourceIsSwf="swf"===event._source;switch(delete event._source,event.type){case"error":var isSandboxed="flash-sandboxed"===event.name||_getSandboxStatusFromErrorEvent(event);"boolean"==typeof isSandboxed&&(_flashState.sandboxed=isSandboxed),_flashStateErrorNames.indexOf(event.name)!==-1?_extend(_flashState,{disabled:"flash-disabled"===event.name,outdated:"flash-outdated"===event.name,unavailable:"flash-unavailable"===event.name,degraded:"flash-degraded"===event.name,deactivated:"flash-deactivated"===event.name,overdue:"flash-overdue"===event.name,ready:!1}):"version-mismatch"===event.name&&(_zcSwfVersion=event.swfVersion,_extend(_flashState,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),_clearTimeoutsAndPolling();break;case"ready":_zcSwfVersion=event.swfVersion;var wasDeactivated=_flashState.deactivated===!0;_extend(_flashState,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:wasDeactivated,ready:!wasDeactivated}),_clearTimeoutsAndPolling();break;case"beforecopy":_copyTarget=element;break;case"copy":var textContent,htmlContent,targetEl=event.relatedTarget;!_clipData["text/html"]&&!_clipData["text/plain"]&&targetEl&&(htmlContent=targetEl.value||targetEl.outerHTML||targetEl.innerHTML)&&(textContent=targetEl.value||targetEl.textContent||targetEl.innerText)?(event.clipboardData.clearData(),event.clipboardData.setData("text/plain",textContent),htmlContent!==textContent&&event.clipboardData.setData("text/html",htmlContent)):!_clipData["text/plain"]&&event.target&&(textContent=event.target.getAttribute("data-clipboard-text"))&&(event.clipboardData.clearData(),event.clipboardData.setData("text/plain",textContent));break;case"aftercopy":_queueEmitClipboardErrors(event),ZeroClipboard.clearData(),element&&element!==_safeActiveElement()&&element.focus&&element.focus();break;case"_mouseover":ZeroClipboard.focus(element),_globalConfig.bubbleEvents===!0&&sourceIsSwf&&(element&&element!==event.relatedTarget&&!_containedBy(event.relatedTarget,element)&&_fireMouseEvent(_extend({},event,{type:"mouseenter",bubbles:!1,cancelable:!1})),_fireMouseEvent(_extend({},event,{type:"mouseover"})));break;case"_mouseout":ZeroClipboard.blur(),_globalConfig.bubbleEvents===!0&&sourceIsSwf&&(element&&element!==event.relatedTarget&&!_containedBy(event.relatedTarget,element)&&_fireMouseEvent(_extend({},event,{type:"mouseleave",bubbles:!1,cancelable:!1})),_fireMouseEvent(_extend({},event,{type:"mouseout"})));break;case"_mousedown":_addClass(element,_globalConfig.activeClass),_globalConfig.bubbleEvents===!0&&sourceIsSwf&&_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}));break;case"_mouseup":_removeClass(element,_globalConfig.activeClass),_globalConfig.bubbleEvents===!0&&sourceIsSwf&&_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}));break;case"_click":_copyTarget=null,_globalConfig.bubbleEvents===!0&&sourceIsSwf&&_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}));break;case"_mousemove":_globalConfig.bubbleEvents===!0&&sourceIsSwf&&_fireMouseEvent(_extend({},event,{type:event.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(event.type))return!0},_queueEmitClipboardErrors=function(aftercopyEvent){if(aftercopyEvent.errors&&aftercopyEvent.errors.length>0){var errorEvent=_deepCopy(aftercopyEvent);_extend(errorEvent,{type:"error",name:"clipboard-error"}),delete errorEvent.success,_setTimeout(function(){ZeroClipboard.emit(errorEvent)},0)}},_fireMouseEvent=function(event){if(event&&"string"==typeof event.type&&event){var e,target=event.target||null,doc=target&&target.ownerDocument||_document,defaults={view:doc.defaultView||_window,canBubble:!0,cancelable:!0,detail:"click"===event.type?1:0,button:"number"==typeof event.which?event.which-1:"number"==typeof event.button?event.button:doc.createEvent?0:1},args=_extend(defaults,event);target&&doc.createEvent&&target.dispatchEvent&&(args=[args.type,args.canBubble,args.cancelable,args.view,args.detail,args.screenX,args.screenY,args.clientX,args.clientY,args.ctrlKey,args.altKey,args.shiftKey,args.metaKey,args.button,args.relatedTarget],e=doc.createEvent("MouseEvents"),e.initMouseEvent&&(e.initMouseEvent.apply(e,args),e._source="js",target.dispatchEvent(e)))}},_watchForSwfFallbackContent=function(){var maxWait=_globalConfig.flashLoadTimeout;if("number"==typeof maxWait&&maxWait>=0){var pollWait=Math.min(1e3,maxWait/10),fallbackContentId=_globalConfig.swfObjectId+"_fallbackContent";_swfFallbackCheckInterval=_setInterval(function(){var el=_document.getElementById(fallbackContentId);_isElementVisible(el)&&(_clearTimeoutsAndPolling(),_flashState.deactivated=null,ZeroClipboard.emit({type:"error",name:"swf-not-found"}))},pollWait)}},_createHtmlBridge=function(){var container=_document.createElement("div");return container.id=_globalConfig.containerId,container.className=_globalConfig.containerClass,container.style.position="absolute",container.style.left="0px",container.style.top="-9999px",container.style.width="1px",container.style.height="1px",container.style.zIndex=""+_getSafeZIndex(_globalConfig.zIndex),container},_getHtmlBridge=function(flashBridge){for(var htmlBridge=flashBridge&&flashBridge.parentNode;htmlBridge&&"OBJECT"===htmlBridge.nodeName&&htmlBridge.parentNode;)htmlBridge=htmlBridge.parentNode;return htmlBridge||null},_embedSwf=function(){var len,flashBridge=_flashState.bridge,container=_getHtmlBridge(flashBridge);if(!flashBridge){var allowScriptAccess=_determineScriptAccess(_window.location.host,_globalConfig),allowNetworking="never"===allowScriptAccess?"none":"all",flashvars=_vars(_extend({jsVersion:ZeroClipboard.version},_globalConfig)),swfUrl=_globalConfig.swfPath+_cacheBust(_globalConfig.swfPath,_globalConfig);container=_createHtmlBridge();var divToBeReplaced=_document.createElement("div");container.appendChild(divToBeReplaced),_document.body.appendChild(container);var tmpDiv=_document.createElement("div"),usingActiveX="activex"===_flashState.pluginType;tmpDiv.innerHTML='<object id="'+_globalConfig.swfObjectId+'" name="'+_globalConfig.swfObjectId+'" width="100%" height="100%" '+(usingActiveX?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+swfUrl+'"')+">"+(usingActiveX?'<param name="movie" value="'+swfUrl+'"/>':"")+'<param name="allowScriptAccess" value="'+allowScriptAccess+'"/><param name="allowNetworking" value="'+allowNetworking+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+flashvars+'"/><div id="'+_globalConfig.swfObjectId+'_fallbackContent">&nbsp;</div></object>',flashBridge=tmpDiv.firstChild,tmpDiv=null,_unwrap(flashBridge).ZeroClipboard=ZeroClipboard,container.replaceChild(flashBridge,divToBeReplaced),_watchForSwfFallbackContent()}return flashBridge||(flashBridge=_document[_globalConfig.swfObjectId],flashBridge&&(len=flashBridge.length)&&(flashBridge=flashBridge[len-1]),!flashBridge&&container&&(flashBridge=container.firstChild)),_flashState.bridge=flashBridge||null,flashBridge},_unembedSwf=function(){var flashBridge=_flashState.bridge;if(flashBridge){var htmlBridge=_getHtmlBridge(flashBridge);htmlBridge&&("activex"===_flashState.pluginType&&"readyState"in flashBridge?(flashBridge.style.display="none",function removeSwfFromIE(){if(4===flashBridge.readyState){for(var prop in flashBridge)"function"==typeof flashBridge[prop]&&(flashBridge[prop]=null);flashBridge.parentNode&&flashBridge.parentNode.removeChild(flashBridge),htmlBridge.parentNode&&htmlBridge.parentNode.removeChild(htmlBridge)}else _setTimeout(removeSwfFromIE,10)}()):(flashBridge.parentNode&&flashBridge.parentNode.removeChild(flashBridge),htmlBridge.parentNode&&htmlBridge.parentNode.removeChild(htmlBridge))),_clearTimeoutsAndPolling(),_flashState.ready=null,_flashState.bridge=null,_flashState.deactivated=null,_zcSwfVersion=undefined}},_mapClipDataToFlash=function(clipData){var newClipData={},formatMap={};if("object"===("undefined"==typeof clipData?"undefined":_typeof(clipData))&&clipData){for(var dataFormat in clipData)if(dataFormat&&_hasOwn.call(clipData,dataFormat)&&"string"==typeof clipData[dataFormat]&&clipData[dataFormat])switch(dataFormat.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":newClipData.text=clipData[dataFormat],formatMap.text=dataFormat;break;case"text/html":case"html":case"air:html":case"flash:html":newClipData.html=clipData[dataFormat],formatMap.html=dataFormat;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":newClipData.rtf=clipData[dataFormat],formatMap.rtf=dataFormat}return{data:newClipData,formatMap:formatMap}}},_mapClipResultsFromFlash=function(clipResults,formatMap){if("object"!==("undefined"==typeof clipResults?"undefined":_typeof(clipResults))||!clipResults||"object"!==("undefined"==typeof formatMap?"undefined":_typeof(formatMap))||!formatMap)return clipResults;var newResults={};for(var prop in clipResults)if(_hasOwn.call(clipResults,prop))if("errors"===prop){newResults[prop]=clipResults[prop]?clipResults[prop].slice():[];for(var i=0,len=newResults[prop].length;i<len;i++)newResults[prop][i].format=formatMap[newResults[prop][i].format]}else if("success"!==prop&&"data"!==prop)newResults[prop]=clipResults[prop];else{newResults[prop]={};var tmpHash=clipResults[prop];for(var dataFormat in tmpHash)dataFormat&&_hasOwn.call(tmpHash,dataFormat)&&_hasOwn.call(formatMap,dataFormat)&&(newResults[prop][formatMap[dataFormat]]=tmpHash[dataFormat])}return newResults},_cacheBust=function(path,options){var cacheBust=null==options||options&&options.cacheBust===!0;return cacheBust?(path.indexOf("?")===-1?"?":"&")+"noCache="+_now():""},_vars=function(options){var i,len,domain,domains,str="",trustedOriginsExpanded=[];if(options.trustedDomains&&("string"==typeof options.trustedDomains?domains=[options.trustedDomains]:"object"===_typeof(options.trustedDomains)&&"length"in options.trustedDomains&&(domains=options.trustedDomains)),domains&&domains.length)for(i=0,len=domains.length;i<len;i++)if(_hasOwn.call(domains,i)&&domains[i]&&"string"==typeof domains[i]){if(domain=_extractDomain(domains[i]),!domain)continue;if("*"===domain){trustedOriginsExpanded.length=0,trustedOriginsExpanded.push(domain);break}trustedOriginsExpanded.push.apply(trustedOriginsExpanded,[domain,"//"+domain,_window.location.protocol+"//"+domain])}return trustedOriginsExpanded.length&&(str+="trustedOrigins="+_encodeURIComponent(trustedOriginsExpanded.join(","))),options.forceEnhancedClipboard===!0&&(str+=(str?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof options.swfObjectId&&options.swfObjectId&&(str+=(str?"&":"")+"swfObjectId="+_encodeURIComponent(options.swfObjectId)),"string"==typeof options.jsVersion&&options.jsVersion&&(str+=(str?"&":"")+"jsVersion="+_encodeURIComponent(options.jsVersion)),
str},_extractDomain=function(originOrUrl){if(null==originOrUrl||""===originOrUrl)return null;if(originOrUrl=originOrUrl.replace(/^\s+|\s+$/g,""),""===originOrUrl)return null;var protocolIndex=originOrUrl.indexOf("//");originOrUrl=protocolIndex===-1?originOrUrl:originOrUrl.slice(protocolIndex+2);var pathIndex=originOrUrl.indexOf("/");return originOrUrl=pathIndex===-1?originOrUrl:protocolIndex===-1||0===pathIndex?null:originOrUrl.slice(0,pathIndex),originOrUrl&&".swf"===originOrUrl.slice(-4).toLowerCase()?null:originOrUrl||null},_determineScriptAccess=function(){var _extractAllDomains=function(origins){var i,len,tmp,resultsArray=[];if("string"==typeof origins&&(origins=[origins]),"object"!==("undefined"==typeof origins?"undefined":_typeof(origins))||!origins||"number"!=typeof origins.length)return resultsArray;for(i=0,len=origins.length;i<len;i++)if(_hasOwn.call(origins,i)&&(tmp=_extractDomain(origins[i]))){if("*"===tmp){resultsArray.length=0,resultsArray.push("*");break}resultsArray.indexOf(tmp)===-1&&resultsArray.push(tmp)}return resultsArray};return function(currentDomain,configOptions){var swfDomain=_extractDomain(configOptions.swfPath);null===swfDomain&&(swfDomain=currentDomain);var trustedDomains=_extractAllDomains(configOptions.trustedDomains),len=trustedDomains.length;if(len>0){if(1===len&&"*"===trustedDomains[0])return"always";if(trustedDomains.indexOf(currentDomain)!==-1)return 1===len&&currentDomain===swfDomain?"sameDomain":"always"}return"never"}}(),_safeActiveElement=function(){try{return _document.activeElement}catch(err){return null}},_addClass=function(element,value){var c,cl,className,classNames=[];if("string"==typeof value&&value&&(classNames=value.split(/\s+/)),element&&1===element.nodeType&&classNames.length>0)if(element.classList)for(c=0,cl=classNames.length;c<cl;c++)element.classList.add(classNames[c]);else if(element.hasOwnProperty("className")){for(className=" "+element.className+" ",c=0,cl=classNames.length;c<cl;c++)className.indexOf(" "+classNames[c]+" ")===-1&&(className+=classNames[c]+" ");element.className=className.replace(/^\s+|\s+$/g,"")}return element},_removeClass=function(element,value){var c,cl,className,classNames=[];if("string"==typeof value&&value&&(classNames=value.split(/\s+/)),element&&1===element.nodeType&&classNames.length>0)if(element.classList&&element.classList.length>0)for(c=0,cl=classNames.length;c<cl;c++)element.classList.remove(classNames[c]);else if(element.className){for(className=(" "+element.className+" ").replace(/[\r\n\t]/g," "),c=0,cl=classNames.length;c<cl;c++)className=className.replace(" "+classNames[c]+" "," ");element.className=className.replace(/^\s+|\s+$/g,"")}return element},_getStyle=function(el,prop){var value=_getComputedStyle(el,null).getPropertyValue(prop);return"cursor"!==prop||value&&"auto"!==value||"A"!==el.nodeName?value:"pointer"},_getElementPosition=function(el){var pos={left:0,top:0,width:0,height:0};if(el.getBoundingClientRect){var elRect=el.getBoundingClientRect(),pageXOffset=_window.pageXOffset,pageYOffset=_window.pageYOffset,leftBorderWidth=_document.documentElement.clientLeft||0,topBorderWidth=_document.documentElement.clientTop||0,leftBodyOffset=0,topBodyOffset=0;if("relative"===_getStyle(_document.body,"position")){var bodyRect=_document.body.getBoundingClientRect(),htmlRect=_document.documentElement.getBoundingClientRect();leftBodyOffset=bodyRect.left-htmlRect.left||0,topBodyOffset=bodyRect.top-htmlRect.top||0}pos.left=elRect.left+pageXOffset-leftBorderWidth-leftBodyOffset,pos.top=elRect.top+pageYOffset-topBorderWidth-topBodyOffset,pos.width="width"in elRect?elRect.width:elRect.right-elRect.left,pos.height="height"in elRect?elRect.height:elRect.bottom-elRect.top}return pos},_isElementVisible=function(el){if(!el)return!1;var styles=_getComputedStyle(el,null),hasCssHeight=_parseFloat(styles.height)>0,hasCssWidth=_parseFloat(styles.width)>0,hasCssTop=_parseFloat(styles.top)>=0,hasCssLeft=_parseFloat(styles.left)>=0,cssKnows=hasCssHeight&&hasCssWidth&&hasCssTop&&hasCssLeft,rect=cssKnows?null:_getElementPosition(el),isVisible="none"!==styles.display&&"collapse"!==styles.visibility&&(cssKnows||!!rect&&(hasCssHeight||rect.height>0)&&(hasCssWidth||rect.width>0)&&(hasCssTop||rect.top>=0)&&(hasCssLeft||rect.left>=0));return isVisible},_clearTimeoutsAndPolling=function(){_clearTimeout(_flashCheckTimeout),_flashCheckTimeout=0,_clearInterval(_swfFallbackCheckInterval),_swfFallbackCheckInterval=0},_reposition=function(){var htmlBridge;if(_currentElement&&(htmlBridge=_getHtmlBridge(_flashState.bridge))){var pos=_getElementPosition(_currentElement);_extend(htmlBridge.style,{width:pos.width+"px",height:pos.height+"px",top:pos.top+"px",left:pos.left+"px",zIndex:""+_getSafeZIndex(_globalConfig.zIndex)})}},_setHandCursor=function(enabled){_flashState.ready===!0&&(_flashState.bridge&&"function"==typeof _flashState.bridge.setHandCursor?_flashState.bridge.setHandCursor(enabled):_flashState.ready=!1)},_getSafeZIndex=function _getSafeZIndex(val){if(/^(?:auto|inherit)$/.test(val))return val;var zIndex;return"number"!=typeof val||_isNaN(val)?"string"==typeof val&&(zIndex=_getSafeZIndex(_parseInt(val,10))):zIndex=val,"number"==typeof zIndex?zIndex:"auto"},_detectSandbox=function(doNotReassessFlashSupport){var effectiveScriptOrigin,frame,frameError,previousState=_flashState.sandboxed,isSandboxed=null;if(doNotReassessFlashSupport=doNotReassessFlashSupport===!0,_pageIsFramed===!1)isSandboxed=!1;else{try{frame=window.frameElement||null}catch(e){frameError={name:e.name,message:e.message}}if(frame&&1===frame.nodeType&&"IFRAME"===frame.nodeName)try{isSandboxed=frame.hasAttribute("sandbox")}catch(e){isSandboxed=null}else{try{effectiveScriptOrigin=document.domain||null}catch(e){effectiveScriptOrigin=null}(null===effectiveScriptOrigin||frameError&&"SecurityError"===frameError.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(frameError.message.toLowerCase()))&&(isSandboxed=!0)}}return _flashState.sandboxed=isSandboxed,previousState===isSandboxed||doNotReassessFlashSupport||_detectFlashSupport(_ActiveXObject),isSandboxed},_detectFlashSupport=function(ActiveXObject){function parseFlashVersion(desc){var matches=desc.match(/[\d]+/g);return matches.length=3,matches.join(".")}function isPepperFlash(flashPlayerFileName){return!!flashPlayerFileName&&(flashPlayerFileName=flashPlayerFileName.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(flashPlayerFileName)||"chrome.plugin"===flashPlayerFileName.slice(-13))}function inspectPlugin(plugin){plugin&&(hasFlash=!0,plugin.version&&(flashVersion=parseFlashVersion(plugin.version)),!flashVersion&&plugin.description&&(flashVersion=parseFlashVersion(plugin.description)),plugin.filename&&(isPPAPI=isPepperFlash(plugin.filename)))}var plugin,ax,mimeType,hasFlash=!1,isActiveX=!1,isPPAPI=!1,flashVersion="";if(_navigator.plugins&&_navigator.plugins.length)plugin=_navigator.plugins["Shockwave Flash"],inspectPlugin(plugin),_navigator.plugins["Shockwave Flash 2.0"]&&(hasFlash=!0,flashVersion="2.0.0.11");else if(_navigator.mimeTypes&&_navigator.mimeTypes.length)mimeType=_navigator.mimeTypes["application/x-shockwave-flash"],plugin=mimeType&&mimeType.enabledPlugin,inspectPlugin(plugin);else if("undefined"!=typeof ActiveXObject){isActiveX=!0;try{ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),hasFlash=!0,flashVersion=parseFlashVersion(ax.GetVariable("$version"))}catch(e1){try{ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),hasFlash=!0,flashVersion="6.0.21"}catch(e2){try{ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),hasFlash=!0,flashVersion=parseFlashVersion(ax.GetVariable("$version"))}catch(e3){isActiveX=!1}}}}_flashState.disabled=hasFlash!==!0,_flashState.outdated=flashVersion&&_parseFloat(flashVersion)<_parseFloat(_minimumFlashVersion),_flashState.version=flashVersion||"0.0.0",_flashState.pluginType=isPPAPI?"pepper":isActiveX?"activex":hasFlash?"netscape":"unknown"};_detectFlashSupport(_ActiveXObject),_detectSandbox(!0);var ZeroClipboard=function ZeroClipboard(){return this instanceof ZeroClipboard?void("function"==typeof ZeroClipboard._createClient&&ZeroClipboard._createClient.apply(this,_args(arguments))):new ZeroClipboard};_defineProperty(ZeroClipboard,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),ZeroClipboard.config=function(){return _config.apply(this,_args(arguments))},ZeroClipboard.state=function(){return _state.apply(this,_args(arguments))},ZeroClipboard.isFlashUnusable=function(){return _isFlashUnusable.apply(this,_args(arguments))},ZeroClipboard.on=function(){return _on.apply(this,_args(arguments))},ZeroClipboard.off=function(){return _off.apply(this,_args(arguments))},ZeroClipboard.handlers=function(){return _listeners.apply(this,_args(arguments))},ZeroClipboard.emit=function(){return _emit.apply(this,_args(arguments))},ZeroClipboard.create=function(){return _create.apply(this,_args(arguments))},ZeroClipboard.destroy=function(){return _destroy.apply(this,_args(arguments))},ZeroClipboard.setData=function(){return _setData.apply(this,_args(arguments))},ZeroClipboard.clearData=function(){return _clearData.apply(this,_args(arguments))},ZeroClipboard.getData=function(){return _getData.apply(this,_args(arguments))},ZeroClipboard.focus=ZeroClipboard.activate=function(){return _focus.apply(this,_args(arguments))},ZeroClipboard.blur=ZeroClipboard.deactivate=function(){return _blur.apply(this,_args(arguments))},ZeroClipboard.activeElement=function(){return _activeElement.apply(this,_args(arguments))};var _clientIdCounter=0,_clientMeta={},_elementIdCounter=0,_elementMeta={},_mouseHandlers={};_extend(_globalConfig,{autoActivate:!0});var _clientConstructor=function(elements){var client=this;client.id=""+_clientIdCounter++,_clientMeta[client.id]={instance:client,elements:[],handlers:{}},elements&&client.clip(elements),ZeroClipboard.on("*",function(event){return client.emit(event)}),ZeroClipboard.on("destroy",function(){client.destroy()}),ZeroClipboard.create()},_clientOn=function(eventType,listener){var i,len,events,added={},meta=_clientMeta[this.id],handlers=meta&&meta.handlers;if(!meta)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof eventType&&eventType)events=eventType.toLowerCase().split(/\s+/);else if("object"===("undefined"==typeof eventType?"undefined":_typeof(eventType))&&eventType&&"undefined"==typeof listener)for(i in eventType)_hasOwn.call(eventType,i)&&"string"==typeof i&&i&&"function"==typeof eventType[i]&&this.on(i,eventType[i]);if(events&&events.length){for(i=0,len=events.length;i<len;i++)eventType=events[i].replace(/^on/,""),added[eventType]=!0,handlers[eventType]||(handlers[eventType]=[]),handlers[eventType].push(listener);if(added.ready&&_flashState.ready&&this.emit({type:"ready",client:this}),added.error){for(i=0,len=_flashStateErrorNames.length;i<len;i++)if(_flashState[_flashStateErrorNames[i].replace(/^flash-/,"")]){this.emit({type:"error",name:_flashStateErrorNames[i],client:this});break}_zcSwfVersion!==undefined&&ZeroClipboard.version!==_zcSwfVersion&&this.emit({type:"error",name:"version-mismatch",jsVersion:ZeroClipboard.version,swfVersion:_zcSwfVersion})}}return this},_clientOff=function(eventType,listener){var i,len,foundIndex,events,perEventHandlers,meta=_clientMeta[this.id],handlers=meta&&meta.handlers;if(!handlers)return this;if(0===arguments.length)events=_keys(handlers);else if("string"==typeof eventType&&eventType)events=eventType.split(/\s+/);else if("object"===("undefined"==typeof eventType?"undefined":_typeof(eventType))&&eventType&&"undefined"==typeof listener)for(i in eventType)_hasOwn.call(eventType,i)&&"string"==typeof i&&i&&"function"==typeof eventType[i]&&this.off(i,eventType[i]);if(events&&events.length)for(i=0,len=events.length;i<len;i++)if(eventType=events[i].toLowerCase().replace(/^on/,""),perEventHandlers=handlers[eventType],perEventHandlers&&perEventHandlers.length)if(listener)for(foundIndex=perEventHandlers.indexOf(listener);foundIndex!==-1;)perEventHandlers.splice(foundIndex,1),foundIndex=perEventHandlers.indexOf(listener,foundIndex);else perEventHandlers.length=0;return this},_clientListeners=function(eventType){var copy=null,handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers;return handlers&&(copy="string"==typeof eventType&&eventType?handlers[eventType]?handlers[eventType].slice(0):[]:_deepCopy(handlers)),copy},_clientEmit=function(event){if(_clientShouldEmit.call(this,event)){"object"===("undefined"==typeof event?"undefined":_typeof(event))&&event&&"string"==typeof event.type&&event.type&&(event=_extend({},event));var eventCopy=_extend({},_createEvent(event),{client:this});_clientDispatchCallbacks.call(this,eventCopy)}return this},_clientClip=function(elements){if(!_clientMeta[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");elements=_prepClip(elements);for(var i=0;i<elements.length;i++)if(_hasOwn.call(elements,i)&&elements[i]&&1===elements[i].nodeType){elements[i].zcClippingId?_elementMeta[elements[i].zcClippingId].indexOf(this.id)===-1&&_elementMeta[elements[i].zcClippingId].push(this.id):(elements[i].zcClippingId="zcClippingId_"+_elementIdCounter++,_elementMeta[elements[i].zcClippingId]=[this.id],_globalConfig.autoActivate===!0&&_addMouseHandlers(elements[i]));var clippedElements=_clientMeta[this.id]&&_clientMeta[this.id].elements;clippedElements.indexOf(elements[i])===-1&&clippedElements.push(elements[i])}return this},_clientUnclip=function(elements){var meta=_clientMeta[this.id];if(!meta)return this;var arrayIndex,clippedElements=meta.elements;elements="undefined"==typeof elements?clippedElements.slice(0):_prepClip(elements);for(var i=elements.length;i--;)if(_hasOwn.call(elements,i)&&elements[i]&&1===elements[i].nodeType){for(arrayIndex=0;(arrayIndex=clippedElements.indexOf(elements[i],arrayIndex))!==-1;)clippedElements.splice(arrayIndex,1);var clientIds=_elementMeta[elements[i].zcClippingId];if(clientIds){for(arrayIndex=0;(arrayIndex=clientIds.indexOf(this.id,arrayIndex))!==-1;)clientIds.splice(arrayIndex,1);0===clientIds.length&&(_globalConfig.autoActivate===!0&&_removeMouseHandlers(elements[i]),delete elements[i].zcClippingId)}}return this},_clientElements=function(){var meta=_clientMeta[this.id];return meta&&meta.elements?meta.elements.slice(0):[]},_clientDestroy=function(){_clientMeta[this.id]&&(this.unclip(),this.off(),delete _clientMeta[this.id])},_clientShouldEmit=function(event){if(!event||!event.type)return!1;if(event.client&&event.client!==this)return!1;var meta=_clientMeta[this.id],clippedEls=meta&&meta.elements,hasClippedEls=!!clippedEls&&clippedEls.length>0,goodTarget=!event.target||hasClippedEls&&clippedEls.indexOf(event.target)!==-1,goodRelTarget=event.relatedTarget&&hasClippedEls&&clippedEls.indexOf(event.relatedTarget)!==-1,goodClient=event.client&&event.client===this;return!(!meta||!(goodTarget||goodRelTarget||goodClient))},_clientDispatchCallbacks=function(event){var meta=_clientMeta[this.id];if("object"===("undefined"==typeof event?"undefined":_typeof(event))&&event&&event.type&&meta){var async=_shouldPerformAsync(event),wildcardTypeHandlers=meta&&meta.handlers["*"]||[],specificTypeHandlers=meta&&meta.handlers[event.type]||[],handlers=wildcardTypeHandlers.concat(specificTypeHandlers);if(handlers&&handlers.length){var i,len,func,context,eventCopy,originalContext=this;for(i=0,len=handlers.length;i<len;i++)func=handlers[i],context=originalContext,"string"==typeof func&&"function"==typeof _window[func]&&(func=_window[func]),"object"===("undefined"==typeof func?"undefined":_typeof(func))&&func&&"function"==typeof func.handleEvent&&(context=func,func=func.handleEvent),"function"==typeof func&&(eventCopy=_extend({},event),_dispatchCallback(func,context,[eventCopy],async))}}},_prepClip=function(elements){return"string"==typeof elements&&(elements=[]),"number"!=typeof elements.length?[elements]:elements},_addMouseHandlers=function(element){if(element&&1===element.nodeType){var _suppressMouseEvents=function(event){(event||(event=_window.event))&&("js"!==event._source&&(event.stopImmediatePropagation(),event.preventDefault()),delete event._source)},_elementMouseOver=function(event){(event||(event=_window.event))&&(_suppressMouseEvents(event),ZeroClipboard.focus(element))};element.addEventListener("mouseover",_elementMouseOver,!1),element.addEventListener("mouseout",_suppressMouseEvents,!1),element.addEventListener("mouseenter",_suppressMouseEvents,!1),element.addEventListener("mouseleave",_suppressMouseEvents,!1),element.addEventListener("mousemove",_suppressMouseEvents,!1),_mouseHandlers[element.zcClippingId]={mouseover:_elementMouseOver,mouseout:_suppressMouseEvents,mouseenter:_suppressMouseEvents,mouseleave:_suppressMouseEvents,mousemove:_suppressMouseEvents}}},_removeMouseHandlers=function(element){if(element&&1===element.nodeType){var mouseHandlers=_mouseHandlers[element.zcClippingId];if("object"===("undefined"==typeof mouseHandlers?"undefined":_typeof(mouseHandlers))&&mouseHandlers){for(var key,val,mouseEvents=["move","leave","enter","out","over"],i=0,len=mouseEvents.length;i<len;i++)key="mouse"+mouseEvents[i],val=mouseHandlers[key],"function"==typeof val&&element.removeEventListener(key,val,!1);delete _mouseHandlers[element.zcClippingId]}}};ZeroClipboard._createClient=function(){_clientConstructor.apply(this,_args(arguments))},ZeroClipboard.prototype.on=function(){return _clientOn.apply(this,_args(arguments))},ZeroClipboard.prototype.off=function(){return _clientOff.apply(this,_args(arguments))},ZeroClipboard.prototype.handlers=function(){return _clientListeners.apply(this,_args(arguments))},ZeroClipboard.prototype.emit=function(){return _clientEmit.apply(this,_args(arguments))},ZeroClipboard.prototype.clip=function(){return _clientClip.apply(this,_args(arguments))},ZeroClipboard.prototype.unclip=function(){return _clientUnclip.apply(this,_args(arguments))},ZeroClipboard.prototype.elements=function(){return _clientElements.apply(this,_args(arguments))},ZeroClipboard.prototype.destroy=function(){return _clientDestroy.apply(this,_args(arguments))},ZeroClipboard.prototype.setText=function(text){if(!_clientMeta[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return ZeroClipboard.setData("text/plain",text),this},ZeroClipboard.prototype.setHtml=function(html){if(!_clientMeta[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return ZeroClipboard.setData("text/html",html),this},ZeroClipboard.prototype.setRichText=function(richText){if(!_clientMeta[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return ZeroClipboard.setData("application/rtf",richText),this},ZeroClipboard.prototype.setData=function(){if(!_clientMeta[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return ZeroClipboard.setData.apply(this,_args(arguments)),this},ZeroClipboard.prototype.clearData=function(){if(!_clientMeta[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return ZeroClipboard.clearData.apply(this,_args(arguments)),this},ZeroClipboard.prototype.getData=function(){if(!_clientMeta[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return ZeroClipboard.getData.apply(this,_args(arguments))},"function"==typeof define&&define.amd?define(function(){return ZeroClipboard}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module&&"object"===_typeof(module.exports)&&module.exports?module.exports=ZeroClipboard:window.ZeroClipboard=ZeroClipboard}(function(){return this||window}())},{}]},{},[24,63,65,64,66,109,110,111,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,98,99,100,101,102,104,105,106,107,108,112,113,114,115,130,131,132,133,118,119,120,121,122,123,32,36,33,34,41,35,37,38,39,40])(24)});